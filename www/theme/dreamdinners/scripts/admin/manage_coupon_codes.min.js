$(document).on("click","#recipe_id_button",(function(e){e.preventDefault(),$(this).is("[readonly]")||$(this).hasClass("disabled")||bootbox.prompt("Search recipe name or id",(function(e){if(!e)return;let t=e.trim(),i=$("#valid_menuspan_start").val(),s=$("#valid_menuspan_end").val();0!==t.length&&$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_helpers",op:"recipe_select",search:t,menu_start:i,menu_end:s},success:function(e){e.processor_success&&bootbox.dialog({message:e.html,scrollable:!0,centerVertical:!0,callback:function(e){}})},error:function(e,t){;"Unexpected error"}})}))})),$(document).on("click",".select-recipe-id",(function(e){let t=$(this).data("recipe_id"),i=$(this).data("pricing_type"),s=$(this).data("menu_item_name"),a=$(this).data("pricing_type_name_short");$("#recipe_id").val(t),$("#recipe_id_pricing_type").val(i),$("#recipe_id_button").text(s+" ("+a+")"),bootbox.hideAll()})),$(document).on("change","input[type=radio][name=limit_coupon]",(function(e){"limit_to_recipe_id"===$(this).val()?$("#recipe_id, #recipe_id_button").prop({disabled:!1}):$("#recipe_id, #recipe_id_button").prop({disabled:!0})})),$(document).on("click",".valid_timespan_start_now",(function(e){let t=new Date,i=t.getMonth()+1;i<10&&(i="0"+i);let s=t.getFullYear()+"-"+i+"-01";$("#valid_timespan_start").val(s)})),$(document).on("click",".valid_timespan_end_max",(function(e){$("#valid_timespan_end").val("2037-12-31")})),$(document).on("click",'[id^="valid_corporate_crate_client_id"]',(function(e){"ALL"==$(this).data("client_id")?$('[id^="valid_corporate_crate_client_id"]').each((function(){"ALL"!=$(this).data("client_id")&&$(this).prop("checked",!1)})):$("#valid_corporate_crate_client_id\\[ALL\\]").prop("checked",!1)})),$(document).on("change","#is_store_specific",(function(e){"1"==$(this).val()?($("#multi_store_select_button").prop("disabled",!1),$("#multi_store_select").prop("disabled",!1)):($("#multi_store_select_button").prop("disabled",!0),$("#multi_store_select").prop("disabled",!0))})),$(document).on("change","#is_store_coupon, #is_delivered_coupon, #is_product_coupon",(function(e){switch($(".section-store_coupon").hideFlex(),$(".section-delivered_coupon").hideFlex(),$(".section-product_coupon").hideFlex(),$(this).attr("id")){case"is_store_coupon":case"is_delivered_coupon":"1"==$(this).val()&&($("#is_product_coupon").val("0"),$("#valid_for_product_type_membership").val("0"));break;case"is_product_coupon":"1"==$(this).val()&&($("#is_store_coupon").val("0"),$("#is_delivered_coupon").val("0"))}"1"==$("#is_store_coupon").val()&&$(".section-store_coupon").showFlex(),"1"==$("#is_delivered_coupon").val()&&$(".section-delivered_coupon").showFlex(),"1"==$("#is_product_coupon").val()&&$(".section-product_coupon").showFlex(),$("form#coupon_edit :input").not("input[type='hidden']").each((function(){$(this).is("[readonly]")||($(this).is(":visible")?$(this).prop("disabled",!1):$(this).prop("disabled",!0))})),$("input[type=radio][name=limit_coupon]:checked").trigger("change"),$("#applicable_customer_type").trigger("change")})),$(document).on("change","#valid_menuspan_start, #valid_menuspan_end",(function(e){switch($(this).attr("id")){case"valid_menuspan_start":""==$(this).val()?$("#valid_menuspan_end").val(""):($(this).val()>$("#valid_menuspan_end").val()||""==$("#valid_menuspan_end").val())&&$("#valid_menuspan_end").val($(this).val());break;case"valid_menuspan_end":""==$(this).val()?$("#valid_menuspan_start").val(""):($(this).val()<$("#valid_menuspan_start").val()||""==$("#valid_menuspan_start").val())&&$("#valid_menuspan_start").val($(this).val())}})),$(document).on("click","#valid_session_timespan_start_clear, #valid_session_timespan_end_clear",(function(e){switch(e.preventDefault(),$(this).attr("id")){case"valid_session_timespan_start_clear":$("#valid_session_timespan_start").val(""),$("#valid_session_timespan_end").val("");break;case"valid_session_timespan_end_clear":$("#valid_session_timespan_end").val("")}})),$(document).on("change","#applicable_customer_type",(function(e){switch($(this).val()){case"REMISS_N_MONTHS":$("#applicable_customer_type_description").text("A guest who has previously ordered but has not attended a session within the specified number of months. New guests can not use this coupon."),$("#remiss_number_of_months").prop({required:!0,disabled:!1}),$("#remiss_cutoff_date").prop({required:!1,disabled:!0}).val("");break;case"NEW_OR_REMISS_N_MONTHS":$("#applicable_customer_type_description").text("The guest is new, or, a guest who has previously ordered but has not attended a session within the specified number of months."),$("#remiss_number_of_months").prop({required:!0,disabled:!1}),$("#remiss_cutoff_date").prop({required:!1,disabled:!0}).val("");break;case"REMISS_SINCE_DATE":$("#applicable_customer_type_description").text("A guest who has previously ordered but has not attended a session since the specified date. New guests can not use this coupon."),$("#remiss_number_of_months").prop({required:!1,disabled:!0}).val(""),$("#remiss_cutoff_date").prop({required:!0,disabled:!1});break;case"NEW_OR_REMISS":$("#applicable_customer_type_description").text("The guest is new, or, a guest who has previously ordered but has not attended a session since the specified date."),$("#remiss_number_of_months").prop({required:!1,disabled:!0}).val(""),$("#remiss_cutoff_date").prop({required:!0,disabled:!1});break;case"NEW":$("#applicable_customer_type_description").text("The guest is new, has never ordered before."),$("#remiss_number_of_months").prop({required:!1,disabled:!0}).val(""),$("#remiss_cutoff_date").prop({required:!1,disabled:!0}).val("");break;case"EXISTING":$("#applicable_customer_type_description").text("The guest must have attended a session any time in the past."),$("#remiss_number_of_months").prop({required:!1,disabled:!0}).val(""),$("#remiss_cutoff_date").prop({required:!1,disabled:!0}).val("");break;case"ALL":$("#applicable_customer_type_description").text("All guests will be able to use the coupon."),$("#remiss_number_of_months").prop({required:!1,disabled:!0}).val(""),$("#remiss_cutoff_date").prop({required:!1,disabled:!0}).val("");break;default:$("#remiss_number_of_months").prop({required:!1,disabled:!0}).val(""),$("#remiss_cutoff_date").prop({required:!1,disabled:!0}).val("")}})),$(document).on("change","#discount_method",(function(e){switch($(this).val()){case"FLAT":case"PERCENT":case"BONUS_CREDIT":$("#menu_item_id").prop("required",!1).val(""),$("#discount_var").prop("required",!0);break;case"FREE_MEAL":case"FREE_MENU_ITEM":$("#menu_item_id").prop("required",!0),$("#discount_var").prop("required",!1).val("");break;default:$("#menu_item_id").prop("required",!1).val(""),$("#discount_var").prop("required",!1).val("")}})),$(document).on("click",".coupon-search",(function(e){e.preventDefault();let t=$("#edit_coupon_code").val().trim();0!==t.length&&create_and_submit_form({action:"main.php?page=admin_manage_coupon_codes",input:{search_code:t}})})),$(document).ready((function(){$("#is_store_coupon, #is_delivered_coupon, #is_product_coupon").trigger("change")}));
//# sourceMappingURL=manage_coupon_codes.min.js.map