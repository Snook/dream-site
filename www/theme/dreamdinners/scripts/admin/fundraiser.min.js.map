{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["fundraiser.js"],"sourcesContent":["function fundraiser_init()\r\n{\r\n\tcreate_fundraiser_button();\r\n\thandle_fundraiser_edit();\r\n\thandle_detailed_reporting();\r\n}\r\n\r\nfunction handle_detailed_reporting()\r\n{\r\n\t$('#show_detailed_reporting').on('click', function () {\r\n\r\n\t\t$('#detailed_reporting').slideToggle();\r\n\r\n\t});\r\n}\r\n\r\nfunction create_fundraiser_button()\r\n{\r\n\t$('#add_fundraiser').on('click', function ()\r\n\t{\r\n\t\tdd_message({\r\n\t\t\tdiv_id: 'fundraiser_add',\r\n\t\t\ttitle: 'Add Fundraiser',\r\n\t\t\tmessage: $('#add_fundraiser_content').html(),\r\n\t\t\tnoOk: true,\r\n\t\t\theight: '300',\r\n\t\t\topen: function (event, ui)\r\n\t\t\t{\r\n\t\t\t\tvar this_form = $('#fundraiser_add');\r\n\r\n\t\t\t\t$(this_form).find('[name=\"fund_submit\"]').on('click', function ()\r\n\t\t\t\t{\r\n\t\t\t\t\tvar context = {\r\n\t\t\t\t\t\ttitle: $(this_form).find('[name=\"new_fundraiser\"]').val(),\r\n\t\t\t\t\t\tdescription: $(this_form).find('[name=\"new_fundraiser_desc\"]').val(),\r\n\t\t\t\t\t\tvalue: parseFloat($(this_form).find('[name=\"new_fundraiser_value\"]').val()).toFixed(2)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\ttimeout: 20000,\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprocessor: 'admin_fundraiser',\r\n\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\t\t\t\top: 'add_fund_info',\r\n\t\t\t\t\t\t\tdata: context\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function (json, status)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tbounce('main.php?page=admin_fundraiser');\r\n\r\n\t\t\t\t\t\t\t\t$(this_form).remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function (objAJAXRequest, strError)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction handle_fundraiser_edit()\r\n{\r\n\t$('[data-fund_id_edit]').each(function ()\r\n\t{\r\n\r\n\t\t$(this).off('click').on('click', function ()\r\n\t\t{\r\n\t\t\tvar fund_id = $(this).data('fund_id_edit');\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprocessor: 'admin_fundraiser',\r\n\t\t\t\t\tfund_id: fund_id,\r\n\t\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\t\top: 'get_fund_info'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (json, status)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar data = $.parseJSON(json.data);\r\n\r\n\t\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\t\tdiv_id: 'fundraiser_add',\r\n\t\t\t\t\t\t\ttitle: 'Add Fundraiser',\r\n\t\t\t\t\t\t\tmessage: $('#add_fundraiser_content').html(),\r\n\t\t\t\t\t\t\tnoOk: true,\r\n\t\t\t\t\t\t\theight: '300',\r\n\t\t\t\t\t\t\topen: function (event, ui)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar this_form = $('#fundraiser_add');\r\n\r\n\t\t\t\t\t\t\t\t$(this_form).find('[name=\"new_fundraiser\"]').val(data.fundraiser_name);\r\n\t\t\t\t\t\t\t\t$(this_form).find('[name=\"new_fundraiser_desc\"]').val(data.fundraiser_description);\r\n\t\t\t\t\t\t\t\t$(this_form).find('[name=\"new_fundraiser_value\"]').val(parseFloat(data.donation_value).toFixed(2));\r\n\r\n\t\t\t\t\t\t\t\t$(this_form).find('[name=\"fund_submit\"]').on('click', function ()\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar context = {\r\n\t\t\t\t\t\t\t\t\t\tfund_id: data.id,\r\n\t\t\t\t\t\t\t\t\t\ttitle: $(this_form).find('[name=\"new_fundraiser\"]').val(),\r\n\t\t\t\t\t\t\t\t\t\tdescription: $(this_form).find('[name=\"new_fundraiser_desc\"]').val(),\r\n\t\t\t\t\t\t\t\t\t\tvalue: parseFloat($(this_form).find('[name=\"new_fundraiser_value\"]').val()).toFixed(2)\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\t\ttimeout: 20000,\r\n\t\t\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\tprocessor: 'admin_fundraiser',\r\n\t\t\t\t\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\t\t\t\t\t\t\t\top: 'edit_fund_info',\r\n\t\t\t\t\t\t\t\t\t\t\tdata: context\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tsuccess: function (json, status)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocation.reload();\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t$(this_form).remove();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function (objAJAXRequest, strError)\r\n\t\t\t\t{\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$('[data-enable_fund]').each(function ()\r\n\t{\r\n\t\t$(this).off('click').on('click', function ()\r\n\t\t{\r\n\t\t\tvar fund_id = $(this).data('enable_fund');\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprocessor: 'admin_fundraiser',\r\n\t\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\t\top: 'toggle_fundraiser',\r\n\t\t\t\t\tfund_id: fund_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (json, status)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function (objAJAXRequest, strError)\r\n\t\t\t\t{\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t});\r\n}"],"names":["fundraiser_init","create_fundraiser_button","handle_fundraiser_edit","handle_detailed_reporting","$","on","slideToggle","dd_message","div_id","title","message","html","noOk","height","open","event","ui","this_form","find","context","val","description","value","parseFloat","toFixed","ajax","url","type","timeout","dataType","data","processor","store_id","STORE_DETAILS","id","op","success","json","status","processor_success","bounce","remove","error","objAJAXRequest","strError","response","each","this","off","fund_id","parseJSON","fundraiser_name","fundraiser_description","donation_value","location","reload"],"mappings":"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"}