{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["reports_payment.js"],"sourcesContent":["var isPaymentReconciliationReport = false;\r\nvar open_state_cookie_name = \"\";\r\nvar select_state_cookie_name = \"\";\r\n\r\nfunction reports_payment_init()\r\n{\r\n\r\n\topen_state_cookie_name = false; //'dd_pr_tree_open_state';\r\n\tselect_state_cookie_name = false; //'dd_pr_tree_selected_state';\r\n\r\n\tisPaymentReconciliationReport = true;\r\n\tinit_filters();\r\n\t\r\n\tinit_store_selector('dd_js_tree_payment_report');\r\n\r\n}\r\n\r\n\r\n\r\n\r\nfunction init_filters()\r\n{\r\n\r\n\t$(\"#pfa_All\").change(function(){\r\n\r\n\t\tif (this.checked)\r\n\t\t{\r\n\t\t\t$(\"[id^=pf_]\").each(function() {\r\n\t\t\t\t$(this).prop('checked', true).change();\r\n\t\t\t//\tthis.checked = true;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$(\"[id^=pf_]\").each(function() {\r\n\t\t\t\t$(this).prop('checked', false).change();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.checked)\r\n\t\t{\r\n\t\t\t$.totalStorage(this.id, \"1\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$.totalStorage(this.id, \"0\");\r\n\t\t}\r\n\r\n\r\n\r\n\t});\r\n\t$('#show_if_balance_due').each(function(){\r\n\r\n\t\tif ($.totalStorage(this.id) != null)\r\n\t\t{\r\n\t\t\tif ($.totalStorage(this.id) == \"1\")\r\n\t\t\t{\r\n\t\t\t\tthis.checked = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$('#show_if_balance_due').bind(\"mouseup change\", function(e){\r\n\r\n\t\tif (this.checked)\r\n\t\t{\r\n\t\t\t$.totalStorage(this.id, \"1\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$.totalStorage(this.id, \"0\");\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\t$('[id^=\"pf_\"]').each(function(){\r\n\r\n\t\tif ($.totalStorage(this.id) != null)\r\n\t\t{\r\n\t\t\tif ($.totalStorage(this.id) == \"1\")\r\n\t\t\t{\r\n\t\t\t\tthis.checked = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$('[id^=\"pf_\"]').bind(\"mouseup change\", function(e){\r\n\r\n\t\tif (this.checked)\r\n\t\t{\r\n\t\t\t$.totalStorage(this.id, \"1\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$.totalStorage(this.id, \"0\");\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(\"#pfa_All\").each(function(){\r\n\r\n\t\tif ($.totalStorage(this.id) != null)\r\n\t\t{\r\n\t\t\tif ($.totalStorage(this.id) == \"1\")\r\n\t\t\t{\r\n\t\t\t\tthis.checked = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(\"[id^=select_key]\").bind(\"mouseup change\", function(e){\r\n\r\n\t\tvar selectedValue = \"\";\r\n\t\tvar selected = $(\"input[type='radio'][name='select_key']:checked\");\r\n\t\tif (selected.length > 0)\r\n\t\t    selectedValue = selected.val();\r\n\r\n\t\t$.totalStorage('select_key', selectedValue);\r\n\t});\r\n\r\n\r\n\tif ($.totalStorage('select_key') != null)\r\n\t{\r\n\t    var $radios = $('input:radio[name=select_key]');\r\n\t    $radios.filter('[value='+ $.totalStorage('select_key')  + ']').prop('checked', true);\r\n\t}\r\n\r\n}\r\n\r\n\r\nfunction _override_check_form()\r\n{\r\n\r\n\tvar hasStore = false;\r\n\tvar hasPaymentTypes = false;\r\n\r\n\r\n\tif (!isFranchiseAccess)\r\n\t{\r\n\r\n\t\t\r\n\t\tvar selectedStoreNodes =  $('#store_selector').jstree(true).get_selected();\r\n\t\t\r\n\t\tvar postVal = new Array();\r\n\t\tvar count = 0;\r\n\t\t\r\n\t\tfor (var i = 0; i < selectedStoreNodes.length; ++i) \r\n\t\t{\r\n\t\t\tvar testNode = $('#store_selector').jstree(true).get_node(\"#\" + selectedStoreNodes[i]);\r\n\t\t\tif (testNode.state.hidden)\t\r\n\t\t\t{\r\n\t\t\t\t$('#store_selector').jstree(true).deselect_node(\"#\" + selectedStoreNodes[i]);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\t\r\n\r\n\t\t\tif (selectedStoreNodes[i].indexOf(\"tree_store\") == 0)\r\n\t\t\t{\r\n\t\t\t\tvar thisID = selectedStoreNodes[i].split(\"-\");\r\n\t\t\t\tpostVal[count++] = thisID[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif (postVal.length > 0)\r\n\t\t{\r\n\t\t\t$(\"#requested_stores\").val(postVal);\r\n\t\t\thasStore = true;\r\n\t\t}\r\n\t\telse\t\t\r\n\t\t{\r\n\t\t\t$(\"#requested_stores\").val(\"\");\r\n\r\n\t\t\tdd_message({\r\n\t\t\t\tmessage: \"Please choose at least one store.\"\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\telse\r\n\t{\r\n\t\thasStore = true;\r\n\t}\r\n\r\n\r\n\tif (isPaymentReconciliationReport)\r\n\t{\r\n\t\t$('#pfa_All').each(function() {\r\n\t\t\tif (this.checked)\r\n\t\t\t{\r\n\t\t\t\thasPaymentTypes = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (isPaymentReconciliationReport && !hasPaymentTypes)\r\n\t\t{\r\n\t\t\thas_type = false;\r\n\t\t\t$(\"[id^=pf_]\").each(function() {\r\n\t\t\t\tif (this.checked)\r\n\t\t\t\t{\r\n\t\t\t\t\thasPaymentTypes = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!hasPaymentTypes)\r\n\t\t\t{\r\n\t\t\t\tdd_message({\r\n\t\t\t\t\tmessage: \"Please choose at least one payment type.\"\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\telse\r\n\t{\r\n\t\thasPaymentTypes = true;\r\n\t}\r\n\r\n\treturn hasPaymentTypes && hasStore;\r\n\r\n}\r\n\r\n\r\nfunction onTitleClick()\r\n{\r\n}\r\n"],"names":["isPaymentReconciliationReport","open_state_cookie_name","select_state_cookie_name","reports_payment_init","init_filters","init_store_selector","$","change","this","checked","each","prop","totalStorage","id","bind","e","selectedValue","selected","length","val","$radios","filter","_override_check_form","hasStore","hasPaymentTypes","isFranchiseAccess","selectedStoreNodes","jstree","get_selected","postVal","Array","count","i","testNode","get_node","state","hidden","deselect_node","indexOf","thisID","split","dd_message","message","has_type","onTitleClick"],"mappings":"AAAA,IAAIA,8BAAgC,MACpC,IAAIC,uBAAyB,GAC7B,IAAIC,yBAA2B,GAE/B,SAASC,uBAGRF,uBAAyB,MACzBC,yBAA2B,MAE3BF,8BAAgC,KAChCI,eAEAC,oBAAoB,6BAOrB,SAASD,eAGRE,EAAE,YAAYC,OAAO,WAEpB,GAAIC,KAAKC,QACT,CACCH,EAAE,aAAaI,KAAK,WACnBJ,EAAEE,MAAMG,KAAK,UAAW,MAAMJ,eAKhC,CACCD,EAAE,aAAaI,KAAK,WACnBJ,EAAEE,MAAMG,KAAK,UAAW,OAAOJ,WAIjC,GAAIC,KAAKC,QACT,CACCH,EAAEM,aAAaJ,KAAKK,GAAI,SAGzB,CACCP,EAAEM,aAAaJ,KAAKK,GAAI,QAM1BP,EAAE,wBAAwBI,KAAK,WAE9B,GAAIJ,EAAEM,aAAaJ,KAAKK,KAAO,KAC/B,CACC,GAAIP,EAAEM,aAAaJ,KAAKK,KAAO,IAC/B,CACCL,KAAKC,QAAU,SAGhB,CACCD,KAAKC,QAAU,UAKlBH,EAAE,wBAAwBQ,KAAK,iBAAkB,SAASC,GAEzD,GAAIP,KAAKC,QACT,CACCH,EAAEM,aAAaJ,KAAKK,GAAI,SAGzB,CACCP,EAAEM,aAAaJ,KAAKK,GAAI,QAM1BP,EAAE,eAAeI,KAAK,WAErB,GAAIJ,EAAEM,aAAaJ,KAAKK,KAAO,KAC/B,CACC,GAAIP,EAAEM,aAAaJ,KAAKK,KAAO,IAC/B,CACCL,KAAKC,QAAU,SAGhB,CACCD,KAAKC,QAAU,UAMlBH,EAAE,eAAeQ,KAAK,iBAAkB,SAASC,GAEhD,GAAIP,KAAKC,QACT,CACCH,EAAEM,aAAaJ,KAAKK,GAAI,SAGzB,CACCP,EAAEM,aAAaJ,KAAKK,GAAI,QAK1BP,EAAE,YAAYI,KAAK,WAElB,GAAIJ,EAAEM,aAAaJ,KAAKK,KAAO,KAC/B,CACC,GAAIP,EAAEM,aAAaJ,KAAKK,KAAO,IAC/B,CACCL,KAAKC,QAAU,SAGhB,CACCD,KAAKC,QAAU,UAMlBH,EAAE,oBAAoBQ,KAAK,iBAAkB,SAASC,GAErD,IAAIC,EAAgB,GACpB,IAAIC,EAAWX,EAAE,kDACjB,GAAIW,EAASC,OAAS,EAClBF,EAAgBC,EAASE,MAE7Bb,EAAEM,aAAa,aAAcI,KAI9B,GAAIV,EAAEM,aAAa,eAAiB,KACpC,CACI,IAAIQ,EAAUd,EAAE,gCAChBc,EAAQC,OAAO,UAAWf,EAAEM,aAAa,cAAiB,KAAKD,KAAK,UAAW,OAMpF,SAASW,uBAGR,IAAIC,EAAW,MACf,IAAIC,EAAkB,MAGtB,IAAKC,kBACL,CAGC,IAAIC,EAAsBpB,EAAE,mBAAmBqB,OAAO,MAAMC,eAE5D,IAAIC,EAAU,IAAIC,MAClB,IAAIC,EAAQ,EAEZ,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAmBR,SAAUc,EACjD,CACC,IAAIC,EAAW3B,EAAE,mBAAmBqB,OAAO,MAAMO,SAAS,IAAMR,EAAmBM,IACnF,GAAIC,EAASE,MAAMC,OACnB,CACC9B,EAAE,mBAAmBqB,OAAO,MAAMU,cAAc,IAAMX,EAAmBM,IACzE,SAGD,GAAIN,EAAmBM,GAAGM,QAAQ,eAAiB,EACnD,CACC,IAAIC,EAASb,EAAmBM,GAAGQ,MAAM,KACzCX,EAAQE,KAAWQ,EAAO,IAK5B,GAAIV,EAAQX,OAAS,EACrB,CACCZ,EAAE,qBAAqBa,IAAIU,GAC3BN,EAAW,SAGZ,CACCjB,EAAE,qBAAqBa,IAAI,IAE3BsB,WAAW,CACVC,QAAS,2CAOZ,CACCnB,EAAW,KAIZ,GAAIvB,8BACJ,CACCM,EAAE,YAAYI,KAAK,WAClB,GAAIF,KAAKC,QACT,CACCe,EAAkB,QAIpB,GAAIxB,gCAAkCwB,EACtC,CACCmB,SAAW,MACXrC,EAAE,aAAaI,KAAK,WACnB,GAAIF,KAAKC,QACT,CACCe,EAAkB,QAGpB,IAAKA,EACL,CACCiB,WAAW,CACVC,QAAS,mDASb,CACClB,EAAkB,KAGnB,OAAOA,GAAmBD,EAK3B,SAASqB"}