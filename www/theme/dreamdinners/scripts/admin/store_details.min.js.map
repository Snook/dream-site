{"version":3,"file":"store_details.min.js","names":["store_details_init","updatePreview","document","getElementById","handle_store_bio","SetGrandOpeningWidget","$","length","checked","handle_archive_store","handle_delete_store","handle_empty_latlong","handle_address_change","mask","handle_same_as_store","handle_order_customization","bind","e","val","on","this","strip_tags","attr","html","nl2br","slideDown","slideUp","trigger","addManager","guest","data","togglePreview","toggleOrderCustomization","show","hide","contact","set_disabled","is","disabled","onPlatePointsOptinChange","obj","override_check_form","elements","canProceed","dd_message","message","each","_check_form","linear_address","prop","store_name","home_office_id","store_id","title","confirm","bounce","create_and_submit_form","action","input","id","textArea","previewDiv","name","innerHTML","value","style","display","update_grand_opening_function","element","vDisable","visibility"],"sourceRoot":"js/src/dreamdinners/admin","sources":["store_details.js"],"sourcesContent":["function store_details_init()\n{\n\tupdatePreview(document.getElementById(\"store_description\"));\n\n\thandle_store_bio();\n\n\tSetGrandOpeningWidget(true);\n\n\tif ($('#update_grandopeningdate').length)\n\t{\n\t\tdocument.getElementById('update_grandopeningdate').checked = false;\n\t}\n\n\thandle_archive_store();\n\n\thandle_delete_store();\n\n\thandle_empty_latlong();\n\n\thandle_address_change();\n\n\t$('.telephone').mask('999-999-9999');\n\n\thandle_same_as_store();\n\n\thandle_order_customization();\n\n\t$('#manager_1_user_id').bind('change, keypress, keyup', function (e) {\n\n\t\tif (!$('#manager_1_user_id').val())\n\t\t{\n\t\t\t$('#manager_1_name, #manager_1_primary_email, #manager_1_telephone_1').val('');\n\t\t}\n\n\t});\n\n\t$(document).on('keyup', '#store_description, #address_directions, #bio_primary_party_story, #bio_secondary_party_story, #bio_team_description, #bio_store_hours ', function (e) {\n\n\t\tif ($(this).val() != strip_tags($(this).val(), '<a>'))\n\t\t{\n\t\t\t$(this).val(strip_tags($(this).val(), '<a>'));\n\t\t}\n\n\t\tif ($(this).val() != '')\n\t\t{\n\t\t\t$('#' + $(this).attr('id') + '_preview').html(nl2br($(this).val())).slideDown();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('#' + $(this).attr('id') + '_preview').slideUp();\n\t\t}\n\t});\n\n\t$(document).on('focusout', '#social_twitter, #social_facebook, #social_instagram', function (e) {\n\n\t\tif ($(this).val() == '')\n\t\t{\n\t\t\t$(this).val('dreamdinners');\n\t\t}\n\n\t});\n\n\n\t$('#store_description, #address_directions').trigger('keyup');\n\n}\n\nfunction addManager(guest)\n{\n\t$('#manager_1_user_id').val($(guest).data('user_id'));\n\t$('#manager_1_name').val($(guest).data('firstname') + ' ' + $(guest).data('lastname'));\n\t$('#manager_1_primary_email').val($(guest).data('primary_email'));\n\t$('#manager_1_telephone_1').val($(guest).data('telephone_1'));\n}\n\nfunction handle_store_bio()\n{\n\ttogglePreview(document.getElementById(\"bio_primary_party_story\"));\n\ttogglePreview(document.getElementById(\"bio_secondary_party_story\"));\n\ttogglePreview(document.getElementById(\"bio_team_description\"));\n\ttogglePreview(document.getElementById(\"bio_store_hours\"));\n}\n\nfunction handle_order_customization()\n{\n\t$('#supports_meal_customization').on('click', function () {\n\t\t\ttoggleOrderCustomization(this.checked);\n\t});\n}\n\nfunction toggleOrderCustomization(show){\n\tif(show){\n\t\t$(\".customization_fields\").show();\n\t}else{\n\t\t$(\".customization_fields\").hide();\n\t\t//$(\".customization_fields\").val('0').prop('checked', false);\n\t}\n}\n\nfunction handle_same_as_store()\n{\n\t$('#pkg_ship_same_as_store, #letter_ship_same_as_store').on('click', function () {\n\n\t\tvar contact = $(this).data('contact');\n\t\tvar set_disabled = true;\n\n\t\tif (!$(this).is(\":checked\"))\n\t\t{\n\t\t\tset_disabled = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('#' + contact + '_is_commercial, #' + contact + '_address_line1, #' + contact + '_address_line2, #' + contact + '_city, #' + contact + '_state_id, #' + contact + '_postal_code, #' + contact + '_telephone_day').val(function () {\n\n\t\t\t\treturn $(this).data('store_value');\n\n\t\t\t});\n\t\t}\n\n\t\t$('#' + contact + '_is_commercial, #' + contact + '_address_line1, #' + contact + '_address_line2, #' + contact + '_city, #' + contact + '_state_id, #' + contact + '_postal_code, #' + contact + '_telephone_day').attr({'disabled': set_disabled});\n\n\t});\n}\n\nfunction onPlatePointsOptinChange(obj)\n{\n\tif (obj.checked)\n\t{\n\t\t$(\"#supports_plate_points_signature_row\").show();\n\n\t\t$(\"#supports_plate_points_signature\").attr('data-dd_required', true);\n\t}\n\telse\n\t{\n\t\t$(\"#supports_plate_points_signature_row\").hide();\n\n\t\t$(\"#supports_plate_points_signature\").attr('data-dd_required', false);\n\n\t}\n\n}\n\nfunction override_check_form(e, elements)\n{\n\tlet canProceed = true;\n\n\tif ($(\"#default_delayed_payment_deposit\").length)\n\t{\n\t\tvar dp_deposit = $(\"#default_delayed_payment_deposit\").val();\n\n\t\tif (dp_deposit < 20)\n\t\t{\n\n\t\t\tdd_message({\n\t\t\t\tmessage: 'The Delayed Payment Deposit must be at least $20.'\n\t\t\t});\n\n\t\t\tcanProceed = false;\n\t\t}\n\t}\n\n\t$(\"[id$='_session_desc']\").each(function() {\n\t\tif ($(this).val().length != 0 && $(this).val().length < 6)\n\t\t{\n\t\t\tdd_message({\n\t\t\t\tmessage: 'Session Descriptions must either be empty or must be more than 5 characters in length. If empty the defauly description will be used.'\n\t\t\t});\n\n\t\t\tcanProceed = false;\n\t\t}\n\t});\n\n\tif (canProceed)\n\t{\n\t\treturn _check_form(elements);\n\t}\n\n\treturn false;\n\n}\n\nfunction handle_address_change()\n{\n\t$('#address_line1, #address_line2, #city, #state_id, #postal_code, #usps_adc').bind('keyup change click', function () {\n\n\t\tlinear_address = $('#address_line1').val();\n\n\t\t/*\n\t\tif ($('#address_line2').val() != '')\n\t\t{\n\t\t\tlinear_address += ' ' + $('#address_line2').val();\n\t\t}\n\t\t*/\n\n\t\tlinear_address += ', ' + $('#city').val();\n\t\tlinear_address += ', ' + $('#state_id').val();\n\t\tlinear_address += ' ' + $('#postal_code').val();\n\n\t\tif ($('#usps_adc').val() != '')\n\t\t{\n\t\t\tlinear_address += '-' + $('#usps_adc').val();\n\t\t}\n\n\t\t$('.gllpSearchField').val(linear_address);\n\t\t$('#map_link').prop('href', 'https://maps.google.com/maps?q=' + linear_address + '&iwloc=A&hl=en');\n\n\t});\n}\n\nfunction handle_empty_latlong()\n{\n\tif (!$('#address_latitude').is(\":disabled\"))\n\t{\n\t\tif ($('#address_latitude').val() == '' || $('#address_latitude').val() == '0.000000' || $('#address_longitude').val() == '' || $('#address_longitude').val() == '0.000000')\n\t\t{\n\t\t\tdd_message({message: 'Latitude and Longitude have not yet been set for this store, please drag the marker to the front door of the store.'});\n\n\t\t\t$('.gllpSearchButton').trigger('click');\n\t\t}\n\t}\n}\n\nfunction handle_archive_store()\n{\n\t$('#archive_store').on('click', function () {\n\n\t\tstore_name = $(this).data('store_name');\n\t\thome_office_id = $(this).data('home_office_id');\n\t\tstore_id = $(this).data('store_id');\n\n\t\tdd_message({\n\t\t\ttitle: 'Archive Store',\n\t\t\tmessage: 'Are you sure you want to archive and re-open ' + store_name + ' #' + home_office_id + '?',\n\t\t\tconfirm: function () {\n\t\t\t\tbounce('main.php?page=admin_archive_store&store=' + store_id);\n\t\t\t}\n\t\t});\n\n\t});\n}\n\nfunction handle_delete_store()\n{\n\t$('#delete_store').on('click', function () {\n\n\t\tstore_id = $(this).data('store_id');\n\n\t\tdd_message({\n\t\t\ttitle: 'Delete Store',\n\t\t\tmessage: 'Are you sure you want to <span style=\"color: red; font-weight: bold;\">permanently delete</span> this store from all of Dream Dinners?',\n\t\t\tconfirm: function () {\n\t\t\t\tbounce('main.php?page=admin_store_details&id=' + store_id + '&action=deleteStore');\n\n\t\t\t\tcreate_and_submit_form({\n\t\t\t\t\taction: 'main.php?page=admin_store_details&id' + store_id,\n\t\t\t\t\tinput: ({\n\t\t\t\t\t\taction: 'deleteStore',\n\t\t\t\t\t\tid: store_id\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t});\n}\n\nfunction updatePreview(textArea)\n{\n\tif (textArea)\n\t{\n\t\tvar previewDiv = document.getElementById(textArea.name + '_preview');\n\t\tif (textArea && previewDiv)\n\t\t{\n\t\t\tpreviewDiv.innerHTML = textArea.value;\n\t\t}\n\t}\n}\n\nfunction togglePreview(textArea)\n{\n\tlet previewDiv = document.getElementById(textArea.name + '_preview');\n\tif ( previewDiv.style.display == 'none' )\n\t{\n\t\tpreviewDiv.style.display = 'block';\n\t\tupdatePreview(textArea);\n\t}\n\telse\n\t{\n\t\tpreviewDiv.style.display = 'none';\n\t}\n}\n\nfunction update_grand_opening_function(element)\n{\n\tSetGrandOpeningWidget(!element.checked);\n}\n\nfunction SetGrandOpeningWidget(vDisable)\n{\n\tvar visibility = 'hidden';\n\tif (document.getElementById('grand_opening_date_Month_ID'))\n\t{\n\t\tdocument.getElementById('grand_opening_date_Month_ID').disabled = vDisable;\n\t}\n\tif (document.getElementById('grand_opening_date_Day_ID'))\n\t{\n\t\tdocument.getElementById('grand_opening_date_Day_ID').disabled = vDisable;\n\t}\n\tif (document.getElementById('grand_opening_date_Year_ID'))\n\t{\n\t\tdocument.getElementById('grand_opening_date_Year_ID').disabled = vDisable;\n\t}\n\tif (document.getElementById('grand_opening_date_Month_ID'))\n\t{\n\t\tdocument.getElementById('grand_opening_date_Month_ID').disabled = vDisable;\n\t}\n\tif (vDisable == false)\n\t{\n\t\tvisibility = 'visible';\n\t}\n\tif (document.getElementById('grand_opening_date_ID_Link'))\n\t{\n\t\tdocument.getElementById('grand_opening_date_ID_Link').style.visibility = visibility;\n\t}\n}\n"],"mappings":"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"}