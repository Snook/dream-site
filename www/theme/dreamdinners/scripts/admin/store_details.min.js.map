{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["store_details.js"],"sourcesContent":["function store_details_init()\r\n{\r\n\tupdatePreview(document.getElementById(\"store_description\"));\r\n\r\n\tSetGrandOpeningWidget(true);\r\n\r\n\tif ($('#update_grandopeningdate').length)\r\n\t{\r\n\t\tdocument.getElementById('update_grandopeningdate').checked = false;\r\n\t}\r\n\r\n\thandle_archive_store();\r\n\r\n\thandle_delete_store();\r\n\r\n\thandle_empty_latlong();\r\n\r\n\thandle_address_change();\r\n\r\n\t$('.telephone').mask('999-999-9999');\r\n\r\n\thandle_same_as_store();\r\n\r\n\thandle_order_customization();\r\n\r\n\t$('#manager_1_user_id').bind('change, keypress, keyup', function (e) {\r\n\r\n\t\tif (!$('#manager_1_user_id').val())\r\n\t\t{\r\n\t\t\t$('#manager_1_name, #manager_1_primary_email, #manager_1_telephone_1').val('');\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('keyup', '#store_description, #address_directions', function (e) {\r\n\r\n\t\tif ($(this).val() != strip_tags($(this).val(), '<a>'))\r\n\t\t{\r\n\t\t\t$(this).val(strip_tags($(this).val(), '<a>'));\r\n\t\t}\r\n\r\n\t\tif ($(this).val() != '')\r\n\t\t{\r\n\t\t\t$('#' + $(this).attr('id') + '_preview').html(nl2br($(this).val())).slideDown();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$('#' + $(this).attr('id') + '_preview').slideUp();\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on('focusout', '#social_twitter, #social_facebook, #social_instagram', function (e) {\r\n\r\n\t\tif ($(this).val() == '')\r\n\t\t{\r\n\t\t\t$(this).val('dreamdinners');\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\t$('#store_description, #address_directions').trigger('keyup');\r\n}\r\n\r\nfunction addManager(guest)\r\n{\r\n\t$('#manager_1_user_id').val($(guest).data('user_id'));\r\n\t$('#manager_1_name').val($(guest).data('firstname') + ' ' + $(guest).data('lastname'));\r\n\t$('#manager_1_primary_email').val($(guest).data('primary_email'));\r\n\t$('#manager_1_telephone_1').val($(guest).data('telephone_1'));\r\n}\r\n\r\nfunction handle_order_customization()\r\n{\r\n\t$('#supports_meal_customization').on('click', function () {\r\n\t\t\ttoggleOrderCustomization(this.checked);\r\n\t});\r\n}\r\n\r\nfunction toggleOrderCustomization(show){\r\n\tif(show){\r\n\t\t$(\".customization_fields\").show();\r\n\t}else{\r\n\t\t$(\".customization_fields\").hide();\r\n\t\t//$(\".customization_fields\").val('0').prop('checked', false);\r\n\t}\r\n}\r\n\r\nfunction handle_same_as_store()\r\n{\r\n\t$('#pkg_ship_same_as_store, #letter_ship_same_as_store').on('click', function () {\r\n\r\n\t\tvar contact = $(this).data('contact');\r\n\t\tvar set_disabled = true;\r\n\r\n\t\tif (!$(this).is(\":checked\"))\r\n\t\t{\r\n\t\t\tset_disabled = false;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$('#' + contact + '_is_commercial, #' + contact + '_address_line1, #' + contact + '_address_line2, #' + contact + '_city, #' + contact + '_state_id, #' + contact + '_postal_code, #' + contact + '_telephone_day').val(function () {\r\n\r\n\t\t\t\treturn $(this).data('store_value');\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$('#' + contact + '_is_commercial, #' + contact + '_address_line1, #' + contact + '_address_line2, #' + contact + '_city, #' + contact + '_state_id, #' + contact + '_postal_code, #' + contact + '_telephone_day').attr({'disabled': set_disabled});\r\n\r\n\t});\r\n}\r\n\r\nfunction onPlatePointsOptinChange(obj)\r\n{\r\n\tif (obj.checked)\r\n\t{\r\n\t\t$(\"#supports_plate_points_signature_row\").show();\r\n\r\n\t\t$(\"#supports_plate_points_signature\").attr('data-dd_required', true);\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$(\"#supports_plate_points_signature_row\").hide();\r\n\r\n\t\t$(\"#supports_plate_points_signature\").attr('data-dd_required', false);\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction override_check_form(e, elements)\r\n{\r\n\tlet canProceed = true;\r\n\r\n\tif ($(\"#default_delayed_payment_deposit\").length)\r\n\t{\r\n\t\tvar dp_deposit = $(\"#default_delayed_payment_deposit\").val();\r\n\r\n\t\tif (dp_deposit < 20)\r\n\t\t{\r\n\r\n\t\t\tdd_message({\r\n\t\t\t\tmessage: 'The Delayed Payment Deposit must be at least $20.'\r\n\t\t\t});\r\n\r\n\t\t\tcanProceed = false;\r\n\t\t}\r\n\t}\r\n\r\n\t$(\"[id$='_session_desc']\").each(function() {\r\n\t\tif ($(this).val().length != 0 && $(this).val().length < 6)\r\n\t\t{\r\n\t\t\tdd_message({\r\n\t\t\t\tmessage: 'Session Descriptions must either be empty or must be more than 5 characters in length. If empty the defauly description will be used.'\r\n\t\t\t});\r\n\r\n\t\t\tcanProceed = false;\r\n\t\t}\r\n\t});\r\n\r\n\tif (canProceed)\r\n\t{\r\n\t\treturn _check_form(elements);\r\n\t}\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\nfunction handle_address_change()\r\n{\r\n\t$('#address_line1, #address_line2, #city, #state_id, #postal_code, #usps_adc').bind('keyup change click', function () {\r\n\r\n\t\tlinear_address = $('#address_line1').val();\r\n\r\n\t\t/*\r\n\t\tif ($('#address_line2').val() != '')\r\n\t\t{\r\n\t\t\tlinear_address += ' ' + $('#address_line2').val();\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\tlinear_address += ', ' + $('#city').val();\r\n\t\tlinear_address += ', ' + $('#state_id').val();\r\n\t\tlinear_address += ' ' + $('#postal_code').val();\r\n\r\n\t\tif ($('#usps_adc').val() != '')\r\n\t\t{\r\n\t\t\tlinear_address += '-' + $('#usps_adc').val();\r\n\t\t}\r\n\r\n\t\t$('.gllpSearchField').val(linear_address);\r\n\t\t$('#map_link').prop('href', 'https://maps.google.com/maps?q=' + linear_address + '&iwloc=A&hl=en');\r\n\r\n\t});\r\n}\r\n\r\nfunction handle_empty_latlong()\r\n{\r\n\tif (!$('#address_latitude').is(\":disabled\"))\r\n\t{\r\n\t\tif ($('#address_latitude').val() == '' || $('#address_latitude').val() == '0.000000' || $('#address_longitude').val() == '' || $('#address_longitude').val() == '0.000000')\r\n\t\t{\r\n\t\t\tdd_message({message: 'Latitude and Longitude have not yet been set for this store, please drag the marker to the front door of the store.'});\r\n\r\n\t\t\t$('.gllpSearchButton').trigger('click');\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction handle_archive_store()\r\n{\r\n\t$('#archive_store').on('click', function () {\r\n\r\n\t\tstore_name = $(this).data('store_name');\r\n\t\thome_office_id = $(this).data('home_office_id');\r\n\t\tstore_id = $(this).data('store_id');\r\n\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Archive Store',\r\n\t\t\tmessage: 'Are you sure you want to archive and re-open ' + store_name + ' #' + home_office_id + '?',\r\n\t\t\tconfirm: function () {\r\n\t\t\t\tbounce('main.php?page=admin_archive_store&store=' + store_id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction handle_delete_store()\r\n{\r\n\t$('#delete_store').on('click', function () {\r\n\r\n\t\tstore_id = $(this).data('store_id');\r\n\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Delete Store',\r\n\t\t\tmessage: 'Are you sure you want to <span style=\"color: red; font-weight: bold;\">permanently delete</span> this store from all of Dream Dinners?',\r\n\t\t\tconfirm: function () {\r\n\t\t\t\tbounce('main.php?page=admin_store_details&id=' + store_id + '&action=deleteStore');\r\n\r\n\t\t\t\tcreate_and_submit_form({\r\n\t\t\t\t\taction: 'main.php?page=admin_store_details&id' + store_id,\r\n\t\t\t\t\tinput: ({\r\n\t\t\t\t\t\taction: 'deleteStore',\r\n\t\t\t\t\t\tid: store_id\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction updatePreview(textArea)\r\n{\r\n\tif (textArea)\r\n\t{\r\n\t\tvar previewDiv = document.getElementById(textArea.name + '_preview');\r\n\t\tif (textArea && previewDiv)\r\n\t\t{\r\n\t\t\tpreviewDiv.innerHTML = textArea.value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction update_grand_opening_function(element)\r\n{\r\n\tSetGrandOpeningWidget(!element.checked);\r\n}\r\n\r\nfunction SetGrandOpeningWidget(vDisable)\r\n{\r\n\tvar visibility = 'hidden';\r\n\tif (document.getElementById('grand_opening_date_Month_ID'))\r\n\t{\r\n\t\tdocument.getElementById('grand_opening_date_Month_ID').disabled = vDisable;\r\n\t}\r\n\tif (document.getElementById('grand_opening_date_Day_ID'))\r\n\t{\r\n\t\tdocument.getElementById('grand_opening_date_Day_ID').disabled = vDisable;\r\n\t}\r\n\tif (document.getElementById('grand_opening_date_Year_ID'))\r\n\t{\r\n\t\tdocument.getElementById('grand_opening_date_Year_ID').disabled = vDisable;\r\n\t}\r\n\tif (document.getElementById('grand_opening_date_Month_ID'))\r\n\t{\r\n\t\tdocument.getElementById('grand_opening_date_Month_ID').disabled = vDisable;\r\n\t}\r\n\tif (vDisable == false)\r\n\t{\r\n\t\tvisibility = 'visible';\r\n\t}\r\n\tif (document.getElementById('grand_opening_date_ID_Link'))\r\n\t{\r\n\t\tdocument.getElementById('grand_opening_date_ID_Link').style.visibility = visibility;\r\n\t}\r\n}\r\n"],"names":["store_details_init","updatePreview","document","getElementById","SetGrandOpeningWidget","$","length","checked","handle_archive_store","handle_delete_store","handle_empty_latlong","handle_address_change","mask","handle_same_as_store","handle_order_customization","bind","e","val","on","this","strip_tags","attr","html","nl2br","slideDown","slideUp","trigger","addManager","guest","data","toggleOrderCustomization","show","hide","contact","set_disabled","is","disabled","onPlatePointsOptinChange","obj","override_check_form","elements","let","canProceed","dp_deposit","dd_message","message","each","_check_form","linear_address","prop","store_name","home_office_id","store_id","title","confirm","bounce","create_and_submit_form","action","input","id","textArea","previewDiv","name","innerHTML","value","update_grand_opening_function","element","vDisable","visibility","style"],"mappings":"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"}