{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["session_template_mgr.js"],"sourcesContent":["var selectedCell = null;\r\nvar orgColor = null;\r\n\r\nfunction admin_session_template_mgr_init()\r\n{\r\n\r\n\tadjustForSessionType($(\"#session_type\").val());\r\n\t$(document).on('keyup', '#session_notes, #session_title', function (e) {\r\n\r\n\t\tif ($(this).val() != strip_tags($(this).val()))\r\n\t\t{\r\n\t\t\t$(this).val(strip_tags($(this).val()));\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(\"#start_time\").on(\"change\", function() {\r\n\t\tlet startVal = $(this).val();\r\n\t\tlet endVal = $(\"#end_time\").val();\r\n\t\tlet duration = $(\"#duration_minutes\").val();\r\n\r\n\t\tlet startMinutes = 0;\r\n\t\tlet endMinutes = 0;\r\n\t\tif (startVal != \"\")\r\n\t\t{\r\n\t\t\tstartMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\r\n\t\t}\r\n\r\n\t\tif (startVal != \"\")\r\n\t\t{\r\n\t\t\tif (duration == 0)\r\n\t\t\t{\r\n\t\t\t\t$(\"#end_time\").val(startVal);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tendMinutes = startMinutes + (duration * 1);\r\n\t\t\t\tif (endMinutes >= 1440)\r\n\t\t\t\t{\r\n\t\t\t\t\tduration = 1439 - startMinutes;\r\n\t\t\t\t\tendMinutes = 1439;\r\n\t\t\t\t\t$(\"#duration_minutes\").val(duration);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#end_time\").on(\"change\", function() {\r\n\t\tlet startVal = $(\"#start_time\").val();\r\n\t\tlet endVal = $(this).val();\r\n\t\tlet duration = $(\"#duration_minutes\").val();\r\n\t\tlet startMinutes = 0;\r\n\t\tlet endMinutes = 0;\r\n\t\tif (endVal != \"\")\r\n\t\t{\r\n\t\t\tendMinutes = endVal.split(\":\")[0] * 60 + (endVal.split(\":\")[1] * 1);\r\n\t\t}\r\n\r\n\t\tif (startVal != \"\" && endVal != \"\")\r\n\t\t{\r\n\t\t\tstartMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\r\n\t\t\tif (startVal > endVal)\r\n\t\t\t{\r\n\t\t\t\tif (duration == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(\"#end_time\").val(startVal);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tendMinutes = startMinutes + (duration * 1);\r\n\t\t\t\t\tif (endMinutes >= 1440)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#duration_minutes\").val(1439-startMinutes);\r\n\t\t\t\t\t\tendMinutes = 1439;\r\n\t\t\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t$(\"#duration_minutes\").val(endMinutes-startMinutes);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#session_type\").on(\"change\", function() {\r\n\t\tadjustForSessionType($(this).val());\r\n\t});\r\n\r\n\t$(\"#duration_minutes\").on(\"change\", function() {\r\n\t\tlet newDuration = $(this).val();\r\n\r\n\t\tif (newDuration < 0)\r\n\t\t{\r\n\t\t\tnewDuration = 0;\r\n\t\t\t$(\"#duration_minutes\").val(0);\r\n\t\t}\r\n\t\tlet startVal = $(\"#start_time\").val();\r\n\t\tif (startVal.length == 8)\r\n\t\t{\r\n\t\t\t//drop seconds\r\n\t\t\tstartVal = startVal.substr(0,5);\r\n\t\t}\r\n\r\n\t\tif (startVal != \"\")\r\n\t\t{\r\n\t\t\tlet startMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\r\n\t\t\tlet endMinutes = startMinutes + (newDuration * 1);\r\n\r\n\t\t\tif (endMinutes >= 1440)\r\n\t\t\t{\r\n\t\t\t\tduration = 1439 - startMinutes;\r\n\t\t\t\tendMinutes = 1439;\r\n\t\t\t\t$(\"#duration_minutes\").val(duration);\r\n\t\t\t}\r\n\r\n\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\r\n\t\t}\r\n\t});\r\n\r\n}\r\n\r\nfunction adjustForSessionType(session_type){\r\n\tswitch(session_type) {\r\n\t\tcase 'SPECIAL_EVENT':\r\n\t\tcase 'DELIVERY':\r\n\t\t\t$('#meal_customization_row').show();\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\t$('#meal_customization_row').hide();\r\n\t}\r\n}\r\nfunction minutesToTime(minutes)\r\n{\r\n\tlet newHour = Math.floor(minutes / 60);\r\n\tlet newMinutes = minutes - (newHour * 60);\r\n\r\n\tnewHour = newHour.toString();\r\n\tnewMinutes = newMinutes.toString();\r\n\r\n\tif (newHour.length == 1)\r\n\t{\r\n\t\tnewHour = \"0\" + newHour;\r\n\t}\r\n\tif (newMinutes.length == 1)\r\n\t{\r\n\t\tnewMinutes = \"0\" + newMinutes;\r\n\t}\r\n\r\n\treturn newHour + \":\" + newMinutes;\r\n}\r\n\r\nfunction onDayClick(obj)\r\n{\r\n\tif (obj == selectedCell) {\r\n\t\treturn;\r\n\t}\r\n\r\n\torgColor = obj.style.backgroundColor;\r\n\r\n\t//alert(obj.offsetLeft);\r\n\r\n\tif (selectedCell){selectedCell.style.backgroundColor = orgColor;}\r\n\r\n\tobj.style.backgroundColor = \"#CAA9DE\";\r\n\tselectedCell = obj;\r\n\r\n\tvar dayIndex = selectedCell.cellIndex;\r\n\tdocument.getElementById(\"start_day\").selectedIndex = dayIndex;\r\n}\r\n\r\nfunction editSession(itemID, setID)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"edit\";\r\n\tdocument.getElementById(\"item_id\").value = itemID;\r\n\tdocument.getElementById(\"itemEditor\").submit();\r\n}\r\n\r\nfunction _item_submitClick(form)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"new\";\r\n}\r\n\r\nfunction _item_updateClick(form)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"update\";\r\n}\r\n\r\nfunction _item_deleteClick(form)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"delete\";\r\n}\r\n\r\nfunction _item_update_cancelClick(form)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"cancel\";\r\n}\r\n\r\nfunction handleItemSubmit(form)\r\n{\r\n\tvar action = document.getElementById(\"action\").value;\r\n\r\n\tif (action == \"delete\" || action == \"cancel\" || action == \"edit\") {\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn _check_form(form);\r\n}"],"names":["selectedCell","orgColor","admin_session_template_mgr_init","adjustForSessionType","$","val","document","on","e","this","strip_tags","let","startVal","endVal","duration","startMinutes","endMinutes","split","minutesToTime","newDuration","length","substr","session_type","show","hide","minutes","newHour","Math","floor","newMinutes","toString","onDayClick","obj","style","backgroundColor","dayIndex","cellIndex","getElementById","selectedIndex","editSession","itemID","setID","value","submit","_item_submitClick","form","_item_updateClick","_item_deleteClick","_item_update_cancelClick","handleItemSubmit","action","_check_form"],"mappings":"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"}