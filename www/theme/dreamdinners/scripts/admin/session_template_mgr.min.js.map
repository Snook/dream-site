{"version":3,"file":"session_template_mgr.min.js","names":["selectedCell","orgColor","admin_session_template_mgr_init","adjustForSessionType","$","val","document","on","e","this","strip_tags","startVal","duration","startMinutes","endMinutes","split","minutesToTime","endVal","newDuration","length","substr","session_type","show","hide","minutes","newHour","Math","floor","newMinutes","toString","onDayClick","obj","style","backgroundColor","dayIndex","cellIndex","getElementById","selectedIndex","editSession","itemID","setID","value","submit","_item_submitClick","form","_item_updateClick","_item_deleteClick","_item_update_cancelClick","handleItemSubmit","action","_check_form"],"sourceRoot":"js/src/dreamdinners/admin","sources":["session_template_mgr.js"],"sourcesContent":["var selectedCell = null;\nvar orgColor = null;\n\nfunction admin_session_template_mgr_init()\n{\n\n\tadjustForSessionType($(\"#session_type\").val());\n\t$(document).on('keyup', '#session_notes, #session_title', function (e) {\n\n\t\tif ($(this).val() != strip_tags($(this).val()))\n\t\t{\n\t\t\t$(this).val(strip_tags($(this).val()));\n\t\t}\n\n\t});\n\n\t$(\"#start_time\").on(\"change\", function() {\n\t\tlet startVal = $(this).val();\n\t\tlet endVal = $(\"#end_time\").val();\n\t\tlet duration = $(\"#duration_minutes\").val();\n\n\t\tlet startMinutes = 0;\n\t\tlet endMinutes = 0;\n\t\tif (startVal != \"\")\n\t\t{\n\t\t\tstartMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\n\t\t}\n\n\t\tif (startVal != \"\")\n\t\t{\n\t\t\tif (duration == 0)\n\t\t\t{\n\t\t\t\t$(\"#end_time\").val(startVal);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tendMinutes = startMinutes + (duration * 1);\n\t\t\t\tif (endMinutes >= 1440)\n\t\t\t\t{\n\t\t\t\t\tduration = 1439 - startMinutes;\n\t\t\t\t\tendMinutes = 1439;\n\t\t\t\t\t$(\"#duration_minutes\").val(duration);\n\t\t\t\t}\n\n\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\n\t\t\t}\n\t\t}\n\t});\n\n\t$(\"#end_time\").on(\"change\", function() {\n\t\tlet startVal = $(\"#start_time\").val();\n\t\tlet endVal = $(this).val();\n\t\tlet duration = $(\"#duration_minutes\").val();\n\t\tlet startMinutes = 0;\n\t\tlet endMinutes = 0;\n\t\tif (endVal != \"\")\n\t\t{\n\t\t\tendMinutes = endVal.split(\":\")[0] * 60 + (endVal.split(\":\")[1] * 1);\n\t\t}\n\n\t\tif (startVal != \"\" && endVal != \"\")\n\t\t{\n\t\t\tstartMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\n\t\t\tif (startVal > endVal)\n\t\t\t{\n\t\t\t\tif (duration == 0)\n\t\t\t\t{\n\t\t\t\t\t$(\"#end_time\").val(startVal);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tendMinutes = startMinutes + (duration * 1);\n\t\t\t\t\tif (endMinutes >= 1440)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#duration_minutes\").val(1439-startMinutes);\n\t\t\t\t\t\tendMinutes = 1439;\n\t\t\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$(\"#duration_minutes\").val(endMinutes-startMinutes);\n\t\t\t}\n\t\t}\n\t});\n\n\t$(\"#session_type\").on(\"change\", function() {\n\t\tadjustForSessionType($(this).val());\n\t});\n\n\t$(\"#duration_minutes\").on(\"change\", function() {\n\t\tlet newDuration = $(this).val();\n\n\t\tif (newDuration < 0)\n\t\t{\n\t\t\tnewDuration = 0;\n\t\t\t$(\"#duration_minutes\").val(0);\n\t\t}\n\t\tlet startVal = $(\"#start_time\").val();\n\t\tif (startVal.length == 8)\n\t\t{\n\t\t\t//drop seconds\n\t\t\tstartVal = startVal.substr(0,5);\n\t\t}\n\n\t\tif (startVal != \"\")\n\t\t{\n\t\t\tlet startMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\n\t\t\tlet endMinutes = startMinutes + (newDuration * 1);\n\n\t\t\tif (endMinutes >= 1440)\n\t\t\t{\n\t\t\t\tduration = 1439 - startMinutes;\n\t\t\t\tendMinutes = 1439;\n\t\t\t\t$(\"#duration_minutes\").val(duration);\n\t\t\t}\n\n\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\n\t\t}\n\t});\n\n}\n\nfunction adjustForSessionType(session_type){\n\tswitch(session_type) {\n\t\tcase 'SPECIAL_EVENT':\n\t\tcase 'DELIVERY':\n\t\t\t$('#meal_customization_row').show();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t$('#meal_customization_row').hide();\n\t}\n}\nfunction minutesToTime(minutes)\n{\n\tlet newHour = Math.floor(minutes / 60);\n\tlet newMinutes = minutes - (newHour * 60);\n\n\tnewHour = newHour.toString();\n\tnewMinutes = newMinutes.toString();\n\n\tif (newHour.length == 1)\n\t{\n\t\tnewHour = \"0\" + newHour;\n\t}\n\tif (newMinutes.length == 1)\n\t{\n\t\tnewMinutes = \"0\" + newMinutes;\n\t}\n\n\treturn newHour + \":\" + newMinutes;\n}\n\nfunction onDayClick(obj)\n{\n\tif (obj == selectedCell) {\n\t\treturn;\n\t}\n\n\torgColor = obj.style.backgroundColor;\n\n\t//alert(obj.offsetLeft);\n\n\tif (selectedCell){selectedCell.style.backgroundColor = orgColor;}\n\n\tobj.style.backgroundColor = \"#CAA9DE\";\n\tselectedCell = obj;\n\n\tvar dayIndex = selectedCell.cellIndex;\n\tdocument.getElementById(\"start_day\").selectedIndex = dayIndex;\n}\n\nfunction editSession(itemID, setID)\n{\n\tdocument.getElementById(\"action\").value = \"edit\";\n\tdocument.getElementById(\"item_id\").value = itemID;\n\tdocument.getElementById(\"itemEditor\").submit();\n}\n\nfunction _item_submitClick(form)\n{\n\tdocument.getElementById(\"action\").value = \"new\";\n}\n\nfunction _item_updateClick(form)\n{\n\tdocument.getElementById(\"action\").value = \"update\";\n}\n\nfunction _item_deleteClick(form)\n{\n\tdocument.getElementById(\"action\").value = \"delete\";\n}\n\nfunction _item_update_cancelClick(form)\n{\n\tdocument.getElementById(\"action\").value = \"cancel\";\n}\n\nfunction handleItemSubmit(form)\n{\n\tvar action = document.getElementById(\"action\").value;\n\n\tif (action == \"delete\" || action == \"cancel\" || action == \"edit\") {\n\t\treturn true;\n\t}\n\n\treturn _check_form(form);\n}"],"mappings":"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"}