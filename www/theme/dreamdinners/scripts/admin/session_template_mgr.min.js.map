{"version":3,"names":["selectedCell","orgColor","admin_session_template_mgr_init","adjustForSessionType","$","val","document","on","e","this","strip_tags","startVal","duration","startMinutes","endMinutes","split","minutesToTime","endVal","newDuration","length","substr","session_type","show","hide","minutes","newHour","Math","floor","newMinutes","toString","onDayClick","obj","style","backgroundColor","dayIndex","cellIndex","getElementById","selectedIndex","editSession","itemID","setID","value","submit","_item_submitClick","form","_item_updateClick","_item_deleteClick","_item_update_cancelClick","handleItemSubmit","action","_check_form"],"sourceRoot":"js/src/admin","sources":["session_template_mgr.js"],"sourcesContent":["var selectedCell = null;\r\nvar orgColor = null;\r\n\r\nfunction admin_session_template_mgr_init()\r\n{\r\n\r\n\tadjustForSessionType($(\"#session_type\").val());\r\n\t$(document).on('keyup', '#session_notes, #session_title', function (e) {\r\n\r\n\t\tif ($(this).val() != strip_tags($(this).val()))\r\n\t\t{\r\n\t\t\t$(this).val(strip_tags($(this).val()));\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(\"#start_time\").on(\"change\", function() {\r\n\t\tlet startVal = $(this).val();\r\n\t\tlet endVal = $(\"#end_time\").val();\r\n\t\tlet duration = $(\"#duration_minutes\").val();\r\n\r\n\t\tlet startMinutes = 0;\r\n\t\tlet endMinutes = 0;\r\n\t\tif (startVal != \"\")\r\n\t\t{\r\n\t\t\tstartMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\r\n\t\t}\r\n\r\n\t\tif (startVal != \"\")\r\n\t\t{\r\n\t\t\tif (duration == 0)\r\n\t\t\t{\r\n\t\t\t\t$(\"#end_time\").val(startVal);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tendMinutes = startMinutes + (duration * 1);\r\n\t\t\t\tif (endMinutes >= 1440)\r\n\t\t\t\t{\r\n\t\t\t\t\tduration = 1439 - startMinutes;\r\n\t\t\t\t\tendMinutes = 1439;\r\n\t\t\t\t\t$(\"#duration_minutes\").val(duration);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#end_time\").on(\"change\", function() {\r\n\t\tlet startVal = $(\"#start_time\").val();\r\n\t\tlet endVal = $(this).val();\r\n\t\tlet duration = $(\"#duration_minutes\").val();\r\n\t\tlet startMinutes = 0;\r\n\t\tlet endMinutes = 0;\r\n\t\tif (endVal != \"\")\r\n\t\t{\r\n\t\t\tendMinutes = endVal.split(\":\")[0] * 60 + (endVal.split(\":\")[1] * 1);\r\n\t\t}\r\n\r\n\t\tif (startVal != \"\" && endVal != \"\")\r\n\t\t{\r\n\t\t\tstartMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\r\n\t\t\tif (startVal > endVal)\r\n\t\t\t{\r\n\t\t\t\tif (duration == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(\"#end_time\").val(startVal);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tendMinutes = startMinutes + (duration * 1);\r\n\t\t\t\t\tif (endMinutes >= 1440)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#duration_minutes\").val(1439-startMinutes);\r\n\t\t\t\t\t\tendMinutes = 1439;\r\n\t\t\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t$(\"#duration_minutes\").val(endMinutes-startMinutes);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#session_type\").on(\"change\", function() {\r\n\t\tadjustForSessionType($(this).val());\r\n\t});\r\n\r\n\t$(\"#duration_minutes\").on(\"change\", function() {\r\n\t\tlet newDuration = $(this).val();\r\n\r\n\t\tif (newDuration < 0)\r\n\t\t{\r\n\t\t\tnewDuration = 0;\r\n\t\t\t$(\"#duration_minutes\").val(0);\r\n\t\t}\r\n\t\tlet startVal = $(\"#start_time\").val();\r\n\t\tif (startVal.length == 8)\r\n\t\t{\r\n\t\t\t//drop seconds\r\n\t\t\tstartVal = startVal.substr(0,5);\r\n\t\t}\r\n\r\n\t\tif (startVal != \"\")\r\n\t\t{\r\n\t\t\tlet startMinutes = startVal.split(\":\")[0] * 60 + (startVal.split(\":\")[1] * 1);\r\n\t\t\tlet endMinutes = startMinutes + (newDuration * 1);\r\n\r\n\t\t\tif (endMinutes >= 1440)\r\n\t\t\t{\r\n\t\t\t\tduration = 1439 - startMinutes;\r\n\t\t\t\tendMinutes = 1439;\r\n\t\t\t\t$(\"#duration_minutes\").val(duration);\r\n\t\t\t}\r\n\r\n\t\t\t$(\"#end_time\").val(minutesToTime(endMinutes));\r\n\t\t}\r\n\t});\r\n\r\n}\r\n\r\nfunction adjustForSessionType(session_type){\r\n\tswitch(session_type) {\r\n\t\tcase 'SPECIAL_EVENT':\r\n\t\tcase 'DELIVERY':\r\n\t\t\t$('#meal_customization_row').show();\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\t$('#meal_customization_row').hide();\r\n\t}\r\n}\r\nfunction minutesToTime(minutes)\r\n{\r\n\tlet newHour = Math.floor(minutes / 60);\r\n\tlet newMinutes = minutes - (newHour * 60);\r\n\r\n\tnewHour = newHour.toString();\r\n\tnewMinutes = newMinutes.toString();\r\n\r\n\tif (newHour.length == 1)\r\n\t{\r\n\t\tnewHour = \"0\" + newHour;\r\n\t}\r\n\tif (newMinutes.length == 1)\r\n\t{\r\n\t\tnewMinutes = \"0\" + newMinutes;\r\n\t}\r\n\r\n\treturn newHour + \":\" + newMinutes;\r\n}\r\n\r\nfunction onDayClick(obj)\r\n{\r\n\tif (obj == selectedCell) {\r\n\t\treturn;\r\n\t}\r\n\r\n\torgColor = obj.style.backgroundColor;\r\n\r\n\t//alert(obj.offsetLeft);\r\n\r\n\tif (selectedCell){selectedCell.style.backgroundColor = orgColor;}\r\n\r\n\tobj.style.backgroundColor = \"#CAA9DE\";\r\n\tselectedCell = obj;\r\n\r\n\tvar dayIndex = selectedCell.cellIndex;\r\n\tdocument.getElementById(\"start_day\").selectedIndex = dayIndex;\r\n}\r\n\r\nfunction editSession(itemID, setID)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"edit\";\r\n\tdocument.getElementById(\"item_id\").value = itemID;\r\n\tdocument.getElementById(\"itemEditor\").submit();\r\n}\r\n\r\nfunction _item_submitClick(form)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"new\";\r\n}\r\n\r\nfunction _item_updateClick(form)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"update\";\r\n}\r\n\r\nfunction _item_deleteClick(form)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"delete\";\r\n}\r\n\r\nfunction _item_update_cancelClick(form)\r\n{\r\n\tdocument.getElementById(\"action\").value = \"cancel\";\r\n}\r\n\r\nfunction handleItemSubmit(form)\r\n{\r\n\tvar action = document.getElementById(\"action\").value;\r\n\r\n\tif (action == \"delete\" || action == \"cancel\" || action == \"edit\") {\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn _check_form(form);\r\n}"],"mappings":"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"}