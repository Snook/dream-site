if($(".input-credit-card").length){var cleaveCreditCard=new Cleave(".input-credit-card",{creditCard:true,onCreditCardTypeChanged:function(e){switch(e){case"visa":currentTypeWidgetValue="Visa";break;case"mastercard":currentTypeWidgetValue="Mastercard";break;case"amex":currentTypeWidgetValue="American Express";break;case"Discover":currentTypeWidgetValue="Discover";break;default:break}$("#ccType").val(currentTypeWidgetValue).trigger("change")}})}$(document).on("change","#ccType",function(e){if($(this).val()=="American Express"){$("#ccSecurityCode").prop({min:"0",max:"9999",maxlength:"4",pattern:"^[0-9]{4}$"})}else{$("#ccSecurityCode").prop({min:"0",max:"999",maxlength:"3",pattern:"^[0-9]{3}$"})}});$(document).on("change","#payment_type",function(e){$(".form-payment").hideFlex();if($(this).val()=="newcc"){$("#ccNameOnCard, #ccNumber, #ccSecurityCode, #ccMonth, #ccYear, #ccType, #billing_address, #billing_postal_code").prop({disabled:false,required:true});$(".form-new-credit-card").showFlex()}else{$("#ccNameOnCard, #ccNumber, #ccSecurityCode, #ccMonth, #ccYear, #ccType, #billing_address, #billing_postal_code").prop({disabled:true,required:false})}if($(this).val()=="cash"){$("#payment_cash").prop({disabled:false,required:true});$(".form-payment-cash").showFlex()}else{$("#payment_cash").prop({disabled:true,required:false})}if($(this).val()=="check"){$("#payment_check").prop({disabled:false,required:true});$(".form-payment-check").showFlex()}else{$("#payment_check").prop({disabled:true,required:false})}});$(document).on("change","#product",function(e){$(".checkout-summary, .checkout-line-discount").hide();if($(this).val()!=""){var s=0;var r=0;var o=0;var t=parseFloat($(this).find(":selected").data("price"));if($("#discount_coupon").val().trim()!=""){r=parseFloat($("#discount_coupon").data("discount_var"));o=$("#discount_coupon").data("discount_method");if(o=="PERCENT"){s=t*(r/100)}if(o=="FLAT"){s=r}$(".checkout-line-discount").show()}var a=t-s;var c=parseFloat($(this).find(":selected").data("tax"));var i=a*(c/100);var n=a+i;$(".checkout-subtotal").text(formatAsMoney(t));$(".checkout-discount").text(formatAsMoney(s));$(".checkout-tax").text(formatAsMoney(i));$(".checkout-total").text(formatAsMoney(n));$("#payment_cash, #payment_check").val(formatAsMoney(n)).prop({readonly:true});$(".form-discount-coupon, .checkout-summary").show()}});$(document).on("click",".membership-manage:not(.disabled)",function(e){var s=$(this).data("membership_id");$(".membership-manage").removeClass("disabled");$("[data-membership_id_manage]").hide();$('[data-membership_id_manage="'+s+'"]').show();$(this).addClass("disabled")});$(document).on("click",".membership-skip-month",function(e){var s=$(this).data("menu_id");var r=$(this).data("user_id");var o=this;$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"skip",menu_id:s,user_id:r},success:function(e){if(e.processor_success){$(".membership-unskip-month").removeClass("membership-unskip-month").addClass("membership-skip-month").text("Skip month");$(o).removeClass("membership-skip-month").addClass("membership-unskip-month").text("Unskip month");bounce(window.location.href)}else{dd_message({title:"Processing Error",message:e.processor_message})}},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})});$(document).on("click",".membership-unskip-month",function(e){var s=$(this).data("menu_id");var r=$(this).data("user_id");var o=this;$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"unskip",menu_id:s,user_id:r},success:function(e){if(e.processor_success){$(o).removeClass("membership-unskip-month").addClass("membership-skip-month").text("Skip month");bounce(window.location.href)}else{dd_message({title:"Processing Error",message:e.processor_message})}},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})});$(document).on("click",".membership-cancel",function(e){var s=$(this).data("membership_id");var r=$(this).data("user_id");bootbox.confirm({message:"Are you sure you wish to cancel this membership and refund the fee?",buttons:{confirm:{label:"Yes"},cancel:{label:"No"}},callback:function(e){if(e){$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"cancel",membership_id:s,user_id:r},success:function(e){if(e.processor_success){bounce(window.location.href)}else{dd_message({title:"Processing Error",message:e.processor_message})}},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})}}})});$(document).on("click",".membership-terminate",function(e){var s=$(this).data("membership_id");var r=$(this).data("user_id");bootbox.confirm({message:"Are you sure you wish to cancel this membership? The fee will not be refunded.",buttons:{confirm:{label:"Yes"},cancel:{label:"No"}},callback:function(e){if(e){$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"terminate",membership_id:s,user_id:r},success:function(e){if(e.processor_success){bounce(window.location.href)}else{dd_message({title:"Processing Error",message:e.processor_message})}},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})}}})});$(document).on("click",".membership-reinstate",function(e){var s=$(this).data("membership_id");var r=$(this).data("user_id");bootbox.confirm({message:"Are you sure you wish to reinstate this membership?",callback:function(e){if(e){$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"reinstate",membership_id:s,user_id:r},success:function(e){if(e.processor_success){bounce(window.location.href)}else{dd_message({title:"Processing Error",message:e.processor_message})}},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})}}})});$(document).on("click",".apply-coupon",function(e){var s=$("#discount_coupon").val().trim();var r=$("#discount_coupon").data("user_id");var o=$("#discount_coupon").data("store_id");if(s==""){$("#discount_coupon").data("discount_var",0);$("#discount_coupon").data("discount_method",0);$("#product").trigger("change")}else{$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"check_coupon",coupon_code:s,user_id:r,store_id:o},success:function(e){if(e.processor_success){$("#discount_coupon").data("discount_var",e.discount_var);$("#discount_coupon").data("discount_method",e.discount_method);$("#product").trigger("change")}else{dd_message({title:"Processing Error",message:e.processor_message})}},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})}});function init_with_error(){$("#product").trigger("change")}
//# sourceMappingURL=user_membership.min.js.map