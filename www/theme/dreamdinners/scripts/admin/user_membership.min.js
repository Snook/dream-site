if($(".input-credit-card").length)var cleaveCreditCard=new Cleave(".input-credit-card",{creditCard:!0,onCreditCardTypeChanged:function(e){switch(e){case"visa":currentTypeWidgetValue="Visa";break;case"mastercard":currentTypeWidgetValue="Mastercard";break;case"amex":currentTypeWidgetValue="American Express";break;case"Discover":currentTypeWidgetValue="Discover"}$("#ccType").val(currentTypeWidgetValue).trigger("change")}});function init_with_error(){$("#product").trigger("change")}$(document).on("change","#ccType",(function(e){"American Express"==$(this).val()?$("#ccSecurityCode").prop({min:"0",max:"9999",maxlength:"4",pattern:"^[0-9]{4}$"}):$("#ccSecurityCode").prop({min:"0",max:"999",maxlength:"3",pattern:"^[0-9]{3}$"})})),$(document).on("change","#payment_type",(function(e){$(".form-payment").hideFlex(),"newcc"==$(this).val()?($("#ccNameOnCard, #ccNumber, #ccSecurityCode, #ccMonth, #ccYear, #ccType, #billing_address, #billing_postal_code").prop({disabled:!1,required:!0}),$(".form-new-credit-card").showFlex()):$("#ccNameOnCard, #ccNumber, #ccSecurityCode, #ccMonth, #ccYear, #ccType, #billing_address, #billing_postal_code").prop({disabled:!0,required:!1}),"cash"==$(this).val()?($("#payment_cash").prop({disabled:!1,required:!0}),$(".form-payment-cash").showFlex()):$("#payment_cash").prop({disabled:!0,required:!1}),"check"==$(this).val()?($("#payment_check").prop({disabled:!1,required:!0}),$(".form-payment-check").showFlex()):$("#payment_check").prop({disabled:!0,required:!1})})),$(document).on("change","#product",(function(e){if($(".checkout-summary, .checkout-line-discount").hide(),""!=$(this).val()){var s=0,r=0,o=0,t=parseFloat($(this).find(":selected").data("price"));""!=$("#discount_coupon").val().trim()&&(r=parseFloat($("#discount_coupon").data("discount_var")),"PERCENT"==(o=$("#discount_coupon").data("discount_method"))&&(s=t*(r/100)),"FLAT"==o&&(s=r),$(".checkout-line-discount").show());var c=t-s,a=c*(parseFloat($(this).find(":selected").data("tax"))/100),i=c+a;$(".checkout-subtotal").text(formatAsMoney(t)),$(".checkout-discount").text(formatAsMoney(s)),$(".checkout-tax").text(formatAsMoney(a)),$(".checkout-total").text(formatAsMoney(i)),$("#payment_cash, #payment_check").val(formatAsMoney(i)).prop({readonly:!0}),$(".form-discount-coupon, .checkout-summary").show()}})),$(document).on("click",".membership-manage:not(.disabled)",(function(e){var s=$(this).data("membership_id");$(".membership-manage").removeClass("disabled"),$("[data-membership_id_manage]").hide(),$('[data-membership_id_manage="'+s+'"]').show(),$(this).addClass("disabled")})),$(document).on("click",".membership-skip-month",(function(e){var s=$(this).data("menu_id"),r=$(this).data("user_id"),o=this;$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"skip",menu_id:s,user_id:r},success:function(e){e.processor_success?($(".membership-unskip-month").removeClass("membership-unskip-month").addClass("membership-skip-month").text("Skip month"),$(o).removeClass("membership-skip-month").addClass("membership-unskip-month").text("Unskip month"),bounce(window.location.href)):dd_message({title:"Processing Error",message:e.processor_message})},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})})),$(document).on("click",".membership-unskip-month",(function(e){var s=$(this).data("menu_id"),r=$(this).data("user_id"),o=this;$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"unskip",menu_id:s,user_id:r},success:function(e){e.processor_success?($(o).removeClass("membership-unskip-month").addClass("membership-skip-month").text("Skip month"),bounce(window.location.href)):dd_message({title:"Processing Error",message:e.processor_message})},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})})),$(document).on("click",".membership-cancel",(function(e){var s=$(this).data("membership_id"),r=$(this).data("user_id");bootbox.confirm({message:"Are you sure you wish to cancel this membership and refund the fee?",buttons:{confirm:{label:"Yes"},cancel:{label:"No"}},callback:function(e){e&&$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"cancel",membership_id:s,user_id:r},success:function(e){e.processor_success?bounce(window.location.href):dd_message({title:"Processing Error",message:e.processor_message})},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})}})})),$(document).on("click",".membership-terminate",(function(e){var s=$(this).data("membership_id"),r=$(this).data("user_id");bootbox.confirm({message:"Are you sure you wish to cancel this membership? The fee will not be refunded.",buttons:{confirm:{label:"Yes"},cancel:{label:"No"}},callback:function(e){e&&$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"terminate",membership_id:s,user_id:r},success:function(e){e.processor_success?bounce(window.location.href):dd_message({title:"Processing Error",message:e.processor_message})},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})}})})),$(document).on("click",".membership-reinstate",(function(e){var s=$(this).data("membership_id"),r=$(this).data("user_id");bootbox.confirm({message:"Are you sure you wish to reinstate this membership?",callback:function(e){e&&$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"reinstate",membership_id:s,user_id:r},success:function(e){e.processor_success?bounce(window.location.href):dd_message({title:"Processing Error",message:e.processor_message})},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})}})})),$(document).on("click",".apply-coupon",(function(e){var s=$("#discount_coupon").val().trim(),r=$("#discount_coupon").data("user_id"),o=$("#discount_coupon").data("store_id");""==s?($("#discount_coupon").data("discount_var",0),$("#discount_coupon").data("discount_method",0),$("#product").trigger("change")):$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_user_membership",op:"check_coupon",coupon_code:s,user_id:r,store_id:o},success:function(e){e.processor_success?($("#discount_coupon").data("discount_var",e.discount_var),$("#discount_coupon").data("discount_method",e.discount_method),$("#product").trigger("change")):dd_message({title:"Processing Error",message:e.processor_message})},error:function(e,s){dd_message({title:"Error",message:response="Unexpected error:"+s})}})}));
//# sourceMappingURL=user_membership.min.js.map