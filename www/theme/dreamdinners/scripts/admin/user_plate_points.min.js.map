{"version":3,"names":["PlatePoints_init","currentUser","set_platepoints_progress_bar","$","data","on","orderMsg","numConfirmableOrders","dd_message","title","div_id","message","modal","width","height","confirm","submit","document","event","preventDefault","user_id","this","current_page","cached","localStorage","setItem","ajax","url","type","timeout","dataType","page","processor","op","success","json","status","processor_success","html","alert","error","objAJAXRequest","strError","restorePagingLocation","getItem","ddpage","dd_user_id"],"sourceRoot":"js/src/admin","sources":["user_plate_points.js"],"sourcesContent":["function PlatePoints_init(currentUser)\r\n{\r\n\tset_platepoints_progress_bar((($('#pp_progressbar').data('percent_complete') == 0) ? 1 : $('#pp_progressbar').data('percent_complete')), false);\r\n\r\n\t$(\"#suspend_member\").on(\"click\", function () {\r\n\r\n\r\n\t\tvar orderMsg = \"\";\r\n\t\tif (numConfirmableOrders > 1)\r\n\t\t{\r\n\t\t\torderMsg = \" \" + numConfirmableOrders + \" orders will be confirmed.\";\r\n\t\t}\r\n\t\telse if (numConfirmableOrders == 1)\r\n\t\t{\r\n\t\t\torderMsg = \" 1 order will be confirmed.\";\r\n\t\t}\r\n\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Suspend PLATEPOINTS membership',\r\n\t\t\tdiv_id: 'aPaBO',\r\n\t\t\tmessage: 'Are you sure you want to place this guest on hold?' + orderMsg,\r\n\t\t\tmodal: true,\r\n\t\t\twidth: 400,\r\n\t\t\theight: 160,\r\n\t\t\tconfirm: function ()\r\n\t\t\t{\r\n\t\t\t\t$(\"#suspend_form\").submit();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn  false;\r\n\r\n\t});\r\n\r\n\r\n\t$(\"#reactivate_member\").on(\"click\", function () {\r\n\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Suspend PLATEPOINTS membership',\r\n\t\t\tdiv_id: 'aPaBO',\r\n\t\t\tmessage: 'Are you sure want to reinstate this guest?',\r\n\t\t\tmodal: true,\r\n\t\t\twidth: 400,\r\n\t\t\theight: 160,\r\n\t\t\tconfirm: function ()\r\n\t\t\t{\r\n\t\t\t\t$(\"#suspend_form\").submit();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn  false;\r\n\r\n\t});\r\n\r\n\t//***** Paging Controls\r\n\t$(document).on(\"click\", \".points-page-prev\", function (event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tlet user_id = $(this).data('user');\r\n\t\tlet current_page = $(this).data('current');\r\n\r\n\t\tlet cached = current_page;\r\n\r\n\t\tif(cached > 0){\r\n\t\t\tcached = cached -2;\r\n\t\t}\r\n\r\n\t\tlocalStorage.setItem('history-paging-current',cached);\r\n\t\tlocalStorage.setItem('history-paging-user',user_id);\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: current_page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'prev'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#history').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".points-page-next\",function (event) {\r\n\t\tevent.preventDefault();\r\n\r\n\r\n\t\tlet user_id = $(this).data('user');\r\n\t\tlet current_page = $(this).data('current');\r\n\r\n\t\tlocalStorage.setItem('history-paging-current',current_page);\r\n\t\tlocalStorage.setItem('history-paging-user',user_id);\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: current_page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'next'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#history').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".dollars-page-prev\", function (event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tlet user_id = $(this).data('user');\r\n\t\tlet current_page = $(this).data('current');\r\n\r\n\t\tlet cached = current_page;\r\n\r\n\t\tif(cached > 0){\r\n\t\t\tcached = cached -2;\r\n\t\t}\r\n\r\n\t\tlocalStorage.setItem('dollars-history-paging-current',cached);\r\n\t\tlocalStorage.setItem('dollars-history-paging-user',user_id);\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: current_page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'dd-prev'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".dollars-page-next\",function (event) {\r\n\t\tevent.preventDefault();\r\n\r\n\r\n\t\tlet user_id = $(this).data('user');\r\n\t\tlet current_page = $(this).data('current');\r\n\r\n\t\tlocalStorage.setItem('dollars-history-paging-current',current_page);\r\n\t\tlocalStorage.setItem('dollars-history-paging-user',user_id);\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: current_page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'dd-next'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\trestorePagingLocation(currentUser);\r\n}\r\nfunction restorePagingLocation(currentUser)\r\n{\r\n\tlet page = localStorage.getItem('history-paging-current');\r\n\tlet ddpage = localStorage.getItem('dollars-history-paging-current');\r\n\tlet user_id = localStorage.getItem('history-paging-user');\r\n\tlet dd_user_id = localStorage.getItem('history-paging-user');\r\n\r\n\tif(user_id != currentUser){\r\n\t\tlocalStorage.setItem('history-paging-current',null);\r\n\t\tlocalStorage.setItem('history-paging-user',null);\r\n\t\tlocalStorage.setItem('dollars-history-paging-current',null);\r\n\t\tlocalStorage.setItem('dollars-history-paging-user',null);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (page != null && typeof page !== 'undefined' && user_id != null && typeof user_id !== 'undefined'){\r\n\t\t$('#history').html('');\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'next'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#history').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('#dinner_dollar_history_table').html('');\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: dd_user_id,\r\n\t\t\t\tpage: ddpage,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'dd-next'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"}