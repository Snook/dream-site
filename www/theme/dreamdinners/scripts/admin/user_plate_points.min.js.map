{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["user_plate_points.js"],"sourcesContent":["function PlatePoints_init(currentUser)\r\n{\r\n\tset_platepoints_progress_bar((($('#pp_progressbar').data('percent_complete') == 0) ? 1 : $('#pp_progressbar').data('percent_complete')), false);\r\n\r\n\t$(\"#suspend_member\").on(\"click\", function () {\r\n\r\n\r\n\t\tvar orderMsg = \"\";\r\n\t\tif (numConfirmableOrders > 1)\r\n\t\t{\r\n\t\t\torderMsg = \" \" + numConfirmableOrders + \" orders will be confirmed.\";\r\n\t\t}\r\n\t\telse if (numConfirmableOrders == 1)\r\n\t\t{\r\n\t\t\torderMsg = \" 1 order will be confirmed.\";\r\n\t\t}\r\n\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Suspend PLATEPOINTS membership',\r\n\t\t\tdiv_id: 'aPaBO',\r\n\t\t\tmessage: 'Are you sure you want to place this guest on hold?' + orderMsg,\r\n\t\t\tmodal: true,\r\n\t\t\twidth: 400,\r\n\t\t\theight: 160,\r\n\t\t\tconfirm: function ()\r\n\t\t\t{\r\n\t\t\t\t$(\"#suspend_form\").submit();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn  false;\r\n\r\n\t});\r\n\r\n\r\n\t$(\"#reactivate_member\").on(\"click\", function () {\r\n\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Suspend PLATEPOINTS membership',\r\n\t\t\tdiv_id: 'aPaBO',\r\n\t\t\tmessage: 'Are you sure want to reinstate this guest?',\r\n\t\t\tmodal: true,\r\n\t\t\twidth: 400,\r\n\t\t\theight: 160,\r\n\t\t\tconfirm: function ()\r\n\t\t\t{\r\n\t\t\t\t$(\"#suspend_form\").submit();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn  false;\r\n\r\n\t});\r\n\r\n\t//***** Paging Controls\r\n\t$(document).on(\"click\", \".points-page-prev\", function (event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tlet user_id = $(this).data('user');\r\n\t\tlet current_page = $(this).data('current');\r\n\r\n\t\tlet cached = current_page;\r\n\r\n\t\tif(cached > 0){\r\n\t\t\tcached = cached -2;\r\n\t\t}\r\n\r\n\t\tlocalStorage.setItem('history-paging-current',cached);\r\n\t\tlocalStorage.setItem('history-paging-user',user_id);\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: current_page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'prev'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#history').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".points-page-next\",function (event) {\r\n\t\tevent.preventDefault();\r\n\r\n\r\n\t\tlet user_id = $(this).data('user');\r\n\t\tlet current_page = $(this).data('current');\r\n\r\n\t\tlocalStorage.setItem('history-paging-current',current_page);\r\n\t\tlocalStorage.setItem('history-paging-user',user_id);\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: current_page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'next'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#history').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".dollars-page-prev\", function (event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tlet user_id = $(this).data('user');\r\n\t\tlet current_page = $(this).data('current');\r\n\r\n\t\tlet cached = current_page;\r\n\r\n\t\tif(cached > 0){\r\n\t\t\tcached = cached -2;\r\n\t\t}\r\n\r\n\t\tlocalStorage.setItem('dollars-history-paging-current',cached);\r\n\t\tlocalStorage.setItem('dollars-history-paging-user',user_id);\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: current_page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'dd-prev'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".dollars-page-next\",function (event) {\r\n\t\tevent.preventDefault();\r\n\r\n\r\n\t\tlet user_id = $(this).data('user');\r\n\t\tlet current_page = $(this).data('current');\r\n\r\n\t\tlocalStorage.setItem('dollars-history-paging-current',current_page);\r\n\t\tlocalStorage.setItem('dollars-history-paging-user',user_id);\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: current_page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'dd-next'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn false;\r\n\t});\r\n\trestorePagingLocation(currentUser);\r\n}\r\nfunction restorePagingLocation(currentUser)\r\n{\r\n\tlet page = localStorage.getItem('history-paging-current');\r\n\tlet ddpage = localStorage.getItem('dollars-history-paging-current');\r\n\tlet user_id = localStorage.getItem('history-paging-user');\r\n\tlet dd_user_id = localStorage.getItem('history-paging-user');\r\n\r\n\tif(user_id != currentUser){\r\n\t\tlocalStorage.setItem('history-paging-current',null);\r\n\t\tlocalStorage.setItem('history-paging-user',null);\r\n\t\tlocalStorage.setItem('dollars-history-paging-current',null);\r\n\t\tlocalStorage.setItem('dollars-history-paging-user',null);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (page != null && typeof page !== 'undefined' && user_id != null && typeof user_id !== 'undefined'){\r\n\t\t$('#history').html('');\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: user_id,\r\n\t\t\t\tpage: page,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'next'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#history').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('#dinner_dollar_history_table').html('');\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 100000000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tuser_id: dd_user_id,\r\n\t\t\t\tpage: ddpage,\r\n\t\t\t\tprocessor: 'admin_user_plate_points',\r\n\t\t\t\top: 'dd-next'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('NOT OK');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\r\n\t\t\t\talert('AJAX ERROR');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":["PlatePoints_init","currentUser","set_platepoints_progress_bar","$","data","on","orderMsg","numConfirmableOrders","dd_message","title","div_id","message","modal","width","height","confirm","submit","document","event","preventDefault","let","user_id","this","current_page","cached","localStorage","setItem","ajax","url","type","timeout","dataType","page","processor","op","success","json","status","processor_success","html","alert","error","objAJAXRequest","strError","restorePagingLocation","getItem","ddpage","dd_user_id"],"mappings":"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"}