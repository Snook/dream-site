{"version":3,"file":"user_plate_points.min.js","names":["PlatePoints_init","currentUser","set_platepoints_progress_bar","$","data","on","orderMsg","numConfirmableOrders","dd_message","title","div_id","message","modal","width","height","confirm","submit","document","event","preventDefault","user_id","this","current_page","cached","localStorage","setItem","ajax","url","type","timeout","dataType","page","processor","op","success","json","status","processor_success","html","alert","error","objAJAXRequest","strError","restorePagingLocation","getItem","ddpage","dd_user_id"],"sourceRoot":"js/src/dreamdinners/admin","sources":["user_plate_points.js"],"sourcesContent":["function PlatePoints_init(currentUser)\n{\n\tset_platepoints_progress_bar((($('#pp_progressbar').data('percent_complete') == 0) ? 1 : $('#pp_progressbar').data('percent_complete')), false);\n\n\t$(\"#suspend_member\").on(\"click\", function () {\n\n\n\t\tvar orderMsg = \"\";\n\t\tif (numConfirmableOrders > 1)\n\t\t{\n\t\t\torderMsg = \" \" + numConfirmableOrders + \" orders will be confirmed.\";\n\t\t}\n\t\telse if (numConfirmableOrders == 1)\n\t\t{\n\t\t\torderMsg = \" 1 order will be confirmed.\";\n\t\t}\n\n\t\tdd_message({\n\t\t\ttitle: 'Suspend PLATEPOINTS membership',\n\t\t\tdiv_id: 'aPaBO',\n\t\t\tmessage: 'Are you sure you want to place this guest on hold?' + orderMsg,\n\t\t\tmodal: true,\n\t\t\twidth: 400,\n\t\t\theight: 160,\n\t\t\tconfirm: function ()\n\t\t\t{\n\t\t\t\t$(\"#suspend_form\").submit();\n\t\t\t}\n\t\t});\n\n\t\treturn  false;\n\n\t});\n\n\n\t$(\"#reactivate_member\").on(\"click\", function () {\n\n\t\tdd_message({\n\t\t\ttitle: 'Suspend PLATEPOINTS membership',\n\t\t\tdiv_id: 'aPaBO',\n\t\t\tmessage: 'Are you sure want to reinstate this guest?',\n\t\t\tmodal: true,\n\t\t\twidth: 400,\n\t\t\theight: 160,\n\t\t\tconfirm: function ()\n\t\t\t{\n\t\t\t\t$(\"#suspend_form\").submit();\n\t\t\t}\n\t\t});\n\n\t\treturn  false;\n\n\t});\n\n\t//***** Paging Controls\n\t$(document).on(\"click\", \".points-page-prev\", function (event) {\n\t\tevent.preventDefault();\n\n\t\tlet user_id = $(this).data('user');\n\t\tlet current_page = $(this).data('current');\n\n\t\tlet cached = current_page;\n\n\t\tif(cached > 0){\n\t\t\tcached = cached -2;\n\t\t}\n\n\t\tlocalStorage.setItem('history-paging-current',cached);\n\t\tlocalStorage.setItem('history-paging-user',user_id);\n\n\t\t$.ajax({\n\t\t\turl: 'ddproc.php',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\tpage: current_page,\n\t\t\t\tprocessor: 'admin_user_plate_points',\n\t\t\t\top: 'prev'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#history').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\talert('NOT OK');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('AJAX ERROR');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn false;\n\t});\n\n\t$(document).on(\"click\", \".points-page-next\",function (event) {\n\t\tevent.preventDefault();\n\n\n\t\tlet user_id = $(this).data('user');\n\t\tlet current_page = $(this).data('current');\n\n\t\tlocalStorage.setItem('history-paging-current',current_page);\n\t\tlocalStorage.setItem('history-paging-user',user_id);\n\t\t$.ajax({\n\t\t\turl: 'ddproc.php',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\tpage: current_page,\n\t\t\t\tprocessor: 'admin_user_plate_points',\n\t\t\t\top: 'next'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#history').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\talert('NOT OK');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('AJAX ERROR');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn false;\n\t});\n\n\t$(document).on(\"click\", \".dollars-page-prev\", function (event) {\n\t\tevent.preventDefault();\n\n\t\tlet user_id = $(this).data('user');\n\t\tlet current_page = $(this).data('current');\n\n\t\tlet cached = current_page;\n\n\t\tif(cached > 0){\n\t\t\tcached = cached -2;\n\t\t}\n\n\t\tlocalStorage.setItem('dollars-history-paging-current',cached);\n\t\tlocalStorage.setItem('dollars-history-paging-user',user_id);\n\n\t\t$.ajax({\n\t\t\turl: 'ddproc.php',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\tpage: current_page,\n\t\t\t\tprocessor: 'admin_user_plate_points',\n\t\t\t\top: 'dd-prev'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\talert('NOT OK');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('AJAX ERROR');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn false;\n\t});\n\n\t$(document).on(\"click\", \".dollars-page-next\",function (event) {\n\t\tevent.preventDefault();\n\n\n\t\tlet user_id = $(this).data('user');\n\t\tlet current_page = $(this).data('current');\n\n\t\tlocalStorage.setItem('dollars-history-paging-current',current_page);\n\t\tlocalStorage.setItem('dollars-history-paging-user',user_id);\n\t\t$.ajax({\n\t\t\turl: 'ddproc.php',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\tpage: current_page,\n\t\t\t\tprocessor: 'admin_user_plate_points',\n\t\t\t\top: 'dd-next'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\talert('NOT OK');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('AJAX ERROR');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn false;\n\t});\n\trestorePagingLocation(currentUser);\n}\nfunction restorePagingLocation(currentUser)\n{\n\tlet page = localStorage.getItem('history-paging-current');\n\tlet ddpage = localStorage.getItem('dollars-history-paging-current');\n\tlet user_id = localStorage.getItem('history-paging-user');\n\tlet dd_user_id = localStorage.getItem('history-paging-user');\n\n\tif(user_id != currentUser){\n\t\tlocalStorage.setItem('history-paging-current',null);\n\t\tlocalStorage.setItem('history-paging-user',null);\n\t\tlocalStorage.setItem('dollars-history-paging-current',null);\n\t\tlocalStorage.setItem('dollars-history-paging-user',null);\n\t\treturn;\n\t}\n\n\tif (page != null && typeof page !== 'undefined' && user_id != null && typeof user_id !== 'undefined'){\n\t\t$('#history').html('');\n\t\t$.ajax({\n\t\t\turl: 'ddproc.php',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\tpage: page,\n\t\t\t\tprocessor: 'admin_user_plate_points',\n\t\t\t\top: 'next'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#history').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\talert('NOT OK');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('AJAX ERROR');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\t$('#dinner_dollar_history_table').html('');\n\t\t$.ajax({\n\t\t\turl: 'ddproc.php',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: dd_user_id,\n\t\t\t\tpage: ddpage,\n\t\t\t\tprocessor: 'admin_user_plate_points',\n\t\t\t\top: 'dd-next'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#dinner_dollar_history_table').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\talert('NOT OK');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('AJAX ERROR');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n}\n\n\n\n\n"],"mappings":"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"}