{"version":3,"file":"reports_goal_management.min.js","names":["hasChangedCOGS","reports_goal_management_init","$","bind","e","keyCode","init_exposure_controls","init_session_lead_dropdowns","init_goal_inputs","init_food_cost_inputs","init_labor_cost_inputs","init_money_formatting","init_update_p_and_l_data","calculatePage","each","this","val","addFormatting","stickyTableHeaders","focus","removeFormatting","blur","keypress","which","change","isNaN","total_expenses","Number","agr","html","marketing_total","royalty_total","net_income","keyup","click","validation_error_occurred","dd_message","title","message","dataObj","id","data","ajax","url","type","timeout","dataType","processor","store_id","month","year","p_and_l_data","success","json","processor_success","dd_toast","processor_message","error","objAJAXRequest","strError","response","goal","value","updateGOGSfields","dateStr","date","op","weekNum","food_costs","thisCost","length","labor_costs","on","once","status","height","width","div_id","closeOnEscape","noOk","dayClickHandler","SE_dayClickHandler","initExpensesDialog","roundToTenths","mnt","Math","round","floor","_report_submitClick","form","parseInt","remove","stringVal","replace","numericVal","accounting","formatMoney","total_sessions","average_ticket","ft_goal","regular_guest_count_goal","taste_guest_count_goal","intro_guest_count_goal","standard_session_guest_goal","revenue_goal","org_revenue_goal","dateObj","Date","monthisCurrent","todaysDayNumber","getDate","lastGoalAmount","lastFTGoalAmount","todate_SessionCount","todate_GrossRevenue","todate_GuestCount","todate_FT_Total","updatedSessionGoal","remaining_session_count","totalMonthGrossRevenue","totalMonthFTRevenue","totalMonthGrossRevenueMinusTaste","encounteredFirstFutureSession","remainingFTGoal","per_customer_goal","attr","this_sessions_goal","this_sessions_ft_goal","session_id","substr","dayNumber","thisSessionActual","thisSessionActualFT","isTaste","month_is_future","dd_console_log","thisFutureSessionTotalGuestCount","formatAsMoney","addClass","removeClass","thisSessionTotalGuestCount","thisSessionFTTotal","FT_months_total","ma_guest_count_months_total","guestCountTotalMinusTaste","monthly_food_costs","params","split","percentage_name","total_name","foodCost","total","percent","monthly_labor_costs","laborCost","month_is_passed","actual_avg_ticket","guestsGoal","lastDay","lastWeek","dailyTotal","weeklyTotal","dailyFTTotal","weeklyFTTotal","curCalWeekTotal","curCalWeekFTTotal","thisDay","thisWeek","hasPreviousMonthSessions","hasFutureMonthSessions","temp","tempFT","amount","amountFT","user_id","week_num","alt_num_display_name","hide","show","theRow","parent","parts","day_num","alt_week_num_display_name","alt_day_num_display_name"],"sourceRoot":"js/src/dreamdinners/admin","sources":["reports_goal_management.js"],"sourcesContent":["var hasChangedCOGS = false;\n\nfunction reports_goal_management_init()\n{\n\n\t$('html').bind('keypress', function(e)\n\t{\n\t   if(e.keyCode == 13)\n\t   {\n\t      return false;\n\t   }\n\t});\n\n\tinit_exposure_controls();\n\n\tinit_session_lead_dropdowns();\n\n\tinit_goal_inputs();\n\n\tinit_food_cost_inputs();\n\tinit_labor_cost_inputs();\n\n\tinit_money_formatting();\n\n\tinit_update_p_and_l_data();\n\n\tcalculatePage();\n\n\n\t$(\".gt_input\").each(function() {\n\t\t$(this).val(addFormatting($(this).val()));\n\t});\n\n    $(\"#session_summary_table\").stickyTableHeaders();\n}\n\nfunction init_money_formatting()\n{\n\t$(\".gt_input\").focus(function() {\n\t\t$(this).val(removeFormatting($(this).val()));\n\t});\n\n\n\t$(\".gt_input\").blur(function() {\n\t\t$(this).val(addFormatting($(this).val()));\n\t});\n\n\n\t$(\".gt_input\").keypress(function(e) {\n\t\tif (e.which == 188 ||  // comma\n\t\t\te.which == 190 ||  //  ...? ...\n\t\t\te.which  == 46 || // decimal\n\t\t\te.which == 45  || // negative sign for FireFox\n\t\t\te.keyCode == 8 ||  // delete\n\t\t\te.keyCode == 9 ||  // tab\n\t\t\te.keyCode == 37 || //left arrow\n\t\t\te.keyCode == 39 || // right arrow\n\t\t\te.keyCode == 45 || // negative sign\n\t\t\t(e.which > 47 && e.which < 58 )) // numbers\n\t\t{\n\t\t\t\treturn true;\n\t\t}\n\t\telse if (e.keyCode == 13)\n\t\t{\n\t\t\t$(this).blur();\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t});\n\n\t$(\".gt_input\").change(function() {\n\t\t\tif (isNaN($(this).val()))\n\t\t\t\treturn false;\n\t});\n\n\n}\n\nfunction init_update_p_and_l_data()\n{\n\n\tvar total_expenses = Number(0);\n\t$('[data-dd_subtype=\"expense\"]').each(function() {\n\t\ttotal_expenses += Number(removeFormatting($(this).val()));\n\t});\n\n\tvar agr = Number(removeFormatting($(\"#p_and_l_total_agr\").html()));\n\tvar marketing_total = Number(removeFormatting($(\"#p_and_l_marketing_total\").html()));\n\tvar royalty_total = Number(removeFormatting($(\"#p_and_l_royalty_total\").html()));\n\tvar net_income = Number(removeFormatting($(\"#net_income\").val()));\n\n\t$(\"#other_expenses\").val(addFormatting(agr - (total_expenses + marketing_total + royalty_total) - net_income));\n\n\n\n\t$(\".gt_input\").keyup(function() {\n\n\t\tvar net_income = Number(removeFormatting($(\"#net_income\").val()));\n\n\t\tvar total_expenses =  Number(0);\n\t\t$('[data-dd_subtype=\"expense\"]').each(function() {\n\t\t\ttotal_expenses += Number(removeFormatting($(this).val()));\n\t\t});\n\n\t\tvar agr = Number(removeFormatting($(\"#p_and_l_total_agr\").html()));\n\n\t\t$(\"#other_expenses\").val(addFormatting(agr - (total_expenses + marketing_total + royalty_total)- net_income));\n\t});\n\n\n\t$(\"#update_p_and_l\").click(function()\n\t{\n\t\tvar validation_error_occurred = false;\n\n\t\t$(\"#owner_hours, #employee_hours, #manager_hours\").each(function()\n\t\t{\n\t\t\tif (isNaN($(this).val()))\n\t\t\t{\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tmessage: \"The hours fields must be a number.\"\n\t\t\t\t});\n\n\t\t\t\tvalidation_error_occurred = true;\n\n\t\t\t}\n\t\t});\n\n\t\tif (validation_error_occurred)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tvar dataObj = {};\n\n\t\t$(\"#finance_tab input\").each(function() {\n\t\t\tdataObj[this.id] = removeFormatting($(this).val());\n\t\t});\n\n\t\t$(\"#finance_tab input\").each(function() {\n\t\t\tif (dataObj[this.id] == \"\") dataObj[this.id] = \"not supplied\";\n\t\t});\n\n\t\tif ($(\"#cost_of_goods_and_services\").data(\"org_value\") != $(\"#cost_of_goods_and_services\").val())\n\t\t{\n\t\t\thasChangedCOGS = true;\n\t\t}\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata : {\n\t\t\t\tprocessor: 'admin_p_and_l_data',\n\t\t\t\tstore_id: store_id,\n\t\t\t\tmonth: month,\n\t\t\t\tyear: year,\n\t\t\t\tp_and_l_data: dataObj,\n\t\t\t},\n\t\t\tsuccess: function(json)\n\t\t\t{\n\t\t\t\tif(json.processor_success)\n\t\t\t\t{\n\t\t\t\t\tdd_toast({message: \"Your data was saved.\"});\n\n\t\t\t\t\tif (hasChangedCOGS)\n\t\t\t\t\t{\n\t\t\t\t\t\thasChangedCOGS = false;\n\t\t\t\t\t\t$(\"#cogs_msg\").html(\"\");\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(objAJAXRequest, strError)\n\t\t\t{\n\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tmessage: response\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t\treturn false;\n\n\t});\n}\n\n\nfunction init_goal_inputs()\n{\n\t$(\"#avg_ticket_goal,#finishing_touch_goal,#taste_sessions_goal,#regular_guest_count_goal,#taste_guest_count_goal,#intro_guest_count_goal\").change(function()\n\t{\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata : {\n\t\t\t\tprocessor: 'admin_sessionGoals',\n\t\t\t\tstore_id: store_id,\n\t\t\t\tmonth: month,\n\t\t\t\tyear: year,\n\t\t\t\tgoal: this.id,\n\t\t\t\tvalue: removeFormatting($(this).val())\n\t\t\t},\n\t\t\tsuccess: function(json)\n\t\t\t{\n\t\t\t\tif(json.processor_success)\n\t\t\t\t{\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(objAJAXRequest, strError)\n\t\t\t{\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\n\t\t});\n\n\t});\n}\n\nfunction updateGOGSfields(month, year)\n{\n\n\tvar dateStr = month + \"-1-\" + year;\n\n\t$.ajax({\n\t\turl: '/processor',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata : {\n\t\t\tprocessor: 'admin_expensesData',\n\t\t\tstore_id: store_id,\n\t\t\tdate: dateStr,\n\t\t\top: 'retrieveForMonth'\n\t\t},\n\t\tsuccess: function(json)\n\t\t{\n\t\t\t// set all to zero so deleted entries aren't left at the original value\n\t\t\t$(\"[id^='fc_']\").val(addFormatting(\"0.00\"));\n\t\t\t $(\"[id^='lc_']\").val(addFormatting(\"0.00\"));\n\n\t\t\tif (json.processor_success)\n\t\t\t{\n\t\t\t\tfor (var weekNum in json.food_costs)\n\t\t\t\t{\n\n\t\t\t\t\t var thisCost = json.food_costs[weekNum];\n\n\t\t\t\t\tif (weekNum.length == 1)\n\t\t\t\t\t\tweekNum = \"0\" + weekNum;\n\n\t\t\t\t\tif (weekNum == \"00\")\n\t\t\t\t\t\tweekNum = '53';\n\n\t\t\t\t\t $(\"#fc_\" + weekNum + \"_\" + year).val(addFormatting(thisCost));\n\t\t\t\t}\n\n\t\t\t\tfor (var weekNum in json.labor_costs)\n\t\t\t\t{\n\t\t\t\t\t var thisCost = json.labor_costs[weekNum];\n\n\t\t\t\t\t\tif (weekNum.length == 1)\n\t\t\t\t\t\t\tweekNum = \"0\" + weekNum;\n\n\t\t\t\t\t\tif (weekNum == \"00\")\n\t\t\t\t\t\t\tweekNum = '53';\n\n\n\t\t\t\t\t $(\"#lc_\" + weekNum + \"_\" + year).val(addFormatting(thisCost));\n\n\n\t\t\t\t}\n\n\t\t\t\tcalculatePage();\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\terror: function(objAJAXRequest, strError)\n\t\t{\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Error',\n\t\t\t\tmessage: json.strError\n\t\t\t});\n\t\t}\n\t});\n}\n\n\nfunction init_food_cost_inputs()\n{\n\n\n\t$(\"[id^=fc_]\").on('click', function ()\n\t{\n\n\t\t$.ajax({\n\t\t\turl: '/backoffice/store_expenses_v2',\n\t\t\ttype: 'POST',\n\t\t\tonce: false,\n\t\t\tdata : {\n\t\t\t\tstore_id: store_id,\n\t\t\t\tmonth: month,\n\t\t\t\tyear: year\n\t\t\t},\n\t\t\tsuccess: function(data, status)\n\t\t\t{\n\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Input Expenses',\n\t\t\t\t\tmessage: data,\n\t\t\t\t\theight: 'auto',\n\t\t\t\t\twidth: 740,\n\t\t\t\t\tdiv_id: 'cost_inputter',\n\t\t\t\t\tcloseOnEscape: true,\n\t\t\t\t\tnoOk: true\n\t\t\t\t});\n\n\n\t\t\t\tdayClickHandler = SE_dayClickHandler;\n\n\n\n\t\t\t\tinitExpensesDialog();\n\n\n\t\t\t},\n\t\t\terror: function(objAJAXRequest, strError)\n\t\t\t{\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\n\t\t});\n\n\t});\n\n\n}\n\nfunction init_labor_cost_inputs()\n{\n\n\t$(\"[id^=lc_]\").on('click', function ()\n\t{\n\t\t$.ajax({\n\t\t\turl: '/backoffice/store_expenses_v2',\n\t\t\ttype: 'POST',\n\t\t\tonce: false,\n\t\t\tdata : {\n\t\t\t\tstore_id: store_id,\n\t\t\t\tmonth: month,\n\t\t\t\tyear: year\n\t\t\t},\n\t\t\tsuccess: function(data, status)\n\t\t\t{\n\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Input Expenses',\n\t\t\t\t\tmessage: data,\n\t\t\t\t\theight: 'auto',\n\t\t\t\t\twidth: 740,\n\t\t\t\t\tdiv_id: 'cost_inputter',\n\t\t\t\t\tcloseOnEscape: true,\n\t\t\t\t\tnoOk: true\n\t\t\t\t});\n\n\t\t\t\tdayClickHandler = SE_dayClickHandler;\n\t\t\t\tinitExpensesDialog();\n\n\t\t\t},\n\t\t\terror: function(objAJAXRequest, strError)\n\t\t\t{\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\n\t\t});\n\n\t});\n\n}\n\nfunction roundToTenths(mnt)\n{\n\tmnt -= 0;\n\tmnt = (Math.round(mnt*10))/10;\n\treturn (mnt == Math.floor(mnt)) ? mnt + '.0'\n\t\t\t : ( (mnt == Math.floor(mnt)) ?\n\t\t\t\t\t mnt + '0' : mnt);\n}\n\n\nfunction _report_submitClick(form)\n{\n\tvar year = parseInt($(\"#year_field_001\").val());\n\n\tif (isNaN(year))\n\t{\n\t\t// error\n\t\tdd_message({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: 'The year is not an integer.'\n\t\t});\n\t\treturn false;\n\t}\n\telse if (year < 2011)\n\t{\n\t\t//error\n\t\tdd_message({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: 'The year must be greater than 2010.'\n\t\t});\n\n\t\treturn false;\n\t}\n\n \t $(\"#avg_ticket_goal\").remove();\n\t $(\"#finishing_touch_goal\").remove();\n\t $(\"#taste_sessions_goal\").remove();\n\t $(\"#regular_guest_count_goal\").remove();\n\t $(\"#taste_guest_count_goal\").remove();\n\t $(\"#intro_guest_count_goal\").remove();\n\n\t $(\"[data-dd_type='p&l_widget']\").remove();\n\n\n\treturn true;\n\n}\n\nfunction removeFormatting(stringVal)\n{\n\n\tif (stringVal == null || stringVal == \"\") return stringVal;\n\n\tstringVal = stringVal.replace(/,/, \"\");\n\tstringVal = stringVal.replace(/\\$/, \"\");\n\n\treturn stringVal;\n}\n\n\nfunction addFormatting(numericVal)\n{\n\tif (numericVal == null || numericVal == \"\") return \"\";\n\n\tnumericVal = accounting.formatMoney(numericVal,\"$\",2,\",\",\".\",\"%s%v\");\n\n\treturn numericVal;\n}\n\n\nfunction calculatePage()\n{\n\n\t//var revenue_goal = removeFormatting($(\"#gross_revenue_goal\").val());\n\t// var org_revenue_goal = revenue_goal;\n\n\tvar total_sessions = $(\"#nonTasteSessionCount\").val();\n\tvar average_ticket = removeFormatting($(\"#avg_ticket_goal\").val());\n\tvar ft_goal = removeFormatting($(\"#finishing_touch_goal\").val());\n\n\tvar regular_guest_count_goal = removeFormatting($(\"#regular_guest_count_goal\").val());\n\tvar taste_guest_count_goal = removeFormatting($(\"#taste_guest_count_goal\").val());\n\tvar intro_guest_count_goal = removeFormatting($(\"#intro_guest_count_goal\").val());\n\n\tvar standard_session_guest_goal = (regular_guest_count_goal * 1) + (intro_guest_count_goal * 1);\n\n\tvar revenue_goal = (regular_guest_count_goal * average_ticket) + (taste_guest_count_goal * 34.99) + (intro_guest_count_goal * 84.95);\n\tvar org_revenue_goal = revenue_goal;\n\n\t$(\"#gross_revenue_goal\").html(addFormatting(revenue_goal));\n\n\t$(\"#calendar_month_goal\").html(addFormatting(revenue_goal));\n\t$(\"#FT_months_total_goal\").html(addFormatting(ft_goal));\n\n\tvar dateObj = new Date();\n\n\tvar monthisCurrent = $(\"#isCurrentMonth\").val() == \"true\";\n\n\t//dd_console_log(\"Date: \" + dateObj.getDate());\n\n\tvar todaysDayNumber = dateObj.getDate();\n\n\tvar lastGoalAmount = 0;\n\tvar lastFTGoalAmount = 0;\n\tvar todate_SessionCount = 0;\n\tvar todate_GrossRevenue = 0;\n\tvar todate_GuestCount = 0;\n\tvar todate_FT_Total = 0;\n\tvar updatedSessionGoal = false;\n\tvar updatedSessionFTGoal = false;\n\tvar remaining_session_count = 0;\n\tvar totalMonthGrossRevenue = 0;\n\tvar totalMonthFTRevenue = 0;\n\tvar totalMonthGrossRevenueMinusTaste = 0;\n\tvar encounteredFirstFutureSession = false;\n\t//\tvar totalMonthFTRevenue = 0; ?\n\tvar totalCurrentGuests = $('#guest_count_months_total').html();\n\n\t/*\n\tif (average_ticket > 0)\n\t\t$(\"#guests_goal\").html(Math.round(revenue_goal / average_ticket));\n\telse\n\t\t$(\"#guests_goal\").html(\"0\");\n\t*/\n\n\t$(\"#sg_gross_revenue_goal\").html(addFormatting(revenue_goal / total_sessions));\n\t$(\"#sg_avg_ticket_goal\").html(addFormatting($(\"#avg_ticket_goal\").val()));\n\t$('#sg_guests_goal').html(roundToTenths($(\"#guests_goal\").html() / total_sessions));\n\t$('#sg_finishing_touch_goal').html(addFormatting(ft_goal / total_sessions));\n\tvar remainingFTGoal = ft_goal;\n\tvar per_customer_goal = 0;\n\n\n\t$(\"[id^=dre_]\").each(function()\n\t{\n\n\t\tif ($(this).attr('data-in_month') == 'true')\n\t\t{\n\t\t\tvar this_sessions_goal = 0;\n\t\t\tvar this_sessions_ft_goal  = 0;\n\t\t\tvar session_id = this.id.substr(4);\n\t\t//\tvar ordPos = new Number($(this).attr('data-ord_pos'));\n\t\t\tvar dayNumber = $(this).attr('data-day_number');\n\n\t\t\tvar thisSessionActual = removeFormatting($(\"#dac_\" + session_id).html());\n\t\t\tvar thisSessionActualFT = removeFormatting($(\"#ftt_\" + session_id).html());\n\n\t\t\tvar isTaste = ($(this).attr('data-is_taste') == 'true');\n\n\t\t\ttotalMonthGrossRevenue += (thisSessionActual * 1);\n\t\t\ttotalMonthFTRevenue += (thisSessionActualFT * 1);\n\n\t\t\tif (!isTaste)\n\t\t\t\ttotalMonthGrossRevenueMinusTaste += (thisSessionActual * 1);\n\n\n\t\t\tif ((monthisCurrent && dayNumber > todaysDayNumber) || month_is_future)\n\t\t\t{\n\t\t\t\tdd_console_log(\"Pos: \" + session_id + \" | toDataGuestCount: \" +  todate_GuestCount);\n\n\t\t\t\tif (!isTaste)\n\t\t\t\t{\n\n\t\t\t\t\tif (!encounteredFirstFutureSession)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis_sessions_goal = revenue_goal / total_sessions;\n\t\t\t\t\t\tlastGoalAmount = this_sessions_goal;\n\n\t\t\t\t\t\t//this_sessions_ft_goal = remainingFTGoal / total_sessions;\n\t\t\t\t\t\t//lastFTGoalAmount = this_sessions_ft_goal;\n\n\t\t\t\t\t\tper_customer_goal = remainingFTGoal / (standard_session_guest_goal - todate_GuestCount)\n\n\t\t\t\t\t}\n\n\t\t\t\t\tencounteredFirstFutureSession = true;\n\n\n\t\t\t\t\tvar thisFutureSessionTotalGuestCount = $(\"#sgc_\" + session_id).html();\n\n\n\t\t\t\t\tthis_sessions_ft_goal = formatAsMoney(per_customer_goal * thisFutureSessionTotalGuestCount)\n\t\t\t\t\tlastFTGoalAmount = this_sessions_ft_goal\n\n\t\t\t\t\t$(this).html(addFormatting(lastGoalAmount));\n\n\t\t\t\t\t$(\"#fttg_\" + session_id).html(addFormatting(lastFTGoalAmount));\n\n\t\t\t\t\tif (thisSessionActual <  lastGoalAmount)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#dac_\" + session_id).addClass(\"goal_not_met\");\n\t\t\t\t\t\t$(\"#dac_\" + session_id).removeClass(\"goal_met\");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#dac_\" + session_id).addClass(\"goal_met\");\n\t\t\t\t\t\t$(\"#dac_\" + session_id).removeClass(\"goal_not_met\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (thisSessionActualFT <  lastFTGoalAmount)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#fft_\" + session_id).addClass(\"goal_not_met\");\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).removeClass(\"goal_met\");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).addClass(\"goal_met\");\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).removeClass(\"goal_not_met\");\n\t\t\t\t\t}\n\n\t\t\t\t\tupdatedSessionFTGoal = lastFTGoalAmount;\n\t\t\t\t\tupdatedSessionGoal = lastGoalAmount;\n\n\t\t\t\t\tremaining_session_count++;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\n\t\t\t\t//dd_console_log(\"Pos: \" + session_id + \"; sessionActual: \" +  thisSessionActual + \"; Remaining: \" + revenue_goal + \";\");\n\n\t\t\t\tif (!isTaste)\n\t\t\t\t{\n\t\t\t\t\tthis_sessions_goal = revenue_goal / total_sessions;\n\t\t\t\t\t$(this).html(addFormatting(this_sessions_goal));\n\n\t\t\t\t\tthis_sessions_ft_goal = remainingFTGoal / total_sessions;\n\t\t\t\t\t$(\"#fttg_\" + session_id).html(addFormatting(this_sessions_ft_goal));\n\n\t\t\t\t\t//dd_console_log(\"Pos: \" + session_id + \"; this_sessions_goal: \" +  this_sessions_goal + \"; sessions_remaining: \" + total_sessions + \";\");\n\n\t\t\t\t\tlastGoalAmount = this_sessions_goal;\n\t\t\t\t\tlastFTGoalAmount = this_sessions_ft_goal;\n\n\t\t\t\t\tif (thisSessionActual <  this_sessions_goal)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#dac_\" + session_id).addClass(\"goal_not_met\");\n\t\t\t\t\t\t$(\"#dac_\" + session_id).removeClass(\"goal_met\");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#dac_\" + session_id).addClass(\"goal_met\");\n\t\t\t\t\t\t$(\"#dac_\" + session_id).removeClass(\"goal_not_met\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (thisSessionActualFT <  this_sessions_ft_goal)\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).addClass(\"goal_not_met\");\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).removeClass(\"goal_met\");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).addClass(\"goal_met\");\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).removeClass(\"goal_not_met\");\n\t\t\t\t\t}\n\n\t\t\t\t\ttodate_SessionCount++;\n\t\t\t\t\ttotal_sessions--;\n\n\t\t\t\t\tvar thisSessionTotalGuestCount = $(\"#sgc_\" + session_id).html();\n\t\t\t\t\ttodate_GuestCount += (thisSessionTotalGuestCount * 1);\n\n\t\t\t\t}\n\n\t\t\t\ttodate_GrossRevenue += (thisSessionActual * 1);\n\n\t\t\t\t//var cur = $(\"#ses_\" + session_id).html();\n\t\t\t\t//$(\"#ses_\" + session_id).html(cur + \"<br />(\" + todate_GrossRevenue + \"; \" + total_sessions + \")\");\n\n\t\t\t\trevenue_goal -= thisSessionActual;\n\t\t\t\tvar thisSessionFTTotal = removeFormatting($(\"#ftt_\" + session_id).html());\n\n\t\t\t\ttodate_FT_Total += (thisSessionFTTotal * 1);\n\n\t\t\t}\n\t\t\tremainingFTGoal = ft_goal - totalMonthFTRevenue;\n\t\t}\n\t});\n\n\n\n\t$('#aam_gross_revenue_goal').html(addFormatting(todate_GrossRevenue / todate_SessionCount));\n\t$('#aam_guests_goal').html(formatAsMoney(todate_GuestCount / todate_SessionCount));\n\t$('#aam_finishing_touch_goal').html(addFormatting(todate_FT_Total / todate_SessionCount));\n\t$('#aam_avg_ticket_goal').html(addFormatting(removeFormatting($('#aam_gross_revenue_goal').html()) / $('#aam_guests_goal').html()));\n\n\t$('#rgrs_gross_revenue_goal').html(addFormatting(updatedSessionGoal));\n\n\n\tif (remaining_session_count  > 0)\n\t\t$('#rgrs_guests_goal').html(roundToTenths((standard_session_guest_goal - todate_GuestCount) / remaining_session_count));\n\telse\n\t\t$('#rgrs_guests_goal').html(\"0\");\n\n\t$('#rgrs_avg_ticket_goal').html(addFormatting(removeFormatting($('#rgrs_gross_revenue_goal').html()) / $('#rgrs_guests_goal').html()));\n\n\n\tvar FT_months_total = removeFormatting($(\"#FT_months_total\").html());\n\n\tif (remaining_session_count  > 0)\n\t\t$('#rgrs_finishing_touch_goal').html(addFormatting((ft_goal - FT_months_total) / remaining_session_count));\n\telse\n\t\t$('#rgrs_finishing_touch_goal').html(\"$0.00\");\n\n\t$('#ma_gross_revenue_goal').html(addFormatting(totalMonthGrossRevenue ));\n\n\tvar ma_guest_count_months_total = $('#guest_count_months_total').html();\n\t$('#ma_guests_goal').html(ma_guest_count_months_total);\n\n\t$('#ma_avg_ticket_goal').html(addFormatting(removeFormatting($('#ma_gross_revenue_goal').html()) / $('#ma_guests_goal').html()));\n\n\t$('#ma_finishing_touch_goal').html(addFormatting(FT_months_total));\n\n\n\n\t$('#mat_gross_revenue_goal').html(addFormatting(totalMonthGrossRevenueMinusTaste ));\n\n\tvar guestCountTotalMinusTaste = $('#guestCountTotalMinusTaste').val();\n\n\t$('#mat_guests_goal').html(guestCountTotalMinusTaste);\n\n\t$('#mat_avg_ticket_goal').html(addFormatting(totalMonthGrossRevenueMinusTaste / guestCountTotalMinusTaste));\n\n\t$('#mat_finishing_touch_goal').html(addFormatting($('#allFTTotalMinusTaste').val()));\n\n\n\n\n\tvar monthly_food_costs = 0;\n\n\t$(\"[id^=fc_]\").each(function()\n\t{\n\t\tvar params = this.id.split(\"_\");\n\n\t\tvar percentage_name = \"fcp_\" + params[1] + \"_\" + params[2];\n\t\tvar total_name = \"wkt_\" + params[1];\n\n\t\tvar foodCost = removeFormatting($(this).val());\n\t\tvar total = removeFormatting($(\"#\" + total_name).html());\n\n\t\tmonthly_food_costs += (foodCost * 1);\n\n\t\tvar percent = (foodCost * 100) / total;\n\n\t\t$(\"#\" + percentage_name).html(formatAsMoney(percent));\n\n\n\t});\n\n\n\t$(\"#total_food_cost\").html(addFormatting(monthly_food_costs));\n\n\t$(\"#total_food_cost_percentage\").html(formatAsMoney(monthly_food_costs * 100 / totalMonthGrossRevenue) + \"%\");\n\n\n\tvar monthly_labor_costs = 0;\n\n\t$(\"[id^=lc_]\").each(function()\n\t{\n\t\tvar params = this.id.split(\"_\");\n\n\t\tvar percentage_name = \"lcp_\" + params[1] + \"_\" + params[2];\n\t\tvar total_name = \"wkt_\" + params[1];\n\n\t\tvar laborCost = removeFormatting($(this).val());\n\t\tvar total = removeFormatting($(\"#\" + total_name).html());\n\n\t\tmonthly_labor_costs += (laborCost * 1);\n\n\t\tvar percent = (laborCost * 100) / total;\n\n\t\t$(\"#\" + percentage_name).html(formatAsMoney(percent));\n\n\n\t});\n\n\n\t$(\"#total_labor_cost\").html(addFormatting(monthly_labor_costs));\n\n\t$(\"#total_labor_cost_percentage\").html(formatAsMoney(monthly_labor_costs * 100 / totalMonthGrossRevenue) + \"%\");\n\n\n\n\t// adjust revised goals if month is in past\n\t// if goal is met insert 0\n\t// if not insert the difference\n\tif (month_is_passed)\n\t{\n\t\tif (totalMonthGrossRevenue >= org_revenue_goal)\n\t\t\t$('#rgrs_gross_revenue_goal').html(addFormatting(0));\n\t\telse\n\t\t\t$('#rgrs_gross_revenue_goal').html(addFormatting(totalMonthGrossRevenue - org_revenue_goal));\n\n\n\t\tvar actual_avg_ticket = removeFormatting($('#ma_avg_ticket_goal').html());\n\n\t\tif (actual_avg_ticket >= average_ticket)\n\t\t\t$('#rgrs_avg_ticket_goal').html(addFormatting(0));\n\t\telse\n\t\t\t$('#rgrs_avg_ticket_goal').html(addFormatting(actual_avg_ticket - average_ticket));\n\n\n\t\tif (FT_months_total >= ft_goal)\n\t\t\t$('#rgrs_finishing_touch_goal').html(addFormatting(0));\n\t\telse\n\t\t\t$('#rgrs_finishing_touch_goal').html(addFormatting(FT_months_total - ft_goal));\n\n\n\t\tvar guestsGoal = $(\"#guests_goal\").html();\n\n\t\tif (ma_guest_count_months_total >= guestsGoal)\n\t\t\t$('#rgrs_guests_goal').html(formatAsMoney(0));\n\t\telse\n\t\t\t$('#rgrs_guests_goal').html(formatAsMoney(ma_guest_count_months_total - guestsGoal));\n\n\t}\n\n\t// take a pass through and fill in daily and weekly goal totals\n\tvar lastDay = -1;\n\tvar lastWeek = -1;\n\n\tvar dailyTotal = 0;\n\tvar weeklyTotal = 0;\n\n\tvar dailyFTTotal = 0;\n\tvar weeklyFTTotal = 0;\n\n\tvar curCalWeekTotal = 0;\n\tvar curCalWeekFTTotal = 0;\n\n\t$(\"[id^=dre_]\").each(function()\n\t{\n\n\n\t\tvar thisDay = $(this).attr('data-day_number');\n\t\tvar thisWeek = $(this).attr('data-week_number');\n\n\t\tif (lastDay != -1 && thisDay != lastDay)\n\t\t{\n\t\t\t// new day so total last day\n\t\t\t$(\"#dce_\" + lastDay + \"-\" +  lastWeek).html(addFormatting(dailyTotal));\n\t\t\t$(\"#ftdtg_\" + lastDay + \"-\" +  lastWeek).html(addFormatting(dailyFTTotal));\n\n\t\t\tdailyTotal = 0;\n\t\t\tdailyFTTotal = 0;\n\t\t}\n\n\t\tif (lastWeek!= -1 && thisWeek != lastWeek)\n\t\t{\n\n\n\t\t\tif (hasPreviousMonthSessions && lastWeek == hasPreviousMonthSessions)\n\t\t\t{\n\t\t\t\t$(\"#wcec_\" +  lastWeek).html(addFormatting(curCalWeekTotal));\n\t\t\t\t$(\"#ftwtgc_\" +  lastWeek).html(addFormatting(curCalWeekFTTotal));\n\n\t\t\t\t$(\"#wce_\" +  lastWeek).html(addFormatting(weeklyTotal));\n\t\t\t\t$(\"#ftwtg_\" +  lastWeek).html(addFormatting(weeklyFTTotal));\n\n\t\t\t}\n\t\t\telse if (hasFutureMonthSessions && lastWeek == hasFutureMonthSessions)\n\t\t\t{\n\t\t\t\t$(\"#wcec_\" +  lastWeek).html(addFormatting(curCalWeekTotal));\n\t\t\t\t$(\"#ftwtgc_\" +  lastWeek).html(addFormatting(curCalWeekFTTotal));\n\n\t\t\t\t$(\"#wce_\" +  lastWeek).html(addFormatting(weeklyTotal));\n\t\t\t\t$(\"#ftwtg_\" +  lastWeek).html(addFormatting(weeklyFTTotal));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// new week so total last week\n\t\t\t\t$(\"#wcec_\" +  lastWeek).html(addFormatting(weeklyTotal));\n\t\t\t\t$(\"#ftwtgc_\" +  lastWeek).html(addFormatting(weeklyFTTotal));\n\t\t\t}\n\n\t\t\tweeklyTotal = 0;\n\t\t\tweeklyFTTotal = 0;\n\t\t\tcurCalWeekTotal = 0;\n\t\t\tcurCalWeekFTTotal = 0;\n\t\t}\n\n\t\tvar session_id = this.id.substr(4);\n\n\n\t\tif ($(this).attr('data-in_month') == 'true')\n\t\t{\n\n\t\t\tvar temp = removeFormatting($(this).html());\n\t\t\tcurCalWeekTotal += (temp * 1);\n\n\t\t\tvar tempFT = removeFormatting($('#fttg_' + session_id).html());\n\t\t\tcurCalWeekFTTotal += (tempFT * 1);\n\n\t\t}\n\n\n\t\tlastDay = thisDay;\n\t\tlastWeek = thisWeek;\n\n\t\tvar amount = removeFormatting($(this).html());\n\t\tvar amountFT = removeFormatting($('#fttg_' + session_id).html());\n\n\t\tdailyTotal += (amount * 1);\n\t\tweeklyTotal += (amount * 1);\n\n\t\tdailyFTTotal += (amountFT * 1);\n\t\tweeklyFTTotal += (amountFT * 1);\n\n\n\n\t});\n\n\t$(\"#dce_\" + lastDay + \"-\" +  lastWeek).html(addFormatting(dailyTotal));\n\t$(\"#ftdtg_\" + lastDay + \"-\" +  lastWeek).html(addFormatting(dailyFTTotal));\n\n\t$(\"#wcec_\" +  lastWeek).html(addFormatting(weeklyTotal));\n\t$(\"#ftwtgc_\" +  lastWeek).html(addFormatting(weeklyFTTotal));\n\n\tif (hasPreviousMonthSessions && parseInt(lastWeek) == hasPreviousMonthSessions)\n\t{\n\t\t$(\"#wce_\" +  lastWeek).html(addFormatting(curCalWeekTotal));\n\t\t$(\"#ftwtg_\" +  lastWeek).html(addFormatting(curCalWeekFTTotal));\n\t}\n\n\tif (hasFutureMonthSessions && parseInt(lastWeek) == hasFutureMonthSessions)\n\t{\n\t\t$(\"#wce_\" +  lastWeek).html(addFormatting(curCalWeekTotal));\n\t\t$(\"#ftwtg_\" +  lastWeek).html(addFormatting(curCalWeekFTTotal));\n\t}\n\n}\n\nfunction init_session_lead_dropdowns()\n{\n\t$(\"[id^=sl_]\").change(function()\n\t{\n\t\tvar session_id = this.id.substr(3);\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata : {\n\t\t\t\tprocessor: 'admin_sessionLead',\n\t\t\t\tuser_id: $(this).val(),\n\t\t\t\tsession_id: session_id\n\t\t\t},\n\t\t\tsuccess: function(json)\n\t\t\t{\n\t\t\t\tif(json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t/*\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Yas',\n\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t}); */\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(objAJAXRequest, strError)\n\t\t\t{\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\n\t\t});\n\n\t});\n}\n\nfunction init_exposure_controls()\n{\n\t// hide/show week\n\t$(\"[id^=wc_]\").on('click', function ()\n\t{\n\t\tvar week_num = this.id.substr(3);\n\n\t\tvar alt_num_display_name = \"wcan_\" + week_num;\n\n\t\tif ($(this).html() == 'Hide')\n\t\t{\n\n\t\t\tvar hideStr = \"wid_\" + week_num;\n\t\t\t$(\"[id^=\" + hideStr + \"]\").hide();\n\n\t\t\t$(\"#\" + alt_num_display_name).show();\n\t\t\t$(this).html('Show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar showStr = \"wid_\" + week_num;\n\t\t\t$(\"[id^=\" + showStr + \"]\").show();\n\n\t\t\t$(\"#\" + alt_num_display_name).hide();\n\t\t\t$(this).html('Hide');\n\n\t\t\t$(\"[id^=dn_\" + week_num +  \"]\").hide();\n\t\t\t$(\"[id^=dc_\" + week_num +  \"]\").html('Hide');\n\n\n\t\t}\n\n\n\t});\n\n\n\t// hide/show day\n\t$(\"[id^=dc_]\").on('click', function ()\n\t{\n\n\t\tvar theRow = $(this).parent().parent();\n\n\t\tvar parts = this.id.split(\"-\");\n\t\tvar week_num = parts[0].substr(3);\n\t\tvar day_num = parts[1];\n\n\t\tvar alt_week_num_display_name = \"wcan_\" + week_num;\n\t\tvar alt_day_num_display_name = \"dn_\" + week_num + \"-\" + day_num;\n\n\n\t\tif ($(this).html() == 'Hide')\n\t\t{\n\n\t\t\tvar hideStr = \"wid_\" + week_num + \"-did_\" + day_num + \"-\";\n\t\t\t$(\"[id^=\" + hideStr + \"]\").hide();\n\t\t\t$(this).html('Show');\n\t\t\t$(\"#\" + alt_day_num_display_name).show();\n\n\t\t\tif (theRow.attr(\"data-interweek_day_count\") == 1)\n\t\t\t{\n\t\t\t\t// so we are hiding the first row of the week and need to show the week hider in a new spot\n\t\t\t\t$(\"[id^=\" + alt_week_num_display_name + \"]\").show();\n\t\t\t}\n\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar showStr = \"wid_\" + week_num + \"-did_\" + day_num + \"-\";\n\t\t\t$(\"[id^=\" + showStr + \"]\").show();\n\t\t\t$(this).html('Hide');\n\t\t\t$(\"#\" + alt_day_num_display_name).hide();\n\n\t\t\tif (theRow.attr(\"data-interweek_day_count\") == 1)\n\t\t\t{\n\t\t\t\t// so we are hiding the first row of the week and need to show the week hider in a new spot\n\t\t\t\t$(\"[id^=\" + alt_week_num_display_name + \"]\").hide();\n\n\t\t\t}\n\n\t\t}\n\n\t});\n\n\n}"],"mappings":"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"}