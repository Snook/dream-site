{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["reports_goal_management.js"],"sourcesContent":["var hasChangedCOGS = false;\r\n\r\nfunction reports_goal_management_init()\r\n{\r\n\r\n\t$('html').bind('keypress', function(e)\r\n\t{\r\n\t   if(e.keyCode == 13)\r\n\t   {\r\n\t      return false;\r\n\t   }\r\n\t});\r\n\r\n\tinit_exposure_controls();\r\n\r\n\tinit_session_lead_dropdowns();\r\n\r\n\tinit_goal_inputs();\r\n\r\n\tinit_food_cost_inputs();\r\n\tinit_labor_cost_inputs();\r\n\r\n\tinit_money_formatting();\r\n\r\n\tinit_update_p_and_l_data();\r\n\r\n\tcalculatePage();\r\n\r\n\r\n\t$(\".gt_input\").each(function() {\r\n\t\t$(this).val(addFormatting($(this).val()));\r\n\t});\r\n\r\n    $(\"#session_summary_table\").stickyTableHeaders();\r\n}\r\n\r\nfunction init_money_formatting()\r\n{\r\n\t$(\".gt_input\").focus(function() {\r\n\t\t$(this).val(removeFormatting($(this).val()));\r\n\t});\r\n\r\n\r\n\t$(\".gt_input\").blur(function() {\r\n\t\t$(this).val(addFormatting($(this).val()));\r\n\t});\r\n\r\n\r\n\t$(\".gt_input\").keypress(function(e) {\r\n\t\tif (e.which == 188 ||  // comma\r\n\t\t\te.which == 190 ||  //  ...? ...\r\n\t\t\te.which  == 46 || // decimal\r\n\t\t\te.which == 45  || // negative sign for FireFox\r\n\t\t\te.keyCode == 8 ||  // delete\r\n\t\t\te.keyCode == 9 ||  // tab\r\n\t\t\te.keyCode == 37 || //left arrow\r\n\t\t\te.keyCode == 39 || // right arrow\r\n\t\t\te.keyCode == 45 || // negative sign\r\n\t\t\t(e.which > 47 && e.which < 58 )) // numbers\r\n\t\t{\t\t\t\t\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\telse if (e.keyCode == 13)\r\n\t\t{\r\n\t\t\t$(this).blur();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn false;\r\n\t});\r\n\r\n\t$(\".gt_input\").change(function() {\r\n\t\t\tif (isNaN($(this).val()))\r\n\t\t\t\treturn false;\r\n\t});\r\n\r\n\r\n}\r\n\r\nfunction init_update_p_and_l_data()\r\n{\r\n\t\r\n\tvar total_expenses = new Number(0);\r\n\t$('[data-dd_subtype=\"expense\"]').each(function() {\r\n\t\ttotal_expenses += new Number(removeFormatting($(this).val()));\r\n\t});\r\n\t\t\r\n\tvar agr = new Number(removeFormatting($(\"#p_and_l_total_agr\").html()));\r\n\tvar marketing_total = new Number(removeFormatting($(\"#p_and_l_marketing_total\").html()));\r\n\tvar royalty_total = new Number(removeFormatting($(\"#p_and_l_royalty_total\").html()));\r\n\tvar net_income = new Number(removeFormatting($(\"#net_income\").val()));\r\n\t\r\n\t$(\"#other_expenses\").val(addFormatting(agr - (total_expenses + marketing_total + royalty_total) - net_income));\r\n\r\n\t\r\n\t\r\n\t$(\".gt_input\").keyup(function() {\r\n\r\n\t\tvar net_income = new Number(removeFormatting($(\"#net_income\").val()));\r\n\t\t\r\n\t\tvar total_expenses =  new Number(0);\r\n\t\t$('[data-dd_subtype=\"expense\"]').each(function() {\r\n\t\t\ttotal_expenses += new Number(removeFormatting($(this).val()));\r\n\t\t});\r\n\r\n\t\tvar agr = new Number(removeFormatting($(\"#p_and_l_total_agr\").html()));\r\n\t\t\r\n\t\t$(\"#other_expenses\").val(addFormatting(agr - (total_expenses + marketing_total + royalty_total)- net_income));\r\n\t});\r\n\t\r\n\t\r\n\t$(\"#update_p_and_l\").click(function()\r\n\t{\r\n\t\tvar validation_error_occurred = false;\r\n\t\t\r\n\t\t$(\"#owner_hours, #employee_hours, #manager_hours\").each(function()\r\n\t\t{\r\n\t\t\tif (isNaN($(this).val()))\r\n\t\t\t{\r\n\t\t\t\tdd_message({\r\n\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\tmessage: \"The hours fields must be a number.\"\r\n\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tvalidation_error_occurred = true;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif (validation_error_occurred)\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tvar dataObj = new Object();\r\n\r\n\t\t$(\"#finance_tab input\").each(function() {\r\n\t\t\tdataObj[this.id] = removeFormatting($(this).val());\r\n\t\t});\r\n\r\n\t\t$(\"#finance_tab input\").each(function() {\r\n\t\t\tif (dataObj[this.id] == \"\") dataObj[this.id] = \"not supplied\";\r\n\t\t});\r\n\r\n\t\tif ($(\"#cost_of_goods_and_services\").data(\"org_value\") != $(\"#cost_of_goods_and_services\").val())\r\n\t\t{\r\n\t\t\thasChangedCOGS = true;\r\n\t\t}\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata : {\r\n\t\t\t\tprocessor: 'admin_p_and_l_data',\r\n\t\t\t\tstore_id: store_id,\r\n\t\t\t\tmonth: month,\r\n\t\t\t\tyear: year,\r\n\t\t\t\tp_and_l_data: dataObj,\r\n\t\t\t},\r\n\t\t\tsuccess: function(json)\r\n\t\t\t{\r\n\t\t\t\tif(json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tdd_toast({message: \"Your data was saved.\"});\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (hasChangedCOGS)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\thasChangedCOGS = false;\r\n\t\t\t\t\t\t$(\"#cogs_msg\").html(\"\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\tmessage: json.processor_message\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t{\r\n\t\t\t\tresponse = 'Unexpected error: ' + strError;\r\n\t\t\t\tdd_message({\r\n\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\tmessage: response\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\r\n\t});\r\n}\r\n\r\n\r\nfunction init_goal_inputs()\r\n{\r\n\t$(\"#avg_ticket_goal,#finishing_touch_goal,#taste_sessions_goal,#regular_guest_count_goal,#taste_guest_count_goal,#intro_guest_count_goal\").change(function()\r\n\t{\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata : {\r\n\t\t\t\tprocessor: 'admin_sessionGoals',\r\n\t\t\t\tstore_id: store_id,\r\n\t\t\t\tmonth: month,\r\n\t\t\t\tyear: year,\r\n\t\t\t\tgoal: this.id,\r\n\t\t\t\tvalue: removeFormatting($(this).val())\r\n\t\t\t},\r\n\t\t\tsuccess: function(json)\r\n\t\t\t{\r\n\t\t\t\tif(json.processor_success)\r\n\t\t\t\t{\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\tmessage: json.processor_message\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t{\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction updateGOGSfields(month, year)\r\n{\r\n\r\n\tvar dateStr = month + \"-1-\" + year;\r\n\r\n\t$.ajax({\r\n\t\turl: 'ddproc.php',\r\n\t\ttype: 'POST',\r\n\t\ttimeout: 20000,\r\n\t\tdataType: 'json',\r\n\t\tdata : {\r\n\t\t\tprocessor: 'admin_expensesData',\r\n\t\t\tstore_id: store_id,\r\n\t\t\tdate: dateStr,\r\n\t\t\top: 'retrieveForMonth'\r\n\t\t},\r\n\t\tsuccess: function(json)\r\n\t\t{\r\n\t\t\t// set all to zero so deleted entries aren't left at the original value\r\n\t\t\t$(\"[id^='fc_']\").val(addFormatting(\"0.00\"));\r\n\t\t\t $(\"[id^='lc_']\").val(addFormatting(\"0.00\"));\r\n\r\n\t\t\tif (json.processor_success)\r\n\t\t\t{\r\n\t\t\t\tfor (var weekNum in json.food_costs)\r\n\t\t\t\t{\r\n\t\t\t\t\t\r\n\t\t\t\t\t var thisCost = json.food_costs[weekNum];\r\n\r\n\t\t\t\t\tif (weekNum.length == 1)\r\n\t\t\t\t\t\tweekNum = \"0\" + weekNum;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (weekNum == \"00\")\r\n\t\t\t\t\t\tweekNum = '53';\r\n\r\n\t\t\t\t\t $(\"#fc_\" + weekNum + \"_\" + year).val(addFormatting(thisCost));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var weekNum in json.labor_costs)\r\n\t\t\t\t{\r\n\t\t\t\t\t var thisCost = json.labor_costs[weekNum];\r\n\r\n\t\t\t\t\t\tif (weekNum.length == 1)\r\n\t\t\t\t\t\t\tweekNum = \"0\" + weekNum;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (weekNum == \"00\")\r\n\t\t\t\t\t\t\tweekNum = '53';\r\n\r\n\r\n\t\t\t\t\t $(\"#lc_\" + weekNum + \"_\" + year).val(addFormatting(thisCost));\r\n\t\t\t\t\t \r\n\t\t\t\t\t \r\n\t\t\t\t}\r\n\r\n\t\t\t\tcalculatePage();\r\n\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdd_message({\r\n\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\tmessage: json.processor_message\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: function(objAJAXRequest, strError)\r\n\t\t{\r\n\t\t\tdd_message({\r\n\t\t\t\ttitle: 'Error',\r\n\t\t\t\tmessage: json.strError\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\nfunction init_food_cost_inputs()\r\n{\r\n\r\n\r\n\t$(\"[id^=fc_]\").on('click', function ()\r\n\t{\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'main.php?page=admin_store_expenses_v2',\r\n\t\t\ttype: 'POST',\r\n\t\t\tonce: false,\r\n\t\t\tdata : {\r\n\t\t\t\tstore_id: store_id,\r\n\t\t\t\tmonth: month,\r\n\t\t\t\tyear: year\r\n\t\t\t},\r\n\t\t\tsuccess: function(data, status)\r\n\t\t\t{\r\n\r\n\t\t\t\tdd_message({\r\n\t\t\t\t\ttitle: 'Input Expenses',\r\n\t\t\t\t\tmessage: data,\r\n\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\twidth: 740,\r\n\t\t\t\t\tdiv_id: 'cost_inputter',\r\n\t\t\t\t\tcloseOnEscape: true,\r\n\t\t\t\t\tnoOk: true\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tdayClickHandler = SE_dayClickHandler;\r\n\r\n\r\n\r\n\t\t\t\tinitExpensesDialog();\r\n\r\n\r\n\t\t\t},\r\n\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t{\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\r\n}\r\n\r\nfunction init_labor_cost_inputs()\r\n{\r\n\r\n\t$(\"[id^=lc_]\").on('click', function ()\r\n\t{\r\n\t\t$.ajax({\r\n\t\t\turl: 'main.php?page=admin_store_expenses_v2',\r\n\t\t\ttype: 'POST',\r\n\t\t\tonce: false,\r\n\t\t\tdata : {\r\n\t\t\t\tstore_id: store_id,\r\n\t\t\t\tmonth: month,\r\n\t\t\t\tyear: year\r\n\t\t\t},\r\n\t\t\tsuccess: function(data, status)\r\n\t\t\t{\r\n\r\n\t\t\t\tdd_message({\r\n\t\t\t\t\ttitle: 'Input Expenses',\r\n\t\t\t\t\tmessage: data,\r\n\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\twidth: 740,\r\n\t\t\t\t\tdiv_id: 'cost_inputter',\r\n\t\t\t\t\tcloseOnEscape: true,\r\n\t\t\t\t\tnoOk: true\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdayClickHandler = SE_dayClickHandler;\r\n\t\t\t\tinitExpensesDialog();\r\n\r\n\t\t\t},\r\n\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t{\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n}\r\n\r\nfunction roundToTenths(mnt)\r\n{\r\n\tmnt -= 0;\r\n\tmnt = (Math.round(mnt*10))/10;\r\n\treturn (mnt == Math.floor(mnt)) ? mnt + '.0'\r\n\t\t\t : ( (mnt == Math.floor(mnt)) ?\r\n\t\t\t\t\t mnt + '0' : mnt);\r\n}\r\n\r\n\r\nfunction _report_submitClick(form)\r\n{\r\n\tvar year = parseInt($(\"#year_field_001\").val());\r\n\r\n\tif (isNaN(year))\r\n\t{\r\n\t\t// error\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Error',\r\n\t\t\tmessage: 'The year is not an integer.'\r\n\t\t});\r\n\t\treturn false;\r\n\t}\r\n\telse if (year < 2011)\r\n\t{\r\n\t\t//error\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Error',\r\n\t\t\tmessage: 'The year must be greater than 2010.'\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n \t $(\"#avg_ticket_goal\").remove();\r\n\t $(\"#finishing_touch_goal\").remove();\r\n\t $(\"#taste_sessions_goal\").remove();\r\n\t $(\"#regular_guest_count_goal\").remove();\r\n\t $(\"#taste_guest_count_goal\").remove();\r\n\t $(\"#intro_guest_count_goal\").remove();\r\n\r\n\t $(\"[data-dd_type='p&l_widget']\").remove();\r\n\r\n\r\n\treturn true;\r\n\r\n}\r\n\r\nfunction removeFormatting(stringVal)\r\n{\r\n\t\r\n\tif (stringVal == null || stringVal == \"\") return stringVal;\r\n\t\r\n\tstringVal = stringVal.replace(/,/, \"\");\r\n\tstringVal = stringVal.replace(/\\$/, \"\");\r\n\r\n\treturn stringVal;\r\n}\r\n\r\n\r\nfunction addFormatting(numericVal)\r\n{\r\n\tif (numericVal == null || numericVal == \"\") return \"\";\r\n\t\r\n\tnumericVal = accounting.formatMoney(numericVal,\"$\",2,\",\",\".\",\"%s%v\");\r\n\r\n\treturn numericVal;\r\n}\r\n\r\n\r\nfunction calculatePage()\r\n{\r\n\r\n\t//var revenue_goal = removeFormatting($(\"#gross_revenue_goal\").val());\r\n\t// var org_revenue_goal = revenue_goal;\r\n\r\n\tvar total_sessions = $(\"#nonTasteSessionCount\").val();\r\n\tvar average_ticket = removeFormatting($(\"#avg_ticket_goal\").val());\r\n\tvar ft_goal = removeFormatting($(\"#finishing_touch_goal\").val());\r\n\r\n\tvar regular_guest_count_goal = removeFormatting($(\"#regular_guest_count_goal\").val());\r\n\tvar taste_guest_count_goal = removeFormatting($(\"#taste_guest_count_goal\").val());\r\n\tvar intro_guest_count_goal = removeFormatting($(\"#intro_guest_count_goal\").val());\r\n\r\n\tvar standard_session_guest_goal = (regular_guest_count_goal * 1) + (intro_guest_count_goal * 1);\r\n\r\n\tvar revenue_goal = (regular_guest_count_goal * average_ticket) + (taste_guest_count_goal * 34.99) + (intro_guest_count_goal * 84.95);\r\n\tvar org_revenue_goal = revenue_goal;\r\n\r\n\t$(\"#gross_revenue_goal\").html(addFormatting(revenue_goal));\r\n\r\n\t$(\"#calendar_month_goal\").html(addFormatting(revenue_goal));\r\n\t$(\"#FT_months_total_goal\").html(addFormatting(ft_goal));\r\n\r\n\tvar dateObj = new Date();\r\n\r\n\tvar monthisCurrent = $(\"#isCurrentMonth\").val() == \"true\";\r\n\r\n\t//dd_console_log(\"Date: \" + dateObj.getDate());\r\n\r\n\tvar todaysDayNumber = dateObj.getDate();\r\n\r\n\tvar lastGoalAmount = 0;\r\n\tvar lastFTGoalAmount = 0;\r\n\tvar todate_SessionCount = 0;\r\n\tvar todate_GrossRevenue = 0;\r\n\tvar todate_GuestCount = 0;\r\n\tvar todate_FT_Total = 0;\r\n\tvar updatedSessionGoal = false;\r\n\tvar updatedSessionFTGoal = false;\r\n\tvar remaining_session_count = 0;\r\n\tvar totalMonthGrossRevenue = 0;\r\n\tvar totalMonthFTRevenue = 0;\r\n\tvar totalMonthGrossRevenueMinusTaste = 0;\r\n\tvar encounteredFirstFutureSession = false;\r\n\t//\tvar totalMonthFTRevenue = 0; ?\r\n\tvar totalCurrentGuests = $('#guest_count_months_total').html();\r\n\r\n\t/*\r\n\tif (average_ticket > 0)\r\n\t\t$(\"#guests_goal\").html(Math.round(revenue_goal / average_ticket));\r\n\telse\r\n\t\t$(\"#guests_goal\").html(\"0\");\r\n\t*/\r\n\r\n\t$(\"#sg_gross_revenue_goal\").html(addFormatting(revenue_goal / total_sessions));\r\n\t$(\"#sg_avg_ticket_goal\").html(addFormatting($(\"#avg_ticket_goal\").val()));\r\n\t$('#sg_guests_goal').html(roundToTenths($(\"#guests_goal\").html() / total_sessions));\r\n\t$('#sg_finishing_touch_goal').html(addFormatting(ft_goal / total_sessions));\r\n\tvar remainingFTGoal = ft_goal;\r\n\tvar per_customer_goal = 0;\r\n\r\n\r\n\t$(\"[id^=dre_]\").each(function()\r\n\t{\r\n\r\n\t\tif ($(this).attr('data-in_month') == 'true')\r\n\t\t{\r\n\t\t\tvar this_sessions_goal = 0;\r\n\t\t\tvar this_sessions_ft_goal  = 0;\r\n\t\t\tvar session_id = this.id.substr(4);\r\n\t\t//\tvar ordPos = new Number($(this).attr('data-ord_pos'));\r\n\t\t\tvar dayNumber = $(this).attr('data-day_number');\r\n\r\n\t\t\tvar thisSessionActual = removeFormatting($(\"#dac_\" + session_id).html());\r\n\t\t\tvar thisSessionActualFT = removeFormatting($(\"#ftt_\" + session_id).html());\r\n\r\n\t\t\tvar isTaste = ($(this).attr('data-is_taste') == 'true');\r\n\r\n\t\t\ttotalMonthGrossRevenue += (thisSessionActual * 1);\r\n\t\t\ttotalMonthFTRevenue += (thisSessionActualFT * 1);\r\n\r\n\t\t\tif (!isTaste)\r\n\t\t\t\ttotalMonthGrossRevenueMinusTaste += (thisSessionActual * 1);\r\n\r\n\r\n\t\t\tif ((monthisCurrent && dayNumber > todaysDayNumber) || month_is_future)\r\n\t\t\t{\r\n\t\t\t\tdd_console_log(\"Pos: \" + session_id + \" | toDataGuestCount: \" +  todate_GuestCount);\r\n\r\n\t\t\t\tif (!isTaste)\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\tif (!encounteredFirstFutureSession)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis_sessions_goal = revenue_goal / total_sessions;\r\n\t\t\t\t\t\tlastGoalAmount = this_sessions_goal;\r\n\r\n\t\t\t\t\t\t//this_sessions_ft_goal = remainingFTGoal / total_sessions;\r\n\t\t\t\t\t\t//lastFTGoalAmount = this_sessions_ft_goal;\r\n\r\n\t\t\t\t\t\tper_customer_goal = remainingFTGoal / (standard_session_guest_goal - todate_GuestCount)\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tencounteredFirstFutureSession = true;\r\n\r\n\r\n\t\t\t\t\tvar thisFutureSessionTotalGuestCount = $(\"#sgc_\" + session_id).html();\r\n\r\n\r\n\t\t\t\t\tthis_sessions_ft_goal = formatAsMoney(per_customer_goal * thisFutureSessionTotalGuestCount)\r\n\t\t\t\t\tlastFTGoalAmount = this_sessions_ft_goal\r\n\r\n\t\t\t\t\t$(this).html(addFormatting(lastGoalAmount));\r\n\r\n\t\t\t\t\t$(\"#fttg_\" + session_id).html(addFormatting(lastFTGoalAmount));\r\n\r\n\t\t\t\t\tif (thisSessionActual <  lastGoalAmount)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#dac_\" + session_id).addClass(\"goal_not_met\");\r\n\t\t\t\t\t\t$(\"#dac_\" + session_id).removeClass(\"goal_met\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#dac_\" + session_id).addClass(\"goal_met\");\r\n\t\t\t\t\t\t$(\"#dac_\" + session_id).removeClass(\"goal_not_met\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (thisSessionActualFT <  lastFTGoalAmount)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#fft_\" + session_id).addClass(\"goal_not_met\");\r\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).removeClass(\"goal_met\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).addClass(\"goal_met\");\r\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).removeClass(\"goal_not_met\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tupdatedSessionFTGoal = lastFTGoalAmount;\r\n\t\t\t\t\tupdatedSessionGoal = lastGoalAmount;\r\n\r\n\t\t\t\t\tremaining_session_count++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\r\n\r\n\t\t\t\t//dd_console_log(\"Pos: \" + session_id + \"; sessionActual: \" +  thisSessionActual + \"; Remaining: \" + revenue_goal + \";\");\r\n\r\n\t\t\t\tif (!isTaste)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis_sessions_goal = revenue_goal / total_sessions;\r\n\t\t\t\t\t$(this).html(addFormatting(this_sessions_goal));\r\n\r\n\t\t\t\t\tthis_sessions_ft_goal = remainingFTGoal / total_sessions;\r\n\t\t\t\t\t$(\"#fttg_\" + session_id).html(addFormatting(this_sessions_ft_goal));\r\n\r\n\t\t\t\t\t//dd_console_log(\"Pos: \" + session_id + \"; this_sessions_goal: \" +  this_sessions_goal + \"; sessions_remaining: \" + total_sessions + \";\");\r\n\r\n\t\t\t\t\tlastGoalAmount = this_sessions_goal;\r\n\t\t\t\t\tlastFTGoalAmount = this_sessions_ft_goal;\r\n\r\n\t\t\t\t\tif (thisSessionActual <  this_sessions_goal)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#dac_\" + session_id).addClass(\"goal_not_met\");\r\n\t\t\t\t\t\t$(\"#dac_\" + session_id).removeClass(\"goal_met\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#dac_\" + session_id).addClass(\"goal_met\");\r\n\t\t\t\t\t\t$(\"#dac_\" + session_id).removeClass(\"goal_not_met\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (thisSessionActualFT <  this_sessions_ft_goal)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).addClass(\"goal_not_met\");\r\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).removeClass(\"goal_met\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).addClass(\"goal_met\");\r\n\t\t\t\t\t\t$(\"#ftt_\" + session_id).removeClass(\"goal_not_met\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttodate_SessionCount++;\r\n\t\t\t\t\ttotal_sessions--;\r\n\r\n\t\t\t\t\tvar thisSessionTotalGuestCount = $(\"#sgc_\" + session_id).html();\r\n\t\t\t\t\ttodate_GuestCount += (thisSessionTotalGuestCount * 1);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttodate_GrossRevenue += (thisSessionActual * 1);\r\n\r\n\t\t\t\t//var cur = $(\"#ses_\" + session_id).html();\r\n\t\t\t\t//$(\"#ses_\" + session_id).html(cur + \"<br />(\" + todate_GrossRevenue + \"; \" + total_sessions + \")\");\r\n\r\n\t\t\t\trevenue_goal -= thisSessionActual;\r\n\t\t\t\tvar thisSessionFTTotal = removeFormatting($(\"#ftt_\" + session_id).html());\r\n\r\n\t\t\t\ttodate_FT_Total += (thisSessionFTTotal * 1);\r\n\r\n\t\t\t}\r\n\t\t\tremainingFTGoal = ft_goal - totalMonthFTRevenue;\r\n\t\t}\r\n\t});\r\n\r\n\r\n\r\n\t$('#aam_gross_revenue_goal').html(addFormatting(todate_GrossRevenue / todate_SessionCount));\r\n\t$('#aam_guests_goal').html(formatAsMoney(todate_GuestCount / todate_SessionCount));\r\n\t$('#aam_finishing_touch_goal').html(addFormatting(todate_FT_Total / todate_SessionCount));\r\n\t$('#aam_avg_ticket_goal').html(addFormatting(removeFormatting($('#aam_gross_revenue_goal').html()) / $('#aam_guests_goal').html()));\r\n\r\n\t$('#rgrs_gross_revenue_goal').html(addFormatting(updatedSessionGoal));\r\n\r\n\r\n\tif (remaining_session_count  > 0)\r\n\t\t$('#rgrs_guests_goal').html(roundToTenths((standard_session_guest_goal - todate_GuestCount) / remaining_session_count));\r\n\telse\r\n\t\t$('#rgrs_guests_goal').html(\"0\");\r\n\r\n\t$('#rgrs_avg_ticket_goal').html(addFormatting(removeFormatting($('#rgrs_gross_revenue_goal').html()) / $('#rgrs_guests_goal').html()));\r\n\r\n\r\n\tvar FT_months_total = removeFormatting($(\"#FT_months_total\").html());\r\n\r\n\tif (remaining_session_count  > 0)\r\n\t\t$('#rgrs_finishing_touch_goal').html(addFormatting((ft_goal - FT_months_total) / remaining_session_count));\r\n\telse\r\n\t\t$('#rgrs_finishing_touch_goal').html(\"$0.00\");\r\n\r\n\t$('#ma_gross_revenue_goal').html(addFormatting(totalMonthGrossRevenue ));\r\n\r\n\tvar ma_guest_count_months_total = $('#guest_count_months_total').html();\r\n\t$('#ma_guests_goal').html(ma_guest_count_months_total);\r\n\r\n\t$('#ma_avg_ticket_goal').html(addFormatting(removeFormatting($('#ma_gross_revenue_goal').html()) / $('#ma_guests_goal').html()));\r\n\r\n\t$('#ma_finishing_touch_goal').html(addFormatting(FT_months_total));\r\n\r\n\r\n\r\n\t$('#mat_gross_revenue_goal').html(addFormatting(totalMonthGrossRevenueMinusTaste ));\r\n\r\n\tvar guestCountTotalMinusTaste = $('#guestCountTotalMinusTaste').val();\r\n\r\n\t$('#mat_guests_goal').html(guestCountTotalMinusTaste);\r\n\r\n\t$('#mat_avg_ticket_goal').html(addFormatting(totalMonthGrossRevenueMinusTaste / guestCountTotalMinusTaste));\r\n\r\n\t$('#mat_finishing_touch_goal').html(addFormatting($('#allFTTotalMinusTaste').val()));\r\n\r\n\r\n\r\n\r\n\tvar monthly_food_costs = 0;\r\n\r\n\t$(\"[id^=fc_]\").each(function()\r\n\t{\r\n\t\tvar params = this.id.split(\"_\");\r\n\r\n\t\tvar percentage_name = \"fcp_\" + params[1] + \"_\" + params[2];\r\n\t\tvar total_name = \"wkt_\" + params[1];\r\n\r\n\t\tvar foodCost = removeFormatting($(this).val());\r\n\t\tvar total = removeFormatting($(\"#\" + total_name).html());\r\n\r\n\t\tmonthly_food_costs += (foodCost * 1);\r\n\r\n\t\tvar percent = (foodCost * 100) / total;\r\n\r\n\t\t$(\"#\" + percentage_name).html(formatAsMoney(percent));\r\n\r\n\r\n\t});\r\n\r\n\r\n\t$(\"#total_food_cost\").html(addFormatting(monthly_food_costs));\r\n\r\n\t$(\"#total_food_cost_percentage\").html(formatAsMoney(monthly_food_costs * 100 / totalMonthGrossRevenue) + \"%\");\r\n\r\n\r\n\tvar monthly_labor_costs = 0;\r\n\r\n\t$(\"[id^=lc_]\").each(function()\r\n\t{\r\n\t\tvar params = this.id.split(\"_\");\r\n\r\n\t\tvar percentage_name = \"lcp_\" + params[1] + \"_\" + params[2];\r\n\t\tvar total_name = \"wkt_\" + params[1];\r\n\r\n\t\tvar laborCost = removeFormatting($(this).val());\r\n\t\tvar total = removeFormatting($(\"#\" + total_name).html());\r\n\r\n\t\tmonthly_labor_costs += (laborCost * 1);\r\n\r\n\t\tvar percent = (laborCost * 100) / total;\r\n\r\n\t\t$(\"#\" + percentage_name).html(formatAsMoney(percent));\r\n\r\n\r\n\t});\r\n\r\n\r\n\t$(\"#total_labor_cost\").html(addFormatting(monthly_labor_costs));\r\n\r\n\t$(\"#total_labor_cost_percentage\").html(formatAsMoney(monthly_labor_costs * 100 / totalMonthGrossRevenue) + \"%\");\r\n\r\n\r\n\r\n\t// adjust revised goals if month is in past\r\n\t// if goal is met insert 0\r\n\t// if not insert the difference\r\n\tif (month_is_passed)\r\n\t{\r\n\t\tif (totalMonthGrossRevenue >= org_revenue_goal)\r\n\t\t\t$('#rgrs_gross_revenue_goal').html(addFormatting(0));\r\n\t\telse\r\n\t\t\t$('#rgrs_gross_revenue_goal').html(addFormatting(totalMonthGrossRevenue - org_revenue_goal));\r\n\r\n\r\n\t\tvar actual_avg_ticket = removeFormatting($('#ma_avg_ticket_goal').html());\r\n\r\n\t\tif (actual_avg_ticket >= average_ticket)\r\n\t\t\t$('#rgrs_avg_ticket_goal').html(addFormatting(0));\r\n\t\telse\r\n\t\t\t$('#rgrs_avg_ticket_goal').html(addFormatting(actual_avg_ticket - average_ticket));\r\n\r\n\r\n\t\tif (FT_months_total >= ft_goal)\r\n\t\t\t$('#rgrs_finishing_touch_goal').html(addFormatting(0));\r\n\t\telse\r\n\t\t\t$('#rgrs_finishing_touch_goal').html(addFormatting(FT_months_total - ft_goal));\r\n\r\n\r\n\t\tvar guestsGoal = $(\"#guests_goal\").html();\r\n\r\n\t\tif (ma_guest_count_months_total >= guestsGoal)\r\n\t\t\t$('#rgrs_guests_goal').html(formatAsMoney(0));\r\n\t\telse\r\n\t\t\t$('#rgrs_guests_goal').html(formatAsMoney(ma_guest_count_months_total - guestsGoal));\r\n\r\n\t}\r\n\r\n\t// take a pass through and fill in daily and weekly goal totals\r\n\tvar lastDay = -1;\r\n\tvar lastWeek = -1;\r\n\r\n\tvar dailyTotal = 0;\r\n\tvar weeklyTotal = 0;\r\n\r\n\tvar dailyFTTotal = 0;\r\n\tvar weeklyFTTotal = 0;\r\n\r\n\tvar curCalWeekTotal = 0;\r\n\tvar curCalWeekFTTotal = 0;\r\n\r\n\t$(\"[id^=dre_]\").each(function()\r\n\t{\r\n\r\n\r\n\t\tvar thisDay = $(this).attr('data-day_number');\r\n\t\tvar thisWeek = $(this).attr('data-week_number');\r\n\r\n\t\tif (lastDay != -1 && thisDay != lastDay)\r\n\t\t{\r\n\t\t\t// new day so total last day\r\n\t\t\t$(\"#dce_\" + lastDay + \"-\" +  lastWeek).html(addFormatting(dailyTotal));\r\n\t\t\t$(\"#ftdtg_\" + lastDay + \"-\" +  lastWeek).html(addFormatting(dailyFTTotal));\r\n\r\n\t\t\tdailyTotal = 0;\r\n\t\t\tdailyFTTotal = 0;\r\n\t\t}\r\n\r\n\t\tif (lastWeek!= -1 && thisWeek != lastWeek)\r\n\t\t{\r\n\r\n\r\n\t\t\tif (hasPreviousMonthSessions && lastWeek == hasPreviousMonthSessions)\r\n\t\t\t{\r\n\t\t\t\t$(\"#wcec_\" +  lastWeek).html(addFormatting(curCalWeekTotal));\r\n\t\t\t\t$(\"#ftwtgc_\" +  lastWeek).html(addFormatting(curCalWeekFTTotal));\r\n\r\n\t\t\t\t$(\"#wce_\" +  lastWeek).html(addFormatting(weeklyTotal));\r\n\t\t\t\t$(\"#ftwtg_\" +  lastWeek).html(addFormatting(weeklyFTTotal));\r\n\r\n\t\t\t}\r\n\t\t\telse if (hasFutureMonthSessions && lastWeek == hasFutureMonthSessions)\r\n\t\t\t{\r\n\t\t\t\t$(\"#wcec_\" +  lastWeek).html(addFormatting(curCalWeekTotal));\r\n\t\t\t\t$(\"#ftwtgc_\" +  lastWeek).html(addFormatting(curCalWeekFTTotal));\r\n\r\n\t\t\t\t$(\"#wce_\" +  lastWeek).html(addFormatting(weeklyTotal));\r\n\t\t\t\t$(\"#ftwtg_\" +  lastWeek).html(addFormatting(weeklyFTTotal));\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// new week so total last week\r\n\t\t\t\t$(\"#wcec_\" +  lastWeek).html(addFormatting(weeklyTotal));\r\n\t\t\t\t$(\"#ftwtgc_\" +  lastWeek).html(addFormatting(weeklyFTTotal));\r\n\t\t\t}\r\n\r\n\t\t\tweeklyTotal = 0;\r\n\t\t\tweeklyFTTotal = 0;\r\n\t\t\tcurCalWeekTotal = 0;\r\n\t\t\tcurCalWeekFTTotal = 0;\r\n\t\t}\r\n\r\n\t\tvar session_id = this.id.substr(4);\r\n\r\n\r\n\t\tif ($(this).attr('data-in_month') == 'true')\r\n\t\t{\r\n\r\n\t\t\tvar temp = removeFormatting($(this).html());\r\n\t\t\tcurCalWeekTotal += (temp * 1);\r\n\r\n\t\t\tvar tempFT = removeFormatting($('#fttg_' + session_id).html());\r\n\t\t\tcurCalWeekFTTotal += (tempFT * 1);\r\n\r\n\t\t}\r\n\r\n\r\n\t\tlastDay = thisDay;\r\n\t\tlastWeek = thisWeek;\r\n\r\n\t\tvar amount = removeFormatting($(this).html());\r\n\t\tvar amountFT = removeFormatting($('#fttg_' + session_id).html());\r\n\r\n\t\tdailyTotal += (amount * 1);\r\n\t\tweeklyTotal += (amount * 1);\r\n\r\n\t\tdailyFTTotal += (amountFT * 1);\r\n\t\tweeklyFTTotal += (amountFT * 1);\r\n\r\n\r\n\r\n\t});\r\n\r\n\t$(\"#dce_\" + lastDay + \"-\" +  lastWeek).html(addFormatting(dailyTotal));\r\n\t$(\"#ftdtg_\" + lastDay + \"-\" +  lastWeek).html(addFormatting(dailyFTTotal));\r\n\r\n\t$(\"#wcec_\" +  lastWeek).html(addFormatting(weeklyTotal));\r\n\t$(\"#ftwtgc_\" +  lastWeek).html(addFormatting(weeklyFTTotal));\r\n\r\n\tif (hasPreviousMonthSessions && parseInt(lastWeek) == hasPreviousMonthSessions)\r\n\t{\r\n\t\t$(\"#wce_\" +  lastWeek).html(addFormatting(curCalWeekTotal));\r\n\t\t$(\"#ftwtg_\" +  lastWeek).html(addFormatting(curCalWeekFTTotal));\r\n\t}\r\n\r\n\tif (hasFutureMonthSessions && parseInt(lastWeek) == hasFutureMonthSessions)\r\n\t{\r\n\t\t$(\"#wce_\" +  lastWeek).html(addFormatting(curCalWeekTotal));\r\n\t\t$(\"#ftwtg_\" +  lastWeek).html(addFormatting(curCalWeekFTTotal));\r\n\t}\r\n\r\n}\r\n\r\nfunction init_session_lead_dropdowns()\r\n{\r\n\t$(\"[id^=sl_]\").change(function()\r\n\t{\r\n\t\tvar session_id = this.id.substr(3);\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata : {\r\n\t\t\t\tprocessor: 'admin_sessionLead',\r\n\t\t\t\tuser_id: $(this).val(),\r\n\t\t\t\tsession_id: session_id\r\n\t\t\t},\r\n\t\t\tsuccess: function(json)\r\n\t\t\t{\r\n\t\t\t\tif(json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\ttitle: 'Yas',\r\n\t\t\t\t\t\tmessage: json.processor_message\r\n\t\t\t\t\t}); */\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\tmessage: json.processor_message\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t{\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction init_exposure_controls()\r\n{\r\n\t// hide/show week\r\n\t$(\"[id^=wc_]\").on('click', function ()\r\n\t{\r\n\t\tvar week_num = this.id.substr(3);\r\n\r\n\t\tvar alt_num_display_name = \"wcan_\" + week_num;\r\n\r\n\t\tif ($(this).html() == 'Hide')\r\n\t\t{\r\n\r\n\t\t\tvar hideStr = \"wid_\" + week_num;\r\n\t\t\t$(\"[id^=\" + hideStr + \"]\").hide();\r\n\r\n\t\t\t$(\"#\" + alt_num_display_name).show();\r\n\t\t\t$(this).html('Show');\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar showStr = \"wid_\" + week_num;\r\n\t\t\t$(\"[id^=\" + showStr + \"]\").show();\r\n\r\n\t\t\t$(\"#\" + alt_num_display_name).hide();\r\n\t\t\t$(this).html('Hide');\r\n\r\n\t\t\t$(\"[id^=dn_\" + week_num +  \"]\").hide();\r\n\t\t\t$(\"[id^=dc_\" + week_num +  \"]\").html('Hide');\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\t});\r\n\r\n\r\n\t// hide/show day\r\n\t$(\"[id^=dc_]\").on('click', function ()\r\n\t{\r\n\r\n\t\tvar theRow = $(this).parent().parent();\r\n\r\n\t\tvar parts = this.id.split(\"-\");\r\n\t\tvar week_num = parts[0].substr(3);\r\n\t\tvar day_num = parts[1];\r\n\r\n\t\tvar alt_week_num_display_name = \"wcan_\" + week_num;\r\n\t\tvar alt_day_num_display_name = \"dn_\" + week_num + \"-\" + day_num;\r\n\r\n\r\n\t\tif ($(this).html() == 'Hide')\r\n\t\t{\r\n\r\n\t\t\tvar hideStr = \"wid_\" + week_num + \"-did_\" + day_num + \"-\";\r\n\t\t\t$(\"[id^=\" + hideStr + \"]\").hide();\r\n\t\t\t$(this).html('Show');\r\n\t\t\t$(\"#\" + alt_day_num_display_name).show();\r\n\r\n\t\t\tif (theRow.attr(\"data-interweek_day_count\") == 1)\r\n\t\t\t{\r\n\t\t\t\t// so we are hiding the first row of the week and need to show the week hider in a new spot\r\n\t\t\t\t$(\"[id^=\" + alt_week_num_display_name + \"]\").show();\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar showStr = \"wid_\" + week_num + \"-did_\" + day_num + \"-\";\r\n\t\t\t$(\"[id^=\" + showStr + \"]\").show();\r\n\t\t\t$(this).html('Hide');\r\n\t\t\t$(\"#\" + alt_day_num_display_name).hide();\r\n\r\n\t\t\tif (theRow.attr(\"data-interweek_day_count\") == 1)\r\n\t\t\t{\r\n\t\t\t\t// so we are hiding the first row of the week and need to show the week hider in a new spot\r\n\t\t\t\t$(\"[id^=\" + alt_week_num_display_name + \"]\").hide();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n}\r\n\r\n"],"names":["hasChangedCOGS","reports_goal_management_init","$","bind","e","keyCode","init_exposure_controls","init_session_lead_dropdowns","init_goal_inputs","init_food_cost_inputs","init_labor_cost_inputs","init_money_formatting","init_update_p_and_l_data","calculatePage","each","this","val","addFormatting","stickyTableHeaders","focus","removeFormatting","blur","keypress","which","change","isNaN","total_expenses","Number","agr","html","marketing_total","royalty_total","net_income","keyup","click","validation_error_occurred","dd_message","title","message","dataObj","Object","id","data","ajax","url","type","timeout","dataType","processor","store_id","month","year","p_and_l_data","success","json","processor_success","dd_toast","processor_message","error","objAJAXRequest","strError","response","goal","value","updateGOGSfields","dateStr","date","op","weekNum","food_costs","thisCost","length","labor_costs","on","once","status","height","width","div_id","closeOnEscape","noOk","dayClickHandler","SE_dayClickHandler","initExpensesDialog","roundToTenths","mnt","Math","round","floor","_report_submitClick","form","parseInt","remove","stringVal","replace","numericVal","accounting","formatMoney","total_sessions","average_ticket","ft_goal","regular_guest_count_goal","taste_guest_count_goal","intro_guest_count_goal","standard_session_guest_goal","revenue_goal","org_revenue_goal","dateObj","Date","monthisCurrent","todaysDayNumber","getDate","lastGoalAmount","lastFTGoalAmount","todate_SessionCount","todate_GrossRevenue","todate_GuestCount","todate_FT_Total","updatedSessionGoal","updatedSessionFTGoal","remaining_session_count","totalMonthGrossRevenue","totalMonthFTRevenue","totalMonthGrossRevenueMinusTaste","encounteredFirstFutureSession","totalCurrentGuests","remainingFTGoal","per_customer_goal","attr","this_sessions_goal","this_sessions_ft_goal","session_id","substr","dayNumber","thisSessionActual","thisSessionActualFT","isTaste","month_is_future","dd_console_log","thisFutureSessionTotalGuestCount","formatAsMoney","addClass","removeClass","thisSessionTotalGuestCount","thisSessionFTTotal","FT_months_total","ma_guest_count_months_total","guestCountTotalMinusTaste","monthly_food_costs","params","split","percentage_name","total_name","foodCost","total","percent","monthly_labor_costs","laborCost","month_is_passed","actual_avg_ticket","guestsGoal","lastDay","lastWeek","dailyTotal","weeklyTotal","dailyFTTotal","weeklyFTTotal","curCalWeekTotal","curCalWeekFTTotal","thisDay","thisWeek","hasPreviousMonthSessions","hasFutureMonthSessions","temp","tempFT","amount","amountFT","user_id","week_num","alt_num_display_name","hideStr","hide","show","showStr","theRow","parent","parts","day_num","alt_week_num_display_name","alt_day_num_display_name"],"mappings":"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"}