{"version":3,"file":"publish_sessions.min.js","names":["admin_publish_sessions_init","getNewItemsInSelection","items_string","form","document","getElementById","startElem","startDate","value","startCell","endElem","endDate","endCell","alert","isSafari","ci","i","parentNode","cells","length","startCol","cellIndex","startRow","rowIndex","endCol","endRow","y","tempStartCol","tempEndCol","x","thisCell","calendarName","rows","images","getElementsByTagName","item","id","name","substr","serializeNewSessions","item_ids","hiliteIcon","index","img","src","PATH","image_admin","unHiliteIcon","onSetFillWindowStart","selectedCell","getAttribute","endID","endTD","operation","submit","onSetFillWindowEnd","startID","startTD","onClearFillWindow","onEditClick","bounce","onSessionClick","saveItems","style","display","publishItems","onDeleteClick","obj","theSpan","theCell","removeChild"],"sourceRoot":"js/src/dreamdinners/admin","sources":["publish_sessions.js"],"sourcesContent":["function admin_publish_sessions_init()\n{\n\n}\n\nfunction getNewItemsInSelection()\n{\n\titems_string = \"\";\n\n\tform = document.getElementById(\"fillWindowForm\");\n\tstartElem = document.getElementById(\"start\");\n\n\tvar startDate = startElem.value;\n\tif (startDate != null && startDate != \"\") {\n\t\tvar startCell = document.getElementById(startDate);\n\t}\n\n\tendElem = document.getElementById(\"end\");\n\tvar endDate = endElem.value;\n\n\tif (endDate != null && endDate != \"\") {\n\t\tvar endCell = document.getElementById(endDate);\n\t}\n\n\tif (endCell == null && startCell == null)\n\t{\n\t\talert (\"Please set a Date Range\");\n\t\treturn items_string;\n\t}\n\n\tif (endCell == null){endCell = startCell;}\n\n\tif (startCell == null){startCell = endCell;}\n\n\tif (isSafari) {\n\tvar ci = -1;\n\t for (var i = 0; i < startCell.parentNode.cells.length; i++) {\n\t   if (startCell === startCell.parentNode.cells[i]) {\n\t     ci = i;\n\t   }\n\t }\n\t if (ci == -1){alert(\"Problem: acessing cells. Please notify Dream dinners staff\"); // this should never happen\n}\n\tstartCol = ci;\n\t} else  {\n\t\tvar startCol= startCell.cellIndex;\n\t}\n\n\tvar startRow = startCell.parentNode.rowIndex;\n\n\tif (isSafari) {\n\tci = -1;\n\t for (var i = 0; i < endCell.parentNode.cells.length; i++) {\n\t   if (endCell === endCell.parentNode.cells[i]) {\n\t     ci = i;\n\t   }\n\t }\n\t if (ci == -1){alert(\"Problem: acessing cells. Please notify Dream dinners staff\"); // this should never happen\n}\n\tendCol = ci;\n\t} else  {\n\t\tvar endCol= endCell.cellIndex;\n\t}\n\n\tvar endRow = endCell.parentNode.rowIndex;\n\n\titems_string = \"\";\n\n\tfor (y = startRow; y <= endRow; y++)\n\t{\n\t\tif (y == startRow){tempStartCol = startCol;} else {tempStartCol = 0;}\n\n\t\tif (y == endRow){tempEndCol = endCol;} else {tempEndCol = 6;}\n\n\t\tfor (x = tempStartCol; x <= tempEndCol; x++)\n\t\t{\n\t\t\tthisCell=document.getElementById(calendarName).rows[y].cells[x];\n\n\t\t\tif (thisCell)\n\t\t\t{\n\t\t\t\timages = thisCell.getElementsByTagName(\"img\");\n\n\t\t\t\tfor (i= 0; i < images.length; i++)\n\t\t\t\t{\n\n\t\t\t\t\tif (images.item(i).id < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\titems_string += (images.item(i).id + \"^\" + thisCell.id + \"^\" +  images.item(i).name + \"|\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn items_string.substr(0, items_string.length - 1);\n}\n\nfunction serializeNewSessions()\n{\n\t// send all the new sessions back to the server\n\titems_string = \"\";\n\n\tfor (y = 2; y <= 8; y++)\n\t{\n\t\tfor (x = 0; x <= 6; x++)\n\t\t{\n\t\t\tthisCell=document.getElementById(calendarName).rows[y].cells[x];\n\n\t\t\tif (thisCell)\n\t\t\t{\n\t\t\t\timages = thisCell.getElementsByTagName(\"img\");\n\n\t\t\t\tfor (i= 0; i < images.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (images.item(i).id < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\titems_string += (images.item(i).id + \"^\" + thisCell.id + \"^\" +  images.item(i).name + \"|\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (items_string != \"\")\n\t{\n\t\tform = document.getElementById(\"fillWindowForm\");\n\t\titem_ids = document.getElementById(\"item_ids\");\n\t\titem_ids.value = items_string.substr(0, items_string.length - 1);\n\t}\n}\n\nfunction hiliteIcon(id, index)\n{\n\timg = document.getElementById(id);\n\n\tswitch(index)\n\t{\n\t\tcase 1:\n\t\t\timg.src = PATH.image_admin + '/calendar/session_pub_hl.png';\n\t\t\treturn;\n\t\tcase 2:\n\t\t\timg.src = PATH.image_admin + '/calendar/session_saved_hl.png';\n\t\t\treturn;\n\t\tcase 3:\n\t\t\timg.src = PATH.image_admin + '/calendar/session_new_hl.png';\n\t\t\treturn;\n\t\tcase 4:\n\t\t\timg.src = PATH.image_admin + '/calendar/session_closed_hl.png';\n\t\t\treturn;\n\t}\n}\n\nfunction unHiliteIcon(id, index)\n{\n\timg = document.getElementById(id);\n\n\tswitch(index)\n\t{\n\t\tcase 1:\n\t\t\timg.src = PATH.image_admin + '/calendar/session_pub.png';\n\t\t\treturn;\n\t\tcase 2:\n\t\t\timg.src = PATH.image_admin + '/calendar/session_saved.png';\n\t\t\treturn;\n\t\tcase 3:\n\t\t\timg.src = PATH.image_admin + '/calendar/session_new.png';\n\t\t\treturn;\n\t\tcase 4:\n\t\t\timg.src = PATH.image_admin + '/calendar/session_closed.png';\n\t\t\treturn;\n\t}\n}\n\nfunction onSetFillWindowStart()\n{\n\tif (selectedCell)\n\t{\n\t\tif( !selectedCell.getAttribute( 'validForMenu' ) )\n\t\t{\n\t\t\tserializeNewSessions();\n\n\t\t\tform = document.getElementById(\"fillWindowForm\");\n\n\t\t\tendID = document.getElementById(\"end\").value;\n\t\t\tif (endID != null && endID != \"\")\n\t\t\t{\n\t\t\t\tendTD = document.getElementById(endID);\n\t\t\t\tendCol= endTD.cellIndex;\n\t\t\t\tendRow = endTD.parentNode.rowIndex;\n\n\t\t\t\tvar startCol= selectedCell.cellIndex;\n\t\t\t\tvar startRow = selectedCell.parentNode.rowIndex;\n\n\t\t\t\tif (endRow < startRow || (endRow == startRow && endCol < startCol))\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById(\"end\").value = selectedCell.id;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstartElem = document.getElementById(\"start\");\n\t\t\tstartElem.value = selectedCell.id;\n\n\t\t\toperation = document.getElementById(\"operation\");\n\t\t\toperation.value = null;\n\n\t\t\tform.submit();\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert( \"Sorry, you selected a date outside of the valid menu range.\\nPlease select a date between the two arrows.\" );\n\t\t}\n\t}\n\telse\n\t{\n\t\talert(\"Please select a start day by clicking on a day in calendar\");\n\t}\n}\n\nfunction onSetFillWindowEnd()\n{\n\tif (selectedCell)\n\t{\n\t\tif( !selectedCell.getAttribute( 'validForMenu' ) ) {\n\t\t\tserializeNewSessions();\n\n\t\t\tform = document.getElementById(\"fillWindowForm\");\n\n\t\t\tstartID = document.getElementById(\"start\").value;\n\t\t\tif (startID != null && startID != \"\")\n\t\t\t{\n\t\t\t\tstartTD = document.getElementById(startID);\n\t\t\t\tstartCol= startTD.cellIndex;\n\t\t\t\tstartRow = startTD.parentNode.rowIndex;\n\n\t\t\t\tvar endCol= selectedCell.cellIndex;\n\t\t\t\tvar endRow = selectedCell.parentNode.rowIndex;\n\n\t\t\t\tif (endRow < startRow || (endRow == startRow && endCol < startCol))\n\t\t\t\t{\n\t\t\t\t\tdocument.getElementById(\"start\").value = selectedCell.id;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tendElem = document.getElementById(\"end\");\n\t\t\tendElem.value = selectedCell.id;\n\n\t\t\toperation = document.getElementById(\"operation\");\n\t\t\toperation.value = null;\n\n\t\t\tform.submit();\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert( \"Sorry, you selected a date outside of the valid menu range.\\nPlease select a date between the two arrows.\" );\n\t\t}\n\t}\n\telse\n\t{\n\t\talert(\"Please select an end day by clicking on a day in calendar\");\n\t}\n}\n\nfunction onClearFillWindow()\n{\n\tserializeNewSessions();\n\n\tform = document.getElementById(\"fillWindowForm\");\n\n\tendElem = document.getElementById(\"end\");\n\tendElem.value = null;\n\n\tstartElem = document.getElementById(\"start\");\n\tstartElem.value = null;\n\n\toperation = document.getElementById(\"operation\");\n\toperation.value = null;\n\n\tform.submit();\n}\n\nfunction onEditClick(id)\n{\n\tbounce(\"/backoffice/edit-session?session=\" + id);\n}\n\nfunction onSessionClick(id)\n{\n\tbounce(\"/backoffice?session=\" + id);\n}\n\nfunction saveItems()\n{\n\titems_string = getNewItemsInSelection();\n\n\tif (items_string != \"\")\n\t{\n\t\tform = document.getElementById(\"fillWindowForm\");\n\n\t\tdocument.getElementById(\"item_ids\").value = items_string;\n\t\tdocument.getElementById(\"operation\").value = 'save';\n\t\tform.submit();\n\n\t\tvar submitDiv = document.getElementById(\"saveButton\");\n\t\tsubmitDiv.style.display = 'none';\n\t}\n}\n\nfunction publishItems()\n{\n\titems_string = getNewItemsInSelection();\n\n\tform = document.getElementById(\"fillWindowForm\");\n\n\tif (items_string != \"\")\n\t{\n\t\tdocument.getElementById(\"item_ids\").value = items_string;\n\t}\n\n\tdocument.getElementById(\"operation\").value = 'publish';\n\tform.submit();\n\n\tvar submitDiv = document.getElementById(\"publishButton\");\n\tsubmitDiv.style.display = 'none';\n}\n\nfunction onDeleteClick(obj)\n{\n\ttheSpan = obj.parentNode;\n\ttheCell = theSpan.parentNode;\n\n\ttheCell.removeChild(theSpan);\n\n}"],"mappings":"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","ignoreList":[]}