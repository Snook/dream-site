var itemTabIsDirty=false;const EXCEED_INV_MSG="Your request would exceed the available inventory for this item. <br><br>The item amount has been limited to the amount currently available. <br><br>Please use the Inventory Manager to add inventory if required.";function bundleSetup(){$(document).on("change","#selectedBundle",function(e){if($(this).is(":checked")){$.each(bundleItemsBundle,function(e,t){$("#bnd_"+e).prop("disabled",false)});originalAssemblyFee=$("#subtotal_service_fee").val();if(session_type=="SPECIAL_EVENT"){$("#subtotal_service_fee").val("0.00")}}else{$.each(bundleItemsBundle,function(e,t){$("#bnd_"+e).prop("checked",false)});if(session_type=="SPECIAL_EVENT"&&originalAssemblyFee!=-1){$("#subtotal_service_fee").val(originalAssemblyFee)}}calculateTotal()})}function bundleItemClick(e){var t=countSelectedBundleItems();setItemTabAsDirty();if(e.checked){if(t>intro_servings_required){e.checked=false;dd_message({title:"Notice",message:"You may only pick "+intro_servings_required+"-servings of Meal Prep Starter Pack items. "+countSelectedBundleItems()+" servings have been selected."})}else{var a=e.id.substr(4);var i="inv_"+bundleItemsBundle[a].entree_id;var r=Number($("#"+i).html());var n=bundleItemsBundle[a].servings_per_item;if(r<n){e.checked=false;alert("There is not enough inventory for this item.")}var l=i.substr(4);$.each(EntreeMap[l],function(e,t){if(EntreeMap[l][e]!=a){$("#bnd_"+EntreeMap[l][e]).prop("checked",false)}})}}else{}calculateTotal()}var originalAssemblyFee=-1;function bundleClick(e){}function countSelectedBundleItems(){numBundItems=0;$.each(bundleItemsBundle,function(e,t){if($("#bnd_"+e).is(":checked")){numBundItems+=parseInt(t.servings_per_item)}});return numBundItems}function subtractPromoFromInventory(e){if(e&&e!=0){var t=promo_to_item_map[e];var a=promo_to_servings_map[e];if(t){var i=entreeIDToInventoryMap[t].remaining;i-=a;entreeIDToInventoryMap[t].remaining=i}}}function setItemTabAsDirty(){itemTabIsDirty=true}function DTQtyUpdate(e){if(!e){return}setItemTabAsDirty();var t=0;if(e.value!=""&&e.value!="0"){e.value=Math.abs(e.value);t=Number(e.getAttribute("data-lastQty"));var a=e.getAttribute("data-entreeID");var i=e.getAttribute("data-servings");var r=entreeIDToInventoryMap[a].remaining;if(isNaN(e.value)==true||e.value-parseInt(e.value)!=0){e.value=0;e.setAttribute("data-lastQty",0)}if(e.value>0){var n=e.value-t;var l=n*i;if(l>r){var s=parseInt(r/i);inputAsNum=t+s;e.value=inputAsNum;e.setAttribute("data-lastQty",e.value);bootbox.alert(EXCEED_INV_MSG)}else{e.setAttribute("data-lastQty",e.value)}}}else{e.setAttribute("data-lastQty",0)}calculateTotal();var u=$("#OEH_number_servings").html();var o=Number(bundleInfo.number_servings_required);if(Number(u)>o){e.value=t;dd_message({title:"Alert",message:"Your request has exceeded serving limit of "+o+" for this order."});calculateTotal()}}var orderItems=[];function rebuildOrderItemsArray(){orderItems=[];$("[id^='qty_']").each(function(){if($(this).val()!=""){if(isNaN($(this).val())==true||$(this).val()-parseInt($(this).val(),10)!=0){$(this).val(0)}var e=$(this).val();var t=this.id.split("_")[1];if(isNaN(e)==false){if(e>0){var a={id:t,entree_id:$(this).data("entreeid"),qty:e,price:$(this).data("price"),serving_size:$(this).data("servings"),pricing_type:$(this).data("pricing_type"),intro_item:$(this).data("intro_item"),menu_class:$(this).data("menu_class"),menu_category_id:$(this).data("menu_category_id"),item_title:$(this).data("item_title"),dd_type:$(this).data("dd_type")};orderItems.push(a)}}}});return orderItems}function qtyUpdate(e){if(event.keyCode==9){return}if(!e){return}if(e.max!=""){if(Number(e.value)>Number(e.max)){e.value=e.max}}setItemTabAsDirty();if(e.value!=""){e.value=Math.abs(e.value);var t=Number(e.getAttribute("data-lastQty"));var a=e.getAttribute("data-entreeID");var i=e.getAttribute("data-servings");var r=entreeIDToInventoryMap[a].remaining;var n=$(e).data("menu_item_id");if(isNaN(e.value)==true||e.value-parseInt(e.value)!=0){e.value=0;e.setAttribute("data-lastQty",0)}if(e.value>0){var l=e.value-t;var s=l*i;if(s>r){var u=parseInt(r/i);inputAsNum=t+u;e.value=inputAsNum;e.setAttribute("data-lastQty",e.value);bootbox.alert(EXCEED_INV_MSG)}else{e.setAttribute("data-lastQty",e.value)}}if(couponFreeMenuItem==n&&e.value<1){e.value=1;e.setAttribute("data-lastQty",e.value);dd_alert("This item has a coupon attached to it, please remove the coupon first.")}if(selectedFreeMenuItem==n&&e.value<1){handleFreeMenuItem($("#coupon_code").val())}}else{e.setAttribute("data-lastQty",0)}calculateTotal()}$(document).on("change",'[id^="qty_"]',function(e){if(e.type!="keyup"){$(this).trigger("keyup")}});$(document).on("click",".btn-inc_qty:not(.disabled)",function(e){let t=$(this).data("menu_item_id");let a=$(this).data("entree_id");let i=$(this).data("servings_per_item");let r=$(this).data("box_type");var n=entreeIDToInventoryMap[a].remaining;if(i>n){bootbox.alert(EXCEED_INV_MSG);calculateTotal();return}var l=document.getElementById(r+t);if(l){setItemTabAsDirty();val=parseInt(l.value);if(isNaN(val)){val=0}if(val+1>=l.max){l.value=l.max}else{l.value=val+1}}calculateTotal();if(isDreamTaste||isFundraiser){var s=Number(bundleInfo.number_servings_required);if(s){var u=$("#OEH_number_servings").html();if(Number(u)>s){l.value--;dd_message({title:"Alert",message:"Your request has exceeded serving limit of "+s+" for this order."});calculateTotal()}}}});$(document).on("click",".btn-dec_qty:not(.disabled)",function(e){let t=$(this).data("menu_item_id");let a=$(this).data("entree_id");let i=$(this).data("servings_per_item");let r=$(this).data("box_type");var n=document.getElementById(r+t);if(n){setItemTabAsDirty();val=parseInt(n.value);if(isNaN(val)){val=0}n.value=val-1}if(parseInt(n.value)==-1){n.value=0}if(couponFreeMenuItem==t&&n.value<1){n.value=1;dd_alert("This item has a coupon attached to it, please remove the coupon first.")}if(selectedFreeMenuItem==t&&n.value<1){handleFreeMenuItem($("#coupon_code").val())}calculateTotal()});function incAddonQty(e){var t=document.getElementById("qna_"+e);var a=entreeIDToInventoryMap[e].remaining;if(1>a){bootbox.alert(EXCEED_INV_MSG);calculateTotal();return}if(t){val=parseInt(t.value);if(isNaN(val)){val=0}if(val+1==100){t.value=99}else{t.value=val+1}}calculateTotal()}function costInput(e){setItemTabAsDirty();calculateTotal()}function decAddonQty(e){var t=document.getElementById("qna_"+e);if(t){val=parseInt(t.value);if(isNaN(val)){val=0}t.value=val-1}if(parseInt(t.value)==-1){t.value=0}calculateTotal()}
//# sourceMappingURL=order_mgr_items.min.js.map