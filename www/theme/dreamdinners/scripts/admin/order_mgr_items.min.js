var itemTabIsDirty=!1;const EXCEED_INV_MSG="Your request would exceed the available inventory for this item. <br><br>The item amount has been limited to the amount currently available. <br><br>Please use the Inventory Manager to add inventory if required.";function bundleSetup(){$(document).on("change","#selectedBundle",(function(e){$(this).is(":checked")?($.each(bundleItemsBundle,(function(e,t){$("#bnd_"+e).prop("disabled",!1)})),originalAssemblyFee=$("#subtotal_service_fee").val(),"SPECIAL_EVENT"==session_type&&$("#subtotal_service_fee").val("0.00")):($.each(bundleItemsBundle,(function(e,t){$("#bnd_"+e).prop("checked",!1)})),"SPECIAL_EVENT"==session_type&&-1!=originalAssemblyFee&&$("#subtotal_service_fee").val(originalAssemblyFee)),calculateTotal()}))}function bundleItemClick(e){var t=countSelectedBundleItems();if(setItemTabAsDirty(),e.checked)if(t>intro_servings_required)e.checked=!1,dd_message({title:"Notice",message:"You may only pick "+intro_servings_required+"-servings of Meal Prep Starter Pack items. "+countSelectedBundleItems()+" servings have been selected."});else{var a=e.id.substr(4),i="inv_"+bundleItemsBundle[a].entree_id;Number($("#"+i).html())<bundleItemsBundle[a].servings_per_item&&(e.checked=!1,alert("There is not enough inventory for this item."));var n=i.substr(4);$.each(EntreeMap[n],(function(e,t){EntreeMap[n][e]!=a&&$("#bnd_"+EntreeMap[n][e]).prop("checked",!1)}))}calculateTotal()}var originalAssemblyFee=-1;function bundleClick(e){}function countSelectedBundleItems(){return numBundItems=0,$.each(bundleItemsBundle,(function(e,t){$("#bnd_"+e).is(":checked")&&(numBundItems+=parseInt(t.servings_per_item))})),numBundItems}function subtractPromoFromInventory(e){if(e&&0!=e){var t=promo_to_item_map[e],a=promo_to_servings_map[e];if(t){var i=entreeIDToInventoryMap[t].remaining;i-=a,entreeIDToInventoryMap[t].remaining=i}}}function setItemTabAsDirty(){itemTabIsDirty=!0}function DTQtyUpdate(e){if(e){setItemTabAsDirty();var t=0;if(""!=e.value&&"0"!=e.value){e.value=Math.abs(e.value),t=Number(e.getAttribute("data-lastQty"));var a=e.getAttribute("data-entreeID"),i=e.getAttribute("data-servings"),n=entreeIDToInventoryMap[a].remaining;if(1!=isNaN(e.value)&&e.value-parseInt(e.value)==0||(e.value=0,e.setAttribute("data-lastQty",0)),e.value>0)if((e.value-t)*i>n){var r=parseInt(n/i);inputAsNum=t+r,e.value=inputAsNum,e.setAttribute("data-lastQty",e.value),bootbox.alert(EXCEED_INV_MSG)}else e.setAttribute("data-lastQty",e.value)}else e.setAttribute("data-lastQty",0);calculateTotal();var s=$("#OEH_number_servings").html(),l=Number(bundleInfo.number_servings_required);Number(s)>l&&(e.value=t,dd_message({title:"Alert",message:"Your request has exceeded serving limit of "+l+" for this order."}),calculateTotal())}}var orderItems=[];function rebuildOrderItemsArray(){return orderItems=[],$("[id^='qty_']").each((function(){if(""!=$(this).val()){1!=isNaN($(this).val())&&$(this).val()-parseInt($(this).val(),10)==0||$(this).val(0);var e=$(this).val(),t=this.id.split("_")[1];if(0==isNaN(e)&&e>0){var a={id:t,entree_id:$(this).data("entreeid"),qty:e,price:$(this).data("price"),serving_size:$(this).data("servings"),pricing_type:$(this).data("pricing_type"),intro_item:$(this).data("intro_item"),menu_class:$(this).data("menu_class"),menu_category_id:$(this).data("menu_category_id"),item_title:$(this).data("item_title"),dd_type:$(this).data("dd_type")};orderItems.push(a)}}})),orderItems}function qtyUpdate(e){if(9!=event.keyCode&&e){if(""!=e.max&&Number(e.value)>Number(e.max)&&(e.value=e.max),setItemTabAsDirty(),""!=e.value){e.value=Math.abs(e.value);var t=Number(e.getAttribute("data-lastQty")),a=e.getAttribute("data-entreeID"),i=e.getAttribute("data-servings"),n=entreeIDToInventoryMap[a].remaining,r=$(e).data("menu_item_id");if(1!=isNaN(e.value)&&e.value-parseInt(e.value)==0||(e.value=0,e.setAttribute("data-lastQty",0)),e.value>0)if((e.value-t)*i>n){var s=parseInt(n/i);inputAsNum=t+s,e.value=inputAsNum,e.setAttribute("data-lastQty",e.value),bootbox.alert(EXCEED_INV_MSG)}else e.setAttribute("data-lastQty",e.value);couponFreeMenuItem==r&&e.value<1&&(e.value=1,e.setAttribute("data-lastQty",e.value),dd_alert("This item has a coupon attached to it, please remove the coupon first.")),selectedFreeMenuItem==r&&e.value<1&&handleFreeMenuItem($("#coupon_code").val())}else e.setAttribute("data-lastQty",0);calculateTotal()}}function incAddonQty(e){var t=document.getElementById("qna_"+e);if(1>entreeIDToInventoryMap[e].remaining)return bootbox.alert(EXCEED_INV_MSG),void calculateTotal();t&&(val=parseInt(t.value),isNaN(val)&&(val=0),val+1==100?t.value=99:t.value=val+1),calculateTotal()}function costInput(e){setItemTabAsDirty(),calculateTotal()}function decAddonQty(e){var t=document.getElementById("qna_"+e);t&&(val=parseInt(t.value),isNaN(val)&&(val=0),t.value=val-1),-1==parseInt(t.value)&&(t.value=0),calculateTotal()}$(document).on("change",'[id^="qty_"], [id^="sbi_"]',(function(e){"keyup"!=e.type&&$(this).trigger("keyup")})),$(document).on("click",".btn-inc_qty:not(.disabled)",(function(e){let t=$(this).data("menu_item_id"),a=$(this).data("entree_id"),i=$(this).data("servings_per_item"),n=$(this).data("box_type");if(i>entreeIDToInventoryMap[a].remaining)return bootbox.alert(EXCEED_INV_MSG),void calculateTotal();var r=document.getElementById(n+t);if(r&&(setItemTabAsDirty(),val=parseInt(r.value),isNaN(val)&&(val=0),val+1>=r.max?r.value=r.max:r.value=val+1),calculateTotal(),isDreamTaste||isFundraiser){var s=Number(bundleInfo.number_servings_required);if(s){var l=$("#OEH_number_servings").html();Number(l)>s&&(r.value--,dd_message({title:"Alert",message:"Your request has exceeded serving limit of "+s+" for this order."}),calculateTotal())}}})),$(document).on("click",".btn-dec_qty:not(.disabled)",(function(e){let t=$(this).data("menu_item_id"),a=($(this).data("entree_id"),$(this).data("servings_per_item"),$(this).data("box_type"));var i=document.getElementById(a+t);i&&(setItemTabAsDirty(),val=parseInt(i.value),isNaN(val)&&(val=0),i.value=val-1),-1==parseInt(i.value)&&(i.value=0),couponFreeMenuItem==t&&i.value<1&&(i.value=1,dd_alert("This item has a coupon attached to it, please remove the coupon first.")),selectedFreeMenuItem==t&&i.value<1&&handleFreeMenuItem($("#coupon_code").val()),calculateTotal()}));
//# sourceMappingURL=order_mgr_items.min.js.map