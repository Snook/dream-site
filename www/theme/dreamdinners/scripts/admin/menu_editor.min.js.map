{"version":3,"file":"menu_editor.min.js","names":["limit_visible_efl","limit_visible_sides","showPopup","config","settings","type","height","width","modal","callBack","resizable","$","extend","ajax","url","module","success","data","status","message","dd_message","error","objAJAXRequest","strError","response","on","event","historyReplace","currentTarget","document","e","menu_id","this","val","preventDefault","form","formHasChanged","bootbox","dialog","title","centerVertical","buttons","cancel","label","className","callback","valDefault","confirm","create_and_submit_form","action","input","menu","saving_sides","closeButton","defaultData","each","menu_item_id","recipe_id","ovr","vis","hid","pic","timeout","dataType","processor","store_id","STORE_DETAILS","id","json","processor_success","processor_message","prompt","inputType","inputOptions","text","value","result","length","alert","setting","includes","trigger","unique_recipes","Set","add","closest","size","valNotDefault","addClass","removeClass","category_id","is_store_special","is","lowest_tier_price","Number","highest_tier_price","ovr_value","toFixed","priceArray","split","hideFlex","showFlex","this_nav","find","onHidden","keyCode","validateForm","displayModalWaitDialog","noOk","closeOnEscape","div_id","open","ui","parent","hide","remove","Cancel","Okay","entreeList","thisEntree","op","entree_ids","bounce","close","hasClass","entree_id","tr","clone","show","append","handle_tabbed_content","errorMissingCategory","categoryLabel","html","css","console","log","oldCategory","uiTableFilter","change","Modernizr","placeholder","focus","blur"],"sourceRoot":"js/src/dreamdinners/admin","sources":["menu_editor.js"],"sourcesContent":["const limit_visible_efl = 8;\nconst limit_visible_sides = 20;\n\n$('#menu-editor-nav > [data-toggle=\"tab\"]').on('shown.bs.tab', function (event) {\n\n\thistoryReplace({url: '?tab=nav-' + $(event.currentTarget).data('nav')});\n\n});\n\n$(document).on('change', '#menu', function (e) {\n\n\tlet menu_id = $(this).val();\n\n\te.preventDefault();\n\n\tif ($(this.form).formHasChanged())\n\t{\n\t\tbootbox.dialog({\n\t\t\ttitle: 'Confirmation',\n\t\t\tmessage: \"<p>Are you sure you wish to change menus? You will lose any unsaved changes.</p>\",\n\t\t\tcenterVertical: true,\n\t\t\tbuttons: {\n\t\t\t\tcancel: {\n\t\t\t\t\tlabel: 'Cancel',\n\t\t\t\t\tclassName: 'btn-secondary mr-auto',\n\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\t$('#menu').valDefault()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tconfirm: {\n\t\t\t\t\tlabel: 'Switch menu',\n\t\t\t\t\tcallback: function () {\n\n\t\t\t\t\t\tcreate_and_submit_form({\n\t\t\t\t\t\t\taction: '/backoffice/menu-editor',\n\t\t\t\t\t\t\tinput: ({\n\t\t\t\t\t\t\t\t'menu': menu_id\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\telse\n\t{\n\t\tcreate_and_submit_form({\n\t\t\taction: '/backoffice/menu-editor',\n\t\t\tinput: ({\n\t\t\t\t'menu': menu_id\n\t\t\t})\n\t\t});\n\t}\n\n});\n\n$(document).on('click', '.sides-sweets-save', function (e) {\n\n\te.preventDefault()\n\n\tbootbox.dialog({\n\t\ttitle: 'Confirmation',\n\t\tmessage: \"<p>Are you sure you wish to save all current Sides &amp; Sweets pricing and visibility settings to retrieve on future menus?</p>\",\n\t\tcenterVertical: true,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\tlabel: 'Cancel',\n\t\t\t\tclassName: 'btn-secondary mr-auto'\n\t\t\t},\n\t\t\tconfirm: {\n\t\t\t\tlabel: 'Save defaults',\n\t\t\t\tclassName: 'btn-danger',\n\t\t\t\tcallback: function () {\n\n\t\t\t\t\tlet saving_sides = bootbox.dialog({\n\t\t\t\t\t\tmessage: '<p><i class=\"fa fa-spin fa-spinner\"></i> Saving defaults, please wait.</p>',\n\t\t\t\t\t\tcenterVertical: true,\n\t\t\t\t\t\tcloseButton: false\n\t\t\t\t\t});\n\n\t\t\t\t\tlet defaultData = {};\n\n\t\t\t\t\t$('.menu-editor-ovr').each(function (e) {\n\n\t\t\t\t\t\tlet menu_item_id = $(this).data('menu_item_id');\n\t\t\t\t\t\tlet recipe_id = $(this).data('recipe_id');\n\n\t\t\t\t\t\tdefaultData[recipe_id] = {\n\t\t\t\t\t\t\t'ovr': $(this).val(),\n\t\t\t\t\t\t\t'vis': $('.menu-editor-vis[data-menu_item_id=\"' + menu_item_id + '\"]').val(),\n\t\t\t\t\t\t\t'hid': $('.menu-editor-hid[data-menu_item_id=\"' + menu_item_id + '\"]').val(),\n\t\t\t\t\t\t\t'pic': $('.menu-editor-pic[data-menu_item_id=\"' + menu_item_id + '\"]').val(),\n\t\t\t\t\t\t\t'form': $('.menu-editor-form[data-menu_item_id=\"' + menu_item_id + '\"]').val()\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'admin_defaultPricingProcessor',\n\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\t\t\taction: 'save',\n\t\t\t\t\t\t\tdata: defaultData\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsaving_sides.modal('hide');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n});\n\n$(document).on('click', '.sides-sweets-retrieve', function (e) {\n\n\te.preventDefault()\n\n\tbootbox.prompt({\n\t\ttitle: \"Confirmation\",\n\t\tmessage: '<p>This will update settings for both hidden and visible Sides &amp; Sweets tabs. You will have the ability to review the changes before finalizing. Select the setings you wish to retrieve.</p>',\n\t\tinputType: 'checkbox',\n\t\tinputOptions: [\n\t\t\t{\n\t\t\t\ttext: 'Show on customer menu',\n\t\t\t\tvalue: 'vis'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: 'Show on Sides & Sweets Forms',\n\t\t\t\tvalue: 'form'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: 'Price',\n\t\t\t\tvalue: 'ovr'\n\t\t\t}\n\t\t],\n\t\tcenterVertical: true,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\tlabel: 'Cancel',\n\t\t\t\tclassName: 'btn-secondary mr-auto'\n\t\t\t},\n\t\t\tconfirm: {\n\t\t\t\tlabel: \"Retrieve defaults\"\n\t\t\t}\n\t\t},\n\t\tcallback: function (result) {\n\n\t\t\tif (result)\n\t\t\t{\n\t\t\t\tif (result.length === 0)\n\t\t\t\t{\n\t\t\t\t\tbootbox.alert({\n\t\t\t\t\t\ttitle: 'Notice',\n\t\t\t\t\t\tmessage: '<p>No options were selected.</p>',\n\t\t\t\t\t\tcenterVertical: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'admin_defaultPricingProcessor',\n\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\t\t\taction: 'retrieve'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$.each(json.settings, function (recipe_id, setting) {\n\n\t\t\t\t\t\t\t\t\tif (result.includes('ovr'))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$('.menu-editor-ovr[data-recipe_id=\"' + recipe_id + '\"][data-category_id=\"9\"]').val(setting['ovr']).trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (result.includes('vis'))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlet unique_recipes = new Set();\n\n\t\t\t\t\t\t\t\t\t\t$('.menu-editor-vis[data-category_id=\"9\"] option:selected[value=\"1\"]').each(function () {\n\t\t\t\t\t\t\t\t\t\t\tunique_recipes.add($(this).closest('select').data('recipe_id'));\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tif (unique_recipes.size <= limit_visible_sides)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t$('.menu-editor-vis[data-recipe_id=\"' + recipe_id + '\"][data-category_id=\"9\"]').val(setting['vis']).trigger('change');\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t$('.menu-editor-hid[data-recipe_id=\"' + recipe_id + '\"][data-category_id=\"9\"]').val(setting['hid']).trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (result.includes('form'))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$('.menu-editor-form[data-recipe_id=\"' + recipe_id + '\"][data-category_id=\"9\"]').val(setting['form']).trigger('change');\n\t\t\t\t\t\t\t\t\t\t$('.menu-editor-hid[data-recipe_id=\"' + recipe_id + '\"][data-category_id=\"9\"]').val(setting['hid']).trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n});\n\n$(document).on('change', '.menu-editor-hid', function (e) {\n\n\tlet menu_item_id = $(this).data('menu_item_id');\n\n\tif (this.value == 1)\n\t{\n\t\t$('.menu-editor-vis[data-menu_item_id=\"' + menu_item_id + '\"], .menu-editor-form[data-menu_item_id=\"' + menu_item_id + '\"], .menu-editor-pic[data-menu_item_id=\"' + menu_item_id + '\"]').val(0).trigger('change');\n\t}\n\n\tif ($(this).valNotDefault())\n\t{\n\t\t$(this).addClass('border-orange');\n\t}\n\telse\n\t{\n\t\t$(this).removeClass('border-orange');\n\t}\n\n});\n\n$(document).on('change', '.menu-editor-vis, .menu-editor-form, .menu-editor-pic', function (e) {\n\n\tlet menu_item_id = $(this).data('menu_item_id');\n\tlet category_id = $(this).data('category_id');\n\tlet is_store_special = $(this).data('is_store_special');\n\tlet unique_recipes = new Set();\n\n\tif (this.value == 1)\n\t{\n\t\t$('.menu-editor-hid[data-menu_item_id=\"' + menu_item_id + '\"]').val(0).trigger('change');\n\n\t\t// If changing visibility, verify limits\n\t\tif ($(this).is('.menu-editor-vis'))\n\t\t{\n\t\t\t// Check for S&S limit\n\t\t\tif (category_id == 9)\n\t\t\t{\n\t\t\t\t$('.menu-editor-vis[data-category_id=\"9\"] option:selected[value=\"1\"]').each(function () {\n\n\t\t\t\t\tunique_recipes.add($(this).closest('select').data('recipe_id'));\n\n\t\t\t\t});\n\n\t\t\t\tif (unique_recipes.size > limit_visible_sides)\n\t\t\t\t{\n\t\t\t\t\t$(this).closest('select').valDefault();\n\t\t\t\t\t$('.menu-editor-hid[data-menu_item_id=\"' + menu_item_id + '\"]').valDefault();\n\n\t\t\t\t\tbootbox.alert({\n\t\t\t\t\t\ttitle: 'Notice',\n\t\t\t\t\t\tmessage: '<p>You may only display a maximum of ' + limit_visible_sides + ' Sides &amp; Sweets recipes on the customer facing menu.</p>',\n\t\t\t\t\t\tcenterVertical: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check for EFL limit\n\t\t\tif (category_id == 4 && is_store_special == 1)\n\t\t\t{\n\t\t\t\t$('.menu-editor-vis[data-category_id=\"4\"][data-is_store_special=\"1\"] option:selected[value=\"1\"]').each(function () {\n\n\t\t\t\t\tunique_recipes.add($(this).closest('select').data('recipe_id'));\n\n\t\t\t\t});\n\n\t\t\t\tif (unique_recipes.size > limit_visible_efl)\n\t\t\t\t{\n\t\t\t\t\t$(this).closest('select').valDefault();\n\t\t\t\t\t$('.menu-editor-hid[data-menu_item_id=\"' + menu_item_id + '\"]').valDefault();\n\n\t\t\t\t\tbootbox.alert({\n\t\t\t\t\t\ttitle: 'Notice',\n\t\t\t\t\t\tmessage: '<p>You may only display a maximum of ' + limit_visible_efl + ' Extended Fast Lane recipes on the customer facing menu.</p>',\n\t\t\t\t\t\tcenterVertical: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif ($(this).valNotDefault())\n\t{\n\t\t$(this).addClass('border-orange');\n\t}\n\telse\n\t{\n\t\t$(this).removeClass('border-orange');\n\t}\n\n});\n\n$(document).on('change keyup', '.menu-editor-ovr', function (e) {\n\n\tlet menu_item_id = $(this).data('menu_item_id');\n\tlet lowest_tier_price = Number($(this).data('lowest_tier_price'));\n\tlet highest_tier_price = Number($(this).data('highest_tier_price'))\n\tlet ovr_value = Number(Number($(this).val()).toFixed(2));\n\tvar priceArray = Number($(this).val()).toFixed(2).split('.');\n\n\t$(this).removeClass('border-orange');\n\t$('.ovr-alert-danger[data-menu_item_id=\"' + menu_item_id + '\"]').hideFlex();\n\t$('.ovr-alert-warning[data-menu_item_id=\"' + menu_item_id + '\"]').hideFlex();\n\n\tif ($(this).valNotDefault())\n\t{\n\t\t$(this).addClass('border-orange');\n\t}\n\n\t// If the tier prices are zero, nothing to do\n\tif (lowest_tier_price > 0 && highest_tier_price > 0)\n\t{\n\t\tif (ovr_value < lowest_tier_price || ovr_value > highest_tier_price)\n\t\t{\n\t\t\t$('.ovr-alert-danger[data-menu_item_id=\"' + menu_item_id + '\"]').showFlex();\n\t\t}\n\t}\n\n\t// Only if the price isn't zero\n\tif (ovr_value > 0 && priceArray[1] != '99' && priceArray[1] != '49')\n\t{\n\t\t$('.ovr-alert-warning[data-menu_item_id=\"' + menu_item_id + '\"]').showFlex();\n\t}\n\n});\n\n$(document).on('change keyup', '.menu-editor-hid, .menu-editor-vis, .menu-editor-form, .menu-editor-pic, .menu-editor-ovr', function (e) {\n\n\t$('#menu-editor-nav > [data-nav] > .fa-asterisk').hideFlex();\n\t$('.menu-editor-unsaved-alert').hideFlex();\n\tif ($(this.form).formHasChanged())\n\t{\n\t\t$('.menu-editor-unsaved-alert').showFlex();\n\t}\n\n\t$('#menu-editor-nav > [data-nav]').each(function () {\n\n\t\tlet this_nav = $(this).data('nav');\n\n\t\tif ($('#nav-' + this_nav).find('.border-orange').length)\n\t\t{\n\t\t\t$('#menu-editor-nav > [data-nav=\"' + this_nav + '\"] > .fa-asterisk').showFlex();\n\t\t}\n\n\t});\n\n});\n\n$(document).on('click', '.menu-editor-reset', function (e) {\n\n\tbootbox.dialog({\n\t\ttitle: 'Confirmation',\n\t\tmessage: \"<p>Are you sure you wish to reset all currently pending changes?</p>\",\n\t\tcenterVertical: true,\n\t\tbuttons: {\n\t\t\tcancel: {\n\t\t\t\tlabel: 'Cancel',\n\t\t\t\tclassName: 'btn-secondary mr-auto'\n\t\t\t},\n\t\t\tconfirm: {\n\t\t\t\tlabel: 'Reset changes',\n\t\t\t\tclassName: 'btn-danger',\n\t\t\t\tcallback: function () {\n\n\t\t\t\t\t$(\"#menu_editor_form\").trigger('reset');\n\n\t\t\t\t\t$('#menu_editor_form').removeClass('was-validated');\n\t\t\t\t\t$('#menu-editor-nav > [data-nav] > .fa-exclamation-circle').hideFlex();\n\t\t\t\t\t$('#menu-editor-nav > [data-nav] > .fa-asterisk').hideFlex();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonHidden: function(e) {\n\t\t\t$('.menu-editor-ovr.border-orange').trigger('change');\n\t\t\t$('.menu-editor-vis, .menu-editor-form, .menu-editor-pic, .menu-editor-hid, .menu-editor-ovr').removeClass('border-orange');\n\t\t}\n\t});\n\n});\n\n$(document).on('submit keydown keyup', '#menu_editor_form', function (e) {\n\n\tif (e.keyCode == 13)\n\t{\n\t\te.preventDefault();\n\t\treturn false;\n\t}\n\n});\n\n$(document).on('click', '.menu-editor-finalize', function (e) {\n\n\t$('#menu-editor-nav > [data-nav] > .fa-exclamation-circle').hideFlex();\n\n\tif ($('#menu_editor_form').validateForm() !== false)\n\t{\n\t\tbootbox.dialog({\n\t\t\ttitle: 'Confirmation',\n\t\t\tmessage: \"<p>Are you sure you wish to save all menu editor changes?</p>\",\n\t\t\tcenterVertical: true,\n\t\t\tbuttons: {\n\t\t\t\tcancel: {\n\t\t\t\t\tlabel: 'Cancel',\n\t\t\t\t\tclassName: 'btn-secondary mr-auto'\n\t\t\t\t},\n\t\t\t\tconfirm: {\n\t\t\t\t\tlabel: 'Finalize changes',\n\t\t\t\t\tclassName: 'btn-danger',\n\t\t\t\t\tcallback: function () {\n\n\t\t\t\t\t\t$('#action').val('finalize')\n\t\t\t\t\t\t$(\"#menu_editor_form\").trigger('submit');\n\n\t\t\t\t\t\tbootbox.dialog({\n\t\t\t\t\t\t\tmessage: '<p><i class=\"fa fa-spin fa-spinner\"></i> Finalizing changes, please wait.</p>',\n\t\t\t\t\t\t\tcenterVertical: true,\n\t\t\t\t\t\t\tcloseButton: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\telse\n\t{\n\t\tbootbox.alert({\n\t\t\ttitle: 'Notice',\n\t\t\tmessage: '<p>There is an issue with the submission, check tabs for required fields.</p>',\n\t\t\tcenterVertical: true\n\t\t});\n\n\t\t$('#menu-editor-nav > [data-nav]').each(function () {\n\n\t\t\tlet this_nav = $(this).data('nav');\n\n\t\t\tif ($('#nav-' + this_nav).find('.form-control:invalid').length)\n\t\t\t{\n\t\t\t\t$('#menu-editor-nav > [data-nav=\"' + this_nav + '\"] > .fa-exclamation-circle').showFlex();\n\t\t\t}\n\n\t\t});\n\t}\n\n});\n\n$(document).on('click', '#add_past_menu_item:not(.disabled)', function (e) {\n\n\tdisplayModalWaitDialog('wait_for_adding_item_div', \"Retrieving items. Please wait ...\");\n\n\tlet menu_id = $(this).data('menu_id');\n\n\tshowPopup({\n\t\tmodal: true,\n\t\ttitle: 'Add EFL Item',\n\t\tnoOk: true,\n\t\tcloseOnEscape: false,\n\t\theight: 720,\n\t\tdiv_id: 'add_menu_item_popup_div',\n\t\tmodule: 'page=admin_menu_editor_add_item&menu_id=' + menu_id,\n\t\topen: function (event, ui) {\n\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\n\t\t\t$(\"#wait_for_adding_item_div\").remove();\n\t\t},\n\t\tbuttons: {\n\t\t\tCancel: function () {\n\t\t\t\t$(this).remove();\n\t\t\t},\n\t\t\tOkay: function () {\n\n\t\t\t\tlet entreeList = {};\n\n\t\t\t\t$('#sel_list').find('[data-rmv_menu_item]').each(function () {\n\n\t\t\t\t\tlet thisEntree = $(this).data('entree_id');\n\t\t\t\t\tentreeList[thisEntree] = thisEntree;\n\n\t\t\t\t});\n\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tmessage: 'This will immediately add the listed items to the menu. Are you sure?',\n\t\t\t\t\tnoOk: true,\n\t\t\t\t\theight: 180,\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t'Add Items to Menu': function () {\n\n\t\t\t\t\t\t\tbootbox.dialog({\n\t\t\t\t\t\t\t\tmessage: '<p><i class=\"fa fa-spin fa-spinner\"></i> Adding menu items, please wait.</p>',\n\t\t\t\t\t\t\t\tcenterVertical: true,\n\t\t\t\t\t\t\t\tcloseButton: false\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tprocessor: 'admin_menuEditor',\n\t\t\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\t\t\t\t\top: 'add_menu_item',\n\t\t\t\t\t\t\t\t\tmenu_id: menu_id,\n\t\t\t\t\t\t\t\t\tentree_ids: entreeList\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tbounce('/backoffice/menu-editor?tab=nav-efl');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t$('#add_menu_item_popup_div').remove();\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Cancel': function () {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\t\tclose: function () {\n\t\t\tbounce('/backoffice/menu-editor?tab=nav-efl');\n\t\t}\n\t});\n\n});\n\n$(document).on('click', '[data-add_menu_item]', function (e) {\n\t// prevent multiple submissions\n\tif ($(this).hasClass('disabled'))\n\t{\n\n\t}\n\telse\n\t{\n\t\t$(this).addClass('disabled');\n\n\t\tlet entree_id = $(this).data('entree_id');\n\t\tlet recipe_id = $(this).data('recipe_id');\n\n\t\tlet tr = $('[data-recipe_id_row=\"' + recipe_id + '\"]').clone();\n\n\t\ttr.find(\"[data-rmv_menu_item=\" + entree_id + \"]\").show();\n\t\ttr.find(\"[data-add_menu_item=\" + entree_id + \"]\").remove();\n\n\t\t$(\"#selected_items tbody\").append(tr);\n\t}\n\n});\n\n$(document).on('click', '[data-rmv_menu_item]', function (e) {\n\n\tlet entree_id = $(this).data('entree_id');\n\tlet recipe_id = $(this).data('recipe_id');\n\n\t$('#selected_items tbody [data-recipe_id_row=\"' + recipe_id + '\"]').remove();\n\tlet org_tr = $('#recipe_list tbody [data-recipe_id_row=\"' + recipe_id + '\"]');\n\torg_tr.find('[data-add_menu_item=\"' + entree_id + '\"]').removeClass('disabled');\n\n});\n\n$(document).on('click', '[data-info_menu_item]', function (e) {\n\n\tlet entree_id = $(this).data('entree_id');\n\tlet recipe_id = $(this).data('recipe_id');\n\n\t$.ajax({\n\t\turl: '/processor',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'admin_menuEditor',\n\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\top: 'menu_item_info',\n\t\t\tmenu_id: menu_id,\n\t\t\tentree_id: entree_id,\n\t\t\trecipe_id: recipe_id\n\t\t},\n\t\tsuccess: function (json) {\n\t\t\tdd_message({\n\t\t\t\tmodal: true,\n\t\t\t\ttitle: 'Item Information',\n\t\t\t\theight: 720,\n\t\t\t\twidth: 720,\n\t\t\t\tmessage: json.data,\n\t\t\t\topen: function () {\n\t\t\t\t\thandle_tabbed_content();\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Error',\n\t\t\t\tmessage: response\n\t\t\t});\n\n\t\t}\n\n\t});\n});\n\n$(document).on('click', '#add_past_menu_item_sides:not(.disabled)', function (e) {\n\n\tdisplayModalWaitDialog('wait_for_adding_item_div', \"Retrieving Sides & Sweets. Please wait ...\");\n\n\tlet menu_id = $(this).data('menu_id');\n\n\tshowPopup({\n\t\tmodal: true,\n\t\ttitle: 'Add Sides & Sweets',\n\t\tnoOk: true,\n\t\tcloseOnEscape: false,\n\t\theight: 720,\n\t\tdiv_id: 'add_menu_item_popup_div',\n\t\tmodule: 'page=admin_menu_editor_add_sides_sweets&menu_id=' + menu_id,\n\t\topen: function (event, ui) {\n\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\n\t\t\t$(\"#wait_for_adding_item_div\").remove();\n\t\t},\n\t\tbuttons: {\n\t\t\tCancel: function () {\n\t\t\t\t$(this).remove();\n\t\t\t},\n\t\t\tOkay: function () {\n\n\t\t\t\tlet entreeList = {};\n\n\t\t\t\tlet errorMissingCategory = false;\n\t\t\t\t$('#sel_list').find('[data-rmv_menu_side]').each(function () {\n\n\t\t\t\t\tlet thisEntree = $(this).data('entree_id');\n\t\t\t\t\tentreeList[thisEntree] = thisEntree;\n\t\t\t\t\tlet categoryLabel = $(\"[data-recipe_category=\" + thisEntree + \"]:visible\").find(\":selected\").val();\n\t\t\t\t\tif (typeof categoryLabel == 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tcategoryLabel = $(\"[data-recipe_category=\" + thisEntree + \"]:visible\").html();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof categoryLabel == 'undefined')\n\t\t\t\t\t{\n\n\t\t\t\t\t\t$(\"[data-recipe_category=\" + thisEntree + \"]\").css(\"border-color\", \"red\");\n\t\t\t\t\t\terrorMissingCategory = true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tentreeList[thisEntree] = categoryLabel;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (errorMissingCategory)\n\t\t\t\t{\n\t\t\t\t\tconsole.log('Missing');\n\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Please select a category for all items',\n\t\t\t\t\t\tmessage: 'Please select a category for all items'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tmessage: 'This will immediately add the listed Sides & Sweets to the menu. Are you sure?',\n\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\theight: 180,\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t'Add Sides & Sweets to Menu': function () {\n\n\t\t\t\t\t\t\t\tbootbox.dialog({\n\t\t\t\t\t\t\t\t\tmessage: '<p><i class=\"fa fa-spin fa-spinner\"></i> Adding menu items, please wait.</p>',\n\t\t\t\t\t\t\t\t\tcenterVertical: true,\n\t\t\t\t\t\t\t\t\tcloseButton: false\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tprocessor: 'admin_menuEditor',\n\t\t\t\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\t\t\t\t\t\top: 'add_menu_side',\n\t\t\t\t\t\t\t\t\t\tmenu_id: menu_id,\n\t\t\t\t\t\t\t\t\t\tentree_ids: entreeList\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tbounce('/backoffice/menu-editor?tab=nav-sides-hidden');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error adding Sides & Sweets',\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Network Error adding Sides and Sweets',\n\t\t\t\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t\t$('#add_menu_item_popup_div').remove();\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'Cancel': function () {\n\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tclose: function () {\n\t\t\tbounce('/backoffice/menu-editor?tab=nav-sides-hidden');\n\t\t}\n\t});\n\n});\n\n$(document).on('change', '[data-recipe_category]', function (e) {\n\tlet categoryLabel = $(this).find(\":selected\").val();\n\n\tif (typeof categoryLabel == 'undefined')\n\t{\n\t\t$(this).css(\"border-color\", \"red\");\n\t}\n\telse\n\t{\n\t\t$(this).css(\"border-color\", \"black\");\n\t}\n});\n\n$(document).on('click', '[data-add_menu_side]', function (e) {\n\t// prevent multiple submissions\n\tif ($(this).hasClass('disabled'))\n\t{\n\n\t}\n\telse\n\t{\n\t\t$(this).addClass('disabled');\n\n\t\tlet entree_id = $(this).data('entree_id');\n\t\tlet recipe_id = $(this).data('recipe_id');\n\n\t\tlet tr = $('[data-recipe_id_row=\"' + recipe_id + '\"]').clone();\n\n\t\ttr.find(\"[data-rmv_menu_side=\" + entree_id + \"]\").show();\n\t\ttr.find(\"[data-add_menu_side=\" + entree_id + \"]\").remove();\n\n\t\ttr.find(\"[data-recipe_category=\" + entree_id + \"]\").show();\n\n\t\tlet oldCategory = tr.find(\"[data-old_category=\" + entree_id + \"]\").html();\n\n\t\ttr.find(\"[data-old_category=\" + entree_id + \"]\").remove();\n\n\t\t$(\"#selected_items tbody\").append(tr);\n\n\t\t$(\"[data-recipe_category=\" + entree_id + \"]\").val(oldCategory);\n\t}\n\n});\n\n$(document).on('click', '[data-rmv_menu_side]', function (e) {\n\n\tlet entree_id = $(this).data('entree_id');\n\tlet recipe_id = $(this).data('recipe_id');\n\n\t$('#selected_items tbody [data-recipe_id_row=\"' + recipe_id + '\"]').remove();\n\tlet org_tr = $('#recipe_list tbody [data-recipe_id_row=\"' + recipe_id + '\"]');\n\torg_tr.find('[data-add_menu_side=\"' + entree_id + '\"]').removeClass('disabled');\n\n});\n\n$(document).on('click', '[data-info_menu_side]', function (e) {\n\n\tlet entree_id = $(this).data('entree_id');\n\tlet recipe_id = $(this).data('recipe_id');\n\n\t$.ajax({\n\t\turl: '/processor',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'admin_menuEditor',\n\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\top: 'menu_item_info',\n\t\t\tmenu_id: menu_id,\n\t\t\tentree_id: entree_id,\n\t\t\trecipe_id: recipe_id\n\t\t},\n\t\tsuccess: function (json) {\n\t\t\tdd_message({\n\t\t\t\tmodal: true,\n\t\t\t\ttitle: 'Item Information',\n\t\t\t\theight: 720,\n\t\t\t\twidth: 720,\n\t\t\t\tmessage: json.data,\n\t\t\t\topen: function () {\n\t\t\t\t\thandle_tabbed_content();\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Error',\n\t\t\t\tmessage: response\n\t\t\t});\n\n\t\t}\n\n\t});\n});\n\n$(document).on('keyup change', '#filter', function (e) {\n\t$.uiTableFilter($('#recipe_list'), this.value);\n});\n\n$(document).on('click', '#clear_filter', function (e) {\n\n\t$('#filter').val('').change();\n\n\tif (!Modernizr.input.placeholder)\n\t{\n\t\t// trick to restore placeholder on IE\n\t\t$('#filter').focus().blur();\n\t}\n\n});\n\nfunction showPopup(config)\n{\n\tvar settings = { //defaults\n\t\ttype: 'GET',\n\t\theight: 500,\n\t\twidth: 600,\n\t\tmodal: false,\n\t\tcallBack: false,\n\t\tresizable: true\n\t};\n\n\t$.extend(settings, config);\n\n\t$.ajax({\n\t\turl: '?' + settings.module,\n\t\ttype: settings.type,\n\t\tsuccess: function (data, status) {\n\t\t\tsettings.message = data;\n\n\t\t\tdd_message(settings);\n\n\t\t\tif (typeof settings.callBack == 'function')\n\t\t\t{\n\t\t\t\tsettings.callBack();\n\t\t\t}\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error';\n\t\t}\n\t});\n}"],"mappings":"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"}