var isProcessingMetrics=!1;function trending_report_init(){$('[id^="report_typedt"]').on("click",(function(){$("#reports_trending_form").submit()})),$('[id^="trade_area"]').change((function(){$("#report_typedt_stores_by_region").attr("checked","checked"),0!=$(this).val()&&$("#reports_trending_form").submit()})),$('[id^="store"]').change((function(){$("#report_typedt_single_store").attr("checked","checked"),$("#reports_trending_form").submit()}))}function dashboard_init(){$('[id^="report_typedt_"]').on("click",(function(){$("#dashboard_form").submit()})),$('[id^="rank_met-"]').on("click",(function(){var r=this.id.split("-")[1],t="tr_rank_met-"+r,e="td_rank_met-"+r,o="disc_rank_met-"+r,s=$("#curMonthStr").val();$("#"+t).is(":visible")?($("#"+t).slideUp("slow"),$("#"+o).addClass("disc_closed"),$("#"+o).removeClass("disc_open")):$.ajax({url:"/processor?processor=admin_top30",type:"POST",dataType:"json",data:{metric_type:r,month:s},success:function(r){1==r.result_code?($("#"+e).html(r.data),$("#"+t).slideDown("slow"),$("#"+o).removeClass("disc_closed"),$("#"+o).addClass("disc_open")):dd_message({title:"Error",message:r.processor_message})},error:function(r,t){dd_message({title:"Error",message:t})}})}))}function toggleMonth(r){$("#override_month").val("0"),$("#monthMode").val(r),$("#dashboard_form").submit()}function handleMetricsUpdateComplete(){$("#dashboard_form").submit()}function processMetrics(){$("#busy_updating").dialog({resizable:!1,modal:!0,title:"Metrics Update!",beforeClose:function(r,t){return!1}}),isProcessingMetrics=!0;var r=$("#store_id").val();$.ajax({url:"/processor?processor=admin_processMetrics",type:"POST",dataType:"json",timeout:6e5,data:{store_id:r},success:function(r){isProcessingMetrics=!1,1==r.result_code&&handleMetricsUpdateComplete()},error:function(r,t){isProcessingMetrics=!1,dd_message({title:"Error",message:t})}})}function selectStoreTR(r){""!=r&&($("input:radio[name=report_type]:nth(0)").attr("checked",!0),$("#reports_trending_form").submit())}function selectStore(r){""!=r&&($("input:radio[name=report_type]:nth(0)").attr("checked",!0),$("#dashboard_form").submit())}function print_trending_report(){var r=$("#reports_trending_form")[0].target,t=$("#reports_trending_form")[0].action;$("#reports_trending_form")[0].target="_print",$("#reports_trending_form")[0].action="/backoffice/reports-trending?print=true",$("#reports_trending_form").submit(),$("#reports_trending_form")[0].target=r,$("#reports_trending_form")[0].action=t}function export_trending_report(){$("#reports_trending_form")[0].target;var r=$("#reports_trending_form")[0].action;$("#reports_trending_form")[0].action="/backoffice/reports-trending?export=xlsx",$("#reports_trending_form").submit(),$("#reports_trending_form")[0].action=r}function export_order_list(){if(!$("#report_typedt_single_store").length||$("input:radio[name=report_type]:nth(0)").attr("checked")){var r=$("#dashboard_form")[0].action;$("#dashboard_form")[0].action="/backoffice/dashboard-new?export=xlsx",$("#dashboard_form").submit(),$("#dashboard_form")[0].action=r}else dd_message({title:"Error",message:"The order list can only be exported when viewing a single store"})}function print_dashboard(){var r=$("#dashboard_form")[0].target,t=$("#dashboard_form")[0].action;$("#dashboard_form")[0].target="_print",$("#dashboard_form")[0].action="/backoffice/dashboard-new?print=true",$("#dashboard_form").submit(),$("#dashboard_form")[0].target=r,$("#dashboard_form")[0].action=t}
//# sourceMappingURL=dashboard_old.min.js.map