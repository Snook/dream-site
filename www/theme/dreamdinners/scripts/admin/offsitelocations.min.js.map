{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["offsitelocations.js"],"sourcesContent":["function addContact(guest)\r\n{\r\n\t$('#contact').val($(guest).data('primary_email'));\r\n}\r\n\r\n$(function () {\r\n\r\n\t$(document).on('click', '#show_detailed_reporting', function (e) {\r\n\r\n\t\t$('#detailed_reporting').slideToggle();\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '#add_offsitelocation, #add_offsite_cancel', function (e) {\r\n\r\n\t\t$('#add_offsitelocation_content').toggleFlex();\r\n\r\n\t\t$('#offiste_location_form').trigger('reset');\r\n\r\n\t});\r\n\r\n\t$(document).on('reset', '#offiste_location_form, #add_offsite_cancel', function (e) {\r\n\r\n\t\t$('#edit_location').val('false');\r\n\t\t$('#default_session_override').prop({'disabled': true}).val('');\r\n\t\t$('#offiste_location_form').removeClass('was-validated');\r\n\t\t$('[data-offsite_id]').removeClass('bg-green-light');\r\n\r\n\t});\r\n\r\n\t$(document).on('change', '#default_session_override_enable', function (e) {\r\n\r\n\t\tif ($(this).is(':checked'))\r\n\t\t{\r\n\t\t\t$('#default_session_override').prop({'disabled': false});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$('#default_session_override').prop({'disabled': true}).val('');\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('submit', '#offiste_location_form', function (e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tlet confirm_msg = 'Are you sure you wish to add a new location?';\r\n\r\n\t\tif ($('#edit_location').val() !== 'false')\r\n\t\t{\r\n\t\t\tconfirm_msg = 'Are you sure you wish to edit this existing location?';\r\n\t\t}\r\n\r\n\t\tif ($(this)[0].checkValidity() === false)\r\n\t\t{\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t$('.btn-spinning').removeClass('btn-spinning');\r\n\t\t\t$('.ld-spin').remove();\r\n\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tbootbox.confirm(confirm_msg, function(result){\r\n\t\t\t\tif (result)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet context = {\r\n\t\t\t\t\t\tedit_location: $('#edit_location').val(),\r\n\t\t\t\t\t\tlocation: $('#location_name').val(),\r\n\t\t\t\t\t\taddress_line1: $('#address_line1').val(),\r\n\t\t\t\t\t\taddress_line2: $('#address_line2').val(),\r\n\t\t\t\t\t\tcity: $('#city').val(),\r\n\t\t\t\t\t\tstate: $('#state').val(),\r\n\t\t\t\t\t\tpostal_code: $('#postal_code').val(),\r\n\t\t\t\t\t\tcontact: $('#contact').val(),\r\n\t\t\t\t\t\tdo_override: $('#default_session_override_enable').is(':checked'),\r\n\t\t\t\t\t\tdefault_override: $('#default_session_override').val(),\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\ttimeout: 20000,\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprocessor: 'admin_offsitelocation',\r\n\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\t\t\t\top: 'add_offsite_info',\r\n\t\t\t\t\t\t\tdata: context\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '[data-offsite_id_edit]', function (e) {\r\n\r\n\t\t$('#offiste_location_form').trigger('reset');\r\n\r\n\t\tlet offsite_id = $(this).data('offsite_id_edit');\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'admin_offsitelocation',\r\n\t\t\t\toffsite_id: offsite_id,\r\n\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\top: 'get_offsite_info'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet data = $.parseJSON(json.data);\r\n\r\n\t\t\t\t\t$('#add_offsitelocation_content').showFlex();\r\n\r\n\t\t\t\t\t$('[data-offsite_id=\"' + offsite_id + '\"]').addClass('bg-green-light');\r\n\r\n\t\t\t\t\t$('#edit_location').val(offsite_id);\r\n\t\t\t\t\t$('#location_name').val(data.location_title);\r\n\t\t\t\t\t$('#address_line1').val(data.address_line1);\r\n\t\t\t\t\t$('#address_line2').val(data.address_line2);\r\n\t\t\t\t\t$('#city').val(data.city);\r\n\t\t\t\t\t$('#state').val(data.state_id);\r\n\t\t\t\t\t$('#postal_code').val(data.postal_code);\r\n\t\t\t\t\t$('#contact').val(data.contact);\r\n\r\n\t\t\t\t\tif (data.default_session_override != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('#default_session_override_enable').prop({'checked': true}).trigger('change');\r\n\t\t\t\t\t\t$('#default_session_override').val(data.default_session_override);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '[data-enable_location]', function (e) {\r\n\r\n\t\tlet location_id = $(this).data('enable_location');\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'admin_offsitelocation',\r\n\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\top: 'toggle_offsitelocation',\r\n\t\t\t\tlocation_id: location_id\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n});"],"names":["addContact","guest","$","val","data","document","on","e","slideToggle","toggleFlex","trigger","prop","disabled","removeClass","this","is","preventDefault","let","confirm_msg","checkValidity","stopPropagation","remove","bootbox","confirm","result","context","edit_location","location","address_line1","address_line2","city","state","postal_code","contact","do_override","default_override","ajax","url","type","timeout","dataType","processor","store_id","STORE_DETAILS","id","op","success","json","status","processor_success","reload","error","objAJAXRequest","strError","response","offsite_id","parseJSON","showFlex","addClass","location_title","state_id","default_session_override","checked","location_id"],"mappings":"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"}