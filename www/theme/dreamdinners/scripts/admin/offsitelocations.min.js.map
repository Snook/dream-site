{"version":3,"file":"offsitelocations.min.js","names":["addContact","guest","$","val","data","document","on","e","slideToggle","toggleFlex","trigger","prop","disabled","removeClass","this","is","preventDefault","confirm_msg","checkValidity","stopPropagation","remove","bootbox","confirm","result","context","edit_location","location","address_line1","address_line2","city","state","postal_code","contact","do_override","default_override","ajax","url","type","timeout","dataType","processor","store_id","STORE_DETAILS","id","op","success","json","status","processor_success","reload","error","objAJAXRequest","strError","response","offsite_id","parseJSON","showFlex","addClass","location_title","state_id","default_session_override","checked","location_id"],"sourceRoot":"js/src/dreamdinners/admin","sources":["offsitelocations.js"],"sourcesContent":["function addContact(guest)\r\n{\r\n\t$('#contact').val($(guest).data('primary_email'));\r\n}\r\n\r\n$(function () {\r\n\r\n\t$(document).on('click', '#show_detailed_reporting', function (e) {\r\n\r\n\t\t$('#detailed_reporting').slideToggle();\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '#add_offsitelocation, #add_offsite_cancel', function (e) {\r\n\r\n\t\t$('#add_offsitelocation_content').toggleFlex();\r\n\r\n\t\t$('#offiste_location_form').trigger('reset');\r\n\r\n\t});\r\n\r\n\t$(document).on('reset', '#offiste_location_form, #add_offsite_cancel', function (e) {\r\n\r\n\t\t$('#edit_location').val('false');\r\n\t\t$('#default_session_override').prop({'disabled': true}).val('');\r\n\t\t$('#offiste_location_form').removeClass('was-validated');\r\n\t\t$('[data-offsite_id]').removeClass('bg-green-light');\r\n\r\n\t});\r\n\r\n\t$(document).on('change', '#default_session_override_enable', function (e) {\r\n\r\n\t\tif ($(this).is(':checked'))\r\n\t\t{\r\n\t\t\t$('#default_session_override').prop({'disabled': false});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$('#default_session_override').prop({'disabled': true}).val('');\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('submit', '#offiste_location_form', function (e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tlet confirm_msg = 'Are you sure you wish to add a new location?';\r\n\r\n\t\tif ($('#edit_location').val() !== 'false')\r\n\t\t{\r\n\t\t\tconfirm_msg = 'Are you sure you wish to edit this existing location?';\r\n\t\t}\r\n\r\n\t\tif ($(this)[0].checkValidity() === false)\r\n\t\t{\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t$('.btn-spinning').removeClass('btn-spinning');\r\n\t\t\t$('.ld-spin').remove();\r\n\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tbootbox.confirm(confirm_msg, function(result){\r\n\t\t\t\tif (result)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet context = {\r\n\t\t\t\t\t\tedit_location: $('#edit_location').val(),\r\n\t\t\t\t\t\tlocation: $('#location_name').val(),\r\n\t\t\t\t\t\taddress_line1: $('#address_line1').val(),\r\n\t\t\t\t\t\taddress_line2: $('#address_line2').val(),\r\n\t\t\t\t\t\tcity: $('#city').val(),\r\n\t\t\t\t\t\tstate: $('#state').val(),\r\n\t\t\t\t\t\tpostal_code: $('#postal_code').val(),\r\n\t\t\t\t\t\tcontact: $('#contact').val(),\r\n\t\t\t\t\t\tdo_override: $('#default_session_override_enable').is(':checked'),\r\n\t\t\t\t\t\tdefault_override: $('#default_session_override').val(),\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\ttimeout: 20000,\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprocessor: 'admin_offsitelocation',\r\n\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\t\t\t\top: 'add_offsite_info',\r\n\t\t\t\t\t\t\tdata: context\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '[data-offsite_id_edit]', function (e) {\r\n\r\n\t\t$('#offiste_location_form').trigger('reset');\r\n\r\n\t\tlet offsite_id = $(this).data('offsite_id_edit');\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'admin_offsitelocation',\r\n\t\t\t\toffsite_id: offsite_id,\r\n\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\top: 'get_offsite_info'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tlet data = $.parseJSON(json.data);\r\n\r\n\t\t\t\t\t$('#add_offsitelocation_content').showFlex();\r\n\r\n\t\t\t\t\t$('[data-offsite_id=\"' + offsite_id + '\"]').addClass('bg-green-light');\r\n\r\n\t\t\t\t\t$('#edit_location').val(offsite_id);\r\n\t\t\t\t\t$('#location_name').val(data.location_title);\r\n\t\t\t\t\t$('#address_line1').val(data.address_line1);\r\n\t\t\t\t\t$('#address_line2').val(data.address_line2);\r\n\t\t\t\t\t$('#city').val(data.city);\r\n\t\t\t\t\t$('#state').val(data.state_id);\r\n\t\t\t\t\t$('#postal_code').val(data.postal_code);\r\n\t\t\t\t\t$('#contact').val(data.contact);\r\n\r\n\t\t\t\t\tif (data.default_session_override != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('#default_session_override_enable').prop({'checked': true}).trigger('change');\r\n\t\t\t\t\t\t$('#default_session_override').val(data.default_session_override);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '[data-enable_location]', function (e) {\r\n\r\n\t\tlet location_id = $(this).data('enable_location');\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'admin_offsitelocation',\r\n\t\t\t\tstore_id: STORE_DETAILS.id,\r\n\t\t\t\top: 'toggle_offsitelocation',\r\n\t\t\t\tlocation_id: location_id\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n});"],"mappings":"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"}