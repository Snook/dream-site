{"version":3,"file":"offsitelocations.min.js","names":["addContact","guest","$","val","data","document","on","e","slideToggle","toggleFlex","trigger","prop","disabled","removeClass","this","is","preventDefault","confirm_msg","checkValidity","stopPropagation","remove","bootbox","confirm","result","context","edit_location","location","address_line1","address_line2","city","state","postal_code","address_latitude","address_longitude","contact","do_override","default_override","ajax","url","type","timeout","dataType","processor","store_id","STORE_DETAILS","id","op","success","json","status","processor_success","reload","error","objAJAXRequest","strError","response","offsite_id","parseJSON","showFlex","addClass","location_title","state_id","default_session_override","checked","location_id"],"sourceRoot":"js/src/dreamdinners/admin","sources":["offsitelocations.js"],"sourcesContent":["function addContact(guest)\n{\n\t$('#contact').val($(guest).data('primary_email'));\n}\n\n$(function () {\n\n\t$(document).on('click', '#show_detailed_reporting', function (e) {\n\n\t\t$('#detailed_reporting').slideToggle();\n\n\t});\n\n\t$(document).on('click', '#add_offsitelocation, #add_offsite_cancel', function (e) {\n\n\t\t$('#add_offsitelocation_content').toggleFlex();\n\n\t\t$('#offiste_location_form').trigger('reset');\n\n\t});\n\n\t$(document).on('reset', '#offiste_location_form, #add_offsite_cancel', function (e) {\n\n\t\t$('#edit_location').val('false');\n\t\t$('#default_session_override').prop({'disabled': true}).val('');\n\t\t$('#offiste_location_form').removeClass('was-validated');\n\t\t$('[data-offsite_id]').removeClass('bg-green-light');\n\n\t});\n\n\t$(document).on('change', '#default_session_override_enable', function (e) {\n\n\t\tif ($(this).is(':checked'))\n\t\t{\n\t\t\t$('#default_session_override').prop({'disabled': false});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('#default_session_override').prop({'disabled': true}).val('');\n\t\t}\n\n\t});\n\n\t$(document).on('submit', '#offiste_location_form', function (e) {\n\n\t\te.preventDefault();\n\n\t\tlet confirm_msg = 'Are you sure you wish to add a new location?';\n\n\t\tif ($('#edit_location').val() !== 'false')\n\t\t{\n\t\t\tconfirm_msg = 'Are you sure you wish to edit this existing location?';\n\t\t}\n\n\t\tif ($(this)[0].checkValidity() === false)\n\t\t{\n\t\t\te.stopPropagation();\n\n\t\t\t$('.btn-spinning').removeClass('btn-spinning');\n\t\t\t$('.ld-spin').remove();\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbootbox.confirm(confirm_msg, function(result){\n\t\t\t\tif (result)\n\t\t\t\t{\n\t\t\t\t\tlet context = {\n\t\t\t\t\t\tedit_location: $('#edit_location').val(),\n\t\t\t\t\t\tlocation: $('#location_name').val(),\n\t\t\t\t\t\taddress_line1: $('#address_line1').val(),\n\t\t\t\t\t\taddress_line2: $('#address_line2').val(),\n\t\t\t\t\t\tcity: $('#city').val(),\n\t\t\t\t\t\tstate: $('#state').val(),\n\t\t\t\t\t\tpostal_code: $('#postal_code').val(),\n\t\t\t\t\t\taddress_latitude: $('#address_latitude').val(),\n\t\t\t\t\t\taddress_longitude: $('#address_longitude').val(),\n\t\t\t\t\t\tcontact: $('#contact').val(),\n\t\t\t\t\t\tdo_override: $('#default_session_override_enable').is(':checked'),\n\t\t\t\t\t\tdefault_override: $('#default_session_override').val(),\n\t\t\t\t\t};\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'admin_offsitelocation',\n\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\t\t\top: 'add_offsite_info',\n\t\t\t\t\t\t\tdata: context\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json, status) {\n\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t});\n\n\t$(document).on('click', '[data-offsite_id_edit]', function (e) {\n\n\t\t$('#offiste_location_form').trigger('reset');\n\n\t\tlet offsite_id = $(this).data('offsite_id_edit');\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_offsitelocation',\n\t\t\t\toffsite_id: offsite_id,\n\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\top: 'get_offsite_info'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\tlet data = $.parseJSON(json.data);\n\n\t\t\t\t\t$('#add_offsitelocation_content').showFlex();\n\n\t\t\t\t\t$('[data-offsite_id=\"' + offsite_id + '\"]').addClass('bg-green-light');\n\n\t\t\t\t\t$('#edit_location').val(offsite_id);\n\t\t\t\t\t$('#location_name').val(data.location_title);\n\t\t\t\t\t$('#address_line1').val(data.address_line1);\n\t\t\t\t\t$('#address_line2').val(data.address_line2);\n\t\t\t\t\t$('#city').val(data.city);\n\t\t\t\t\t$('#state').val(data.state_id);\n\t\t\t\t\t$('#postal_code').val(data.postal_code);\n\t\t\t\t\t$('#address_latitude').val(data.address_latitude);\n\t\t\t\t\t$('#address_longitude').val(data.address_longitude);\n\t\t\t\t\t$('#contact').val(data.contact);\n\n\t\t\t\t\tif (data.default_session_override != null)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#default_session_override_enable').prop({'checked': true}).trigger('change');\n\t\t\t\t\t\t$('#default_session_override').val(data.default_session_override);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\n\t\t});\n\n\t});\n\n\t$(document).on('click', '[data-enable_location]', function (e) {\n\n\t\tlet location_id = $(this).data('enable_location');\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_offsitelocation',\n\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\top: 'toggle_offsitelocation',\n\t\t\t\tlocation_id: location_id\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$(document).on('click', '[data-enable_customer_visibility]', function (e) {\n\n\t\tlet location_id = $(this).data('enable_customer_visibility');\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_offsitelocation',\n\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\top: 'toggle_customer_visibility',\n\t\t\t\tlocation_id: location_id\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\t\t});\n\n\t});\n\n});"],"mappings":"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"}