function enrollInPlatePoints(e){bounce("/backoffice/account?pp_enroll=1&id="+e,!1)}function viewPlatePoints(e){var t={action:"/backoffice/user-plate-points",input:{user_id:e,back:back_path()}};create_and_submit_form(t)}function printEnrollmentForm(e){bounce("/backoffice/user-plate-points?user_id="+e+"&print_enrollment_form=true","_blank")}function markAccountDataRequestCompleteConfirm(e){dd_message({title:"Account Data Request Complete confirmation",message:"Are you sure you want to mark the account data request as complete for this guest?",modal:!0,confirm:function(){bounce("/backoffice/user_details?id="+e+"&action=confirmAccountInfoSent")}})}function deleteUserConfirm(e){dd_message({title:"Delete guest confirmation",message:"Are you sure you want to delete this guest?",modal:!0,confirm:function(){bounce("/backoffice/user_details?id="+e+"&action=delete")}})}function unsetHomeStore(e){dd_message({title:"Remove guest confirmation",message:"Are you sure you want to remove this guests home store?",modal:!0,confirm:function(){bounce("/backoffice/user_details?id="+e+"&action=unsethome")}})}$(document).on("click","[data-delayed_payment_tc]",(function(){var e=$(this).data("delayed_payment_tc");dd_message({title:lang.en.tc.terms_and_conditions,message:lang.en.tc.delayed_payment,modal:!0,noOk:!0,closeOnEscape:!1,open:function(e,t){$(this).parent().find(".ui-dialog-titlebar-close").hide()},buttons:{Agree:function(){$(this).remove(),set_user_pref("TC_DELAYED_PAYMENT_AGREE",1,e,(function(e){$("#tc_delayed_payment_status").html("Accepted - "+e.date_updated)}))},Decline:function(){set_user_pref("TC_DELAYED_PAYMENT_AGREE",0,e,(function(e){$("#tc_delayed_payment_status").html("Declined - "+e.date_updated),dd_message({title:lang.en.tc.terms_and_conditions,message:lang.en.tc.delayed_payment_decline})}))}}})})),$(document).on("click",".toggle-update_mobile_number",(function(e){e.preventDefault(),$("[data-sms_dlog_comp=true]").slideToggle((function(){$(this).is(":hidden")?($("form#add_mobile_number").trigger("reset"),$("#new_mobile_number_div").slideUp()):$("[data-sms_pref=true]").attr("disabled",!1)}))})),$(document).on("click",'[name="add_method"]',(function(e){"new"==$("input[name='add_method']:checked").val()?($("#new_mobile_number_div").show(),$("#new_mobile_number").prop("required",!0)):($("#new_mobile_number_div").hide(),$("#new_mobile_number").prop("required",!1))})),$(document).on("click","#cancel_number_update",(function(e){return e.preventDefault(),$("#add_or_change_SMS_number_div").hide(),$("#add_update_mobile_number").attr("disabled",!1),!1})),$(document).on("submit","#add_mobile_number",(function(e){if(e.preventDefault(),!1!==$(this)[0].checkValidity()){var t=!1,n=$("input[name='add_method']:checked").val(),r={},a=!1;if($("[data-sms_pref=true]").each((function(){$(this).is(":checked")&&(a=!0,r[$(this).attr("id")]=1)})),!a&&"delete"!=n)return $("#add_mobile_number").removeClass("was-validated"),$("#confirm_number_update").removeSpinner(),dd_message({title:"Error",message:"Please opt into at least one type of message."}),!1;if("new"==n){if(!$("#new_mobile_number").val().match(/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/))return $("#confirm_number_update").removeSpinner(),dd_message({title:"Error",message:"Please enter a valid phone number (xxx-xxx-xxxx)."}),!1;t=$("#new_mobile_number").val()}else if("delete"==n)return $.ajax({url:"/processor",type:"POST",timeout:1e8,dataType:"json",data:{user_id:user_id,processor:"account",op:"remove_cur_number"},success:function(e,t){return $("#confirm_number_update").removeSpinner(),e.processor_success?($("#current_mobile_target").html("Current Mobile number: "),$("[data-sms_pref=true]").attr("disabled","disabled"),$("[data-sms_pref=true]").prop("checked",!1),$("#add_update_mobile_number").html("Add Mobile Number"),$("#add_update_mobile_number").data("op","add"),$("#add_or_change_SMS_number_div").hide(),$("#add_update_mobile_number").attr("disabled",!1),$("#remove_mobile_number_div").hide(),$("[data-sms_dlog_comp=true]").hide(),dd_message({title:"Success",message:"The SMS phone number has been removed. They will no longer receive text messages. (Note: It may take 60 minutes for the change to complete.)"}),!1):(dd_message({title:"Error",message:e.processor_message}),!1)},error:function(e,t){return $("#add_update_mobile_number").removeSpinner(),$("#add_update_mobile_number").attr("disabled",!1),dd_message({title:"Error",message:"Unexpected Error"}),!1}}),$("#add_update_mobile_number").removeSpinner(),$("#add_update_mobile_number").attr("disabled",!1),!1;return $.ajax({url:"/processor",type:"POST",timeout:1e8,dataType:"json",data:{processor:"account",op:"add_or_change_sms_number",method:n,number:t,selectedCategories:r,user_id:user_id,is_fadmin:!0},success:function(e,t){return $("#confirm_number_update").removeSpinner(),e.processor_success?($("#current_mobile_target").html("Current Mobile number: "+e.new_number),$("[data-sms_pref=true]").attr("disabled",!1),$("#add_update_mobile_number").html("Update or Remove Mobile Number"),$("#add_update_mobile_number").data("op","update"),$("#remove_mobile_number_div").show(),$.each(e.newPrefsState,(function(e,t){$("#"+e).attr("checked",t)})),dd_message({title:"Success",message:"The SMS phone number is updated."}),$("[data-sms_dlog_comp=true]").hide(),$("#add_update_mobile_number").attr("disabled",!1),!1):(dd_message({title:"Error",message:e.processor_message}),!1)},error:function(e,t){return dd_message({title:"Error",message:"Unexpected Error"}),!1}}),!1}}));
//# sourceMappingURL=user_details.min.js.map