function enrollInPlatePoints(e){bounce("main.php?page=admin_account&pp_enroll=1&id="+e,false)}function viewPlatePoints(e){var t={action:"main.php?page=admin_user_plate_points",input:{user_id:e,back:back_path()}};create_and_submit_form(t)}function printEnrollmentForm(e){bounce("main.php?page=admin_user_plate_points&user_id="+e+"&print_enrollment_form=true","_blank")}function markAccountDataRequestCompleteConfirm(e){dd_message({title:"Account Data Request Complete confirmation",message:"Are you sure you want to mark the account data request as complete for this guest?",modal:true,confirm:function(){bounce("main.php?page=admin_user_details&id="+e+"&action=confirmAccountInfoSent")}})}function deleteUserConfirm(e){dd_message({title:"Delete guest confirmation",message:"Are you sure you want to delete this guest?",modal:true,confirm:function(){bounce("main.php?page=admin_user_details&id="+e+"&action=delete")}})}function unsetHomeStore(e){dd_message({title:"Remove guest confirmation",message:"Are you sure you want to remove this guests home store?",modal:true,confirm:function(){bounce("main.php?page=admin_user_details&id="+e+"&action=unsethome")}})}$(document).on("click","[data-delayed_payment_tc]",function(){var e=$(this).data("delayed_payment_tc");dd_message({title:lang.en.tc.terms_and_conditions,message:lang.en.tc.delayed_payment,modal:true,noOk:true,closeOnEscape:false,open:function(e,t){$(this).parent().find(".ui-dialog-titlebar-close").hide()},buttons:{Agree:function(){$(this).remove();set_user_pref("TC_DELAYED_PAYMENT_AGREE",1,e,function(e){$("#tc_delayed_payment_status").html("Accepted - "+e.date_updated)})},Decline:function(){set_user_pref("TC_DELAYED_PAYMENT_AGREE",0,e,function(e){$("#tc_delayed_payment_status").html("Declined - "+e.date_updated);dd_message({title:lang.en.tc.terms_and_conditions,message:lang.en.tc.delayed_payment_decline})})}}})});$(document).on("click",".toggle-update_mobile_number",function(e){e.preventDefault();$("[data-sms_dlog_comp=true]").slideToggle(function(){if($(this).is(":hidden")){$("form#add_mobile_number").trigger("reset");$("#new_mobile_number_div").slideUp()}else{$("[data-sms_pref=true]").attr("disabled",false)}})});$(document).on("click",'[name="add_method"]',function(e){var t=$("input[name='add_method']:checked").val();if(t=="new"){$("#new_mobile_number_div").show();$("#new_mobile_number").prop("required",true)}else{$("#new_mobile_number_div").hide();$("#new_mobile_number").prop("required",false)}});$(document).on("click","#cancel_number_update",function(e){e.preventDefault();$("#add_or_change_SMS_number_div").hide();$("#add_update_mobile_number").attr("disabled",false);return false});$(document).on("submit","#add_mobile_number",function(e){e.preventDefault();if($(this)["0"].checkValidity()!==false){var t=false;var a=$("input[name='add_method']:checked").val();var n={};var r=false;$("[data-sms_pref=true]").each(function(){if($(this).is(":checked")){r=true;n[$(this).attr("id")]=1}});if(!r&&a!="delete"){$("#add_mobile_number").removeClass("was-validated");$("#confirm_number_update").removeSpinner();dd_message({title:"Error",message:"Please opt into at least one type of message."});return false}if(a=="new"){var d=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;if($("#new_mobile_number").val().match(d)){t=$("#new_mobile_number").val()}else{$("#confirm_number_update").removeSpinner();dd_message({title:"Error",message:"Please enter a valid phone number (xxx-xxx-xxxx)."});return false}}else if(a=="delete"){$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:user_id,processor:"account",op:"remove_cur_number"},success:function(e,t){$("#confirm_number_update").removeSpinner();if(e.processor_success){$("#current_mobile_target").html("Current Mobile number: ");$("[data-sms_pref=true]").attr("disabled","disabled");$("[data-sms_pref=true]").prop("checked",false);$("#add_update_mobile_number").html("Add Mobile Number");$("#add_update_mobile_number").data("op","add");$("#add_or_change_SMS_number_div").hide();$("#add_update_mobile_number").attr("disabled",false);$("#remove_mobile_number_div").hide();$("[data-sms_dlog_comp=true]").hide();dd_message({title:"Success",message:"The SMS phone number has been removed. They will no longer receive text messages. (Note: It may take 60 minutes for the change to complete.)"});return false}else{dd_message({title:"Error",message:e.processor_message});return false}},error:function(e,t){$("#add_update_mobile_number").removeSpinner();$("#add_update_mobile_number").attr("disabled",false);dd_message({title:"Error",message:"Unexpected Error"});return false}});$("#add_update_mobile_number").removeSpinner();$("#add_update_mobile_number").attr("disabled",false);return false}$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{processor:"account",op:"add_or_change_sms_number",method:a,number:t,selectedCategories:n,user_id:user_id,is_fadmin:true},success:function(e,t){$("#confirm_number_update").removeSpinner();if(e.processor_success){$("#current_mobile_target").html("Current Mobile number: "+e.new_number);$("[data-sms_pref=true]").attr("disabled",false);$("#add_update_mobile_number").html("Update or Remove Mobile Number");$("#add_update_mobile_number").data("op","update");$("#remove_mobile_number_div").show();$.each(e.newPrefsState,function(e,t){$("#"+e).attr("checked",t)});dd_message({title:"Success",message:"The SMS phone number is updated."});$("[data-sms_dlog_comp=true]").hide();$("#add_update_mobile_number").attr("disabled",false);return false}else{dd_message({title:"Error",message:e.processor_message});return false}},error:function(e,t){dd_message({title:"Error",message:"Unexpected Error"});return false}});return false}});
//# sourceMappingURL=user_details.min.js.map