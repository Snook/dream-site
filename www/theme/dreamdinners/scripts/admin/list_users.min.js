var manualSearchTypeChange=!1;function list_users_init(){showHelpText(),$("#q").focus(),$("#q").bind("input",(function(){detectType()}))}function searchTypeChange(){showHelpText(),$("#q").focus(),manualSearchTypeChange=!0}function showHelpText(){var e="",n=$("#search_type").val();switch($("#q").removeClass("telephone").unmask(),n){case"firstname":e="Enter full or partial first name";break;case"lastname":e="Enter full or partial last name";break;case"firstlast":e="Search Text Example: John Smith (Enter full or partial first and last name)";break;case"email":e="Instruction Text: Enter full or partial email address";break;case"phone":e="Instruction Text: Enter phone number in 555-555-5555 format",$("#q").addClass("telephone"),$(".telephone").mask("999-999-9999");break;case"id":e="Enter the exact Guest ID (No partial entries)"}$("#search_help").show(),$("#search_help").html(e)}var codes=[],target_prefix="payment1_",scanPosition=0,charIndex=0;function keyHandler2(e){var n=(e=e||event).charCode?e.charCode:e.which?e.which:e.keyCode;if(13==n)return!1;codes[charIndex++]=String.fromCharCode(n),"%"==String.fromCharCode(n)&&0==scanPosition?scanPosition=1:"B"==String.fromCharCode(n)&&1==scanPosition?scanPosition=2:"?"==String.fromCharCode(n)&&2==scanPosition?scanPosition=3:"?"==String.fromCharCode(n)&&3==scanPosition&&(scanPosition=0,charIndex=0,handleSwipeCompletion())}function endScanHandling(){document.getElementById("scanArea").style.display="none",codes.length=0,scanPosition=0,charIndex=0,document.getElementById("hidden_text_store").value=""}function prepareForCCSwipe(e){document.onkeypress=keyHandler2,document.getElementById("scanArea").style.display="block",document.getElementById("hidden_text_store").focus(),document.getElementById("hidden_text_store").value=""}function handleSwipeCompletion(){var e=codes.join(""),n=new SwipeParserObj(e);document.getElementById("q").value=n.surname,endScanHandling(),document.getElementById("list_users_form").submit()}function detectType(){if(1!=manualSearchTypeChange){var e=$("#q").val();$.isNumeric(e)||$("#search_type").val("lastname"),$.isNumeric(e)&&$("#search_type").val("id"),-1!=e.indexOf("@")&&$("#search_type").val("email"),-1!=e.indexOf(" ")&&$("#search_type").val("firstlast"),showHelpText()}}function processorGuestSearch(){var e=$("#search_type").val(),n=$("#q").val(),t=$("#all_stores").prop("checked")?1:0,a=$("#currentStore").val();$.ajax({url:"/processor?processor=admin_guestSearch",type:"POST",dataType:"json",data:{search_type:e,q:n,results_type:"compact_list",store:a||"none",filter:t},success:function(e){1==e.result_code?$("#user_list_target").html(e.data):dd_message({title:"Error",message:e.processor_message})},error:function(e,n){dd_message({title:"Error",message:n})}})}var user_ref_action="none";function user_referral_init(){$(":submit").on("click",(function(){user_ref_action=this.name})),$("#q").keypress((function(e){13==e.which&&processorGuestSearch()}))}function checkReferralSubmission(e){var n=!0;return"ineligible"==$("#operation").val()&&"submit_referral"==user_ref_action&&active_referral_email==$("#overrideReferral").val()&&(n=!1,dd_message({modal:!0,message:"The referral source is aleady set to this user account."})),n}function useGuestAccount(e,n,t,a,r){$("#ur_select_message").hide(),$("#user_list_target").html(""),$("#customer_referral_result").html(n),$("#overrideReferral").val(n),$("#customer_referral_id").val(e),$("#submit_referral").prop("disabled",!1),$("#optionsDiv").show();var s=!1;r?($("span[data-reward_type='points']").show(),$("span[data-reward_type='credit']").hide()):($("span[data-reward_type='points']").hide(),$("span[data-reward_type='credit']").show()),a?($("#pendingOptions").length&&(s=!0,$("#pendingOptions").show(),$("#leave_queued").length&&$("#leave_queued").prop("checked",!0)),$("#nonpendingOptions").length&&($("#nonpendingOptions").hide(),$("#queue_new").length&&$("#queue_new").prop("checked",!1))):($("#pendingOptions").length&&($("#pendingOptions").hide(),$("#leave_queued").length&&$("#leave_queued").prop("checked",!1)),$("#nonpendingOptions").length&&(s=!0,$("#nonpendingOptions").show(),$("#queue_new").length&&$("#queue_new").prop("checked",!0))),s||$("#operation").val("referral_source_update_only")}
//# sourceMappingURL=list_users.min.js.map