var manualSearchTypeChange=false;function list_users_init(){showHelpText();$("#q").focus();$("#q").bind("input",function(){detectType()})}function searchTypeChange(){showHelpText();$("#q").focus();manualSearchTypeChange=true}function showHelpText(){var e="";var t=$("#search_type").val();$("#q").removeClass("telephone").unmask();switch(t){case"firstname":e="Enter full or partial first name";break;case"lastname":e="Enter full or partial last name";break;case"firstlast":e="Search Text Example: John Smith (Enter full or partial first and last name)";break;case"email":e="Instruction Text: Enter full or partial email address";break;case"phone":e="Instruction Text: Enter phone number in 555-555-5555 format";$("#q").addClass("telephone");$(".telephone").mask("999-999-9999");break;case"id":e="Enter the exact Guest ID (No partial entries)";break}$("#search_help").show();$("#search_help").html(e)}var codes=[];var target_prefix="payment1_";var scanPosition=0;var charIndex=0;function keyHandler2(e){e=e?e:event;var t=e.charCode?e.charCode:e.which?e.which:e.keyCode;if(t==13){return false}codes[charIndex++]=String.fromCharCode(t);if(String.fromCharCode(t)=="%"&&scanPosition==0){scanPosition=1}else if(String.fromCharCode(t)=="B"&&scanPosition==1){scanPosition=2}else if(String.fromCharCode(t)=="?"&&scanPosition==2){scanPosition=3}else if(String.fromCharCode(t)=="?"&&scanPosition==3){scanPosition=0;charIndex=0;handleSwipeCompletion()}}function endScanHandling(){document.getElementById("scanArea").style.display="none";codes.length=0;scanPosition=0;charIndex=0;document.getElementById("hidden_text_store").value=""}function prepareForCCSwipe(e){document.onkeypress=keyHandler2;document.getElementById("scanArea").style.display="block";document.getElementById("hidden_text_store").focus();document.getElementById("hidden_text_store").value=""}function handleSwipeCompletion(){var e=codes.join("");var t=new SwipeParserObj(e);document.getElementById("q").value=t.surname;endScanHandling();document.getElementById("list_users_form").submit()}function detectType(){if(manualSearchTypeChange==true){return}var e=$("#q").val();if(!$.isNumeric(e)){$("#search_type").val("lastname")}if($.isNumeric(e)){$("#search_type").val("id")}if(e.indexOf("@")!=-1){$("#search_type").val("email")}if(e.indexOf(" ")!=-1){$("#search_type").val("firstlast")}showHelpText()}function processorGuestSearch(){var e=$("#search_type").val();var t=$("#q").val();var a=$("#all_stores").prop("checked")?1:0;var r=$("#currentStore").val();$.ajax({url:"ddproc.php?processor=admin_guestSearch",type:"POST",dataType:"json",data:{search_type:e,q:t,results_type:"compact_list",store:r?r:"none",filter:a},success:function(e){if(e.result_code==1){$("#user_list_target").html(e.data)}else{dd_message({title:"Error",message:e.processor_message})}},error:function(e,t){dd_message({title:"Error",message:t})}})}var user_ref_action="none";function user_referral_init(){$(":submit").on("click",function(){user_ref_action=this.name});$("#q").keypress(function(e){if(e.which==13){processorGuestSearch()}})}function checkReferralSubmission(e){var t=true;if($("#operation").val()=="ineligible"&&user_ref_action=="submit_referral"){if(active_referral_email==$("#overrideReferral").val()){t=false;dd_message({modal:true,message:"The referral source is aleady set to this user account."})}}return t}function useGuestAccount(e,t,a,r,n){$("#ur_select_message").hide();$("#user_list_target").html("");$("#customer_referral_result").html(t);$("#overrideReferral").val(t);$("#customer_referral_id").val(e);$("#submit_referral").prop("disabled",false);$("#optionsDiv").show();var s=false;if(n){$("span[data-reward_type='points']").show();$("span[data-reward_type='credit']").hide()}else{$("span[data-reward_type='points']").hide();$("span[data-reward_type='credit']").show()}if(r){if($("#pendingOptions").length){s=true;$("#pendingOptions").show();if($("#leave_queued").length)$("#leave_queued").prop("checked",true)}if($("#nonpendingOptions").length){$("#nonpendingOptions").hide();if($("#queue_new").length)$("#queue_new").prop("checked",false)}}else{if($("#pendingOptions").length){$("#pendingOptions").hide();if($("#leave_queued").length)$("#leave_queued").prop("checked",false)}if($("#nonpendingOptions").length){s=true;$("#nonpendingOptions").show();if($("#queue_new").length)$("#queue_new").prop("checked",true)}}if(!s){$("#operation").val("referral_source_update_only")}}
//# sourceMappingURL=list_users.min.js.map