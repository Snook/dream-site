function admin_publish_sessions_init(){}function getNewItemsInSelection(){items_string="",form=document.getElementById("fillWindowForm"),startElem=document.getElementById("start");var e=startElem.value;if(null!=e&&""!=e)var t=document.getElementById(e);endElem=document.getElementById("end");var n=endElem.value;if(null!=n&&""!=n)var l=document.getElementById(n);if(null==l&&null==t)return alert("Please set a Date Range"),items_string;if(null==l&&(l=t),null==t&&(t=l),isSafari){for(var i=-1,s=0;s<t.parentNode.cells.length;s++)t===t.parentNode.cells[s]&&(i=s);-1==i&&alert("Problem: acessing cells. Please notify Dream dinners staff"),a=i}else var a=t.cellIndex;var d=t.parentNode.rowIndex;if(isSafari){i=-1;for(s=0;s<l.parentNode.cells.length;s++)l===l.parentNode.cells[s]&&(i=s);-1==i&&alert("Problem: acessing cells. Please notify Dream dinners staff"),o=i}else var o=l.cellIndex;var m=l.parentNode.rowIndex;for(items_string="",y=d;y<=m;y++)for(y==d?tempStartCol=a:tempStartCol=0,y==m?tempEndCol=o:tempEndCol=6,x=tempStartCol;x<=tempEndCol;x++)if(thisCell=document.getElementById(calendarName).rows[y].cells[x],thisCell)for(images=thisCell.getElementsByTagName("img"),s=0;s<images.length;s++)images.item(s).id<0&&(items_string+=images.item(s).id+"^"+thisCell.id+"^"+images.item(s).name+"|");return items_string.substr(0,items_string.length-1)}function serializeNewSessions(){for(items_string="",y=2;y<=8;y++)for(x=0;x<=6;x++)if(thisCell=document.getElementById(calendarName).rows[y].cells[x],thisCell)for(images=thisCell.getElementsByTagName("img"),i=0;i<images.length;i++)images.item(i).id<0&&(items_string+=images.item(i).id+"^"+thisCell.id+"^"+images.item(i).name+"|");""!=items_string&&(form=document.getElementById("fillWindowForm"),item_ids=document.getElementById("item_ids"),item_ids.value=items_string.substr(0,items_string.length-1))}function hiliteIcon(e,t){switch(img=document.getElementById(e),t){case 1:return void(img.src=PATH.image_admin+"/calendar/session_pub_hl.png");case 2:return void(img.src=PATH.image_admin+"/calendar/session_saved_hl.png");case 3:return void(img.src=PATH.image_admin+"/calendar/session_new_hl.png");case 4:return void(img.src=PATH.image_admin+"/calendar/session_closed_hl.png")}}function unHiliteIcon(e,t){switch(img=document.getElementById(e),t){case 1:return void(img.src=PATH.image_admin+"/calendar/session_pub.png");case 2:return void(img.src=PATH.image_admin+"/calendar/session_saved.png");case 3:return void(img.src=PATH.image_admin+"/calendar/session_new.png");case 4:return void(img.src=PATH.image_admin+"/calendar/session_closed.png")}}function onSetFillWindowStart(){if(selectedCell)if(selectedCell.getAttribute("validForMenu"))alert("Sorry, you selected a date outside of the valid menu range.\nPlease select a date between the two arrows.");else{if(serializeNewSessions(),form=document.getElementById("fillWindowForm"),endID=document.getElementById("end").value,null!=endID&&""!=endID){endTD=document.getElementById(endID),endCol=endTD.cellIndex,endRow=endTD.parentNode.rowIndex;var e=selectedCell.cellIndex,t=selectedCell.parentNode.rowIndex;(endRow<t||endRow==t&&endCol<e)&&(document.getElementById("end").value=selectedCell.id)}startElem=document.getElementById("start"),startElem.value=selectedCell.id,operation=document.getElementById("operation"),operation.value=null,form.submit()}else alert("Please select a start day by clicking on a day in calendar")}function onSetFillWindowEnd(){if(selectedCell)if(selectedCell.getAttribute("validForMenu"))alert("Sorry, you selected a date outside of the valid menu range.\nPlease select a date between the two arrows.");else{if(serializeNewSessions(),form=document.getElementById("fillWindowForm"),startID=document.getElementById("start").value,null!=startID&&""!=startID){startTD=document.getElementById(startID),startCol=startTD.cellIndex,startRow=startTD.parentNode.rowIndex;var e=selectedCell.cellIndex,t=selectedCell.parentNode.rowIndex;(t<startRow||t==startRow&&e<startCol)&&(document.getElementById("start").value=selectedCell.id)}endElem=document.getElementById("end"),endElem.value=selectedCell.id,operation=document.getElementById("operation"),operation.value=null,form.submit()}else alert("Please select an end day by clicking on a day in calendar")}function onClearFillWindow(){serializeNewSessions(),form=document.getElementById("fillWindowForm"),endElem=document.getElementById("end"),endElem.value=null,startElem=document.getElementById("start"),startElem.value=null,operation=document.getElementById("operation"),operation.value=null,form.submit()}function onEditClick(e){window.location="./main.php?page=admin_edit_session&session="+e+"&back=main.php?page=admin_publish_sessions"}function onSessionClick(e){window.location="./main.php?page=admin_main&session="+e}function saveItems(){(items_string=getNewItemsInSelection(),""!=items_string)&&(form=document.getElementById("fillWindowForm"),document.getElementById("item_ids").value=items_string,document.getElementById("operation").value="save",form.submit(),document.getElementById("saveButton").style.display="none")}function publishItems(){items_string=getNewItemsInSelection(),form=document.getElementById("fillWindowForm"),""!=items_string&&(document.getElementById("item_ids").value=items_string),document.getElementById("operation").value="publish",form.submit(),document.getElementById("publishButton").style.display="none"}function onDeleteClick(e){theSpan=e.parentNode,theCell=theSpan.parentNode,theCell.removeChild(theSpan)}