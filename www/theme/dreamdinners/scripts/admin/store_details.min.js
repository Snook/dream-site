function store_details_init(){updatePreview(document.getElementById("store_description"));SetGrandOpeningWidget(true);if($("#update_grandopeningdate").length){document.getElementById("update_grandopeningdate").checked=false}handle_archive_store();handle_delete_store();handle_empty_latlong();handle_address_change();$(".telephone").mask("999-999-9999");handle_same_as_store();handle_order_customization();$("#manager_1_user_id").bind("change, keypress, keyup",function(e){if(!$("#manager_1_user_id").val()){$("#manager_1_name, #manager_1_primary_email, #manager_1_telephone_1").val("")}});$(document).on("keyup","#store_description, #address_directions",function(e){if($(this).val()!=strip_tags($(this).val(),"<a>")){$(this).val(strip_tags($(this).val(),"<a>"))}if($(this).val()!=""){$("#"+$(this).attr("id")+"_preview").html(nl2br($(this).val())).slideDown()}else{$("#"+$(this).attr("id")+"_preview").slideUp()}});$(document).on("focusout","#social_twitter, #social_facebook, #social_instagram",function(e){if($(this).val()==""){$(this).val("dreamdinners")}});$("#store_description, #address_directions").trigger("keyup")}function addManager(e){$("#manager_1_user_id").val($(e).data("user_id"));$("#manager_1_name").val($(e).data("firstname")+" "+$(e).data("lastname"));$("#manager_1_primary_email").val($(e).data("primary_email"));$("#manager_1_telephone_1").val($(e).data("telephone_1"))}function handle_order_customization(){$("#supports_meal_customization").on("click",function(){toggleOrderCustomization(this.checked)})}function toggleOrderCustomization(e){if(e){$(".customization_fields").show()}else{$(".customization_fields").hide()}}function handle_same_as_store(){$("#pkg_ship_same_as_store, #letter_ship_same_as_store").on("click",function(){var e=$(this).data("contact");var t=true;if(!$(this).is(":checked")){t=false}else{$("#"+e+"_is_commercial, #"+e+"_address_line1, #"+e+"_address_line2, #"+e+"_city, #"+e+"_state_id, #"+e+"_postal_code, #"+e+"_telephone_day").val(function(){return $(this).data("store_value")})}$("#"+e+"_is_commercial, #"+e+"_address_line1, #"+e+"_address_line2, #"+e+"_city, #"+e+"_state_id, #"+e+"_postal_code, #"+e+"_telephone_day").attr({disabled:t})})}function onPlatePointsOptinChange(e){if(e.checked){$("#supports_plate_points_signature_row").show();$("#supports_plate_points_signature").attr("data-dd_required",true)}else{$("#supports_plate_points_signature_row").hide();$("#supports_plate_points_signature").attr("data-dd_required",false)}}function override_check_form(e,t){let a=true;if($("#default_delayed_payment_deposit").length){var n=$("#default_delayed_payment_deposit").val();if(n<20){dd_message({message:"The Delayed Payment Deposit must be at least $20."});a=false}}$("[id$='_session_desc']").each(function(){if($(this).val().length!=0&&$(this).val().length<6){dd_message({message:"Session Descriptions must either be empty or must be more than 5 characters in length. If empty the defauly description will be used."});a=false}});if(a){return _check_form(t)}return false}function handle_address_change(){$("#address_line1, #address_line2, #city, #state_id, #postal_code, #usps_adc").bind("keyup change click",function(){linear_address=$("#address_line1").val();linear_address+=", "+$("#city").val();linear_address+=", "+$("#state_id").val();linear_address+=" "+$("#postal_code").val();if($("#usps_adc").val()!=""){linear_address+="-"+$("#usps_adc").val()}$(".gllpSearchField").val(linear_address);$("#map_link").prop("href","https://maps.google.com/maps?q="+linear_address+"&iwloc=A&hl=en")})}function handle_empty_latlong(){if(!$("#address_latitude").is(":disabled")){if($("#address_latitude").val()==""||$("#address_latitude").val()=="0.000000"||$("#address_longitude").val()==""||$("#address_longitude").val()=="0.000000"){dd_message({message:"Latitude and Longitude have not yet been set for this store, please drag the marker to the front door of the store."});$(".gllpSearchButton").trigger("click")}}}function handle_archive_store(){$("#archive_store").on("click",function(){store_name=$(this).data("store_name");home_office_id=$(this).data("home_office_id");store_id=$(this).data("store_id");dd_message({title:"Archive Store",message:"Are you sure you want to archive and re-open "+store_name+" #"+home_office_id+"?",confirm:function(){bounce("main.php?page=admin_archive_store&store="+store_id)}})})}function handle_delete_store(){$("#delete_store").on("click",function(){store_id=$(this).data("store_id");dd_message({title:"Delete Store",message:'Are you sure you want to <span style="color: red; font-weight: bold;">permanently delete</span> this store from all of Dream Dinners?',confirm:function(){bounce("main.php?page=admin_store_details&id="+store_id+"&action=deleteStore");create_and_submit_form({action:"main.php?page=admin_store_details&id"+store_id,input:{action:"deleteStore",id:store_id}})}})})}function updatePreview(e){if(e){var t=document.getElementById(e.name+"_preview");if(e&&t){t.innerHTML=e.value}}}function update_grand_opening_function(e){SetGrandOpeningWidget(!e.checked)}function SetGrandOpeningWidget(e){var t="hidden";if(document.getElementById("grand_opening_date_Month_ID")){document.getElementById("grand_opening_date_Month_ID").disabled=e}if(document.getElementById("grand_opening_date_Day_ID")){document.getElementById("grand_opening_date_Day_ID").disabled=e}if(document.getElementById("grand_opening_date_Year_ID")){document.getElementById("grand_opening_date_Year_ID").disabled=e}if(document.getElementById("grand_opening_date_Month_ID")){document.getElementById("grand_opening_date_Month_ID").disabled=e}if(e==false){t="visible"}if(document.getElementById("grand_opening_date_ID_Link")){document.getElementById("grand_opening_date_ID_Link").style.visibility=t}}
//# sourceMappingURL=store_details.min.js.map