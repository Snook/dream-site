{"version":3,"file":"admin_global.min.js","names":["admin_global_init","data_tooltips_init","help_system_init","fadmin_idle_timeout","menu_bar_init","handle_helpdesk","handle_tabbed_content","handle_accordion_content","$","document","ajaxStart","AJAX_IN_PROCESS","show","ajaxStop","hide","ajaxSuccess","event","xhr","settings","click_dd_message_button","div_id","button_title","parent","find","each","this","html","click","onNBCreateSingleSession","menus_clause","getElementById","value","selectedCell","cellName","id","bounce","IS_TOUCH_SCREEN_DEVICE","fn","qtip","content","attr","position","my","at","viewport","window","adjust","method","y","parseInt","x","style","classes","hostessDreamTasteOrder","session_id","session_text","userid","create_and_submit_form","action","input","session","request","sessionText","length","tabbed_content","count","data","dd_console_log","this_content","tab_clicks","tabs","tab_content","tabid","hasClass","confirmClass","append","on","e","stopPropagation","this_close_button","dd_message","title","message","confirm","addClass","children","not","first","trigger","cancel","removeClass","selected_tab","exit_early","data_callback","callback","undefined","getQueryVariable","tab_sections","split","new_query","new_query_tabs","index","view_tab","push","new_query_string","setQueryString","toString","historyPush","url","mouseleave","accordion_content","next","slideDown","hideStatusMessage","type","slideUp","modal_message","config","size","extend","buttons","label","className","bootbox","dialog","key","alert","resizable","modal","hide_qtips","Confirm","canConfirm","remove","Cancel","noOk","Ok","closeCallback","div","body","preventDefault","request_url","location","pathname","search","ajax","timeout","dataType","processor","op","success","json","processor_success","helpdesk_form","height","width","open","ui","focus","validationMessages","val","trim","helpdesk_dd_message","ticket","serialize","formData","FormData","href","DEBUG_INFO","cache","contentType","processData","processor_message","error","objAJAXRequest","strError","make_dropdown","USER_LOGGEDIN","cookie","TO","fadmin_is_idle","idle","is_idle","after","ajax_login_in_view","warning_time","date","Date","sdate","minutes","milliseconds","setTime","getTime","warning_milliseconds","doTimeout","dd_toast","delay","toast_id","sound","do_alert_timeout","dd_toast_id_close","expires","domain","COOKIE","secure","dd_sc_name","alert_timeout","css_class","xclose","toast_obj","toast_container_selector","appendTo","toast","stop","fadeOut","dd_toast_cleanup","css","cursor","prependTo","PATH","script","fadeIn","instant","dd_toast_exists","elem","is","setDate","getDate","last_session_id","login_form","closeOnEscape","acceptFunction","Accept","keyup","keyCode","ENTER","background","image_admin","opacity","filter","login_ui","primary_email_login","password_login","nobo","submit_login","remember_login","user_type","firstname","lastname","user_type_text","perm_array","inArray","removeProp","response","reload","handle_dashboard_update","displayModalWaitDialog","processWindowContent","image","dialogClass","set_platepoints_progress_bar","new_value","animate","current_value","progressbar","isNaN","increase","value_count","change","text","thisHelpData","ddHelpData","solo","help_text","tech_text","NewWindowScroll","mypage","myname","w","h","LeftPosition","screen","Math","floor","search_button_parameters","search_form","close","manualSearchTypeChange","unmask","mask","which","isNumeric","indexOf","searchtype","searchvalue","store_filter","prop","currentStore","search_type","q","results_type","store","select_button_title","result_code","select_function","dataset","toggleClass","off","result","multi_store_select_id","this_button","store_ids","store_id","scrollable","checked","serializeArray","join","user_id","status","tooltip_html","manage","back_path","menu_id","menu_item_id","target","detailed","recipe_id","backoffice_change_store","back","centerVertical","closeButton","ok","store_text","do","decodeURIComponent","onShow","form","tab","relatedTarget"],"sourceRoot":"js/src/dreamdinners/admin","sources":["admin_global.js"],"sourcesContent":["function admin_global_init()\n{\n\t// load tooltips\n\tdata_tooltips_init();\n\n\thelp_system_init();\n\n\tfadmin_idle_timeout();\n\n\t// drop down menus in fadmin\n\tmenu_bar_init();\n\t// Auto load [page_name]_init() functions\n\n\thandle_helpdesk();\n\n\thandle_tabbed_content();\n\n\thandle_accordion_content();\n\n\t// Show ajax processing indicator\n\t$(document).ajaxStart(function () {\n\n\t\tAJAX_IN_PROCESS = true;\n\n\t\t$('.img_throbber_circle').show();\n\n\t});\n\n\t// Stop ajax processing indicator\n\t$(document).ajaxStop(function () {\n\t\tAJAX_IN_PROCESS = false;\n\n\t\t$('.img_throbber_circle').hide();\n\n\t});\n\n\t// this monitors ajax requests so you can do something always with them\n\t$(document).ajaxSuccess(function (event, xhr, settings) {\n\n\t\t// load any data-tooltips that may have been returned in ajax content\n\t\tdata_tooltips_init();\n\n\t});\n\n}\n\nfunction click_dd_message_button(div_id, button_title)\n{\n\tvar topDiv = $(\"#\" + div_id).parent();\n\tvar found = false;\n\ttopDiv.find(\"[type=button]\").each(function () {\n\t\tvar buttonText = $(this).find(\"span\").html();\n\t\tif (buttonText == button_title)\n\t\t{\n\t\t\t$(this).click();\n\t\t\treturn;\n\t\t}\n\n\t\tvar buttonTextAttempt2 = $(this).html();\n\t\tif (buttonTextAttempt2 == button_title)\n\t\t{\n\t\t\t$(this).click();\n\n\t\t}\n\n\t});\n}\n\nfunction onNBCreateSingleSession()\n{\n\tvar menus_elem = document.getElementById(\"menus\");\n\n\tvar menus_clause = \"\";\n\tif (menus_elem)\n\t{\n\t\tvar menu_id = document.getElementById(\"menus\").value;\n\t\tmenus_clause = \"?menu=\" + menu_id;\n\t}\n\n\tif (typeof selectedCell != \"undefined\" && selectedCell != null)\n\t{\n\t\tcellName = selectedCell.id;\n\t\tbounce(\"/backoffice/create-session?selectedCell=\" + cellName);\n\t}\n\telse\n\t{\n\t\tbounce(\"/backoffice/create-session\" + menus_clause);\n\t}\n}\n\nfunction data_tooltips_init()\n{\n\tif (!IS_TOUCH_SCREEN_DEVICE)\n\t{\n\t\t// Load tooltips\n\t\tif ($.fn.qtip)\n\t\t{\n\t\t\t$('[data-tooltip]').qtip({\n\t\t\t\tcontent: {\n\t\t\t\t\tattr: 'data-tooltip'\n\t\t\t\t},\n\t\t\t\tposition: {\n\t\t\t\t\tmy: 'bottom left',\n\t\t\t\t\tat: 'top left',\n\t\t\t\t\tviewport: $(window),\n\t\t\t\t\tadjust: {\n\t\t\t\t\t\tmethod: 'shift',\n\t\t\t\t\t\ty: parseInt(0, 10) || 0,\n\t\t\t\t\t\tx: parseInt(10, 10) || 0\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\tclasses: 'ui-tooltip-dreamdinners_tt qtip-shadow'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction hostessDreamTasteOrder(session_id, session_text, userid)\n{\n\tcreate_and_submit_form({\n\t\taction: '/?page=admin_order_mgr&user=' + userid,\n\t\tinput: ({\n\t\t\t'session': session_id,\n\t\t\t'request': 'savedTasteOrder',\n\t\t\t'sessionText': session_text\n\t\t})\n\t});\n}\n\nfunction handle_tabbed_content()\n{\n\tif ($('.tabbed-content').length == 0)\n\t{\n\t\treturn;\n\t}\n\twindow.tabbed_content = {};\n\n\t$('.tabbed-content').each(function (count) {\n\n\t\tif ($(this).data('tabid'))\n\t\t{\n\t\t\tif ($(this).data('tabid') in tabbed_content)\n\t\t\t{\n\t\t\t\tdd_console_log('data-tabid for tabbed-content must be unique.');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcount = $(this).data('tabid');\n\t\t\t}\n\t\t}\n\n\t\t// store tabb\n\t\tvar this_content = tabbed_content[count] = this;\n\n\t\ttabbed_content[count].tab_clicks = {};\n\n\t\tvar tabs = $(this_content).find('.tabs');\n\t\tvar tab_content = $(this_content).find('.tabs-content');\n\n\t\t$(tabs).find('[data-tabid]').each(function () {\n\t\t\tvar tabid = $(this).data('tabid');\n\n\t\t\t// tab needs a close button\n\t\t\tif ($(this).hasClass('close'))\n\t\t\t{\n\t\t\t\tvar confirmClass = '';\n\n\t\t\t\tif ($(this).hasClass('confirm'))\n\t\t\t\t{\n\t\t\t\t\tconfirmClass = ' confirm';\n\t\t\t\t}\n\n\t\t\t\t$(this).append('<span class=\"close' + confirmClass + '\" data-tooltip=\"Close\">X</span>').find('.close').on('click', function (e) {\n\n\t\t\t\t\t// keep the outer tab click even from firing\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t// assign this to var to use within dd_message\n\t\t\t\t\tvar this_close_button = this;\n\n\t\t\t\t\t// if the close button has a confirmation class then prompt\n\t\t\t\t\t// if it has class noconfirm skip to else, this is a one-time class to override confirm prompt\n\t\t\t\t\tif ($(this_close_button).hasClass('confirm') && !$(this_close_button).hasClass('noconfirm'))\n\t\t\t\t\t{\n\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\ttitle: 'Confirm',\n\t\t\t\t\t\t\tmessage: 'Are you sure you wish to close this tab?',\n\t\t\t\t\t\t\tconfirm: function () {\n\t\t\t\t\t\t\t\t// hide the tab that is closing\n\t\t\t\t\t\t\t\t$(this_close_button).parent().addClass('hidden');\n\n\t\t\t\t\t\t\t\t// select the first available tab\n\t\t\t\t\t\t\t\t$(this_close_button).parent().parent().children().not('.hidden, .disabled').first().trigger('click');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcancel: function () {\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// has class noconfirm, remove it this is a one-time override\n\t\t\t\t\t\t$(this_close_button).removeClass('noconfirm');\n\n\t\t\t\t\t\t// hide the tab that is closing\n\t\t\t\t\t\t$(this_close_button).parent().addClass('hidden');\n\n\t\t\t\t\t\t// select the first available tab\n\t\t\t\t\t\t$(this_close_button).parent().parent().children().not('.hidden, .disabled').first().trigger('click');\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// get the selected tab on load to select primary content\n\t\t\tif ($(this).hasClass('selected'))\n\t\t\t{\n\t\t\t\tselected_tab = this;\n\t\t\t\t$(tab_content).find('[data-tabid=\"' + tabid + '\"]').addClass('selected');\n\t\t\t}\n\n\t\t\t// add content class to content divs\n\t\t\tif (!$(this).hasClass('content'))\n\t\t\t{\n\t\t\t\t$(tab_content).find('[data-tabid=\"' + tabid + '\"]').addClass('content');\n\t\t\t}\n\n\t\t\t// store tab object to fire click events on\n\t\t\ttabbed_content[count].tab_clicks[tabid] = this;\n\n\t\t\t$(this).on('click', function () {\n\n\t\t\t\t// already selected, don't do anything\n\t\t\t\tif ($(this).hasClass('selected'))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// disabled, don't do anything\n\t\t\t\tif ($(this).hasClass('disabled'))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar exit_early = false;\n\t\t\t\t// iterate over tabs to remove selected class from current selected tab\n\t\t\t\t$(tabs).find('[data-tabid]').each(function () {\n\n\t\t\t\t\tif ($(this).hasClass('selected'))\n\t\t\t\t\t{\n\n\t\t\t\t\t\t// handle optional callback on tab being de-selected\n\t\t\t\t\t\tif ($(this).data('deselect_callback'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar data_callback = $(this).data('deselect_callback');\n\t\t\t\t\t\t\tvar callback = window[data_callback];\n\n\t\t\t\t\t\t\tif (callback != undefined)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// pass the clicked object to callback\n\t\t\t\t\t\t\t\tif (!callback(this))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\texit_early = true;\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$(this).removeClass('selected');\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tif (exit_early)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// handle optional link url\n\t\t\t\tif ($(this).data('link'))\n\t\t\t\t{\n\t\t\t\t\tbounce($(this).data('link'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// iterate over content div to remove selected from current selected content\n\t\t\t\t$(tab_content).find('[data-tabid]').each(function () {\n\n\t\t\t\t\tif ($(this).hasClass('selected'))\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this).removeClass('selected');\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\t// add selected class to clicked tab\n\t\t\t\t$(tabs).find('[data-tabid=\"' + tabid + '\"]').addClass('selected');\n\n\t\t\t\t// add selected class to clicked content\n\t\t\t\t$(tab_content).find('[data-tabid=\"' + tabid + '\"]').addClass('selected');\n\n\t\t\t\t// handle optional callback\n\t\t\t\tif ($(this).data('callback'))\n\t\t\t\t{\n\t\t\t\t\tvar data_callback = $(this).data('callback');\n\t\t\t\t\tvar callback = window[data_callback];\n\n\t\t\t\t\tif (callback != undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\t// pass the clicked object to callback\n\t\t\t\t\t\tcallback(this);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// html5 update url history\n\t\t\t\tif ($(this).data('urlpush') === undefined || $(this).data('urlpush') === 'true')\n\t\t\t\t{\n\t\t\t\t\tif (getQueryVariable('tabs'))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tab_sections = getQueryVariable('tabs').split(',');\n\n\t\t\t\t\t\tvar new_query = [];\n\t\t\t\t\t\tvar new_query_tabs = [];\n\n\t\t\t\t\t\t$.each(tab_sections, function (index, value) {\n\n\t\t\t\t\t\t\tvar view_tab = value.split('.');\n\n\t\t\t\t\t\t\tif (view_tab[0] == count)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnew_query.push(view_tab[0] + '.' + tabid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnew_query.push(view_tab[0] + '.' + view_tab[1]);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnew_query_tabs[view_tab[0]] = true;\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (new_query_tabs[count] === undefined)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnew_query.push(count + '.' + tabid);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnew_query_string = setQueryString('tabs', new_query.toString());\n\t\t\t\t\t\thistoryPush({url: new_query_string});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tnew_query_string = setQueryString('tabs', count + '.' + tabid);\n\t\t\t\t\t\thistoryPush({url: new_query_string});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n\t// select tabs based on url variable\n\tif (getQueryVariable('tabs'))\n\t{\n\t\tvar tab_sections = getQueryVariable('tabs').split(',');\n\n\t\t$.each(tab_sections, function (index, value) {\n\n\t\t\tvar view_tab = value.split('.');\n\n\t\t\tif (view_tab[0] !== undefined && view_tab[1] !== undefined)\n\t\t\t{\n\t\t\t\tif (!$(tabbed_content[view_tab[0]].tab_clicks[view_tab[1]]).hasClass('hidden'))\n\t\t\t\t{\n\t\t\t\t\t$(tabbed_content[view_tab[0]].tab_clicks[view_tab[1]]).click().mouseleave();\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t}\n\n}\n\nfunction handle_accordion_content()\n{\n\tif ($('.accordion-content').length == 0)\n\t{\n\t\treturn;\n\t}\n\twindow.accordion_content = {};\n\n\t$('.accordion-content').each(function (count) {\n\t\tif ($(this).data('tabid'))\n\t\t{\n\t\t\tif ($(this).data('tabid') in accordion_content)\n\t\t\t{\n\t\t\t\tdd_console_log('data-tabid for accordion-content must be unique.');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcount = $(this).data('tabid');\n\t\t\t}\n\t\t}\n\n\t\t// store tabb\n\t\tvar this_content = accordion_content[count] = this;\n\t\taccordion_content[count].tab_clicks = {};\n\t\tvar tabs = $(this_content).find('.tabs');\n\n\t\t$(tabs).find('[data-tabid]').each(function () {\n\t\t\tvar tabid = $(this).data('tabid');\n\n\t\t\t// get the selected tab on load to select primary content\n\t\t\tif ($(this).hasClass('active'))\n\t\t\t{\n\t\t\t\tselected_tab = this;\n\t\t\t\t$(this).next().slideDown();\n\t\t\t}\n\n\t\t\t// store tab object to fire click events on\n\t\t\taccordion_content[count].tab_clicks[tabid] = this;\n\n\t\t\t$(this).on('click', function () {\n\n\t\t\t\t// already selected, don't do anything\n\t\t\t\tif ($(this).hasClass('active') || $(this).hasClass('disabled'))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar exit_early = false;\n\t\t\t\t// iterate over tabs to remove selected class from current selected tab\n\t\t\t\t$(tabs).find('[data-tabid]').each(function () {\n\t\t\t\t\tif ($(this).hasClass('active'))\n\t\t\t\t\t{\n\t\t\t\t\t\t// handle optional callback on tab being de-selected\n\t\t\t\t\t\tif ($(this).data('deselect_callback'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar data_callback = $(this).data('deselect_callback');\n\t\t\t\t\t\t\tvar callback = window[data_callback];\n\n\t\t\t\t\t\t\tif (callback != undefined)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// pass the clicked object to callback\n\t\t\t\t\t\t\t\tif (!callback(this))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\texit_early = true;\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$(this).removeClass('active');\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tif (exit_early)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// handle optional link url\n\t\t\t\tif ($(this).data('link'))\n\t\t\t\t{\n\t\t\t\t\tbounce($(this).data('link'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// iterate over content div to remove selected from current selected content\n\t\t\t\t$(tabs).find('[data-tabidcontent]').each(function () {\n\t\t\t\t\tif ($(this).hasClass('active'))\n\t\t\t\t\t{\n\t\t\t\t\t\t$(this).hide();\n\t\t\t\t\t\t$(this).removeClass('active');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// add selected class to clicked tab\n\t\t\t\t$(tabs).find('[data-tabid=\"' + tabid + '\"]').addClass('active');\n\n\t\t\t\t// add selected class to clicked content\n\t\t\t\t$(tabs).find('[data-tabidcontent=\"' + tabid + 'Content\"]').addClass('active').slideDown();\n\n\t\t\t\t// handle optional callback\n\t\t\t\tif ($(this).data('callback'))\n\t\t\t\t{\n\t\t\t\t\tvar data_callback = $(this).data('callback');\n\t\t\t\t\tvar callback = window[data_callback];\n\n\t\t\t\t\tif (callback != undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\t// pass the clicked object to callback\n\t\t\t\t\t\tcallback(this);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// html5 update url history\n\t\t\t\tif ($(this).data('urlpush') === undefined || $(this).data('urlpush') === 'true')\n\t\t\t\t{\n\t\t\t\t\tif (getQueryVariable('atabs'))\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tab_sections = getQueryVariable('atabs').split(',');\n\n\t\t\t\t\t\tvar new_query = [];\n\t\t\t\t\t\tvar new_query_tabs = [];\n\n\t\t\t\t\t\t$.each(tab_sections, function (index, value) {\n\n\t\t\t\t\t\t\tvar view_tab = value.split('.');\n\n\t\t\t\t\t\t\tif (view_tab[0] == count)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnew_query.push(view_tab[0] + '.' + tabid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnew_query.push(view_tab[0] + '.' + view_tab[1]);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnew_query_tabs[view_tab[0]] = true;\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (new_query_tabs[count] === undefined)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnew_query.push(count + '.' + tabid);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnew_query_string = setQueryString('atabs', new_query.toString());\n\t\t\t\t\t\thistoryPush({url: new_query_string});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tnew_query_string = setQueryString('atabs', count + '.' + tabid);\n\t\t\t\t\t\thistoryPush({url: new_query_string});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n\n\t// select tabs based on url variable\n\tif (getQueryVariable('atabs'))\n\t{\n\t\tvar tab_sections = getQueryVariable('atabs').split(',');\n\n\t\t$.each(tab_sections, function (index, value) {\n\n\t\t\tvar view_tab = value.split('.');\n\n\t\t\tif (view_tab[0] !== undefined && view_tab[1] !== undefined && accordion_content)\n\t\t\t{\n\t\t\t\tif (!$(accordion_content[view_tab[0]].tab_clicks[view_tab[1]]).hasClass('hidden'))\n\t\t\t\t{\n\t\t\t\t\t$(accordion_content[view_tab[0]].tab_clicks[view_tab[1]]).click().mouseleave();\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t}\n\n}\n\nfunction hideStatusMessage(type)\n{\n\t$('#' + type).slideUp();\n}\n\nfunction modal_message(settings)\n{\n\tvar config = {\n\t\ttitle: false,\n\t\tmessage: false,\n\t\tsize: false // small, large, extra-large\n\t};\n\n\t$.extend(config, settings);\n\n\tif (typeof config.confirm != 'undefined')\n\t{\n\t\t// convert old dd_message\n\t\tif (typeof config.confirm == 'function')\n\t\t{\n\t\t\tconfig.buttons = {\n\t\t\t\tconfirm: {\n\t\t\t\t\tlabel: 'Confirm',\n\t\t\t\t\tclassName: 'btn-primary',\n\t\t\t\t\tcallback: config.confirm\n\t\t\t\t},\n\t\t\t\tcancel: {\n\t\t\t\t\tlabel: 'Cancel',\n\t\t\t\t\tclassName: 'btn-secondary',\n\t\t\t\t\tcallback: config.cancel\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbootbox.dialog(config);\n\t}\n\telse if (typeof config.buttons != 'undefined')\n\t{\n\t\t// convert old dd_message\n\t\tvar buttons = {};\n\n\t\t$.each(config.buttons, function (key, value) {\n\n\t\t\tif (typeof value == 'function')\n\t\t\t{\n\t\t\t\tbuttons[key] = {\n\t\t\t\t\tlabel: key,\n\t\t\t\t\tclassName: 'btn-primary',\n\t\t\t\t\tcallback: value\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t\tconfig.buttons = buttons;\n\n\t\tbootbox.dialog(config);\n\t}\n\telse\n\t{\n\t\tbootbox.alert(config);\n\t}\n\n}\n\nfunction dd_message(settings)\n{\n\tvar config = {\n\t\tresizable: false,\n\t\tmodal: true,\n\t\thide_qtips: true,\n\t\tdiv_id: 'dd_message'\n\t};\n\n\t$.extend(config, settings);\n\n\t// hide open tooltips so they aren't on top of the dialog\n\tif (config.hide_qtips)\n\t{\n\t\tif ($.fn.qtip)\n\t\t{\n\t\t\t$('.qtip.ui-tooltip').qtip('hide');\n\t\t}\n\t}\n\n\tif (config.type == 'error_msg')\n\t{\n\t\t// TODO: to fix this http://jsfiddle.net/XkSu9/\n\t\t//config.title = '<img src=\"' + PATH.image + '/icon/error.png\" class=\"img_valign\" /> <span style=\"color:#ffff00;\">' + config.title + '</span>';\n\t}\n\n\t// Require message\n\tif (!config.message)\n\t{\n\t\tdd_message({message: \"dd_message({message : 'requires message!' })\"});\n\t}\n\telse\n\t{\n\t\t// Set up buttons object\n\t\tif (!config.buttons)\n\t\t{\n\t\t\tconfig.buttons = {};\n\t\t}\n\n\t\t// Add confirm button\n\t\tif (settings.confirm)\n\t\t{\n\t\t\tconfig.buttons.Confirm = function () {\n\t\t\t\tif (settings.canConfirm)\n\t\t\t\t{\n\t\t\t\t\tif (settings.canConfirm())\n\t\t\t\t\t{\n\t\t\t\t\t\tsettings.confirm();\n\t\t\t\t\t\t// Destroy div\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsettings.confirm();\n\t\t\t\t\t// Destroy div\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Add cancel button with callback, else if add plain cancel if confirm button has been added, else add ok button\n\t\tif (settings.cancel)\n\t\t{\n\t\t\tconfig.buttons.Cancel = function () {\n\t\t\t\tsettings.cancel();\n\t\t\t\t// Destroy hidden div and dialog\n\t\t\t\t$(this).remove();\n\t\t\t};\n\t\t}\n\t\telse if (settings.confirm)\n\t\t{\n\t\t\tconfig.buttons.Cancel = function () {\n\t\t\t\t// Destroy hidden div and dialog\n\t\t\t\t$(this).remove();\n\t\t\t};\n\t\t}\n\t\telse if (!settings.noOk)\n\t\t{\n\t\t\tconfig.buttons.Ok = function () {\n\t\t\t\t// Destroy hidden div and dialog\n\t\t\t\tif (settings.closeCallback)\n\t\t\t\t{\n\t\t\t\t\tsettings.closeCallback();\n\t\t\t\t}\n\t\t\t\t$(this).remove();\n\t\t\t};\n\t\t}\n\t}\n\n\t// Create hidden message div\n\tif ($('#' + config.div_id).length == 0)\n\t{\n\t\tvar div = $('<div></div>');\n\t\tdiv.attr('id', config.div_id);\n\t\tdiv.attr('style', 'display:none;');\n\t\t$(document.body).append(div);\n\t}\n\n\t// Add message to hidden div\n\t$('#' + config.div_id).html(config.message);\n\n\t// Launch the dialog\n\t$('#' + config.div_id).dialog(config);\n}\n\nfunction handle_helpdesk()\n{\n\tif (!$('#helpdesk', '#footerlinks').length)\n\t{\n\t\t$('#footerlinks').append('<div id=\"helpdesk\">Dream Dinners Support</div>');\n\t}\n\n\t$('#helpdesk, #helpdesk_footer_link, #helpdesk_button, .helpdesk-popup').on('click', function (e) {\n\n\t\te.preventDefault();\n\n\t\tvar request_url = window.location.pathname + window.location.search;\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 60000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_helpdesk',\n\t\t\t\top: 'get_helpdesk',\n\t\t\t\trequest_url: request_url\n\n\t\t\t},\n\t\t\tsuccess: function (json) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\tvar dialog_contents = json.helpdesk_form;\n\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Dream Dinners Support',\n\t\t\t\t\t\tmessage: dialog_contents,\n\t\t\t\t\t\theight: 620,\n\t\t\t\t\t\twidth: 650,\n\t\t\t\t\t\tmodal: false,\n\t\t\t\t\t\tdiv_id: 'helpdesk_dd_message',\n\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\topen: function (event, ui) {\n\t\t\t\t\t\t\t$(\"#form_helpdesk input[name='subject']\").focus();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t'Support Portal': function () {\n\t\t\t\t\t\t\t\tbounce('https://support.dreamdinners.com', '_blank');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'Submit Ticket': function () {\n\n\t\t\t\t\t\t\t\tvar validationMessages = \"\";\n\n\t\t\t\t\t\t\t\tif ($(\"#form_helpdesk input[name='subject']\").val().trim().length == 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalidationMessages = \"Subject<br />\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ($(\"#form_helpdesk textarea[name='description']\").val().trim().length == 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalidationMessages += \"Description<br />\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ($(\"#form_helpdesk select[name='ticket_type']\").val().trim().length == 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalidationMessages += \"Ticket Type<br />\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (validationMessages.length > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar message = \"Please Fill out the following fields:<br /><br />\" + validationMessages;\n\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Input error',\n\t\t\t\t\t\t\t\t\t\tmessage: message\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar helpdesk_dd_message = $(\"#helpdesk_dd_message\")[0];\n\n\t\t\t\t\t\t\t\t//\tvar fileElem = $(\"#email_attachment\")[0];\n\t\t\t\t\t\t\t\t//\tvar files = fileElem.files;\n\n\t\t\t\t\t\t\t\tvar ticket = $(\"#form_helpdesk\").serialize();\n\t\t\t\t\t\t\t\tvar formData = new FormData();\n\n\t\t\t\t\t\t\t\t//\tfor (var i = 0; i < files.length; i++)\n\t\t\t\t\t\t\t\t//\t{\n\t\t\t\t\t\t\t\t//\t\tvar file = files[i];\n\n\t\t\t\t\t\t\t\t// Add the file to the request.\n\t\t\t\t\t\t\t\t//\t\tformData.append('email_attachment', file, file.name);\n\t\t\t\t\t\t\t\t//\t}\n\n\t\t\t\t\t\t\t\tformData.append('op', 'submit_ticket');\n\t\t\t\t\t\t\t\tformData.append('processor', 'admin_helpdesk');\n\t\t\t\t\t\t\t\tformData.append('ticket_data', ticket);\n\t\t\t\t\t\t\t\tformData.append('reporting_url', window.location.href);\n\n\t\t\t\t\t\t\t\tif (DEBUG_INFO)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tformData.append('debugInfo', DEBUG_INFO);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\t\t\ttimeout: 60000,\n\t\t\t\t\t\t\t\t\tcache: false,\n\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\tcontentType: false,\n\t\t\t\t\t\t\t\t\tprocessData: false,\n\t\t\t\t\t\t\t\t\tdata: formData,\n\t\t\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t$(helpdesk_dd_message).remove();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\tmessage: strError\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tCancel: function () {\n\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tmessage: strError\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t});\n}\n\nfunction menu_bar_init()\n{\n\tif ($.fn.make_dropdown)\n\t{\n\t\t$('#menubar > li').make_dropdown({'timeout': 250});\n\t}\n}\n\nfunction fadmin_idle_timeout()\n{\n\tif (!USER_LOGGEDIN || !$.cookie('DreamSite_TO'))\n\t{\n\t\treturn;\n\t}\n\n\tTO = $.cookie('DreamSite_TO');\n\n\tfadmin_is_idle(true);\n\n\t$(document).idle(\n\t\tfunction () {\n\n\t\t\t// When idle\n\t\t\tif (!is_idle)\n\t\t\t{\n\t\t\t\tfadmin_is_idle(true);\n\t\t\t}\n\n\t\t},\n\t\tfunction () {\n\n\t\t\t// When active again\n\t\t\tif (is_idle)\n\t\t\t{\n\t\t\t\tfadmin_is_idle(false);\n\t\t\t}\n\n\t\t},\n\t\t{\n\t\t\tafter: 2000\n\t\t}\n\t);\n}\n\nfunction fadmin_is_idle(idle)\n{\n\tis_idle = idle;\n\tajax_login_in_view = false;\n\twarning_time = 120000; // 2 minute warning\n\n\tvar date = new Date();\n\tvar sdate = new Date();\n\n\tvar minutes = TO;\n\tif (!idle)\n\t{\n\t\tminutes = 60;\n\t}\n\tvar milliseconds = minutes * 60 * 1000;\n\n\tdate.setTime(date.getTime() + (milliseconds));\n\tsdate.setTime(date.getTime() + (milliseconds) + 1000);\n\t// Note: add 1 second so that idle period expiration handler has a chance to grab the session id\n\n\tif (!idle)\n\t{\n\t\tdd_console_log('Not Idle ' + milliseconds);\n\n\t\t// cancel future alert popup\n\t\t$.doTimeout('alert_timeout_timer');\n\n\t\t// cancel future warning toast\n\t\t$.doTimeout('toast_timeout_warning');\n\n\t\t// close existing warning toast\n\t\tif (dd_toast_id_close('toast_timeout_warning'))\n\t\t{\n\t\t\tdd_toast({message: 'Activity has canceled the logout.'});\n\t\t}\n\t}\n\telse\n\t{\n\t\tdd_console_log('Idle ' + milliseconds);\n\n\t\tif (USER_LOGGEDIN && !ajax_login_in_view)\n\t\t{\n\t\t\t// start time until alert popup\n\t\t\t// default warning in warning_time, half timeout if timeout less than warning_time (for testing)\n\t\t\twarning_milliseconds = milliseconds / 2;\n\n\t\t\tif (milliseconds > warning_time)\n\t\t\t{\n\t\t\t\twarning_milliseconds = milliseconds - warning_time;\n\t\t\t}\n\n\t\t\t$.doTimeout('toast_timeout_warning', warning_milliseconds, function () {\n\t\t\t\tdd_toast({\n\t\t\t\t\tmessage: 'You will soon be logged out due to inactivity. Activity will cancel the logout.',\n\t\t\t\t\tdelay: false,\n\t\t\t\t\ttoast_id: 'toast_timeout_warning',\n\t\t\t\t\tsound: false\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// start time until alert popup\n\t\t\t$.doTimeout('alert_timeout_timer', milliseconds, function () {\n\t\t\t\tdo_alert_timeout();\n\t\t\t});\n\t\t}\n\t}\n\n\tif (USER_LOGGEDIN)\n\t{\n\t\t$.cookie('DreamSite_Timer', true, {\n\t\t\texpires: date,\n\t\t\tdomain: COOKIE.domain,\n\t\t\tsecure: true\n\t\t});\n\t\t$.cookie(COOKIE.dd_sc_name, $.cookie(COOKIE.dd_sc_name), {\n\t\t\texpires: sdate,\n\t\t\tdomain: COOKIE.domain,\n\t\t\tsecure: true\n\t\t});\n\t}\n}\n\nfunction do_alert_timeout()\n{\n\tif ($.cookie('DreamSite_Timer')) // cookie still exists from another tab activity, check again in 3 seconds\n\t{\n\t\t$.doTimeout('alert_timeout_timer', 3000, function () {\n\t\t\tdo_alert_timeout();\n\t\t});\n\t}\n\telse // cookie expired, so do popup\n\t{\n\t\talert_timeout();\n\t}\n}\n\nfunction dd_toast(settings)\n{\n\t// delay: false; will prevent fadeout, click to remove toast\n\t// message: message;\n\t// toast_id: 'unique_id'; assign a toast id to manipulate programmically, typically to close a sticky\n\t// position: 'topleft', 'botleft', 'topright', 'botright', 'topcenter', 'center', 'botcenter'\n\t// sound: true/false, play sound\n\t// xclose: true/false, only X closes instead of clicking anywhere\n\n\tvar config = {\n\t\tdelay: 4000,\n\t\tmessage: false,\n\t\ttoast_id: false,\n\t\tposition: 'topright',\n\t\tcss_class: false,\n\t\tsound: false,\n\t\txclose: false\n\t};\n\n\t$.extend(config, settings);\n\n\tif (typeof toast_obj === 'undefined')\n\t{\n\t\ttoast_obj = {};\n\t}\n\n\tvar toast_container_selector = '.dd_toast_container.' + config.position;\n\n\tif (config.toast_id)\n\t{\n\t\tdd_toast_id_close(config.toast_id, true);\n\t}\n\n\tif (config.message)\n\t{\n\t\t// create container if not available\n\t\tif (!$(toast_container_selector).length)\n\t\t{\n\t\t\t$('<div class=\"dd_toast_container ' + config.position + '\"></div>').appendTo('body');\n\t\t}\n\n\t\t// add toast to container, register click to close handler\n\t\tif (config.toast_id)\n\t\t{\n\t\t\ttoast_obj[config.toast_id] = $('<div class=\"dd_toast\"></div>').appendTo(toast_container_selector);\n\n\t\t\ttoast = toast_obj[config.toast_id];\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttoast = $('<div class=\"dd_toast\"></div>').appendTo(toast_container_selector);\n\t\t}\n\n\t\tif (config.css_class)\n\t\t{\n\t\t\t$(toast).addClass(config.css_class);\n\t\t}\n\n\t\t// add the message\n\t\t$(toast).html(config.message);\n\n\t\t// add close button for sticky\n\t\tif (!config.delay || config.xclose == true)\n\t\t{\n\t\t\t$('<div class=\"dd_toast_close\">x</div>').on('click', function () {\n\n\t\t\t\t$(toast).stop().fadeOut('slow', function () {\n\n\t\t\t\t\t// fadeout animation complete\n\t\t\t\t\tdd_toast_cleanup(toast);\n\n\t\t\t\t});\n\n\t\t\t}).css({'cursor': 'pointer'}).prependTo(toast);\n\t\t}\n\n\t\t// close when click anywhere on div\n\t\tif (config.xclose == false)\n\t\t{\n\t\t\t$(toast).on('click', function () {\n\n\t\t\t\t$(this).stop().fadeOut('slow', function () {\n\n\t\t\t\t\t// fadeout animation complete\n\t\t\t\t\tdd_toast_cleanup(this);\n\n\t\t\t\t});\n\n\t\t\t}).css({'cursor': 'pointer'});\n\t\t}\n\n\t\t// play sound if true\n\t\tif (config.sound)\n\t\t{\n\t\t\t$('<embed src=\"' + PATH.script + '/customer/media/dd_toast_alert.mp3\" hidden=\"true\" autostart=\"true\" loop=\"false\"></embed>').appendTo(toast);\n\t\t}\n\n\t\t// fadein, auto close if delay is not false\n\t\t$(toast).fadeIn('fast', function () {\n\n\t\t\t// fadein animation complete\n\t\t\tif (config.delay)\n\t\t\t{\n\t\t\t\t$(this).delay(config.delay).fadeOut('slow', function () {\n\n\t\t\t\t\t// fadeout animation complete\n\t\t\t\t\tdd_toast_cleanup(this);\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t}\n}\n\nfunction dd_toast_id_close(toast_id, instant)\n{\n\tif (typeof toast_obj !== 'undefined' && typeof toast_obj[toast_id] !== 'undefined')\n\t{\n\t\tif (instant == true)\n\t\t{\n\t\t\tdd_toast_cleanup($(toast_obj[toast_id]));\n\n\t\t\tdelete toast_obj[toast_id];\n\t\t}\n\t\telse // fadeout\n\t\t{\n\t\t\t$(toast_obj[toast_id]).stop().fadeOut('slow', function () {\n\t\t\t\t// fadeout animation complete\n\t\t\t\tdd_toast_cleanup(this);\n\n\t\t\t\tdelete toast_obj[toast_id];\n\t\t\t});\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction dd_toast_exists(toast_id)\n{\n\tif (typeof toast_obj !== 'undefined' && typeof toast_obj[toast_id] !== 'undefined')\n\t{\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction dd_toast_cleanup(elem)\n{\n\t// cleanup, remove from dom\n\t$(elem).remove();\n\n\t// if all toasts are closed, remove container\n\t$('.dd_toast_container').each(function () {\n\t\tif ($(this).is(':empty'))\n\t\t{\n\t\t\t$(this).remove();\n\t\t}\n\t});\n}\n\nfunction alert_timeout()\n{\n\tUSER_LOGGEDIN = false;\n\tajax_login_in_view = true;\n\n\tdd_toast_id_close('toast_timeout_warning');\n\t// hide elements that should be hidden on logout\n\t$('[data-fadmin_perm]').each(function () {\n\t\tif ($(this).is(\":visible\"))\n\t\t{\n\t\t\t$(this).attr('data-hide_on_logout', true).hide();\n\t\t}\n\t});\n\n\t// invalidate DreamSite cookie\n\tdate = new Date();\n\tdate.setDate(date.getDate() - 1);\n\n\tvar last_session_id = $.cookie(COOKIE.dd_sc_name);\n\n\t$.cookie(COOKIE.dd_sc_name, false, {\n\t\texpires: date,\n\t\tdomain: COOKIE.domain\n\t});\n\n\t$.ajax({\n\t\turl: '/processor',\n\t\ttype: 'POST',\n\t\ttimeout: 60000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'login',\n\t\t\top: 'get_login_form'\n\t\t},\n\t\tsuccess: function (json) {\n\t\t\tif (json.processor_success)\n\t\t\t{\n\t\t\t\tvar dialog_contents = json.login_form;\n\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Session has expired due to inactivity',\n\t\t\t\t\tmessage: dialog_contents,\n\t\t\t\t\theight: 300,\n\t\t\t\t\twidth: 300,\n\t\t\t\t\tdiv_id: 'to_login_div',\n\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\tnoOk: true,\n\t\t\t\t\topen: function (event, ui) {\n\n\t\t\t\t\t\tvar buttons = $(this).dialog(\"option\", \"buttons\");\n\n\t\t\t\t\t\tvar acceptFunction = buttons.Accept;\n\n\t\t\t\t\t\t//hide close button.\n\t\t\t\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\n\n\t\t\t\t\t\t// focus password field\n\t\t\t\t\t\t$('#fadmin_password_login').focus();\n\n\t\t\t\t\t\t// register keyup on password field, if enter submit form\n\t\t\t\t\t\t$('#fadmin_password_login').keyup(function (e) {\n\n\t\t\t\t\t\t\tif (e.keyCode == $.ui.keyCode.ENTER)\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tacceptFunction();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$('.ui-widget-overlay').css({\n\t\t\t\t\t\t\t'background': '#462200 url(\"' + PATH.image_admin + '/fadmin_background.jpg\")',\n\t\t\t\t\t\t\t'opacity': '1',\n\t\t\t\t\t\t\t'filter': 'none'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t},\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tAccept: function () {\n\n\t\t\t\t\t\t\tvar login_ui = $(\"#to_login_div\")[0];\n\t\t\t\t\t\t\t$(\"#to_login_div\").find('#error_message').html('');\n\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tprocessor: 'login',\n\t\t\t\t\t\t\t\t\tprimary_email_login: $(\"#to_login_div\").find('#fadmin_primary_email_login').val(),\n\t\t\t\t\t\t\t\t\tpassword_login: $(\"#to_login_div\").find('#fadmin_password_login').val(),\n\t\t\t\t\t\t\t\t\tnobo: 1,\n\t\t\t\t\t\t\t\t\tsubmit_login: 1,\n\t\t\t\t\t\t\t\t\tremember_login: 1,\n\t\t\t\t\t\t\t\t\tlast_session_id: last_session_id\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t\tif (json.processor_message)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$(\"#to_login_div\").find('#error_message').html(json.processor_message);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (json.user_type == 'CUSTOMER')\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tbounce('/');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t$(login_ui).remove();\n\t\t\t\t\t\t\t\t\t\t\tajax_login_in_view = false;\n\t\t\t\t\t\t\t\t\t\t\tUSER_LOGGEDIN = true;\n\n\t\t\t\t\t\t\t\t\t\t\t$('#fadmin_username').html(json.firstname + ' ' + json.lastname);\n\n\t\t\t\t\t\t\t\t\t\t\t$('#fadmin_usertype').html(json.user_type_text);\n\n\t\t\t\t\t\t\t\t\t\t\t// find elements that were hidden on logout and show them if user_type permits\n\t\t\t\t\t\t\t\t\t\t\t$('[data-fadmin_perm][data-hide_on_logout]').each(function () {\n\n\t\t\t\t\t\t\t\t\t\t\t\tperm_array = $(this).data('fadmin_perm').split(',');\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (~$.inArray(json.user_type, perm_array))\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).removeProp('data-hide_on_logout').show();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t$.cookie('DreamSite_Timer', true, {\n\t\t\t\t\t\t\t\t\t\t\t\texpires: 1,\n\t\t\t\t\t\t\t\t\t\t\t\tdomain: COOKIE.domain,\n\t\t\t\t\t\t\t\t\t\t\t\tsecure: true\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\tfadmin_is_idle(false);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCancel: function () {\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error';\n\n\t\t\thandle_dashboard_update();\n\t\t}\n\t});\n}\n\nfunction displayModalWaitDialog(div_id, message)\n{\n\tvar processWindowContent = '<span style=\"font-weight:bold;\">' + message + '</span>&nbsp;&nbsp;';\n\tprocessWindowContent += '<img src=\"' + PATH.image + '/style/throbber_circle.gif\" class=\"img_valign\" alt=\"Processing\" />';\n\n\tdd_message({\n\t\ttitle: 'Processing',\n\t\tmessage: processWindowContent,\n\t\tnoOk: true,\n\t\tcloseOnEscape: false,\n\t\tdialogClass: \"noclose\",\n\t\tmodal: true,\n\t\twidth: 500,\n\t\theight: 90,\n\t\tresizable: false,\n\t\tdiv_id: div_id\n\t});\n}\n\nfunction set_platepoints_progress_bar(new_value, animate)\n{\n\tif (!animate)\n\t{\n\t\t$('#pp_progressbar').progressbar({\n\t\t\tvalue: new_value,\n\t\t\tchange: function () {\n\t\t\t\t$('#pp_progresslabel').text(new_value + '%');\n\t\t\t}\n\t\t});\n\t}\n\telse\n\t{\n\t\t$.doTimeout('platepoints_progress', 2, function () {\n\n\t\t\tvar current_value = $('#pp_progressbar').progressbar('option', 'value');\n\n\t\t\tif (isNaN(current_value))\n\t\t\t{\n\t\t\t\tcurrent_value = 0;\n\t\t\t}\n\n\t\t\tif (current_value < 50)\n\t\t\t{\n\t\t\t\t$('#pp_progresslabel').addClass('dark');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$('#pp_progresslabel').removeClass('dark');\n\t\t\t}\n\n\t\t\tif (new_value > current_value)\n\t\t\t{\n\t\t\t\tincrease = true;\n\t\t\t\tvalue_count = current_value + 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tincrease = false;\n\t\t\t\tvalue_count = current_value - 1;\n\t\t\t}\n\n\t\t\tif (increase)\n\t\t\t{\n\t\t\t\tif (value_count > new_value)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('#pp_progressbar').progressbar({\n\t\t\t\t\t\tvalue: value_count,\n\t\t\t\t\t\tchange: function () {\n\t\t\t\t\t\t\t$('#pp_progresslabel').text($('#pp_progressbar').progressbar('value') + '%');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (value_count < new_value)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$('#pp_progressbar').progressbar({\n\t\t\t\t\t\tvalue: value_count,\n\t\t\t\t\t\tchange: function () {\n\t\t\t\t\t\t\t$('#pp_progresslabel').text($('#pp_progressbar').progressbar('value') + '%');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t}\n}\n\nfunction help_system_init()\n{\n\t$('[data-help]').each(function () {\n\t\t$(this).addClass(\"help_enabled\");\n\n\t\tvar indexStr = $(this).attr('data-help');\n\t\tvar index = indexStr.split(\"-\");\n\n\t\tvar thisHelpData = ddHelpData;\n\t\tfor (var x = 0; x < index.length; x++)\n\t\t{\n\t\t\tthisHelpData = thisHelpData[index[x]];\n\t\t}\n\n\t\t// Load tooltips\n\t\tif ($.fn.qtip && typeof thisHelpData != 'undefined')\n\t\t{\n\t\t\t$(this).qtip({\n\t\t\t\tshow: {\n\t\t\t\t\tsolo: true\n\t\t\t\t},\n\t\t\t\tcontent: {\n\t\t\t\t\ttext: \"<div class='help_tip_title'>\" + thisHelpData.title + \"</div><div class='help_tip_text'>\" + thisHelpData.help_text + \"</div><div class='help_tip_tech_text'>\" + thisHelpData.tech_text + \"</div>\"\n\t\t\t\t},\n\t\t\t\tposition: {\n\t\t\t\t\tmy: 'bottom left',\n\t\t\t\t\tat: 'top left',\n\t\t\t\t\tviewport: $(window),\n\t\t\t\t\tadjust: {\n\t\t\t\t\t\tmethod: 'flip',\n\t\t\t\t\t\ty: parseInt(0, 10) || 0,\n\t\t\t\t\t\tx: parseInt(10, 10) || 0\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\tclasses: 'ui-tooltip-dreamdinners_tt ui-tooltip-shadow'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t});\n\n\t/*\n\t $('[data-help]').on('click', function () {\n\n\t var indexStr = $(this).attr('data-help');\n\t var index = indexStr.split(\"-\");\n\n\t var thisHelpData = ddHelpData;\n\t for (var x = 0; x < index.length; x++)\n\t {\n\t thisHelpData = thisHelpData[index[x]];\n\t }\n\n\n\t dd_message({\n\t title: 'Help',\n\t message: thisHelpData,\n\t modal: false\n\t });\n\n\t });\n\t */\n}\n\n//Legacy function, needs replacement\nfunction NewWindowScroll(mypage, myname, w, h)\n{\n\tvar LeftPosition = (screen.width) ? Math.floor((screen.width - w) / 2) : 0;\n\tvar TopPosition = (screen.height) ? Math.floor((screen.height - h) / 2) : 0;\n\tvar settings = 'height=' + h + ',width=' + w + ',top=' + TopPosition + ',left=' + LeftPosition + ',status=no,toolbar=no,scrollbars=1,resizable=1';\n\twindow.open(mypage, myname, settings);\n}\n\n$(function () {\n\n\t$(document).on('click', '[data-guestsearch]', function (e) {\n\n\t\tif ($('#ilgs_container').length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvar search_button_parameters = $(this).data();\n\t\tdelete search_button_parameters['qtip']; // remove unnecessary data from being sent to processor\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 60000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_guestSearch',\n\t\t\t\top: 'get_search_form',\n\t\t\t\tdata: search_button_parameters\n\t\t\t},\n\t\t\tsuccess: function (json) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\tvar dialog_contents = json.search_form;\n\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Guest Search',\n\t\t\t\t\t\tmessage: dialog_contents,\n\t\t\t\t\t\tmodal: false,\n\t\t\t\t\t\tdiv_id: 'ilgs_container',\n\t\t\t\t\t\theight: 300,\n\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\tclose: function () {\n\t\t\t\t\t\t\t$('#ilgs_container').remove();\n\t\t\t\t\t\t},\n\t\t\t\t\t\topen: function (event, ui) {\n\t\t\t\t\t\t\t$('#ilgs_search_value').focus();\n\n\t\t\t\t\t\t\tvar manualSearchTypeChange = false;\n\n\t\t\t\t\t\t\t$(document).on('change', '#ilgs_search_type', function (e) {\n\n\t\t\t\t\t\t\t\tmanualSearchTypeChange = true;\n\n\t\t\t\t\t\t\t\t$('#ilgs_search_value').unmask();\n\n\t\t\t\t\t\t\t\tif ($('#ilgs_search_type') == 'phone')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_value').mask('999-999-9999');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('.telephone');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$(document).on('keyup', '#ilgs_search_value', function (e) {\n\n\t\t\t\t\t\t\t\tif (e.which == 13)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_go').trigger('click');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// user manually changed search type, don't automatically change it\n\t\t\t\t\t\t\t\tif (manualSearchTypeChange == true)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar value = $('#ilgs_search_value').val();\n\t\t\t\t\t\t\t\t// not numeric entry, start with last name\n\t\t\t\t\t\t\t\tif (!$.isNumeric(value))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_type').val('lastname');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// numeric entry, probably guest id\n\t\t\t\t\t\t\t\tif ($.isNumeric(value))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_type').val('id');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// has @ symbol, probably email\n\t\t\t\t\t\t\t\tif (value.indexOf(\"@\") != -1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_type').val('email');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// has space, probably first and last name\n\t\t\t\t\t\t\t\tif (value.indexOf(\" \") != -1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_type').val('firstlast');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$(document).on('click', '#ilgs_search_go', function (e) {\n\n\t\t\t\t\t\t\t\tvar searchtype = $('#ilgs_search_type').val();\n\t\t\t\t\t\t\t\tvar searchvalue = $('#ilgs_search_value').val();\n\t\t\t\t\t\t\t\tvar store_filter = $('#ilgs_search_all').prop(\"checked\") ? 1 : 0;\n\t\t\t\t\t\t\t\tvar currentStore = $('#currentStore').val();\n\n\t\t\t\t\t\t\t\t$('#ilgs_results').slideUp();\n\n\t\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\t\turl: '/processor?processor=admin_guestSearch',\n\t\t\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tsearch_type: searchtype,\n\t\t\t\t\t\t\t\t\t\tq: searchvalue,\n\t\t\t\t\t\t\t\t\t\tresults_type: 'inline_search',\n\t\t\t\t\t\t\t\t\t\tstore: (currentStore ? currentStore : 'none'),\n\t\t\t\t\t\t\t\t\t\tfilter: store_filter,\n\t\t\t\t\t\t\t\t\t\tselect_button_title: search_button_parameters.select_button_title\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t\t\tif (json.result_code == 1)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t$('#ilgs_results').html(json.data).slideDown();\n\n\t\t\t\t\t\t\t\t\t\t\t$(document).on('click', '[data-ilgs_result]', function (e) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (typeof window[search_button_parameters.select_function] === 'function')\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t// this will merge in all data- from the data-guestsearch button for use when the data-select_function function is called\n\t\t\t\t\t\t\t\t\t\t\t\t\t$.extend(this.dataset, search_button_parameters);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t// call data-select_function and pass 'this' as variable\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow[search_button_parameters.select_function](this);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t// remove the search container\n\t\t\t\t\t\t\t\t\t\t\t\t\t$('#ilgs_container').remove();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\telse if (typeof search_button_parameters.select_function !== undefined && search_button_parameters.select_function !== false)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tdd_console_log(search_button_parameters.select_function + '() specified in data-select_function, but not defined in javascript.');\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t// if there is no data-select_function then the button navigates to user_details\n\t\t\t\t\t\t\t\t\t\t\t\t\tbounce('/?page=admin_user_details&id=' + $(this).data('user_id'));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\tmessage: strError\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\thandle_dashboard_update();\n\t\t\t}\n\t\t});\n\t});\n\n\t$(document).on('click', '#menu-toggle', function (e) {\n\t\te.preventDefault();\n\t\t$(\"#wrapper\").toggleClass(\"toggled\");\n\t});\n\n\t// prevent mouse wheel from changing number fields\n\t$(document).on('focus', 'input[type=number]', function (e) {\n\t\t$(this).on('wheel.disableScroll', function (e) {\n\t\t\te.preventDefault()\n\t\t})\n\t});\n\t$(document).on('blur', 'input[type=number]', function (e) {\n\t\t$(this).off('wheel.disableScroll')\n\t});\n\n\t$(document).on('click', '[data-confirm-nav]', function (e) {\n\t\te.preventDefault();\n\t\tvar href = this.href;\n\t\tvar message = $(this).data('confirm-nav');\n\t\tbootbox.confirm({\n\t\t\tmessage: message,\n\t\t\tcallback: function (result) {\n\t\t\t\tif (result)\n\t\t\t\t{\n\t\t\t\t\twindow.location = href;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\t$(document).on('click', '[data-multi_store_select_id], [data-multi_store_select_filter]', function (e) {\n\n\t\te.preventDefault();\n\n\t\t// prevent multiple clicks\n\t\tif ($(this).hasClass('disabled'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// check if they are using the form filters, otherwise they are requesting the form below\n\t\tif ($(this).data('multi_store_select_filter'))\n\t\t{\n\t\t\tswitch ($(this).data('multi_store_select_filter'))\n\t\t\t{\n\t\t\t\tcase 'all':\n\t\t\t\t\t$(\"#multi_store_select_form input[type=checkbox]\").prop('checked', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'none':\n\t\t\t\t\t$(\"#multi_store_select_form input[type=checkbox]\").prop('checked', false);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'active-all':\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"1\"]').prop('checked', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'active-corporate':\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"1\"][data-franchise_id=\"220\"]').prop('checked', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'active-non-corporate':\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"1\"][data-franchise_id!=\"220\"]').prop('checked', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'inactive-all':\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"0\"]').prop('checked', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'inactive-corporate':\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"0\"][data-franchise_id=\"220\"]').prop('checked', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'inactive-non-corporate':\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"0\"][data-franchise_id!=\"220\"]').prop('checked', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dist-all':\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"DISTRIBUTION_CENTER\"]').prop('checked', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dist-none':\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"DISTRIBUTION_CENTER\"]').prop('checked', false);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet multi_store_select_id = $(this).data('multi_store_select_id');\n\n\t\tlet this_button = $(this);\n\n\t\t// get currently set ids\n\t\tlet store_ids = $('#' + multi_store_select_id).val();\n\n\t\t$(this_button).addClass('disabled');\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_helpers',\n\t\t\t\top: 'multi_store_select',\n\t\t\t\tstore_id: store_ids\n\t\t\t},\n\t\t\tsuccess: function (json) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\tbootbox.confirm({\n\t\t\t\t\t\tmessage: json.html,\n\t\t\t\t\t\tscrollable: true,\n\t\t\t\t\t\tcallback: function (result) {\n\t\t\t\t\t\t\tif (result)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet form = $('#multi_store_select_form');\n\t\t\t\t\t\t\t\tlet checked = form.serializeArray();\n\n\t\t\t\t\t\t\t\tlet store_ids = [];\n\t\t\t\t\t\t\t\t$.each(checked, function (index, value) {\n\t\t\t\t\t\t\t\t\tstore_ids.push(value.value);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t$('#' + multi_store_select_id).val(store_ids.join());\n\n\t\t\t\t\t\t\t\t$('#' + multi_store_select_id + '-count').text(checked.length);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$(this_button).removeClass('disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tstrError = 'Unexpected error';\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$(document).on('click', '[data-user_id_pp_tooltip]', function (e) {\n\n\t\te.preventDefault();\n\n\t\tvar user_id = $(this).data('user_id_pp_tooltip');\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\top: 'platepoints_tooltip',\n\t\t\t\tuser_id: user_id\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\tbootbox.dialog({\n\t\t\t\t\t\tmessage: json.tooltip_html,\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\tmanage: {\n\t\t\t\t\t\t\t\tlabel: 'Manage',\n\t\t\t\t\t\t\t\tclassName: 'btn-success',\n\t\t\t\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\t\t\t\tbounce('/?page=admin_user_plate_points&id=' + user_id + '&back=' + back_path());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclose: {\n\t\t\t\t\t\t\t\tlabel: 'Close',\n\t\t\t\t\t\t\t\tclassName: 'btn-success'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$(document).on('click', '.link-dinner-details', function (e) {\n\n\t\te.preventDefault();\n\n\t\tvar menu_id = $(this).data('menu_id');\n\t\tvar menu_item_id = $(this).data('menu_item_id');\n\t\tvar store_id = $(this).data('store_id');\n\t\tvar target = $(this).prop('target');\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'menu_item',\n\t\t\t\top: 'find_item',\n\t\t\t\tmenu_id: menu_id,\n\t\t\t\tmenu_item_id: menu_item_id,\n\t\t\t\tstore_id: store_id,\n\t\t\t\tdetailed: true\n\t\t\t},\n\t\t\tsuccess: function (json) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\tbootbox.dialog({\n\t\t\t\t\t\tmessage: json.html,\n\t\t\t\t\t\tsize: 'large',\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\"Full details\": function () {\n\t\t\t\t\t\t\t\tbounce('?page=item&recipe=' + json.recipe_id + '&ov_menu=' + json.menu_id, target);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\t\tlabel: \"Close\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$(document).on('click', '.backoffice_change_store:not(.disabled)', function (e) {\n\n\t\te.preventDefault();\n\n\t\tlet backoffice_change_store = {\n\t\t\t'back': back_path(),\n\t\t\t'dialog': null\n\t\t}\n\n\t\t// create the modal ui with bootbox\n\t\tbackoffice_change_store.dialog = bootbox.dialog({\n\t\t\tmessage: '<p><i class=\"fa fa-spin fa-spinner\"></i> Loading store selector...</p>',\n\t\t\tsize: 'large',\n\t\t\tcenterVertical: true,\n\t\t\tcloseButton: false,\n\t\t\tbuttons: {\n\t\t\t\tok: {\n\t\t\t\t\tlabel: \"Select store\",\n\t\t\t\t\tclassName: 'btn-primary backoffice_change_store-confirm disabled',\n\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\tlet store = $('#change_store-selector').val();\n\t\t\t\t\t\tlet store_text = $('#change_store-selector option:selected').text();\n\n\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p><i class=\"fa fa-spin fa-spinner\"></i> Loading ' + store_text + '</p>');\n\t\t\t\t\t\tbackoffice_change_store.dialog.find('.modal-footer > .backoffice_change_store-confirm').addClass('disabled');\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\ttimeout: 60000,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tprocessor: 'admin_helpers',\n\t\t\t\t\t\t\t\top: 'store_selector',\n\t\t\t\t\t\t\t\tdo: 'selector_select',\n\t\t\t\t\t\t\t\tstore: store,\n\t\t\t\t\t\t\t\tback: backoffice_change_store.back\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbounce(decodeURIComponent(backoffice_change_store.back));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p>' + json.processor_message + '</p>');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p>Unexpected error: ' + strError + '</p>');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcancel: {\n\t\t\t\t\tlabel: \"Cancel\",\n\t\t\t\t\tclassName: 'btn-danger',\n\t\t\t\t\tcallback: function () {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonShow: function (e) {\n\t\t\t\t// load the menu items\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: '/processor',\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\ttimeout: 60000,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tprocessor: 'admin_helpers',\n\t\t\t\t\t\top: 'store_selector',\n\t\t\t\t\t\tdo: 'selector_get'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html(json.form);\n\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.modal-footer > .backoffice_change_store-confirm').removeClass('disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p>' + json.processor_message + '</p>');\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p>Unexpected error: ' + strError + '</p>');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t$(backoffice_change_store.dialog).on('change', '#change_store-selector', function (e) {\n\t\t\t$('.backoffice_change_store-confirm').trigger('click');\n\t\t});\n\n\t});\n\n\tif (getQueryVariable('tab'))\n\t{\n\t\tvar tabid = getQueryVariable('tab');\n\n\t\t$('#' + tabid + '-tab').tab('show');\n\t}\n\n\t/* Handle Bootstrap Tabbed Content */\n\t$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n\t\te.target; // newly activated tab\n\t\te.relatedTarget; // previous active tab\n\n\t\t// html5 update url history\n\t\tif ($(e.target).data('urlpush') !== undefined && $(e.target).data('urlpush') === true)\n\t\t{\n\t\t\tif ($(e.target).data('target') !== undefined)\n\t\t\t{\n\t\t\t\tvar target = $(e.target).data('target');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar target = $(e.target).attr('href');\n\t\t\t}\n\n\t\t\tvar tabid = $(target).attr('id');\n\n\t\t\tnew_query_string = setQueryString('tab', tabid);\n\t\t\thistoryPush({url: new_query_string});\n\t\t}\n\t});\n\n});"],"mappings":"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"}