{"version":3,"file":"admin_global.min.js","names":["admin_global_init","data_tooltips_init","help_system_init","fadmin_idle_timeout","menu_bar_init","handle_inline_guest_search","handle_helpdesk","handle_tabbed_content","handle_accordion_content","$","document","ajaxStart","AJAX_IN_PROCESS","show","ajaxStop","hide","ajaxSuccess","event","xhr","settings","click_dd_message_button","div_id","button_title","parent","find","each","this","html","click","onNBCreateSingleSession","menus_clause","getElementById","value","selectedCell","cellName","id","bounce","IS_TOUCH_SCREEN_DEVICE","fn","qtip","content","attr","position","my","at","viewport","window","adjust","method","y","parseInt","x","style","classes","hostessDreamTasteOrder","session_id","session_text","userid","create_and_submit_form","action","input","session","request","sessionText","length","tabbed_content","count","data","dd_console_log","this_content","tab_clicks","tabs","tab_content","tabid","hasClass","confirmClass","append","on","e","stopPropagation","this_close_button","dd_message","title","message","confirm","addClass","children","not","first","trigger","cancel","removeClass","selected_tab","exit_early","data_callback","callback","undefined","getQueryVariable","tab_sections","split","new_query","new_query_tabs","index","view_tab","push","new_query_string","setQueryString","toString","historyPush","url","mouseleave","accordion_content","next","slideDown","hideStatusMessage","type","slideUp","modal_message","config","size","extend","buttons","label","className","bootbox","dialog","key","alert","resizable","modal","hide_qtips","Confirm","canConfirm","remove","Cancel","noOk","Ok","closeCallback","div","body","preventDefault","request_url","location","pathname","search","ajax","timeout","dataType","processor","op","success","json","processor_success","helpdesk_form","height","width","open","ui","focus","validationMessages","val","trim","helpdesk_dd_message","ticket","serialize","formData","FormData","href","DEBUG_INFO","cache","contentType","processData","processor_message","error","objAJAXRequest","strError","search_button_parameters","search_form","closeOnEscape","close","manualSearchTypeChange","unmask","mask","which","isNumeric","indexOf","searchtype","searchvalue","store_filter","prop","currentStore","search_type","q","results_type","store","filter","select_button_title","result_code","select_function","dataset","response","handle_dashboard_update","make_dropdown","USER_LOGGEDIN","cookie","TO","fadmin_is_idle","idle","is_idle","after","ajax_login_in_view","warning_time","date","Date","sdate","minutes","milliseconds","setTime","getTime","warning_milliseconds","doTimeout","dd_toast","delay","toast_id","sound","do_alert_timeout","dd_toast_id_close","expires","domain","COOKIE","secure","dd_sc_name","alert_timeout","css_class","xclose","toast_obj","toast_container_selector","appendTo","toast","stop","fadeOut","dd_toast_cleanup","css","cursor","prependTo","PATH","script","fadeIn","instant","dd_toast_exists","elem","is","setDate","getDate","last_session_id","login_form","acceptFunction","Accept","keyup","keyCode","ENTER","background","image_admin","opacity","login_ui","primary_email_login","password_login","nobo","submit_login","remember_login","user_type","firstname","lastname","user_type_text","perm_array","inArray","removeProp","reload","displayModalWaitDialog","processWindowContent","image","dialogClass","set_platepoints_progress_bar","new_value","animate","current_value","progressbar","isNaN","increase","value_count","change","text","thisHelpData","ddHelpData","solo","help_text","tech_text","NewWindowScroll","mypage","myname","w","h","LeftPosition","screen","Math","floor","toggleClass","off","result","multi_store_select_id","this_button","store_ids","store_id","scrollable","checked","serializeArray","join","user_id","status","tooltip_html","manage","back_path","menu_id","menu_item_id","target","detailed","recipe_id","backoffice_change_store","back","centerVertical","closeButton","ok","store_text","do","decodeURIComponent","onShow","form","tab","relatedTarget"],"sourceRoot":"js/src/dreamdinners/admin","sources":["admin_global.js"],"sourcesContent":["function admin_global_init()\r\n{\r\n\t// load tooltips\r\n\tdata_tooltips_init();\r\n\r\n\thelp_system_init();\r\n\r\n\tfadmin_idle_timeout();\r\n\r\n\t// drop down menus in fadmin\r\n\tmenu_bar_init();\r\n\t// Auto load [page_name]_init() functions\r\n\r\n\thandle_inline_guest_search();\r\n\r\n\thandle_helpdesk();\r\n\r\n\thandle_tabbed_content();\r\n\r\n\thandle_accordion_content();\r\n\r\n\t// Show ajax processing indicator\r\n\t$(document).ajaxStart(function () {\r\n\r\n\t\tAJAX_IN_PROCESS = true;\r\n\r\n\t\t$('.img_throbber_circle').show();\r\n\r\n\t});\r\n\r\n\t// Stop ajax processing indicator\r\n\t$(document).ajaxStop(function () {\r\n\t\tAJAX_IN_PROCESS = false;\r\n\r\n\t\t$('.img_throbber_circle').hide();\r\n\r\n\t});\r\n\r\n\t// this monitors ajax requests so you can do something always with them\r\n\t$(document).ajaxSuccess(function (event, xhr, settings) {\r\n\r\n\t\t// load any data-tooltips that may have been returned in ajax content\r\n\t\tdata_tooltips_init();\r\n\r\n\t\thandle_inline_guest_search();\r\n\r\n\t});\r\n\r\n}\r\n\r\nfunction click_dd_message_button(div_id, button_title)\r\n{\r\n\tvar topDiv = $(\"#\" + div_id).parent();\r\n\tvar found = false;\r\n\ttopDiv.find(\"[type=button]\").each(function () {\r\n\t\tvar buttonText = $(this).find(\"span\").html();\r\n\t\tif (buttonText == button_title)\r\n\t\t{\r\n\t\t\t$(this).click();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar buttonTextAttempt2 = $(this).html();\r\n\t\tif (buttonTextAttempt2 == button_title)\r\n\t\t{\r\n\t\t\t$(this).click();\r\n\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\nfunction onNBCreateSingleSession()\r\n{\r\n\tvar menus_elem = document.getElementById(\"menus\");\r\n\r\n\tvar menus_clause = \"\";\r\n\tif (menus_elem)\r\n\t{\r\n\t\tvar menu_id = document.getElementById(\"menus\").value;\r\n\t\tmenus_clause = \"&menu=\" + menu_id;\r\n\t}\r\n\r\n\tif (typeof selectedCell != \"undefined\" && selectedCell != null)\r\n\t{\r\n\t\tcellName = selectedCell.id;\r\n\t\tbounce(\"main.php?page=admin_create_session&selectedCell=\" + cellName);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tbounce(\"main.php?page=admin_create_session\" + menus_clause);\r\n\t}\r\n}\r\n\r\nfunction data_tooltips_init()\r\n{\r\n\tif (!IS_TOUCH_SCREEN_DEVICE)\r\n\t{\r\n\t\t// Load tooltips\r\n\t\tif ($.fn.qtip)\r\n\t\t{\r\n\t\t\t$('[data-tooltip]').qtip({\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tattr: 'data-tooltip'\r\n\t\t\t\t},\r\n\t\t\t\tposition: {\r\n\t\t\t\t\tmy: 'bottom left',\r\n\t\t\t\t\tat: 'top left',\r\n\t\t\t\t\tviewport: $(window),\r\n\t\t\t\t\tadjust: {\r\n\t\t\t\t\t\tmethod: 'shift',\r\n\t\t\t\t\t\ty: parseInt(0, 10) || 0,\r\n\t\t\t\t\t\tx: parseInt(10, 10) || 0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tclasses: 'ui-tooltip-dreamdinners_tt qtip-shadow'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction hostessDreamTasteOrder(session_id, session_text, userid)\r\n{\r\n\tcreate_and_submit_form({\r\n\t\taction: 'main.php?page=admin_order_mgr&user=' + userid,\r\n\t\tinput: ({\r\n\t\t\t'session': session_id,\r\n\t\t\t'request': 'savedTasteOrder',\r\n\t\t\t'sessionText': session_text\r\n\t\t})\r\n\t});\r\n}\r\n\r\nfunction handle_tabbed_content()\r\n{\r\n\tif ($('.tabbed-content').length == 0)\r\n\t{\r\n\t\treturn;\r\n\t}\r\n\twindow.tabbed_content = {};\r\n\r\n\t$('.tabbed-content').each(function (count) {\r\n\r\n\t\tif ($(this).data('tabid'))\r\n\t\t{\r\n\t\t\tif ($(this).data('tabid') in tabbed_content)\r\n\t\t\t{\r\n\t\t\t\tdd_console_log('data-tabid for tabbed-content must be unique.');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcount = $(this).data('tabid');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// store tabb\r\n\t\tvar this_content = tabbed_content[count] = this;\r\n\r\n\t\ttabbed_content[count].tab_clicks = {};\r\n\r\n\t\tvar tabs = $(this_content).find('.tabs');\r\n\t\tvar tab_content = $(this_content).find('.tabs-content');\r\n\r\n\t\t$(tabs).find('[data-tabid]').each(function () {\r\n\t\t\tvar tabid = $(this).data('tabid');\r\n\r\n\t\t\t// tab needs a close button\r\n\t\t\tif ($(this).hasClass('close'))\r\n\t\t\t{\r\n\t\t\t\tvar confirmClass = '';\r\n\r\n\t\t\t\tif ($(this).hasClass('confirm'))\r\n\t\t\t\t{\r\n\t\t\t\t\tconfirmClass = ' confirm';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).append('<span class=\"close' + confirmClass + '\" data-tooltip=\"Close\">X</span>').find('.close').on('click', function (e) {\r\n\r\n\t\t\t\t\t// keep the outer tab click even from firing\r\n\t\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\t\t// assign this to var to use within dd_message\r\n\t\t\t\t\tvar this_close_button = this;\r\n\r\n\t\t\t\t\t// if the close button has a confirmation class then prompt\r\n\t\t\t\t\t// if it has class noconfirm skip to else, this is a one-time class to override confirm prompt\r\n\t\t\t\t\tif ($(this_close_button).hasClass('confirm') && !$(this_close_button).hasClass('noconfirm'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\t\ttitle: 'Confirm',\r\n\t\t\t\t\t\t\tmessage: 'Are you sure you wish to close this tab?',\r\n\t\t\t\t\t\t\tconfirm: function () {\r\n\t\t\t\t\t\t\t\t// hide the tab that is closing\r\n\t\t\t\t\t\t\t\t$(this_close_button).parent().addClass('hidden');\r\n\r\n\t\t\t\t\t\t\t\t// select the first available tab\r\n\t\t\t\t\t\t\t\t$(this_close_button).parent().parent().children().not('.hidden, .disabled').first().trigger('click');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcancel: function () {\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// has class noconfirm, remove it this is a one-time override\r\n\t\t\t\t\t\t$(this_close_button).removeClass('noconfirm');\r\n\r\n\t\t\t\t\t\t// hide the tab that is closing\r\n\t\t\t\t\t\t$(this_close_button).parent().addClass('hidden');\r\n\r\n\t\t\t\t\t\t// select the first available tab\r\n\t\t\t\t\t\t$(this_close_button).parent().parent().children().not('.hidden, .disabled').first().trigger('click');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// get the selected tab on load to select primary content\r\n\t\t\tif ($(this).hasClass('selected'))\r\n\t\t\t{\r\n\t\t\t\tselected_tab = this;\r\n\t\t\t\t$(tab_content).find('[data-tabid=\"' + tabid + '\"]').addClass('selected');\r\n\t\t\t}\r\n\r\n\t\t\t// add content class to content divs\r\n\t\t\tif (!$(this).hasClass('content'))\r\n\t\t\t{\r\n\t\t\t\t$(tab_content).find('[data-tabid=\"' + tabid + '\"]').addClass('content');\r\n\t\t\t}\r\n\r\n\t\t\t// store tab object to fire click events on\r\n\t\t\ttabbed_content[count].tab_clicks[tabid] = this;\r\n\r\n\t\t\t$(this).on('click', function () {\r\n\r\n\t\t\t\t// already selected, don't do anything\r\n\t\t\t\tif ($(this).hasClass('selected'))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// disabled, don't do anything\r\n\t\t\t\tif ($(this).hasClass('disabled'))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar exit_early = false;\r\n\t\t\t\t// iterate over tabs to remove selected class from current selected tab\r\n\t\t\t\t$(tabs).find('[data-tabid]').each(function () {\r\n\r\n\t\t\t\t\tif ($(this).hasClass('selected'))\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t// handle optional callback on tab being de-selected\r\n\t\t\t\t\t\tif ($(this).data('deselect_callback'))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar data_callback = $(this).data('deselect_callback');\r\n\t\t\t\t\t\t\tvar callback = window[data_callback];\r\n\r\n\t\t\t\t\t\t\tif (callback != undefined)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t// pass the clicked object to callback\r\n\t\t\t\t\t\t\t\tif (!callback(this))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\texit_early = true;\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$(this).removeClass('selected');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (exit_early)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// handle optional link url\r\n\t\t\t\tif ($(this).data('link'))\r\n\t\t\t\t{\r\n\t\t\t\t\tbounce($(this).data('link'));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// iterate over content div to remove selected from current selected content\r\n\t\t\t\t$(tab_content).find('[data-tabid]').each(function () {\r\n\r\n\t\t\t\t\tif ($(this).hasClass('selected'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(this).removeClass('selected');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// add selected class to clicked tab\r\n\t\t\t\t$(tabs).find('[data-tabid=\"' + tabid + '\"]').addClass('selected');\r\n\r\n\t\t\t\t// add selected class to clicked content\r\n\t\t\t\t$(tab_content).find('[data-tabid=\"' + tabid + '\"]').addClass('selected');\r\n\r\n\t\t\t\t// handle optional callback\r\n\t\t\t\tif ($(this).data('callback'))\r\n\t\t\t\t{\r\n\t\t\t\t\tvar data_callback = $(this).data('callback');\r\n\t\t\t\t\tvar callback = window[data_callback];\r\n\r\n\t\t\t\t\tif (callback != undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// pass the clicked object to callback\r\n\t\t\t\t\t\tcallback(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// html5 update url history\r\n\t\t\t\tif ($(this).data('urlpush') === undefined || $(this).data('urlpush') === 'true')\r\n\t\t\t\t{\r\n\t\t\t\t\tif (getQueryVariable('tabs'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar tab_sections = getQueryVariable('tabs').split(',');\r\n\r\n\t\t\t\t\t\tvar new_query = [];\r\n\t\t\t\t\t\tvar new_query_tabs = [];\r\n\r\n\t\t\t\t\t\t$.each(tab_sections, function (index, value) {\r\n\r\n\t\t\t\t\t\t\tvar view_tab = value.split('.');\r\n\r\n\t\t\t\t\t\t\tif (view_tab[0] == count)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tnew_query.push(view_tab[0] + '.' + tabid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tnew_query.push(view_tab[0] + '.' + view_tab[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tnew_query_tabs[view_tab[0]] = true;\r\n\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (new_query_tabs[count] === undefined)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnew_query.push(count + '.' + tabid);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnew_query_string = setQueryString('tabs', new_query.toString());\r\n\t\t\t\t\t\thistoryPush({url: new_query_string});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnew_query_string = setQueryString('tabs', count + '.' + tabid);\r\n\t\t\t\t\t\thistoryPush({url: new_query_string});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t// select tabs based on url variable\r\n\tif (getQueryVariable('tabs'))\r\n\t{\r\n\t\tvar tab_sections = getQueryVariable('tabs').split(',');\r\n\r\n\t\t$.each(tab_sections, function (index, value) {\r\n\r\n\t\t\tvar view_tab = value.split('.');\r\n\r\n\t\t\tif (view_tab[0] !== undefined && view_tab[1] !== undefined)\r\n\t\t\t{\r\n\t\t\t\tif (!$(tabbed_content[view_tab[0]].tab_clicks[view_tab[1]]).hasClass('hidden'))\r\n\t\t\t\t{\r\n\t\t\t\t\t$(tabbed_content[view_tab[0]].tab_clicks[view_tab[1]]).click().mouseleave();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nfunction handle_accordion_content()\r\n{\r\n\tif ($('.accordion-content').length == 0)\r\n\t{\r\n\t\treturn;\r\n\t}\r\n\twindow.accordion_content = {};\r\n\r\n\t$('.accordion-content').each(function (count) {\r\n\t\tif ($(this).data('tabid'))\r\n\t\t{\r\n\t\t\tif ($(this).data('tabid') in accordion_content)\r\n\t\t\t{\r\n\t\t\t\tdd_console_log('data-tabid for accordion-content must be unique.');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcount = $(this).data('tabid');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// store tabb\r\n\t\tvar this_content = accordion_content[count] = this;\r\n\t\taccordion_content[count].tab_clicks = {};\r\n\t\tvar tabs = $(this_content).find('.tabs');\r\n\r\n\t\t$(tabs).find('[data-tabid]').each(function () {\r\n\t\t\tvar tabid = $(this).data('tabid');\r\n\r\n\t\t\t// get the selected tab on load to select primary content\r\n\t\t\tif ($(this).hasClass('active'))\r\n\t\t\t{\r\n\t\t\t\tselected_tab = this;\r\n\t\t\t\t$(this).next().slideDown();\r\n\t\t\t}\r\n\r\n\t\t\t// store tab object to fire click events on\r\n\t\t\taccordion_content[count].tab_clicks[tabid] = this;\r\n\r\n\t\t\t$(this).on('click', function () {\r\n\r\n\t\t\t\t// already selected, don't do anything\r\n\t\t\t\tif ($(this).hasClass('active') || $(this).hasClass('disabled'))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar exit_early = false;\r\n\t\t\t\t// iterate over tabs to remove selected class from current selected tab\r\n\t\t\t\t$(tabs).find('[data-tabid]').each(function () {\r\n\t\t\t\t\tif ($(this).hasClass('active'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// handle optional callback on tab being de-selected\r\n\t\t\t\t\t\tif ($(this).data('deselect_callback'))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar data_callback = $(this).data('deselect_callback');\r\n\t\t\t\t\t\t\tvar callback = window[data_callback];\r\n\r\n\t\t\t\t\t\t\tif (callback != undefined)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t// pass the clicked object to callback\r\n\t\t\t\t\t\t\t\tif (!callback(this))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\texit_early = true;\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$(this).removeClass('active');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (exit_early)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// handle optional link url\r\n\t\t\t\tif ($(this).data('link'))\r\n\t\t\t\t{\r\n\t\t\t\t\tbounce($(this).data('link'));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// iterate over content div to remove selected from current selected content\r\n\t\t\t\t$(tabs).find('[data-tabidcontent]').each(function () {\r\n\t\t\t\t\tif ($(this).hasClass('active'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$(this).hide();\r\n\t\t\t\t\t\t$(this).removeClass('active');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// add selected class to clicked tab\r\n\t\t\t\t$(tabs).find('[data-tabid=\"' + tabid + '\"]').addClass('active');\r\n\r\n\t\t\t\t// add selected class to clicked content\r\n\t\t\t\t$(tabs).find('[data-tabidcontent=\"' + tabid + 'Content\"]').addClass('active').slideDown();\r\n\r\n\t\t\t\t// handle optional callback\r\n\t\t\t\tif ($(this).data('callback'))\r\n\t\t\t\t{\r\n\t\t\t\t\tvar data_callback = $(this).data('callback');\r\n\t\t\t\t\tvar callback = window[data_callback];\r\n\r\n\t\t\t\t\tif (callback != undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// pass the clicked object to callback\r\n\t\t\t\t\t\tcallback(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// html5 update url history\r\n\t\t\t\tif ($(this).data('urlpush') === undefined || $(this).data('urlpush') === 'true')\r\n\t\t\t\t{\r\n\t\t\t\t\tif (getQueryVariable('atabs'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar tab_sections = getQueryVariable('atabs').split(',');\r\n\r\n\t\t\t\t\t\tvar new_query = [];\r\n\t\t\t\t\t\tvar new_query_tabs = [];\r\n\r\n\t\t\t\t\t\t$.each(tab_sections, function (index, value) {\r\n\r\n\t\t\t\t\t\t\tvar view_tab = value.split('.');\r\n\r\n\t\t\t\t\t\t\tif (view_tab[0] == count)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tnew_query.push(view_tab[0] + '.' + tabid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tnew_query.push(view_tab[0] + '.' + view_tab[1]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tnew_query_tabs[view_tab[0]] = true;\r\n\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (new_query_tabs[count] === undefined)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnew_query.push(count + '.' + tabid);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnew_query_string = setQueryString('atabs', new_query.toString());\r\n\t\t\t\t\t\thistoryPush({url: new_query_string});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnew_query_string = setQueryString('atabs', count + '.' + tabid);\r\n\t\t\t\t\t\thistoryPush({url: new_query_string});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\n\t// select tabs based on url variable\r\n\tif (getQueryVariable('atabs'))\r\n\t{\r\n\t\tvar tab_sections = getQueryVariable('atabs').split(',');\r\n\r\n\t\t$.each(tab_sections, function (index, value) {\r\n\r\n\t\t\tvar view_tab = value.split('.');\r\n\r\n\t\t\tif (view_tab[0] !== undefined && view_tab[1] !== undefined && accordion_content)\r\n\t\t\t{\r\n\t\t\t\tif (!$(accordion_content[view_tab[0]].tab_clicks[view_tab[1]]).hasClass('hidden'))\r\n\t\t\t\t{\r\n\t\t\t\t\t$(accordion_content[view_tab[0]].tab_clicks[view_tab[1]]).click().mouseleave();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nfunction hideStatusMessage(type)\r\n{\r\n\t$('#' + type).slideUp();\r\n}\r\n\r\nfunction modal_message(settings)\r\n{\r\n\tvar config = {\r\n\t\ttitle: false,\r\n\t\tmessage: false,\r\n\t\tsize: false // small, large, extra-large\r\n\t};\r\n\r\n\t$.extend(config, settings);\r\n\r\n\tif (typeof config.confirm != 'undefined')\r\n\t{\r\n\t\t// convert old dd_message\r\n\t\tif (typeof config.confirm == 'function')\r\n\t\t{\r\n\t\t\tconfig.buttons = {\r\n\t\t\t\tconfirm: {\r\n\t\t\t\t\tlabel: 'Confirm',\r\n\t\t\t\t\tclassName: 'btn-primary',\r\n\t\t\t\t\tcallback: config.confirm\r\n\t\t\t\t},\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\tlabel: 'Cancel',\r\n\t\t\t\t\tclassName: 'btn-secondary',\r\n\t\t\t\t\tcallback: config.cancel\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbootbox.dialog(config);\r\n\t}\r\n\telse if (typeof config.buttons != 'undefined')\r\n\t{\r\n\t\t// convert old dd_message\r\n\t\tvar buttons = {};\r\n\r\n\t\t$.each(config.buttons, function (key, value) {\r\n\r\n\t\t\tif (typeof value == 'function')\r\n\t\t\t{\r\n\t\t\t\tbuttons[key] = {\r\n\t\t\t\t\tlabel: key,\r\n\t\t\t\t\tclassName: 'btn-primary',\r\n\t\t\t\t\tcallback: value\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tconfig.buttons = buttons;\r\n\r\n\t\tbootbox.dialog(config);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tbootbox.alert(config);\r\n\t}\r\n\r\n}\r\n\r\nfunction dd_message(settings)\r\n{\r\n\tvar config = {\r\n\t\tresizable: false,\r\n\t\tmodal: true,\r\n\t\thide_qtips: true,\r\n\t\tdiv_id: 'dd_message'\r\n\t};\r\n\r\n\t$.extend(config, settings);\r\n\r\n\t// hide open tooltips so they aren't on top of the dialog\r\n\tif (config.hide_qtips)\r\n\t{\r\n\t\tif ($.fn.qtip)\r\n\t\t{\r\n\t\t\t$('.qtip.ui-tooltip').qtip('hide');\r\n\t\t}\r\n\t}\r\n\r\n\tif (config.type == 'error_msg')\r\n\t{\r\n\t\t// TODO: to fix this http://jsfiddle.net/XkSu9/\r\n\t\t//config.title = '<img src=\"' + PATH.image + '/icon/error.png\" class=\"img_valign\" /> <span style=\"color:#ffff00;\">' + config.title + '</span>';\r\n\t}\r\n\r\n\t// Require message\r\n\tif (!config.message)\r\n\t{\r\n\t\tdd_message({message: \"dd_message({message : 'requires message!' })\"});\r\n\t}\r\n\telse\r\n\t{\r\n\t\t// Set up buttons object\r\n\t\tif (!config.buttons)\r\n\t\t{\r\n\t\t\tconfig.buttons = {};\r\n\t\t}\r\n\r\n\t\t// Add confirm button\r\n\t\tif (settings.confirm)\r\n\t\t{\r\n\t\t\tconfig.buttons.Confirm = function () {\r\n\t\t\t\tif (settings.canConfirm)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (settings.canConfirm())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsettings.confirm();\r\n\t\t\t\t\t\t// Destroy div\r\n\t\t\t\t\t\t$(this).remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tsettings.confirm();\r\n\t\t\t\t\t// Destroy div\r\n\t\t\t\t\t$(this).remove();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// Add cancel button with callback, else if add plain cancel if confirm button has been added, else add ok button\r\n\t\tif (settings.cancel)\r\n\t\t{\r\n\t\t\tconfig.buttons.Cancel = function () {\r\n\t\t\t\tsettings.cancel();\r\n\t\t\t\t// Destroy hidden div and dialog\r\n\t\t\t\t$(this).remove();\r\n\t\t\t};\r\n\t\t}\r\n\t\telse if (settings.confirm)\r\n\t\t{\r\n\t\t\tconfig.buttons.Cancel = function () {\r\n\t\t\t\t// Destroy hidden div and dialog\r\n\t\t\t\t$(this).remove();\r\n\t\t\t};\r\n\t\t}\r\n\t\telse if (!settings.noOk)\r\n\t\t{\r\n\t\t\tconfig.buttons.Ok = function () {\r\n\t\t\t\t// Destroy hidden div and dialog\r\n\t\t\t\tif (settings.closeCallback)\r\n\t\t\t\t{\r\n\t\t\t\t\tsettings.closeCallback();\r\n\t\t\t\t}\r\n\t\t\t\t$(this).remove();\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\t// Create hidden message div\r\n\tif ($('#' + config.div_id).length == 0)\r\n\t{\r\n\t\tvar div = $('<div></div>');\r\n\t\tdiv.attr('id', config.div_id);\r\n\t\tdiv.attr('style', 'display:none;');\r\n\t\t$(document.body).append(div);\r\n\t}\r\n\r\n\t// Add message to hidden div\r\n\t$('#' + config.div_id).html(config.message);\r\n\r\n\t// Launch the dialog\r\n\t$('#' + config.div_id).dialog(config);\r\n}\r\n\r\nfunction handle_helpdesk()\r\n{\r\n\tif (!$('#helpdesk', '#footerlinks').length)\r\n\t{\r\n\t\t$('#footerlinks').append('<div id=\"helpdesk\">Dream Dinners Support</div>');\r\n\t}\r\n\r\n\t$('#helpdesk, #helpdesk_footer_link, #helpdesk_button, .helpdesk-popup').on('click', function (e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tvar request_url = window.location.pathname + window.location.search;\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 60000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'admin_helpdesk',\r\n\t\t\t\top: 'get_helpdesk',\r\n\t\t\t\trequest_url: request_url\r\n\r\n\t\t\t},\r\n\t\t\tsuccess: function (json) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar dialog_contents = json.helpdesk_form;\r\n\r\n\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\ttitle: 'Dream Dinners Support',\r\n\t\t\t\t\t\tmessage: dialog_contents,\r\n\t\t\t\t\t\theight: 620,\r\n\t\t\t\t\t\twidth: 650,\r\n\t\t\t\t\t\tmodal: false,\r\n\t\t\t\t\t\tdiv_id: 'helpdesk_dd_message',\r\n\t\t\t\t\t\tnoOk: true,\r\n\t\t\t\t\t\topen: function (event, ui) {\r\n\t\t\t\t\t\t\t$(\"#form_helpdesk input[name='subject']\").focus();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\t\t'Support Portal': function () {\r\n\t\t\t\t\t\t\t\tbounce('https://support.dreamdinners.com', '_blank');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t'Submit Ticket': function () {\r\n\r\n\t\t\t\t\t\t\t\tvar validationMessages = \"\";\r\n\r\n\t\t\t\t\t\t\t\tif ($(\"#form_helpdesk input[name='subject']\").val().trim().length == 0)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvalidationMessages = \"Subject<br />\";\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ($(\"#form_helpdesk textarea[name='description']\").val().trim().length == 0)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvalidationMessages += \"Description<br />\";\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ($(\"#form_helpdesk select[name='ticket_type']\").val().trim().length == 0)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvalidationMessages += \"Ticket Type<br />\";\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (validationMessages.length > 0)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvar message = \"Please Fill out the following fields:<br /><br />\" + validationMessages;\r\n\t\t\t\t\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'Input error',\r\n\t\t\t\t\t\t\t\t\t\tmessage: message\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tvar helpdesk_dd_message = $(\"#helpdesk_dd_message\")[0];\r\n\r\n\t\t\t\t\t\t\t\t//\tvar fileElem = $(\"#email_attachment\")[0];\r\n\t\t\t\t\t\t\t\t//\tvar files = fileElem.files;\r\n\r\n\t\t\t\t\t\t\t\tvar ticket = $(\"#form_helpdesk\").serialize();\r\n\t\t\t\t\t\t\t\tvar formData = new FormData();\r\n\r\n\t\t\t\t\t\t\t\t//\tfor (var i = 0; i < files.length; i++)\r\n\t\t\t\t\t\t\t\t//\t{\r\n\t\t\t\t\t\t\t\t//\t\tvar file = files[i];\r\n\r\n\t\t\t\t\t\t\t\t// Add the file to the request.\r\n\t\t\t\t\t\t\t\t//\t\tformData.append('email_attachment', file, file.name);\r\n\t\t\t\t\t\t\t\t//\t}\r\n\r\n\t\t\t\t\t\t\t\tformData.append('op', 'submit_ticket');\r\n\t\t\t\t\t\t\t\tformData.append('processor', 'admin_helpdesk');\r\n\t\t\t\t\t\t\t\tformData.append('ticket_data', ticket);\r\n\t\t\t\t\t\t\t\tformData.append('reporting_url', window.location.href);\r\n\r\n\t\t\t\t\t\t\t\tif (DEBUG_INFO)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tformData.append('debugInfo', DEBUG_INFO);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\ttimeout: 60000,\r\n\t\t\t\t\t\t\t\t\tcache: false,\r\n\t\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\t\tcontentType: false,\r\n\t\t\t\t\t\t\t\t\tprocessData: false,\r\n\t\t\t\t\t\t\t\t\tdata: formData,\r\n\t\t\t\t\t\t\t\t\tsuccess: function (json) {\r\n\t\t\t\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t$(helpdesk_dd_message).remove();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\t\t\t\t\t\tmessage: strError\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tCancel: function () {\r\n\t\t\t\t\t\t\t\t$(this).remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tdd_message({\r\n\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\tmessage: strError\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction handle_inline_guest_search()\r\n{\r\n\t$(document).on('click', '[data-guestsearch]', function (e) {\r\n\r\n\t\tif ($('#ilgs_container').length)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar search_button_parameters = $(this).data();\r\n\t\tdelete search_button_parameters['qtip']; // remove unnecessary data from being sent to processor\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 60000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'admin_guestSearch',\r\n\t\t\t\top: 'get_search_form',\r\n\t\t\t\tdata: search_button_parameters\r\n\t\t\t},\r\n\t\t\tsuccess: function (json) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar dialog_contents = json.search_form;\r\n\r\n\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\ttitle: 'Guest Search',\r\n\t\t\t\t\t\tmessage: dialog_contents,\r\n\t\t\t\t\t\tmodal: false,\r\n\t\t\t\t\t\tdiv_id: 'ilgs_container',\r\n\t\t\t\t\t\theight: 300,\r\n\t\t\t\t\t\twidth: 600,\r\n\t\t\t\t\t\tcloseOnEscape: false,\r\n\t\t\t\t\t\tnoOk: true,\r\n\t\t\t\t\t\tclose: function () {\r\n\t\t\t\t\t\t\t$('#ilgs_container').remove();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\topen: function (event, ui) {\r\n\t\t\t\t\t\t\t$('#ilgs_search_value').focus();\r\n\r\n\t\t\t\t\t\t\tvar manualSearchTypeChange = false;\r\n\r\n\t\t\t\t\t\t\t$(document).on('change', '#ilgs_search_type', function (e) {\r\n\r\n\t\t\t\t\t\t\t\tmanualSearchTypeChange = true;\r\n\r\n\t\t\t\t\t\t\t\t$('#ilgs_search_value').unmask();\r\n\r\n\t\t\t\t\t\t\t\tif ($('#ilgs_search_type') == 'phone')\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_value').mask('999-999-9999');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$('.telephone');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t$(document).on('keyup', '#ilgs_search_value', function (e) {\r\n\r\n\t\t\t\t\t\t\t\tif (e.which == 13)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_go').trigger('click');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// user manually changed search type, don't automatically change it\r\n\t\t\t\t\t\t\t\tif (manualSearchTypeChange == true)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar value = $('#ilgs_search_value').val();\r\n\t\t\t\t\t\t\t\t// not numeric entry, start with last name\r\n\t\t\t\t\t\t\t\tif (!$.isNumeric(value))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_type').val('lastname');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// numeric entry, probably guest id\r\n\t\t\t\t\t\t\t\tif ($.isNumeric(value))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_type').val('id');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// has @ symbol, probably email\r\n\t\t\t\t\t\t\t\tif (value.indexOf(\"@\") != -1)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_type').val('email');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// has space, probably first and last name\r\n\t\t\t\t\t\t\t\tif (value.indexOf(\" \") != -1)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t$('#ilgs_search_type').val('firstlast');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t$(document).on('click', '#ilgs_search_go', function (e) {\r\n\r\n\t\t\t\t\t\t\t\tvar searchtype = $('#ilgs_search_type').val();\r\n\t\t\t\t\t\t\t\tvar searchvalue = $('#ilgs_search_value').val();\r\n\t\t\t\t\t\t\t\tvar store_filter = $('#ilgs_search_all').prop(\"checked\") ? 1 : 0;\r\n\t\t\t\t\t\t\t\tvar currentStore = $('#currentStore').val();\r\n\r\n\t\t\t\t\t\t\t\t$('#ilgs_results').slideUp();\r\n\r\n\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\turl: 'ddproc.php?processor=admin_guestSearch',\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tsearch_type: searchtype,\r\n\t\t\t\t\t\t\t\t\t\tq: searchvalue,\r\n\t\t\t\t\t\t\t\t\t\tresults_type: 'inline_search',\r\n\t\t\t\t\t\t\t\t\t\tstore: (currentStore ? currentStore : 'none'),\r\n\t\t\t\t\t\t\t\t\t\tfilter: store_filter,\r\n\t\t\t\t\t\t\t\t\t\tselect_button_title: search_button_parameters.select_button_title\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function (json) {\r\n\t\t\t\t\t\t\t\t\t\tif (json.result_code == 1)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t$('#ilgs_results').html(json.data).slideDown();\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t$(document).on('click', '[data-ilgs_result]', function (e) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (typeof window[search_button_parameters.select_function] === 'function')\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// this will merge in all data- from the data-guestsearch button for use when the data-select_function function is called\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$.extend(this.dataset, search_button_parameters);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// call data-select_function and pass 'this' as variable\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow[search_button_parameters.select_function](this);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// remove the search container\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$('#ilgs_container').remove();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\telse if (typeof search_button_parameters.select_function !== undefined && search_button_parameters.select_function !== false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdd_console_log(search_button_parameters.select_function + '() specified in data-select_function, but not defined in javascript.');\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// if there is no data-select_function then the button navigates to user_details\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbounce('main.php?page=admin_user_details&id=' + $(this).data('user_id'));\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\t\t\t\t\t\tmessage: strError\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\thandle_dashboard_update();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\nfunction menu_bar_init()\r\n{\r\n\tif ($.fn.make_dropdown)\r\n\t{\r\n\t\t$('#menubar > li').make_dropdown({'timeout': 250});\r\n\t}\r\n}\r\n\r\nfunction fadmin_idle_timeout()\r\n{\r\n\tif (!USER_LOGGEDIN || !$.cookie('DreamSite_TO'))\r\n\t{\r\n\t\treturn;\r\n\t}\r\n\r\n\tTO = $.cookie('DreamSite_TO');\r\n\r\n\tfadmin_is_idle(true);\r\n\r\n\t$(document).idle(\r\n\t\tfunction () {\r\n\r\n\t\t\t// When idle\r\n\t\t\tif (!is_idle)\r\n\t\t\t{\r\n\t\t\t\tfadmin_is_idle(true);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tfunction () {\r\n\r\n\t\t\t// When active again\r\n\t\t\tif (is_idle)\r\n\t\t\t{\r\n\t\t\t\tfadmin_is_idle(false);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t{\r\n\t\t\tafter: 2000\r\n\t\t}\r\n\t);\r\n}\r\n\r\nfunction fadmin_is_idle(idle)\r\n{\r\n\tis_idle = idle;\r\n\tajax_login_in_view = false;\r\n\twarning_time = 120000; // 2 minute warning\r\n\r\n\tvar date = new Date();\r\n\tvar sdate = new Date();\r\n\r\n\tvar minutes = TO;\r\n\tif (!idle)\r\n\t{\r\n\t\tminutes = 60;\r\n\t}\r\n\tvar milliseconds = minutes * 60 * 1000;\r\n\r\n\tdate.setTime(date.getTime() + (milliseconds));\r\n\tsdate.setTime(date.getTime() + (milliseconds) + 1000);\r\n\t// Note: add 1 second so that idle period expiration handler has a chance to grab the session id\r\n\r\n\tif (!idle)\r\n\t{\r\n\t\tdd_console_log('Not Idle ' + milliseconds);\r\n\r\n\t\t// cancel future alert popup\r\n\t\t$.doTimeout('alert_timeout_timer');\r\n\r\n\t\t// cancel future warning toast\r\n\t\t$.doTimeout('toast_timeout_warning');\r\n\r\n\t\t// close existing warning toast\r\n\t\tif (dd_toast_id_close('toast_timeout_warning'))\r\n\t\t{\r\n\t\t\tdd_toast({message: 'Activity has canceled the logout.'});\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tdd_console_log('Idle ' + milliseconds);\r\n\r\n\t\tif (USER_LOGGEDIN && !ajax_login_in_view)\r\n\t\t{\r\n\t\t\t// start time until alert popup\r\n\t\t\t// default warning in warning_time, half timeout if timeout less than warning_time (for testing)\r\n\t\t\twarning_milliseconds = milliseconds / 2;\r\n\r\n\t\t\tif (milliseconds > warning_time)\r\n\t\t\t{\r\n\t\t\t\twarning_milliseconds = milliseconds - warning_time;\r\n\t\t\t}\r\n\r\n\t\t\t$.doTimeout('toast_timeout_warning', warning_milliseconds, function () {\r\n\t\t\t\tdd_toast({\r\n\t\t\t\t\tmessage: 'You will soon be logged out due to inactivity. Activity will cancel the logout.',\r\n\t\t\t\t\tdelay: false,\r\n\t\t\t\t\ttoast_id: 'toast_timeout_warning',\r\n\t\t\t\t\tsound: false\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t// start time until alert popup\r\n\t\t\t$.doTimeout('alert_timeout_timer', milliseconds, function () {\r\n\t\t\t\tdo_alert_timeout();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tif (USER_LOGGEDIN)\r\n\t{\r\n\t\t$.cookie('DreamSite_Timer', true, {\r\n\t\t\texpires: date,\r\n\t\t\tdomain: COOKIE.domain,\r\n\t\t\tsecure: true\r\n\t\t});\r\n\t\t$.cookie(COOKIE.dd_sc_name, $.cookie(COOKIE.dd_sc_name), {\r\n\t\t\texpires: sdate,\r\n\t\t\tdomain: COOKIE.domain,\r\n\t\t\tsecure: true\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction do_alert_timeout()\r\n{\r\n\tif ($.cookie('DreamSite_Timer')) // cookie still exists from another tab activity, check again in 3 seconds\r\n\t{\r\n\t\t$.doTimeout('alert_timeout_timer', 3000, function () {\r\n\t\t\tdo_alert_timeout();\r\n\t\t});\r\n\t}\r\n\telse // cookie expired, so do popup\r\n\t{\r\n\t\talert_timeout();\r\n\t}\r\n}\r\n\r\nfunction dd_toast(settings)\r\n{\r\n\t// delay: false; will prevent fadeout, click to remove toast\r\n\t// message: message;\r\n\t// toast_id: 'unique_id'; assign a toast id to manipulate programmically, typically to close a sticky\r\n\t// position: 'topleft', 'botleft', 'topright', 'botright', 'topcenter', 'center', 'botcenter'\r\n\t// sound: true/false, play sound\r\n\t// xclose: true/false, only X closes instead of clicking anywhere\r\n\r\n\tvar config = {\r\n\t\tdelay: 4000,\r\n\t\tmessage: false,\r\n\t\ttoast_id: false,\r\n\t\tposition: 'topright',\r\n\t\tcss_class: false,\r\n\t\tsound: false,\r\n\t\txclose: false\r\n\t};\r\n\r\n\t$.extend(config, settings);\r\n\r\n\tif (typeof toast_obj === 'undefined')\r\n\t{\r\n\t\ttoast_obj = {};\r\n\t}\r\n\r\n\tvar toast_container_selector = '.dd_toast_container.' + config.position;\r\n\r\n\tif (config.toast_id)\r\n\t{\r\n\t\tdd_toast_id_close(config.toast_id, true);\r\n\t}\r\n\r\n\tif (config.message)\r\n\t{\r\n\t\t// create container if not available\r\n\t\tif (!$(toast_container_selector).length)\r\n\t\t{\r\n\t\t\t$('<div class=\"dd_toast_container ' + config.position + '\"></div>').appendTo('body');\r\n\t\t}\r\n\r\n\t\t// add toast to container, register click to close handler\r\n\t\tif (config.toast_id)\r\n\t\t{\r\n\t\t\ttoast_obj[config.toast_id] = $('<div class=\"dd_toast\"></div>').appendTo(toast_container_selector);\r\n\r\n\t\t\ttoast = toast_obj[config.toast_id];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttoast = $('<div class=\"dd_toast\"></div>').appendTo(toast_container_selector);\r\n\t\t}\r\n\r\n\t\tif (config.css_class)\r\n\t\t{\r\n\t\t\t$(toast).addClass(config.css_class);\r\n\t\t}\r\n\r\n\t\t// add the message\r\n\t\t$(toast).html(config.message);\r\n\r\n\t\t// add close button for sticky\r\n\t\tif (!config.delay || config.xclose == true)\r\n\t\t{\r\n\t\t\t$('<div class=\"dd_toast_close\">x</div>').on('click', function () {\r\n\r\n\t\t\t\t$(toast).stop().fadeOut('slow', function () {\r\n\r\n\t\t\t\t\t// fadeout animation complete\r\n\t\t\t\t\tdd_toast_cleanup(toast);\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}).css({'cursor': 'pointer'}).prependTo(toast);\r\n\t\t}\r\n\r\n\t\t// close when click anywhere on div\r\n\t\tif (config.xclose == false)\r\n\t\t{\r\n\t\t\t$(toast).on('click', function () {\r\n\r\n\t\t\t\t$(this).stop().fadeOut('slow', function () {\r\n\r\n\t\t\t\t\t// fadeout animation complete\r\n\t\t\t\t\tdd_toast_cleanup(this);\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}).css({'cursor': 'pointer'});\r\n\t\t}\r\n\r\n\t\t// play sound if true\r\n\t\tif (config.sound)\r\n\t\t{\r\n\t\t\t$('<embed src=\"' + PATH.script + '/customer/media/dd_toast_alert.mp3\" hidden=\"true\" autostart=\"true\" loop=\"false\"></embed>').appendTo(toast);\r\n\t\t}\r\n\r\n\t\t// fadein, auto close if delay is not false\r\n\t\t$(toast).fadeIn('fast', function () {\r\n\r\n\t\t\t// fadein animation complete\r\n\t\t\tif (config.delay)\r\n\t\t\t{\r\n\t\t\t\t$(this).delay(config.delay).fadeOut('slow', function () {\r\n\r\n\t\t\t\t\t// fadeout animation complete\r\n\t\t\t\t\tdd_toast_cleanup(this);\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n}\r\n\r\nfunction dd_toast_id_close(toast_id, instant)\r\n{\r\n\tif (typeof toast_obj !== 'undefined' && typeof toast_obj[toast_id] !== 'undefined')\r\n\t{\r\n\t\tif (instant == true)\r\n\t\t{\r\n\t\t\tdd_toast_cleanup($(toast_obj[toast_id]));\r\n\r\n\t\t\tdelete toast_obj[toast_id];\r\n\t\t}\r\n\t\telse // fadeout\r\n\t\t{\r\n\t\t\t$(toast_obj[toast_id]).stop().fadeOut('slow', function () {\r\n\t\t\t\t// fadeout animation complete\r\n\t\t\t\tdd_toast_cleanup(this);\r\n\r\n\t\t\t\tdelete toast_obj[toast_id];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction dd_toast_exists(toast_id)\r\n{\r\n\tif (typeof toast_obj !== 'undefined' && typeof toast_obj[toast_id] !== 'undefined')\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction dd_toast_cleanup(elem)\r\n{\r\n\t// cleanup, remove from dom\r\n\t$(elem).remove();\r\n\r\n\t// if all toasts are closed, remove container\r\n\t$('.dd_toast_container').each(function () {\r\n\t\tif ($(this).is(':empty'))\r\n\t\t{\r\n\t\t\t$(this).remove();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction alert_timeout()\r\n{\r\n\tUSER_LOGGEDIN = false;\r\n\tajax_login_in_view = true;\r\n\r\n\tdd_toast_id_close('toast_timeout_warning');\r\n\t// hide elements that should be hidden on logout\r\n\t$('[data-fadmin_perm]').each(function () {\r\n\t\tif ($(this).is(\":visible\"))\r\n\t\t{\r\n\t\t\t$(this).attr('data-hide_on_logout', true).hide();\r\n\t\t}\r\n\t});\r\n\r\n\t// invalidate DreamSite cookie\r\n\tdate = new Date();\r\n\tdate.setDate(date.getDate() - 1);\r\n\r\n\tvar last_session_id = $.cookie(COOKIE.dd_sc_name);\r\n\r\n\t$.cookie(COOKIE.dd_sc_name, false, {\r\n\t\texpires: date,\r\n\t\tdomain: COOKIE.domain\r\n\t});\r\n\r\n\t$.ajax({\r\n\t\turl: 'ddproc.php',\r\n\t\ttype: 'POST',\r\n\t\ttimeout: 60000,\r\n\t\tdataType: 'json',\r\n\t\tdata: {\r\n\t\t\tprocessor: 'login',\r\n\t\t\top: 'get_login_form'\r\n\t\t},\r\n\t\tsuccess: function (json) {\r\n\t\t\tif (json.processor_success)\r\n\t\t\t{\r\n\t\t\t\tvar dialog_contents = json.login_form;\r\n\r\n\t\t\t\tdd_message({\r\n\t\t\t\t\ttitle: 'Session has expired due to inactivity',\r\n\t\t\t\t\tmessage: dialog_contents,\r\n\t\t\t\t\theight: 300,\r\n\t\t\t\t\twidth: 300,\r\n\t\t\t\t\tdiv_id: 'to_login_div',\r\n\t\t\t\t\tcloseOnEscape: false,\r\n\t\t\t\t\tnoOk: true,\r\n\t\t\t\t\topen: function (event, ui) {\r\n\r\n\t\t\t\t\t\tvar buttons = $(this).dialog(\"option\", \"buttons\");\r\n\r\n\t\t\t\t\t\tvar acceptFunction = buttons.Accept;\r\n\r\n\t\t\t\t\t\t//hide close button.\r\n\t\t\t\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\r\n\r\n\t\t\t\t\t\t// focus password field\r\n\t\t\t\t\t\t$('#fadmin_password_login').focus();\r\n\r\n\t\t\t\t\t\t// register keyup on password field, if enter submit form\r\n\t\t\t\t\t\t$('#fadmin_password_login').keyup(function (e) {\r\n\r\n\t\t\t\t\t\t\tif (e.keyCode == $.ui.keyCode.ENTER)\r\n\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t\tacceptFunction();\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$('.ui-widget-overlay').css({\r\n\t\t\t\t\t\t\t'background': '#462200 url(\"' + PATH.image_admin + '/fadmin_background.jpg\")',\r\n\t\t\t\t\t\t\t'opacity': '1',\r\n\t\t\t\t\t\t\t'filter': 'none'\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\tAccept: function () {\r\n\r\n\t\t\t\t\t\t\tvar login_ui = $(\"#to_login_div\")[0];\r\n\t\t\t\t\t\t\t$(\"#to_login_div\").find('#error_message').html('');\r\n\r\n\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\ttimeout: 20000,\r\n\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tprocessor: 'login',\r\n\t\t\t\t\t\t\t\t\tprimary_email_login: $(\"#to_login_div\").find('#fadmin_primary_email_login').val(),\r\n\t\t\t\t\t\t\t\t\tpassword_login: $(\"#to_login_div\").find('#fadmin_password_login').val(),\r\n\t\t\t\t\t\t\t\t\tnobo: 1,\r\n\t\t\t\t\t\t\t\t\tsubmit_login: 1,\r\n\t\t\t\t\t\t\t\t\tremember_login: 1,\r\n\t\t\t\t\t\t\t\t\tlast_session_id: last_session_id\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: function (json) {\r\n\t\t\t\t\t\t\t\t\tif (json.processor_message)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t$(\"#to_login_div\").find('#error_message').html(json.processor_message);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tif (json.user_type == 'CUSTOMER')\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tbounce('/');\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t$(login_ui).remove();\r\n\t\t\t\t\t\t\t\t\t\t\tajax_login_in_view = false;\r\n\t\t\t\t\t\t\t\t\t\t\tUSER_LOGGEDIN = true;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t$('#fadmin_username').html(json.firstname + ' ' + json.lastname);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t$('#fadmin_usertype').html(json.user_type_text);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// find elements that were hidden on logout and show them if user_type permits\r\n\t\t\t\t\t\t\t\t\t\t\t$('[data-fadmin_perm][data-hide_on_logout]').each(function () {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tperm_array = $(this).data('fadmin_perm').split(',');\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (~$.inArray(json.user_type, perm_array))\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).removeProp('data-hide_on_logout').show();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t$.cookie('DreamSite_Timer', true, {\r\n\t\t\t\t\t\t\t\t\t\t\t\texpires: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdomain: COOKIE.domain,\r\n\t\t\t\t\t\t\t\t\t\t\t\tsecure: true\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tfadmin_is_idle(false);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tCancel: function () {\r\n\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\tresponse = 'Unexpected error';\r\n\r\n\t\t\thandle_dashboard_update();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction displayModalWaitDialog(div_id, message)\r\n{\r\n\tvar processWindowContent = '<span style=\"font-weight:bold;\">' + message + '</span>&nbsp;&nbsp;';\r\n\tprocessWindowContent += '<img src=\"' + PATH.image + '/style/throbber_circle.gif\" class=\"img_valign\" alt=\"Processing\" />';\r\n\r\n\tdd_message({\r\n\t\ttitle: 'Processing',\r\n\t\tmessage: processWindowContent,\r\n\t\tnoOk: true,\r\n\t\tcloseOnEscape: false,\r\n\t\tdialogClass: \"noclose\",\r\n\t\tmodal: true,\r\n\t\twidth: 500,\r\n\t\theight: 90,\r\n\t\tresizable: false,\r\n\t\tdiv_id: div_id\r\n\t});\r\n}\r\n\r\nfunction set_platepoints_progress_bar(new_value, animate)\r\n{\r\n\tif (!animate)\r\n\t{\r\n\t\t$('#pp_progressbar').progressbar({\r\n\t\t\tvalue: new_value,\r\n\t\t\tchange: function () {\r\n\t\t\t\t$('#pp_progresslabel').text(new_value + '%');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$.doTimeout('platepoints_progress', 2, function () {\r\n\r\n\t\t\tvar current_value = $('#pp_progressbar').progressbar('option', 'value');\r\n\r\n\t\t\tif (isNaN(current_value))\r\n\t\t\t{\r\n\t\t\t\tcurrent_value = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (current_value < 50)\r\n\t\t\t{\r\n\t\t\t\t$('#pp_progresslabel').addClass('dark');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t$('#pp_progresslabel').removeClass('dark');\r\n\t\t\t}\r\n\r\n\t\t\tif (new_value > current_value)\r\n\t\t\t{\r\n\t\t\t\tincrease = true;\r\n\t\t\t\tvalue_count = current_value + 1;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tincrease = false;\r\n\t\t\t\tvalue_count = current_value - 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (increase)\r\n\t\t\t{\r\n\t\t\t\tif (value_count > new_value)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#pp_progressbar').progressbar({\r\n\t\t\t\t\t\tvalue: value_count,\r\n\t\t\t\t\t\tchange: function () {\r\n\t\t\t\t\t\t\t$('#pp_progresslabel').text($('#pp_progressbar').progressbar('value') + '%');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (value_count < new_value)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t$('#pp_progressbar').progressbar({\r\n\t\t\t\t\t\tvalue: value_count,\r\n\t\t\t\t\t\tchange: function () {\r\n\t\t\t\t\t\t\t$('#pp_progresslabel').text($('#pp_progressbar').progressbar('value') + '%');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction help_system_init()\r\n{\r\n\t$('[data-help]').each(function () {\r\n\t\t$(this).addClass(\"help_enabled\");\r\n\r\n\t\tvar indexStr = $(this).attr('data-help');\r\n\t\tvar index = indexStr.split(\"-\");\r\n\r\n\t\tvar thisHelpData = ddHelpData;\r\n\t\tfor (var x = 0; x < index.length; x++)\r\n\t\t{\r\n\t\t\tthisHelpData = thisHelpData[index[x]];\r\n\t\t}\r\n\r\n\t\t// Load tooltips\r\n\t\tif ($.fn.qtip && typeof thisHelpData != 'undefined')\r\n\t\t{\r\n\t\t\t$(this).qtip({\r\n\t\t\t\tshow: {\r\n\t\t\t\t\tsolo: true\r\n\t\t\t\t},\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\ttext: \"<div class='help_tip_title'>\" + thisHelpData.title + \"</div><div class='help_tip_text'>\" + thisHelpData.help_text + \"</div><div class='help_tip_tech_text'>\" + thisHelpData.tech_text + \"</div>\"\r\n\t\t\t\t},\r\n\t\t\t\tposition: {\r\n\t\t\t\t\tmy: 'bottom left',\r\n\t\t\t\t\tat: 'top left',\r\n\t\t\t\t\tviewport: $(window),\r\n\t\t\t\t\tadjust: {\r\n\t\t\t\t\t\tmethod: 'flip',\r\n\t\t\t\t\t\ty: parseInt(0, 10) || 0,\r\n\t\t\t\t\t\tx: parseInt(10, 10) || 0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tclasses: 'ui-tooltip-dreamdinners_tt ui-tooltip-shadow'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t/*\r\n\t $('[data-help]').on('click', function () {\r\n\r\n\t var indexStr = $(this).attr('data-help');\r\n\t var index = indexStr.split(\"-\");\r\n\r\n\t var thisHelpData = ddHelpData;\r\n\t for (var x = 0; x < index.length; x++)\r\n\t {\r\n\t thisHelpData = thisHelpData[index[x]];\r\n\t }\r\n\r\n\r\n\t dd_message({\r\n\t title: 'Help',\r\n\t message: thisHelpData,\r\n\t modal: false\r\n\t });\r\n\r\n\t });\r\n\t */\r\n}\r\n\r\n//Legacy function, needs replacement\r\nfunction NewWindowScroll(mypage, myname, w, h)\r\n{\r\n\tvar LeftPosition = (screen.width) ? Math.floor((screen.width - w) / 2) : 0;\r\n\tvar TopPosition = (screen.height) ? Math.floor((screen.height - h) / 2) : 0;\r\n\tvar settings = 'height=' + h + ',width=' + w + ',top=' + TopPosition + ',left=' + LeftPosition + ',status=no,toolbar=no,scrollbars=1,resizable=1';\r\n\twindow.open(mypage, myname, settings);\r\n}\r\n\r\n$(function () {\r\n\r\n\t$(document).on('click', '#menu-toggle', function (e) {\r\n\t\te.preventDefault();\r\n\t\t$(\"#wrapper\").toggleClass(\"toggled\");\r\n\t});\r\n\r\n\t// prevent mouse wheel from changing number fields\r\n\t$(document).on('focus', 'input[type=number]', function (e) {\r\n\t\t$(this).on('wheel.disableScroll', function (e) {\r\n\t\t\te.preventDefault()\r\n\t\t})\r\n\t});\r\n\t$(document).on('blur', 'input[type=number]', function (e) {\r\n\t\t$(this).off('wheel.disableScroll')\r\n\t});\r\n\r\n\t$(document).on('click', '[data-confirm-nav]', function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar href = this.href;\r\n\t\tvar message = $(this).data('confirm-nav');\r\n\t\tbootbox.confirm({\r\n\t\t\tmessage: message,\r\n\t\t\tcallback: function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.location = href;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t$(document).on('click', '[data-multi_store_select_id], [data-multi_store_select_filter]', function (e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\t// prevent multiple clicks\r\n\t\tif ($(this).hasClass('disabled'))\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// check if they are using the form filters, otherwise they are requesting the form below\r\n\t\tif ($(this).data('multi_store_select_filter'))\r\n\t\t{\r\n\t\t\tswitch ($(this).data('multi_store_select_filter'))\r\n\t\t\t{\r\n\t\t\t\tcase 'all':\r\n\t\t\t\t\t$(\"#multi_store_select_form input[type=checkbox]\").prop('checked', true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'none':\r\n\t\t\t\t\t$(\"#multi_store_select_form input[type=checkbox]\").prop('checked', false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'active-all':\r\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"1\"]').prop('checked', true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'active-corporate':\r\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"1\"][data-franchise_id=\"220\"]').prop('checked', true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'active-non-corporate':\r\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"1\"][data-franchise_id!=\"220\"]').prop('checked', true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'inactive-all':\r\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"0\"]').prop('checked', true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'inactive-corporate':\r\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"0\"][data-franchise_id=\"220\"]').prop('checked', true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'inactive-non-corporate':\r\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"FRANCHISE\"][data-active=\"0\"][data-franchise_id!=\"220\"]').prop('checked', true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dist-all':\r\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"DISTRIBUTION_CENTER\"]').prop('checked', true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dist-none':\r\n\t\t\t\t\t$('#multi_store_select_form [data-store_type=\"DISTRIBUTION_CENTER\"]').prop('checked', false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet multi_store_select_id = $(this).data('multi_store_select_id');\r\n\r\n\t\tlet this_button = $(this);\r\n\r\n\t\t// get currently set ids\r\n\t\tlet store_ids = $('#' + multi_store_select_id).val();\r\n\r\n\t\t$(this_button).addClass('disabled');\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'admin_helpers',\r\n\t\t\t\top: 'multi_store_select',\r\n\t\t\t\tstore_id: store_ids\r\n\t\t\t},\r\n\t\t\tsuccess: function (json) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tbootbox.confirm({\r\n\t\t\t\t\t\tmessage: json.html,\r\n\t\t\t\t\t\tscrollable: true,\r\n\t\t\t\t\t\tcallback: function (result) {\r\n\t\t\t\t\t\t\tif (result)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlet form = $('#multi_store_select_form');\r\n\t\t\t\t\t\t\t\tlet checked = form.serializeArray();\r\n\r\n\t\t\t\t\t\t\t\tlet store_ids = [];\r\n\t\t\t\t\t\t\t\t$.each(checked, function (index, value) {\r\n\t\t\t\t\t\t\t\t\tstore_ids.push(value.value);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t$('#' + multi_store_select_id).val(store_ids.join());\r\n\r\n\t\t\t\t\t\t\t\t$('#' + multi_store_select_id + '-count').text(checked.length);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$(this_button).removeClass('disabled');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tstrError = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '[data-user_id_pp_tooltip]', function (e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tvar user_id = $(this).data('user_id_pp_tooltip');\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'admin_fadmin_home',\r\n\t\t\t\top: 'platepoints_tooltip',\r\n\t\t\t\tuser_id: user_id\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tbootbox.dialog({\r\n\t\t\t\t\t\tmessage: json.tooltip_html,\r\n\t\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\t\tmanage: {\r\n\t\t\t\t\t\t\t\tlabel: 'Manage',\r\n\t\t\t\t\t\t\t\tclassName: 'btn-success',\r\n\t\t\t\t\t\t\t\tcallback: function () {\r\n\t\t\t\t\t\t\t\t\tbounce('/main.php?page=admin_user_plate_points&id=' + user_id + '&back=' + back_path());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tclose: {\r\n\t\t\t\t\t\t\t\tlabel: 'Close',\r\n\t\t\t\t\t\t\t\tclassName: 'btn-success'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.link-dinner-details', function (e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tvar menu_id = $(this).data('menu_id');\r\n\t\tvar menu_item_id = $(this).data('menu_item_id');\r\n\t\tvar store_id = $(this).data('store_id');\r\n\t\tvar target = $(this).prop('target');\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'menu_item',\r\n\t\t\t\top: 'find_item',\r\n\t\t\t\tmenu_id: menu_id,\r\n\t\t\t\tmenu_item_id: menu_item_id,\r\n\t\t\t\tstore_id: store_id,\r\n\t\t\t\tdetailed: true\r\n\t\t\t},\r\n\t\t\tsuccess: function (json) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tbootbox.dialog({\r\n\t\t\t\t\t\tmessage: json.html,\r\n\t\t\t\t\t\tsize: 'large',\r\n\t\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\t\t\"Full details\": function () {\r\n\t\t\t\t\t\t\t\tbounce('main.php?page=item&recipe=' + json.recipe_id + '&ov_menu=' + json.menu_id, target);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcancel: {\r\n\t\t\t\t\t\t\t\tlabel: \"Close\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tdd_message({\r\n\t\t\t\t\t\ttitle: 'Error',\r\n\t\t\t\t\t\tmessage: json.processor_message\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.backoffice_change_store:not(.disabled)', function (e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tlet backoffice_change_store = {\r\n\t\t\t'back': back_path(),\r\n\t\t\t'dialog': null\r\n\t\t}\r\n\r\n\t\t// create the modal ui with bootbox\r\n\t\tbackoffice_change_store.dialog = bootbox.dialog({\r\n\t\t\tmessage: '<p><i class=\"fa fa-spin fa-spinner\"></i> Loading store selector...</p>',\r\n\t\t\tsize: 'large',\r\n\t\t\tcenterVertical: true,\r\n\t\t\tcloseButton: false,\r\n\t\t\tbuttons: {\r\n\t\t\t\tok: {\r\n\t\t\t\t\tlabel: \"Select store\",\r\n\t\t\t\t\tclassName: 'btn-primary backoffice_change_store-confirm disabled',\r\n\t\t\t\t\tcallback: function () {\r\n\t\t\t\t\t\tlet store = $('#change_store-selector').val();\r\n\t\t\t\t\t\tlet store_text = $('#change_store-selector option:selected').text();\r\n\r\n\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p><i class=\"fa fa-spin fa-spinner\"></i> Loading ' + store_text + '</p>');\r\n\t\t\t\t\t\tbackoffice_change_store.dialog.find('.modal-footer > .backoffice_change_store-confirm').addClass('disabled');\r\n\r\n\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\ttimeout: 60000,\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tprocessor: 'admin_helpers',\r\n\t\t\t\t\t\t\t\top: 'store_selector',\r\n\t\t\t\t\t\t\t\tdo: 'selector_select',\r\n\t\t\t\t\t\t\t\tstore: store,\r\n\t\t\t\t\t\t\t\tback: backoffice_change_store.back\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: function (json) {\r\n\t\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tbounce(decodeURIComponent(backoffice_change_store.back));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p>' + json.processor_message + '</p>');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p>Unexpected error: ' + strError + '</p>');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcancel: {\r\n\t\t\t\t\tlabel: \"Cancel\",\r\n\t\t\t\t\tclassName: 'btn-danger',\r\n\t\t\t\t\tcallback: function () {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonShow: function (e) {\r\n\t\t\t\t// load the menu items\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\ttimeout: 60000,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tprocessor: 'admin_helpers',\r\n\t\t\t\t\t\top: 'store_selector',\r\n\t\t\t\t\t\tdo: 'selector_get'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (json) {\r\n\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html(json.form);\r\n\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.modal-footer > .backoffice_change_store-confirm').removeClass('disabled');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p>' + json.processor_message + '</p>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\tbackoffice_change_store.dialog.find('.bootbox-body').html('<p>Unexpected error: ' + strError + '</p>');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(backoffice_change_store.dialog).on('change', '#change_store-selector', function (e) {\r\n\t\t\t$('.backoffice_change_store-confirm').trigger('click');\r\n\t\t});\r\n\r\n\t});\r\n\r\n\tif (getQueryVariable('tab'))\r\n\t{\r\n\t\tvar tabid = getQueryVariable('tab');\r\n\r\n\t\t$('#' + tabid + '-tab').tab('show');\r\n\t}\r\n\r\n\t/* Handle Bootstrap Tabbed Content */\r\n\t$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\r\n\t\te.target; // newly activated tab\r\n\t\te.relatedTarget; // previous active tab\r\n\r\n\t\t// html5 update url history\r\n\t\tif ($(e.target).data('urlpush') !== undefined && $(e.target).data('urlpush') === true)\r\n\t\t{\r\n\t\t\tif ($(e.target).data('target') !== undefined)\r\n\t\t\t{\r\n\t\t\t\tvar target = $(e.target).data('target');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar target = $(e.target).attr('href');\r\n\t\t\t}\r\n\r\n\t\t\tvar tabid = $(target).attr('id');\r\n\r\n\t\t\tnew_query_string = setQueryString('tab', tabid);\r\n\t\t\thistoryPush({url: new_query_string});\r\n\t\t}\r\n\t});\r\n\r\n});"],"mappings":"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"}