function showPopup(e){var t={type:"GET",height:500,width:600,modal:!1,callBack:!1,resizable:!0};$.extend(t,e),$.ajax({url:"?"+t.module,type:t.type,success:function(e,i){t.message=e,dd_message(t),"function"==typeof t.callBack&&t.callBack()},error:function(e,t){response="Unexpected error"}})}function menuChange(e){document.getElementById("action").value="menuChange",document.getElementById("menu_editor_form").submit()}$(document).on("click",".sides-sweets-save",(function(e){e.preventDefault(),bootbox.dialog({title:"Confirmation",message:"<p>Are you sure you wish to save all current Sides &amp; Sweets settings as the default pricing and visibility?</p>",centerVertical:!0,buttons:{confirm:{label:"Safe defualts",className:"btn-danger",callback:function(){let e=bootbox.dialog({message:'<p><i class="fa fa-spin fa-spinner"></i> Saving defaults, please wait.</p>',centerVertical:!0,closeButton:!1}),t={};$(".menu-editor-ovr").each((function(e){let i=$(this).data("menu_item_id"),a=$(this).data("recipe_id");t[a]={ovr:$(this).val(),vis:$('.menu-editor-vis[data-menu_item_id="'+i+'"]').val(),hid:$('.menu-editor-hid[data-menu_item_id="'+i+'"]').val(),pic:$('.menu-editor-pic[data-menu_item_id="'+i+'"]').val(),form:$('.menu-editor-form[data-menu_item_id="'+i+'"]').val()}})),$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_defaultPricingProcessor",store_id:STORE_DETAILS.id,action:"save",data:t},success:function(t){t.processor_success?e.modal("hide"):dd_message({title:"Error",message:t.processor_message})},error:function(e,t){response="Unexpected error: "+t,dd_message({title:"Error",message:response})}})}},cancel:{label:"Cancel"}}})})),$(document).on("click",".sides-sweets-retrieve",(function(e){bootbox.prompt({title:"Which settings do you wish to recieve?",inputType:"checkbox",inputOptions:[{text:"Price",value:"ovr"},{text:"Show on customer menu",value:"vis"}],centerVertical:!0,callback:function(e){$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_defaultPricingProcessor",store_id:STORE_DETAILS.id,action:"retrieve"},success:function(t){t.processor_success?$.each(t.settings,(function(t,i){e.includes("ovr")&&$('.menu-editor-ovr[data-recipe_id="'+t+'"][data-category_id="9"]').val(i.ovr).trigger("change"),e.includes("vis")&&($('.menu-editor-vis[data-recipe_id="'+t+'"][data-category_id="9"]').val(i.vis).trigger("change"),$('.menu-editor-hid[data-recipe_id="'+t+'"][data-category_id="9"]').val(i.hid).trigger("change"))})):dd_message({title:"Error",message:t.processor_message})},error:function(e,t){response="Unexpected error: "+t,dd_message({title:"Error",message:response})}})}})})),$(document).on("change",".menu-editor-hid",(function(e){let t=$(this).data("menu_item_id");1==this.value&&$('.menu-editor-vis[data-menu_item_id="'+t+'"], .menu-editor-form[data-menu_item_id="'+t+'"], .menu-editor-pic[data-menu_item_id="'+t+'"]').val(0)})),$(document).on("change",".menu-editor-vis, .menu-editor-form, .menu-editor-pic",(function(e){let t=$(this).data("menu_item_id");1==this.value&&$('.menu-editor-hid[data-menu_item_id="'+t+'"]').val(0)})),$(document).on("change",".menu-editor-ovr",(function(e){$(this).data("menu_item_id")})),$(document).on("reset","#menu_editor_form",(function(e){$("#menu_editor_form").removeClass("was-validated"),$(".menu-editor-vis, .menu-editor-form, .menu-editor-pic, .menu-editor-hid, .menu-editor-ovr").trigger("change")})),$(document).on("submit","#menu_editor_form",(function(e){e.preventDefault();let t=this;bootbox.dialog({title:"Confirmation",message:"<p>Are you sure you wish to save all menu editor changes?</p>",centerVertical:!0,buttons:{confirm:{label:"Finalize Changes",className:"btn-danger",callback:function(){$("#action").val("finalize"),t.submit(),bootbox.dialog({message:'<p><i class="fa fa-spin fa-spinner"></i> Finalizing changes, please wait.</p>',centerVertical:!0,closeButton:!1})}},cancel:{label:"Cancel"}}})})),$(document).on("click","#add_past_menu_item:not(.disabled)",(function(e){displayModalWaitDialog("wait_for_adding_item_div","Retrieving items. Please wait ...");let t=$(this).data("menu_id");showPopup({modal:!0,title:"Add EFL Item",noOk:!0,closeOnEscape:!1,height:720,div_id:"add_menu_item_popup_div",module:"page=admin_menu_editor_add_item&menu_id="+t,open:function(e,t){$(this).parent().find(".ui-dialog-titlebar-close").hide(),$("#wait_for_adding_item_div").remove()},buttons:{Cancel:function(){$(this).remove()},Okay:function(){let e={};$("#sel_list").find("[data-rmv_menu_item]").each((function(){let t=$(this).data("entree_id");e[t]=t})),dd_message({title:"",message:"This will immediately add the listed items to the menu. Are you sure?",noOk:!0,height:180,buttons:{"Add Items to Menu":function(){bootbox.dialog({message:'<p><i class="fa fa-spin fa-spinner"></i> Adding menu items, please wait.</p>',centerVertical:!0,closeButton:!1}),$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_menuEditor",store_id:STORE_DETAILS.id,op:"add_menu_item",menu_id:t,entree_ids:e},success:function(e){e.processor_success?bounce("/backoffice/menu-editor?tab=nav-efl"):dd_message({title:"Error",message:e.processor_message})},error:function(e,t){response="Unexpected error: "+t,dd_message({title:"Error",message:response})}}),$(this).remove(),$("#add_menu_item_popup_div").remove()},Cancel:function(){$(this).remove()}}})}},close:function(){bounce("/backoffice/menu-editor?tab=nav-efl")}})})),$(document).on("click","[data-add_menu_item]",(function(e){if($(this).hasClass("disabled"));else{$(this).addClass("disabled");let e=$(this).data("entree_id"),t=$(this).data("recipe_id"),i=$('[data-recipe_id_row="'+t+'"]').clone();i.find("[data-rmv_menu_item="+e+"]").show(),i.find("[data-add_menu_item="+e+"]").remove(),$("#selected_items tbody").append(i)}})),$(document).on("click","[data-rmv_menu_item]",(function(e){let t=$(this).data("entree_id"),i=$(this).data("recipe_id");$('#selected_items tbody [data-recipe_id_row="'+i+'"]').remove(),$('#recipe_list tbody [data-recipe_id_row="'+i+'"]').find('[data-add_menu_item="'+t+'"]').removeClass("disabled")})),$(document).on("click","[data-info_menu_item]",(function(e){let t=$(this).data("entree_id"),i=$(this).data("recipe_id");$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_menuEditor",store_id:STORE_DETAILS.id,op:"menu_item_info",menu_id:menu_id,entree_id:t,recipe_id:i},success:function(e){dd_message({modal:!0,title:"Item Information",height:720,width:720,message:e.data,open:function(){handle_tabbed_content()}})},error:function(e,t){response="Unexpected error: "+t,dd_message({title:"Error",message:response})}})})),$(document).on("click","#add_past_menu_item_sides:not(.disabled)",(function(e){displayModalWaitDialog("wait_for_adding_item_div","Retrieving Sides & Sweets. Please wait ...");let t=$(this).data("menu_id");showPopup({modal:!0,title:"Add Sides & Sweets",noOk:!0,closeOnEscape:!1,height:720,div_id:"add_menu_item_popup_div",module:"page=admin_menu_editor_add_sides_sweets&menu_id="+t,open:function(e,t){$(this).parent().find(".ui-dialog-titlebar-close").hide(),$("#wait_for_adding_item_div").remove()},buttons:{Cancel:function(){$(this).remove()},Okay:function(){let e={},i=!1;$("#sel_list").find("[data-rmv_menu_side]").each((function(){let t=$(this).data("entree_id");e[t]=t;let a=$("[data-recipe_category="+t+"]:visible").find(":selected").val();void 0===a&&(a=$("[data-recipe_category="+t+"]:visible").html()),void 0===a?($("[data-recipe_category="+t+"]").css("border-color","red"),i=!0):e[t]=a})),i?(console.log("Missing"),dd_message({title:"Please select a category for all items",message:"Please select a category for all items"})):dd_message({title:"",message:"This will immediately add the listed Sides & Sweets to the menu. Are you sure?",noOk:!0,height:180,buttons:{"Add Sides & Sweets to Menu":function(){bootbox.dialog({message:'<p><i class="fa fa-spin fa-spinner"></i> Adding menu items, please wait.</p>',centerVertical:!0,closeButton:!1}),$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_menuEditor",store_id:STORE_DETAILS.id,op:"add_menu_side",menu_id:t,entree_ids:e},success:function(e){e.processor_success?bounce("/backoffice/menu-editor?tab=nav-sides-hidden"):dd_message({title:"Error adding Sides & Sweets",message:e.processor_message})},error:function(e,t){response="Unexpected error: "+t,dd_message({title:"Network Error adding Sides and Sweets",message:response})}}),$(this).remove(),$("#add_menu_item_popup_div").remove()},Cancel:function(){$(this).remove()}}})}},close:function(){bounce("/backoffice/menu-editor?tab=nav-sides-hidden")}})})),$(document).on("change","[data-recipe_category]",(function(e){void 0===$(this).find(":selected").val()?$(this).css("border-color","red"):$(this).css("border-color","black")})),$(document).on("click","[data-add_menu_side]",(function(e){if($(this).hasClass("disabled"));else{$(this).addClass("disabled");let e=$(this).data("entree_id"),t=$(this).data("recipe_id"),i=$('[data-recipe_id_row="'+t+'"]').clone();i.find("[data-rmv_menu_side="+e+"]").show(),i.find("[data-add_menu_side="+e+"]").remove(),i.find("[data-recipe_category="+e+"]").show();let a=i.find("[data-old_category="+e+"]").html();i.find("[data-old_category="+e+"]").remove(),$("#selected_items tbody").append(i),$("[data-recipe_category="+e+"]").val(a)}})),$(document).on("click","[data-rmv_menu_side]",(function(e){let t=$(this).data("entree_id"),i=$(this).data("recipe_id");$('#selected_items tbody [data-recipe_id_row="'+i+'"]').remove(),$('#recipe_list tbody [data-recipe_id_row="'+i+'"]').find('[data-add_menu_side="'+t+'"]').removeClass("disabled")})),$(document).on("click","[data-info_menu_side]",(function(e){let t=$(this).data("entree_id"),i=$(this).data("recipe_id");$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"admin_menuEditor",store_id:STORE_DETAILS.id,op:"menu_item_info",menu_id:menu_id,entree_id:t,recipe_id:i},success:function(e){dd_message({modal:!0,title:"Item Information",height:720,width:720,message:e.data,open:function(){handle_tabbed_content()}})},error:function(e,t){response="Unexpected error: "+t,dd_message({title:"Error",message:response})}})}));
//# sourceMappingURL=menu_editor.min.js.map