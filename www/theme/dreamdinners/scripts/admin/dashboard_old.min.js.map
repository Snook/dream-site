{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["dashboard_old.js"],"sourcesContent":["var isProcessingMetrics = false;\r\n\r\n\r\nfunction trending_report_init()\r\n{\r\n\t$('[id^=\"report_typedt\"]').on('click', function () {\r\n\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n\r\n\r\n\r\n\t$('[id^=\"trade_area\"]').change(function() {\r\n\r\n\t\t$(\"#report_typedt_stores_by_region\").attr('checked', 'checked');\r\n\r\n\t\tif ($(this).val() != 0)\r\n\t\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n\t$('[id^=\"store\"]').change(function() {\r\n\r\n\t\t$(\"#report_typedt_single_store\").attr('checked', 'checked');\r\n\r\n\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n}\r\n\r\n\r\nfunction dashboard_init()\r\n{\r\n\t$('[id^=\"report_typedt_\"]').on('click', function () {\r\n\t\t$('#dashboard_form').submit();\r\n\t});\r\n\r\n\r\n\t$('[id^=\"rank_met-\"]').on('click', function () {\r\n\r\n\t\tvar metric = this.id.split(\"-\")[1];\r\n\t\tvar targetRow = \"tr_rank_met-\" + metric;\r\n\t\tvar targetCell = \"td_rank_met-\" + metric;\r\n\t\tvar disc_triangle = \"disc_rank_met-\" + metric;\r\n\r\n\t\tvar curMonth = $('#curMonthStr').val();\r\n\r\n\t\tif( $('#'+targetRow).is(':visible') )\r\n\t\t{\r\n\t\t\t$('#' + targetRow).slideUp('slow');\r\n\t\t\t$('#' + disc_triangle).addClass(\"disc_closed\");\r\n\t\t\t$('#' + disc_triangle).removeClass(\"disc_open\");\r\n\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php?processor=admin_top30',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdataType : 'json',\r\n\t\t\t\tdata : {\r\n\t\t\t\t\tmetric_type: metric,\r\n\t\t\t\t\tmonth: curMonth\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(json)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (json.result_code == 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('#' +targetCell).html(json.data);\r\n\t\t\t\t\t\t$('#' + targetRow).slideDown('slow');\r\n\r\n\t\t\t\t\t\t$('#' + disc_triangle).removeClass(\"disc_closed\");\r\n\t\t\t\t\t\t$('#' + disc_triangle).addClass(\"disc_open\");\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdd_message({ title: 'Error', message: json.processor_message});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t    },\r\n\t\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t\t{\r\n\t\t\t\t\tdd_message({ title: 'Error', message: strError});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\nfunction toggleMonth(mode)\r\n{\r\n\t// always force the month selector back to default\r\n\t$('#override_month').val(\"0\");\r\n\r\n\t$('#monthMode').val(mode);\r\n\t$('#dashboard_form').submit();\r\n}\r\n\r\nfunction handleMetricsUpdateComplete()\r\n{\r\n\t$('#dashboard_form').submit();\r\n}\r\n\r\n\r\nfunction processMetrics()\r\n{\r\n\r\n\tvar config = {\r\n\t\t\tresizable: false,\r\n\t\t\tmodal: true,\r\n\t\t\ttitle: \"Metrics Update!\",\r\n\t\t\tbeforeClose: function(event, ui) {return false;}\r\n\t};\r\n\r\n\t$('#busy_updating').dialog(config);\r\n\r\n\tisProcessingMetrics = true;\r\n\r\n\tvar sid = $(\"#store_id\").val();\r\n\r\n\t$.ajax({\r\n\t\turl: 'ddproc.php?processor=admin_processMetrics',\r\n\t\ttype: 'POST',\r\n\t\tdataType : 'json',\r\n\t\ttimeout: 600000,\r\n\t\tdata : {\r\n\t\t\tstore_id: sid\r\n\t\t},\r\n\t\tsuccess: function(data)\r\n\t\t{\r\n\r\n\t\t\tisProcessingMetrics = false;\r\n\r\n\t\t\tif (data.result_code == 1)\r\n\t\t\t{\r\n\t\t\t\thandleMetricsUpdateComplete();\r\n\t\t\t}\r\n\t    },\r\n\t\terror: function(objAJAXRequest, strError)\r\n\t\t{\r\n\t\t\tisProcessingMetrics = false;\r\n\t\t\tdd_message({ title: 'Error', message: strError});\r\n\t\t}\r\n\t});\r\n\r\n}\r\n\r\nfunction selectStoreTR(which)\r\n{\r\n\tif (which != \"\")\r\n\t{\r\n\t\t$('input:radio[name=report_type]:nth(0)').attr('checked',true);\r\n\t\t$('#reports_trending_form').submit();\r\n\t}\r\n}\r\n\r\nfunction selectStore(which)\r\n{\r\n\tif (which != \"\")\r\n\t{\r\n\t\t$('input:radio[name=report_type]:nth(0)').attr('checked',true);\r\n\t\t$('#dashboard_form').submit();\r\n\t}\r\n}\r\n\r\nfunction print_trending_report()\r\n{\r\n\tvar targ = $('#reports_trending_form')[0].target;\r\n\tvar act = $('#reports_trending_form')[0].action;\r\n\t$('#reports_trending_form')[0].target = \"_print\";\r\n\t$('#reports_trending_form')[0].action = \"main.php?page=admin_reports_trending&print=true\";\r\n\r\n\t$('#reports_trending_form').submit();\r\n\r\n\t$('#reports_trending_form')[0].target = targ;\r\n\t$('#reports_trending_form')[0].action = act;\r\n\r\n}\r\n\r\nfunction export_trending_report()\r\n{\r\n\tvar targ = $('#reports_trending_form')[0].target;\r\n\tvar act = $('#reports_trending_form')[0].action;\r\n\t$('#reports_trending_form')[0].action = \"main.php?page=admin_reports_trending&export=xlsx\";\r\n\r\n\t$('#reports_trending_form').submit();\r\n\r\n\t$('#reports_trending_form')[0].action = act;\r\n\r\n}\r\n\r\nfunction export_order_list()\r\n{\r\n\r\n\r\n\t\tif (!$('#report_typedt_single_store').length || $('input:radio[name=report_type]:nth(0)').attr('checked'))\r\n\t\t{\r\n\t\t\tvar act = $('#dashboard_form')[0].action;\r\n\t\t\t$('#dashboard_form')[0].action = \"main.php?page=admin_dashboard_new&export=xlsx\";\r\n\r\n\t\t\t$('#dashboard_form').submit();\r\n\r\n\t\t\t$('#dashboard_form')[0].action = act;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tdd_message({ title: 'Error', message: \"The order list can only be exported when viewing a single store\"});\r\n\t\t}\r\n\r\n\r\n\r\n}\r\n\r\nfunction print_dashboard()\r\n{\r\n\tvar targ = $('#dashboard_form')[0].target;\r\n\tvar act = $('#dashboard_form')[0].action;\r\n\t$('#dashboard_form')[0].target = \"_print\";\r\n\t$('#dashboard_form')[0].action = \"main.php?page=admin_dashboard_new&print=true\";\r\n\r\n\t$('#dashboard_form').submit();\r\n\r\n\t$('#dashboard_form')[0].target = targ;\r\n\t$('#dashboard_form')[0].action = act;\r\n}\r\n\r\n"],"names":["isProcessingMetrics","trending_report_init","$","on","submit","change","attr","this","val","dashboard_init","metric","id","split","targetRow","targetCell","disc_triangle","curMonth","is","slideUp","addClass","removeClass","ajax","url","type","dataType","data","metric_type","month","success","json","result_code","html","slideDown","dd_message","title","message","processor_message","error","objAJAXRequest","strError","toggleMonth","mode","handleMetricsUpdateComplete","processMetrics","config","resizable","modal","beforeClose","event","ui","dialog","sid","timeout","store_id","selectStoreTR","which","selectStore","print_trending_report","targ","target","act","action","export_trending_report","export_order_list","length","print_dashboard"],"mappings":"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"}