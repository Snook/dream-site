{"version":3,"names":["isProcessingMetrics","trending_report_init","$","on","submit","change","attr","this","val","dashboard_init","metric","id","split","targetRow","targetCell","disc_triangle","curMonth","is","slideUp","addClass","removeClass","ajax","url","type","dataType","data","metric_type","month","success","json","result_code","html","slideDown","dd_message","title","message","processor_message","error","objAJAXRequest","strError","toggleMonth","mode","handleMetricsUpdateComplete","processMetrics","dialog","resizable","modal","beforeClose","event","ui","sid","timeout","store_id","selectStoreTR","which","selectStore","print_trending_report","targ","target","act","action","export_trending_report","export_order_list","length","print_dashboard"],"sourceRoot":"js/src/admin","sources":["dashboard_old.js"],"sourcesContent":["var isProcessingMetrics = false;\r\n\r\n\r\nfunction trending_report_init()\r\n{\r\n\t$('[id^=\"report_typedt\"]').on('click', function () {\r\n\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n\r\n\r\n\r\n\t$('[id^=\"trade_area\"]').change(function() {\r\n\r\n\t\t$(\"#report_typedt_stores_by_region\").attr('checked', 'checked');\r\n\r\n\t\tif ($(this).val() != 0)\r\n\t\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n\t$('[id^=\"store\"]').change(function() {\r\n\r\n\t\t$(\"#report_typedt_single_store\").attr('checked', 'checked');\r\n\r\n\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n}\r\n\r\n\r\nfunction dashboard_init()\r\n{\r\n\t$('[id^=\"report_typedt_\"]').on('click', function () {\r\n\t\t$('#dashboard_form').submit();\r\n\t});\r\n\r\n\r\n\t$('[id^=\"rank_met-\"]').on('click', function () {\r\n\r\n\t\tvar metric = this.id.split(\"-\")[1];\r\n\t\tvar targetRow = \"tr_rank_met-\" + metric;\r\n\t\tvar targetCell = \"td_rank_met-\" + metric;\r\n\t\tvar disc_triangle = \"disc_rank_met-\" + metric;\r\n\r\n\t\tvar curMonth = $('#curMonthStr').val();\r\n\r\n\t\tif( $('#'+targetRow).is(':visible') )\r\n\t\t{\r\n\t\t\t$('#' + targetRow).slideUp('slow');\r\n\t\t\t$('#' + disc_triangle).addClass(\"disc_closed\");\r\n\t\t\t$('#' + disc_triangle).removeClass(\"disc_open\");\r\n\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php?processor=admin_top30',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdataType : 'json',\r\n\t\t\t\tdata : {\r\n\t\t\t\t\tmetric_type: metric,\r\n\t\t\t\t\tmonth: curMonth\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(json)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (json.result_code == 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('#' +targetCell).html(json.data);\r\n\t\t\t\t\t\t$('#' + targetRow).slideDown('slow');\r\n\r\n\t\t\t\t\t\t$('#' + disc_triangle).removeClass(\"disc_closed\");\r\n\t\t\t\t\t\t$('#' + disc_triangle).addClass(\"disc_open\");\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdd_message({ title: 'Error', message: json.processor_message});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t    },\r\n\t\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t\t{\r\n\t\t\t\t\tdd_message({ title: 'Error', message: strError});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\nfunction toggleMonth(mode)\r\n{\r\n\t// always force the month selector back to default\r\n\t$('#override_month').val(\"0\");\r\n\r\n\t$('#monthMode').val(mode);\r\n\t$('#dashboard_form').submit();\r\n}\r\n\r\nfunction handleMetricsUpdateComplete()\r\n{\r\n\t$('#dashboard_form').submit();\r\n}\r\n\r\n\r\nfunction processMetrics()\r\n{\r\n\r\n\tvar config = {\r\n\t\t\tresizable: false,\r\n\t\t\tmodal: true,\r\n\t\t\ttitle: \"Metrics Update!\",\r\n\t\t\tbeforeClose: function(event, ui) {return false;}\r\n\t};\r\n\r\n\t$('#busy_updating').dialog(config);\r\n\r\n\tisProcessingMetrics = true;\r\n\r\n\tvar sid = $(\"#store_id\").val();\r\n\r\n\t$.ajax({\r\n\t\turl: 'ddproc.php?processor=admin_processMetrics',\r\n\t\ttype: 'POST',\r\n\t\tdataType : 'json',\r\n\t\ttimeout: 600000,\r\n\t\tdata : {\r\n\t\t\tstore_id: sid\r\n\t\t},\r\n\t\tsuccess: function(data)\r\n\t\t{\r\n\r\n\t\t\tisProcessingMetrics = false;\r\n\r\n\t\t\tif (data.result_code == 1)\r\n\t\t\t{\r\n\t\t\t\thandleMetricsUpdateComplete();\r\n\t\t\t}\r\n\t    },\r\n\t\terror: function(objAJAXRequest, strError)\r\n\t\t{\r\n\t\t\tisProcessingMetrics = false;\r\n\t\t\tdd_message({ title: 'Error', message: strError});\r\n\t\t}\r\n\t});\r\n\r\n}\r\n\r\nfunction selectStoreTR(which)\r\n{\r\n\tif (which != \"\")\r\n\t{\r\n\t\t$('input:radio[name=report_type]:nth(0)').attr('checked',true);\r\n\t\t$('#reports_trending_form').submit();\r\n\t}\r\n}\r\n\r\nfunction selectStore(which)\r\n{\r\n\tif (which != \"\")\r\n\t{\r\n\t\t$('input:radio[name=report_type]:nth(0)').attr('checked',true);\r\n\t\t$('#dashboard_form').submit();\r\n\t}\r\n}\r\n\r\nfunction print_trending_report()\r\n{\r\n\tvar targ = $('#reports_trending_form')[0].target;\r\n\tvar act = $('#reports_trending_form')[0].action;\r\n\t$('#reports_trending_form')[0].target = \"_print\";\r\n\t$('#reports_trending_form')[0].action = \"main.php?page=admin_reports_trending&print=true\";\r\n\r\n\t$('#reports_trending_form').submit();\r\n\r\n\t$('#reports_trending_form')[0].target = targ;\r\n\t$('#reports_trending_form')[0].action = act;\r\n\r\n}\r\n\r\nfunction export_trending_report()\r\n{\r\n\tvar targ = $('#reports_trending_form')[0].target;\r\n\tvar act = $('#reports_trending_form')[0].action;\r\n\t$('#reports_trending_form')[0].action = \"main.php?page=admin_reports_trending&export=xlsx\";\r\n\r\n\t$('#reports_trending_form').submit();\r\n\r\n\t$('#reports_trending_form')[0].action = act;\r\n\r\n}\r\n\r\nfunction export_order_list()\r\n{\r\n\r\n\r\n\t\tif (!$('#report_typedt_single_store').length || $('input:radio[name=report_type]:nth(0)').attr('checked'))\r\n\t\t{\r\n\t\t\tvar act = $('#dashboard_form')[0].action;\r\n\t\t\t$('#dashboard_form')[0].action = \"main.php?page=admin_dashboard_new&export=xlsx\";\r\n\r\n\t\t\t$('#dashboard_form').submit();\r\n\r\n\t\t\t$('#dashboard_form')[0].action = act;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tdd_message({ title: 'Error', message: \"The order list can only be exported when viewing a single store\"});\r\n\t\t}\r\n\r\n\r\n\r\n}\r\n\r\nfunction print_dashboard()\r\n{\r\n\tvar targ = $('#dashboard_form')[0].target;\r\n\tvar act = $('#dashboard_form')[0].action;\r\n\t$('#dashboard_form')[0].target = \"_print\";\r\n\t$('#dashboard_form')[0].action = \"main.php?page=admin_dashboard_new&print=true\";\r\n\r\n\t$('#dashboard_form').submit();\r\n\r\n\t$('#dashboard_form')[0].target = targ;\r\n\t$('#dashboard_form')[0].action = act;\r\n}\r\n\r\n"],"mappings":"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"}