{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["dashboard_old.js"],"sourcesContent":["var isProcessingMetrics = false;\r\n\r\n\r\nfunction trending_report_init()\r\n{\r\n\t$('[id^=\"report_typedt\"]').on('click', function () {\r\n\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n\r\n\r\n\r\n\t$('[id^=\"trade_area\"]').change(function() {\r\n\r\n\t\t$(\"#report_typedt_stores_by_region\").attr('checked', 'checked');\r\n\r\n\t\tif ($(this).val() != 0)\r\n\t\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n\t$('[id^=\"store\"]').change(function() {\r\n\r\n\t\t$(\"#report_typedt_single_store\").attr('checked', 'checked');\r\n\r\n\t\t$('#reports_trending_form').submit();\r\n\t});\r\n\r\n}\r\n\r\n\r\nfunction dashboard_init()\r\n{\r\n\t$('[id^=\"report_typedt_\"]').on('click', function () {\r\n\t\t$('#dashboard_form').submit();\r\n\t});\r\n\r\n\r\n\t$('[id^=\"rank_met-\"]').on('click', function () {\r\n\r\n\t\tvar metric = this.id.split(\"-\")[1];\r\n\t\tvar targetRow = \"tr_rank_met-\" + metric;\r\n\t\tvar targetCell = \"td_rank_met-\" + metric;\r\n\t\tvar disc_triangle = \"disc_rank_met-\" + metric;\r\n\r\n\t\tvar curMonth = $('#curMonthStr').val();\r\n\r\n\t\tif( $('#'+targetRow).is(':visible') )\r\n\t\t{\r\n\t\t\t$('#' + targetRow).slideUp('slow');\r\n\t\t\t$('#' + disc_triangle).addClass(\"disc_closed\");\r\n\t\t\t$('#' + disc_triangle).removeClass(\"disc_open\");\r\n\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php?processor=admin_top30',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdataType : 'json',\r\n\t\t\t\tdata : {\r\n\t\t\t\t\tmetric_type: metric,\r\n\t\t\t\t\tmonth: curMonth\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(json)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (json.result_code == 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('#' +targetCell).html(json.data);\r\n\t\t\t\t\t\t$('#' + targetRow).slideDown('slow');\r\n\r\n\t\t\t\t\t\t$('#' + disc_triangle).removeClass(\"disc_closed\");\r\n\t\t\t\t\t\t$('#' + disc_triangle).addClass(\"disc_open\");\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdd_message({ title: 'Error', message: json.processor_message});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t    },\r\n\t\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t\t{\r\n\t\t\t\t\tdd_message({ title: 'Error', message: strError});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\nfunction toggleMonth(mode)\r\n{\r\n\t// always force the month selector back to default\r\n\t$('#override_month').val(\"0\");\r\n\r\n\t$('#monthMode').val(mode);\r\n\t$('#dashboard_form').submit();\r\n}\r\n\r\nfunction handleMetricsUpdateComplete()\r\n{\r\n\t$('#dashboard_form').submit();\r\n}\r\n\r\n\r\nfunction processMetrics()\r\n{\r\n\r\n\tvar config = {\r\n\t\t\tresizable: false,\r\n\t\t\tmodal: true,\r\n\t\t\ttitle: \"Metrics Update!\",\r\n\t\t\tbeforeClose: function(event, ui) {return false;}\r\n\t};\r\n\r\n\t$('#busy_updating').dialog(config);\r\n\r\n\tisProcessingMetrics = true;\r\n\r\n\tvar sid = $(\"#store_id\").val();\r\n\r\n\t$.ajax({\r\n\t\turl: 'ddproc.php?processor=admin_processMetrics',\r\n\t\ttype: 'POST',\r\n\t\tdataType : 'json',\r\n\t\ttimeout: 600000,\r\n\t\tdata : {\r\n\t\t\tstore_id: sid\r\n\t\t},\r\n\t\tsuccess: function(data)\r\n\t\t{\r\n\r\n\t\t\tisProcessingMetrics = false;\r\n\r\n\t\t\tif (data.result_code == 1)\r\n\t\t\t{\r\n\t\t\t\thandleMetricsUpdateComplete();\r\n\t\t\t}\r\n\t    },\r\n\t\terror: function(objAJAXRequest, strError)\r\n\t\t{\r\n\t\t\tisProcessingMetrics = false;\r\n\t\t\tdd_message({ title: 'Error', message: strError});\r\n\t\t}\r\n\t});\r\n\r\n}\r\n\r\nfunction selectStoreTR(which)\r\n{\r\n\tif (which != \"\")\r\n\t{\r\n\t\t$('input:radio[name=report_type]:nth(0)').attr('checked',true);\r\n\t\t$('#reports_trending_form').submit();\r\n\t}\r\n}\r\n\r\nfunction selectStore(which)\r\n{\r\n\tif (which != \"\")\r\n\t{\r\n\t\t$('input:radio[name=report_type]:nth(0)').attr('checked',true);\r\n\t\t$('#dashboard_form').submit();\r\n\t}\r\n}\r\n\r\nfunction print_trending_report()\r\n{\r\n\tvar targ = $('#reports_trending_form')[0].target;\r\n\tvar act = $('#reports_trending_form')[0].action;\r\n\t$('#reports_trending_form')[0].target = \"_print\";\r\n\t$('#reports_trending_form')[0].action = \"main.php?page=admin_reports_trending&print=true\";\r\n\r\n\t$('#reports_trending_form').submit();\r\n\r\n\t$('#reports_trending_form')[0].target = targ;\r\n\t$('#reports_trending_form')[0].action = act;\r\n\r\n}\r\n\r\nfunction export_trending_report()\r\n{\r\n\tvar targ = $('#reports_trending_form')[0].target;\r\n\tvar act = $('#reports_trending_form')[0].action;\r\n\t$('#reports_trending_form')[0].action = \"main.php?page=admin_reports_trending&export=xlsx\";\r\n\r\n\t$('#reports_trending_form').submit();\r\n\r\n\t$('#reports_trending_form')[0].action = act;\r\n\r\n}\r\n\r\nfunction export_order_list()\r\n{\r\n\r\n\r\n\t\tif (!$('#report_typedt_single_store').length || $('input:radio[name=report_type]:nth(0)').attr('checked'))\r\n\t\t{\r\n\t\t\tvar act = $('#dashboard_form')[0].action;\r\n\t\t\t$('#dashboard_form')[0].action = \"main.php?page=admin_dashboard_new&export=xlsx\";\r\n\r\n\t\t\t$('#dashboard_form').submit();\r\n\r\n\t\t\t$('#dashboard_form')[0].action = act;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tdd_message({ title: 'Error', message: \"The order list can only be exported when viewing a single store\"});\r\n\t\t}\r\n\r\n\r\n\r\n}\r\n\r\nfunction print_dashboard()\r\n{\r\n\tvar targ = $('#dashboard_form')[0].target;\r\n\tvar act = $('#dashboard_form')[0].action;\r\n\t$('#dashboard_form')[0].target = \"_print\";\r\n\t$('#dashboard_form')[0].action = \"main.php?page=admin_dashboard_new&print=true\";\r\n\r\n\t$('#dashboard_form').submit();\r\n\r\n\t$('#dashboard_form')[0].target = targ;\r\n\t$('#dashboard_form')[0].action = act;\r\n}\r\n\r\n"],"names":["isProcessingMetrics","trending_report_init","$","on","submit","change","attr","this","val","dashboard_init","metric","id","split","targetRow","targetCell","disc_triangle","curMonth","is","slideUp","addClass","removeClass","ajax","url","type","dataType","data","metric_type","month","success","json","result_code","html","slideDown","dd_message","title","message","processor_message","error","objAJAXRequest","strError","toggleMonth","mode","handleMetricsUpdateComplete","processMetrics","config","resizable","modal","beforeClose","event","ui","dialog","sid","timeout","store_id","selectStoreTR","which","selectStore","print_trending_report","targ","target","act","action","export_trending_report","export_order_list","length","print_dashboard"],"mappings":"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"}