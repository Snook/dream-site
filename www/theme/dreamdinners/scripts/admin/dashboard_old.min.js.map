{"version":3,"file":"dashboard_old.min.js","names":["isProcessingMetrics","trending_report_init","$","on","submit","change","attr","this","val","dashboard_init","metric","id","split","targetRow","targetCell","disc_triangle","curMonth","is","slideUp","addClass","removeClass","ajax","url","type","dataType","data","metric_type","month","success","json","result_code","html","slideDown","dd_message","title","message","processor_message","error","objAJAXRequest","strError","toggleMonth","mode","handleMetricsUpdateComplete","processMetrics","dialog","resizable","modal","beforeClose","event","ui","sid","timeout","store_id","selectStoreTR","which","selectStore","print_trending_report","targ","target","act","action","export_trending_report","export_order_list","length","print_dashboard"],"sourceRoot":"js/src/dreamdinners/admin","sources":["dashboard_old.js"],"sourcesContent":["var isProcessingMetrics = false;\n\n\nfunction trending_report_init()\n{\n\t$('[id^=\"report_typedt\"]').on('click', function () {\n\t\t$('#reports_trending_form').submit();\n\t});\n\n\n\n\n\t$('[id^=\"trade_area\"]').change(function() {\n\n\t\t$(\"#report_typedt_stores_by_region\").attr('checked', 'checked');\n\n\t\tif ($(this).val() != 0)\n\t\t\t$('#reports_trending_form').submit();\n\t});\n\n\t$('[id^=\"store\"]').change(function() {\n\n\t\t$(\"#report_typedt_single_store\").attr('checked', 'checked');\n\n\t\t$('#reports_trending_form').submit();\n\t});\n\n}\n\n\nfunction dashboard_init()\n{\n\t$('[id^=\"report_typedt_\"]').on('click', function () {\n\t\t$('#dashboard_form').submit();\n\t});\n\n\n\t$('[id^=\"rank_met-\"]').on('click', function () {\n\n\t\tvar metric = this.id.split(\"-\")[1];\n\t\tvar targetRow = \"tr_rank_met-\" + metric;\n\t\tvar targetCell = \"td_rank_met-\" + metric;\n\t\tvar disc_triangle = \"disc_rank_met-\" + metric;\n\n\t\tvar curMonth = $('#curMonthStr').val();\n\n\t\tif( $('#'+targetRow).is(':visible') )\n\t\t{\n\t\t\t$('#' + targetRow).slideUp('slow');\n\t\t\t$('#' + disc_triangle).addClass(\"disc_closed\");\n\t\t\t$('#' + disc_triangle).removeClass(\"disc_open\");\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php?processor=admin_top30',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdataType : 'json',\n\t\t\t\tdata : {\n\t\t\t\t\tmetric_type: metric,\n\t\t\t\t\tmonth: curMonth\n\t\t\t\t},\n\t\t\t\tsuccess: function(json)\n\t\t\t\t{\n\t\t\t\t\tif (json.result_code == 1)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#' +targetCell).html(json.data);\n\t\t\t\t\t\t$('#' + targetRow).slideDown('slow');\n\n\t\t\t\t\t\t$('#' + disc_triangle).removeClass(\"disc_closed\");\n\t\t\t\t\t\t$('#' + disc_triangle).addClass(\"disc_open\");\n\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdd_message({ title: 'Error', message: json.processor_message});\n\n\t\t\t\t\t}\n\t\t\t    },\n\t\t\t\terror: function(objAJAXRequest, strError)\n\t\t\t\t{\n\t\t\t\t\tdd_message({ title: 'Error', message: strError});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t});\n}\n\nfunction toggleMonth(mode)\n{\n\t// always force the month selector back to default\n\t$('#override_month').val(\"0\");\n\n\t$('#monthMode').val(mode);\n\t$('#dashboard_form').submit();\n}\n\nfunction handleMetricsUpdateComplete()\n{\n\t$('#dashboard_form').submit();\n}\n\n\nfunction processMetrics()\n{\n\n\tvar config = {\n\t\t\tresizable: false,\n\t\t\tmodal: true,\n\t\t\ttitle: \"Metrics Update!\",\n\t\t\tbeforeClose: function(event, ui) {return false;}\n\t};\n\n\t$('#busy_updating').dialog(config);\n\n\tisProcessingMetrics = true;\n\n\tvar sid = $(\"#store_id\").val();\n\n\t$.ajax({\n\t\turl: 'ddproc.php?processor=admin_processMetrics',\n\t\ttype: 'POST',\n\t\tdataType : 'json',\n\t\ttimeout: 600000,\n\t\tdata : {\n\t\t\tstore_id: sid\n\t\t},\n\t\tsuccess: function(data)\n\t\t{\n\n\t\t\tisProcessingMetrics = false;\n\n\t\t\tif (data.result_code == 1)\n\t\t\t{\n\t\t\t\thandleMetricsUpdateComplete();\n\t\t\t}\n\t    },\n\t\terror: function(objAJAXRequest, strError)\n\t\t{\n\t\t\tisProcessingMetrics = false;\n\t\t\tdd_message({ title: 'Error', message: strError});\n\t\t}\n\t});\n\n}\n\nfunction selectStoreTR(which)\n{\n\tif (which != \"\")\n\t{\n\t\t$('input:radio[name=report_type]:nth(0)').attr('checked',true);\n\t\t$('#reports_trending_form').submit();\n\t}\n}\n\nfunction selectStore(which)\n{\n\tif (which != \"\")\n\t{\n\t\t$('input:radio[name=report_type]:nth(0)').attr('checked',true);\n\t\t$('#dashboard_form').submit();\n\t}\n}\n\nfunction print_trending_report()\n{\n\tvar targ = $('#reports_trending_form')[0].target;\n\tvar act = $('#reports_trending_form')[0].action;\n\t$('#reports_trending_form')[0].target = \"_print\";\n\t$('#reports_trending_form')[0].action = \"?page=admin_reports_trending&print=true\";\n\n\t$('#reports_trending_form').submit();\n\n\t$('#reports_trending_form')[0].target = targ;\n\t$('#reports_trending_form')[0].action = act;\n\n}\n\nfunction export_trending_report()\n{\n\tvar targ = $('#reports_trending_form')[0].target;\n\tvar act = $('#reports_trending_form')[0].action;\n\t$('#reports_trending_form')[0].action = \"?page=admin_reports_trending&export=xlsx\";\n\n\t$('#reports_trending_form').submit();\n\n\t$('#reports_trending_form')[0].action = act;\n\n}\n\nfunction export_order_list()\n{\n\n\n\t\tif (!$('#report_typedt_single_store').length || $('input:radio[name=report_type]:nth(0)').attr('checked'))\n\t\t{\n\t\t\tvar act = $('#dashboard_form')[0].action;\n\t\t\t$('#dashboard_form')[0].action = \"?page=admin_dashboard_new&export=xlsx\";\n\n\t\t\t$('#dashboard_form').submit();\n\n\t\t\t$('#dashboard_form')[0].action = act;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdd_message({ title: 'Error', message: \"The order list can only be exported when viewing a single store\"});\n\t\t}\n\n\n\n}\n\nfunction print_dashboard()\n{\n\tvar targ = $('#dashboard_form')[0].target;\n\tvar act = $('#dashboard_form')[0].action;\n\t$('#dashboard_form')[0].target = \"_print\";\n\t$('#dashboard_form')[0].action = \"?page=admin_dashboard_new&print=true\";\n\n\t$('#dashboard_form').submit();\n\n\t$('#dashboard_form')[0].target = targ;\n\t$('#dashboard_form')[0].action = act;\n}"],"mappings":"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"}