{"version":3,"names":["cur_timer","isProcessing","org_no_show_state","cur_booking_id","xmlHttp","handleNoShowResult","readyState","clearTimeout","responseText","substr","document","getElementById","checked","printString","alert","confirm","window","location","reload","style","display","handleTimeout","setNoShowState","booking_id","obj","getXmlHttpObject","url","onreadystatechange","open","send","setTimeout"],"sourceRoot":"js/src/admin","sources":["no_show.js"],"sourcesContent":["    var isProcessing = false;\r\n    var org_no_show_state = false;\r\n    var cur_timer;\r\n    var cur_booking_id = null;\r\n\tvar xmlHttp = null;\r\n\r\n\tfunction handleNoShowResult()\r\n\t{\r\n\t\tif( (xmlHttp.readyState == 4 || xmlHttp.readyState == \"complete\") && isProcessing ) \r\n\t\t{\r\n\t\t\tclearTimeout(cur_timer);\r\n\t\t\tisProcessing = false;\r\n\t\t\tif (xmlHttp.responseText.substr(0,1) == \"0\")\r\n\t\t\t{\r\n\t\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\r\n\t\t\t\tprintString = \"The server was unable to save the 'no show' flag.\";\r\n\t\t\t\talert(printString);\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse if (xmlHttp.responseText == \"Not logged in\")\r\n\t\t\t{\r\n\t\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\r\n\t\t\t\tif (confirm(\"Session timed out, please login again.\"))\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdocument.getElementById(\"bnsp_\" + cur_booking_id).style.display=\"none\";\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleTimeout()\r\n\t{\r\n\t\tif (isProcessing)\r\n\t\t{\r\n\t\t\tisProcessing = false;\r\n\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\r\n\t\t\tdocument.getElementById(\"bnsp_\" + cur_booking_id).style.display=\"none\";\r\n\t\t\tprintString = \"The server has not responded.\";\r\n\t\t\talert(printString);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setNoShowState(booking_id, obj)\r\n\t{\r\n\t\tif (isProcessing)\r\n\t\t{\r\n\t\t\tobj.checked = !obj.checked;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\torg_no_show_state = !obj.checked;\r\n\t\tcur_booking_id = booking_id;\r\n\r\n\t\txmlHttp = getXmlHttpObject();\r\n\t\tif( xmlHttp == null ) \r\n\t\t{\r\n\t\t\t// temporary\r\n\t\t\talert( \"The No Show function is not compatible with your browser. Please contact your store for assistance.\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar bid = \"&bid=\" + booking_id;\r\n\t\tvar state = \"&state=\" + (obj.checked ? \"yes\" : \"no\" );\r\n\t\tvar url = \"ddproc.php?processor=admin_no_show_state\" + bid + state;\r\n\t\tisProcessing = true;\r\n\r\n\t\txmlHttp.onreadystatechange = handleNoShowResult;\r\n\t\txmlHttp.open( \"GET\", url, true );\r\n\t\txmlHttp.send( null );\r\n\r\n\t\tdocument.getElementById(\"bnsp_\" + booking_id).style.display=\"inline\";\r\n\r\n\t\tcur_timer = setTimeout(\"handleTimeout();\", 20000);\r\n\t}"],"mappings":"AAAI,IAEIA,UAFAC,cAAe,EACfC,mBAAoB,EAEpBC,eAAiB,KACpBC,QAAU,KAEd,SAASC,qBAEmB,GAAtBD,QAAQE,YAAyC,YAAtBF,QAAQE,aAA6BL,eAEpEM,aAAaP,WACbC,cAAe,EACyB,KAApCG,QAAQI,aAAaC,OAAO,EAAE,IAEjCC,SAASC,eAAe,OAASR,gBAAgBS,QAAUV,kBAC3DW,YAAc,oDACdC,MAAMD,cAE0B,iBAAxBT,QAAQI,eAEhBE,SAASC,eAAe,OAASR,gBAAgBS,QAAUV,kBACvDa,QAAQ,2CAEXC,OAAOC,SAASC,UAGlBR,SAASC,eAAe,QAAUR,gBAAgBgB,MAAMC,QAAQ,OAElE,CAEA,SAASC,gBAEJpB,eAEHA,cAAe,EACfS,SAASC,eAAe,OAASR,gBAAgBS,QAAUV,kBAC3DQ,SAASC,eAAe,QAAUR,gBAAgBgB,MAAMC,QAAQ,OAChEP,YAAc,gCACdC,MAAMD,aAGR,CAEA,SAASS,eAAeC,EAAYC,GAEnC,GAAIvB,aAEHuB,EAAIZ,SAAWY,EAAIZ,aAQpB,GAJAV,mBAAqBsB,EAAIZ,QACzBT,eAAiBoB,EAGF,OADfnB,QAAUqB,oBACV,CAOA,IAEIC,EAAM,4CAFA,QAAUH,IACR,WAAaC,EAAIZ,QAAU,MAAQ,OAE/CX,cAAe,EAEfG,QAAQuB,mBAAqBtB,mBAC7BD,QAAQwB,KAAM,MAAOF,GAAK,GAC1BtB,QAAQyB,KAAM,MAEdnB,SAASC,eAAe,QAAUY,GAAYJ,MAAMC,QAAQ,SAE5DpB,UAAY8B,WAAW,mBAAoB,IAb3C,MAFChB,MAAO,sGAgBT"}