{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["no_show.js"],"sourcesContent":["    var isProcessing = false;\r\n    var org_no_show_state = false;\r\n    var cur_timer;\r\n    var cur_booking_id = null;\r\n\tvar xmlHttp = null;\r\n\r\n\tfunction handleNoShowResult()\r\n\t{\r\n\t\tif( (xmlHttp.readyState == 4 || xmlHttp.readyState == \"complete\") && isProcessing ) \r\n\t\t{\r\n\t\t\tclearTimeout(cur_timer);\r\n\t\t\tisProcessing = false;\r\n\t\t\tif (xmlHttp.responseText.substr(0,1) == \"0\")\r\n\t\t\t{\r\n\t\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\r\n\t\t\t\tprintString = \"The server was unable to save the 'no show' flag.\";\r\n\t\t\t\talert(printString);\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse if (xmlHttp.responseText == \"Not logged in\")\r\n\t\t\t{\r\n\t\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\r\n\t\t\t\tif (confirm(\"Session timed out, please login again.\"))\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdocument.getElementById(\"bnsp_\" + cur_booking_id).style.display=\"none\";\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleTimeout()\r\n\t{\r\n\t\tif (isProcessing)\r\n\t\t{\r\n\t\t\tisProcessing = false;\r\n\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\r\n\t\t\tdocument.getElementById(\"bnsp_\" + cur_booking_id).style.display=\"none\";\r\n\t\t\tprintString = \"The server has not responded.\";\r\n\t\t\talert(printString);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setNoShowState(booking_id, obj)\r\n\t{\r\n\t\tif (isProcessing)\r\n\t\t{\r\n\t\t\tobj.checked = !obj.checked;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\torg_no_show_state = !obj.checked;\r\n\t\tcur_booking_id = booking_id;\r\n\r\n\t\txmlHttp = getXmlHttpObject();\r\n\t\tif( xmlHttp == null ) \r\n\t\t{\r\n\t\t\t// temporary\r\n\t\t\talert( \"The No Show function is not compatible with your browser. Please contact your store for assistance.\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar bid = \"&bid=\" + booking_id;\r\n\t\tvar state = \"&state=\" + (obj.checked ? \"yes\" : \"no\" );\r\n\t\tvar url = \"ddproc.php?processor=admin_no_show_state\" + bid + state;\r\n\t\tisProcessing = true;\r\n\r\n\t\txmlHttp.onreadystatechange = handleNoShowResult;\r\n\t\txmlHttp.open( \"GET\", url, true );\r\n\t\txmlHttp.send( null );\r\n\r\n\t\tdocument.getElementById(\"bnsp_\" + booking_id).style.display=\"inline\";\r\n\r\n\t\tcur_timer = setTimeout(\"handleTimeout();\", 20000);\r\n\t}"],"names":["isProcessing","org_no_show_state","cur_timer","cur_booking_id","xmlHttp","handleNoShowResult","readyState","clearTimeout","responseText","substr","document","getElementById","checked","printString","alert","confirm","window","location","reload","style","display","handleTimeout","setNoShowState","booking_id","obj","getXmlHttpObject","bid","state","url","onreadystatechange","open","send","setTimeout"],"mappings":"AAAI,IAAIA,aAAe,MACnB,IAAIC,kBAAoB,MACxB,IAAIC,UACJ,IAAIC,eAAiB,KACxB,IAAIC,QAAU,KAEd,SAASC,qBAER,IAAKD,QAAQE,YAAc,GAAKF,QAAQE,YAAc,aAAeN,aACrE,CACCO,aAAaL,SAAS,EACtBF,aAAe,MACf,GAAII,QAAQI,aAAaC,OAAO,EAAE,CAAC,GAAK,IACxC,CACCC,SAASC,eAAe,OAASR,cAAc,EAAES,QAAUX,kBAC3DY,YAAc,oDACdC,MAAMD,WAAW,CAClB,MACK,GAAIT,QAAQI,cAAgB,gBACjC,CACCE,SAASC,eAAe,OAASR,cAAc,EAAES,QAAUX,kBAC3D,GAAIc,QAAQ,wCAAwC,EACpD,CACCC,OAAOC,SAASC,OAAO,CACxB,CACD,CACAR,SAASC,eAAe,QAAUR,cAAc,EAAEgB,MAAMC,QAAQ,MACjE,CACD,CAEA,SAASC,gBAER,GAAIrB,aACJ,CACCA,aAAe,MACfU,SAASC,eAAe,OAASR,cAAc,EAAES,QAAUX,kBAC3DS,SAASC,eAAe,QAAUR,cAAc,EAAEgB,MAAMC,QAAQ,OAChEP,YAAc,gCACdC,MAAMD,WAAW,CAClB,CAED,CAEA,SAASS,eAAeC,EAAYC,GAEnC,GAAIxB,aACJ,CACCwB,EAAIZ,QAAU,CAACY,EAAIZ,QACnB,MACD,CAEAX,kBAAoB,CAACuB,EAAIZ,QACzBT,eAAiBoB,EAEjBnB,QAAUqB,iBAAiB,EAC3B,GAAIrB,SAAW,KACf,CAECU,MAAO,qGAAsG,EAC7G,MACD,CAEA,IAAIY,EAAM,QAAUH,EACpB,IAAII,EAAQ,WAAaH,EAAIZ,QAAU,MAAQ,MAC/C,IAAIgB,EAAM,2CAA6CF,EAAMC,EAC7D3B,aAAe,KAEfI,QAAQyB,mBAAqBxB,mBAC7BD,QAAQ0B,KAAM,MAAOF,EAAK,IAAK,EAC/BxB,QAAQ2B,KAAM,IAAK,EAEnBrB,SAASC,eAAe,QAAUY,CAAU,EAAEJ,MAAMC,QAAQ,SAE5DlB,UAAY8B,WAAW,mBAAoB,GAAK,CACjD"}