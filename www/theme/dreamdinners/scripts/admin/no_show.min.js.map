{"version":3,"file":"no_show.min.js","names":["cur_timer","isProcessing","org_no_show_state","cur_booking_id","xmlHttp","handleNoShowResult","readyState","clearTimeout","responseText","substr","document","getElementById","checked","printString","alert","confirm","window","location","reload","style","display","handleTimeout","setNoShowState","booking_id","obj","getXmlHttpObject","url","onreadystatechange","open","send","setTimeout"],"sourceRoot":"js/src/dreamdinners/admin","sources":["no_show.js"],"sourcesContent":["    var isProcessing = false;\n    var org_no_show_state = false;\n    var cur_timer;\n    var cur_booking_id = null;\n\tvar xmlHttp = null;\n\n\tfunction handleNoShowResult()\n\t{\n\t\tif( (xmlHttp.readyState == 4 || xmlHttp.readyState == \"complete\") && isProcessing ) \n\t\t{\n\t\t\tclearTimeout(cur_timer);\n\t\t\tisProcessing = false;\n\t\t\tif (xmlHttp.responseText.substr(0,1) == \"0\")\n\t\t\t{\n\t\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\n\t\t\t\tprintString = \"The server was unable to save the 'no show' flag.\";\n\t\t\t\talert(printString);\t\t\t\t\n\t\t\t}\n\t\t\telse if (xmlHttp.responseText == \"Not logged in\")\n\t\t\t{\n\t\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\n\t\t\t\tif (confirm(\"Session timed out, please login again.\"))\n\t\t\t\t{\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t}\n\t\t\tdocument.getElementById(\"bnsp_\" + cur_booking_id).style.display=\"none\";\n\t\t}\n\t}\n\n\tfunction handleTimeout()\n\t{\n\t\tif (isProcessing)\n\t\t{\n\t\t\tisProcessing = false;\n\t\t\tdocument.getElementById('bns_' + cur_booking_id).checked = org_no_show_state;\n\t\t\tdocument.getElementById(\"bnsp_\" + cur_booking_id).style.display=\"none\";\n\t\t\tprintString = \"The server has not responded.\";\n\t\t\talert(printString);\n\t\t}\n\n\t}\n\n\tfunction setNoShowState(booking_id, obj)\n\t{\n\t\tif (isProcessing)\n\t\t{\n\t\t\tobj.checked = !obj.checked;\n\t\t\treturn;\n\t\t}\n\n\t\torg_no_show_state = !obj.checked;\n\t\tcur_booking_id = booking_id;\n\n\t\txmlHttp = getXmlHttpObject();\n\t\tif( xmlHttp == null ) \n\t\t{\n\t\t\t// temporary\n\t\t\talert( \"The No Show function is not compatible with your browser. Please contact your store for assistance.\" );\n\t\t\treturn;\n\t\t}\n\n\t\tvar bid = \"&bid=\" + booking_id;\n\t\tvar state = \"&state=\" + (obj.checked ? \"yes\" : \"no\" );\n\t\tvar url = \"ddproc.php?processor=admin_no_show_state\" + bid + state;\n\t\tisProcessing = true;\n\n\t\txmlHttp.onreadystatechange = handleNoShowResult;\n\t\txmlHttp.open( \"GET\", url, true );\n\t\txmlHttp.send( null );\n\n\t\tdocument.getElementById(\"bnsp_\" + booking_id).style.display=\"inline\";\n\n\t\tcur_timer = setTimeout(\"handleTimeout();\", 20000);\n\t}"],"mappings":"AAAI,IAEIA,UAFAC,cAAe,EACfC,mBAAoB,EAEpBC,eAAiB,KACpBC,QAAU,KAEd,SAASC,qBAEmB,GAAtBD,QAAQE,YAAyC,YAAtBF,QAAQE,aAA6BL,eAEpEM,aAAaP,WACbC,cAAe,EACyB,KAApCG,QAAQI,aAAaC,OAAO,EAAE,IAEjCC,SAASC,eAAe,OAASR,gBAAgBS,QAAUV,kBAC3DW,YAAc,oDACdC,MAAMD,cAE0B,iBAAxBT,QAAQI,eAEhBE,SAASC,eAAe,OAASR,gBAAgBS,QAAUV,kBACvDa,QAAQ,2CAEXC,OAAOC,SAASC,UAGlBR,SAASC,eAAe,QAAUR,gBAAgBgB,MAAMC,QAAQ,OAElE,CAEA,SAASC,gBAEJpB,eAEHA,cAAe,EACfS,SAASC,eAAe,OAASR,gBAAgBS,QAAUV,kBAC3DQ,SAASC,eAAe,QAAUR,gBAAgBgB,MAAMC,QAAQ,OAChEP,YAAc,gCACdC,MAAMD,aAGR,CAEA,SAASS,eAAeC,EAAYC,GAEnC,GAAIvB,aAEHuB,EAAIZ,SAAWY,EAAIZ,aAQpB,GAJAV,mBAAqBsB,EAAIZ,QACzBT,eAAiBoB,EAGF,OADfnB,QAAUqB,oBACV,CAOA,IAEIC,EAAM,4CAFA,QAAUH,IACR,WAAaC,EAAIZ,QAAU,MAAQ,OAE/CX,cAAe,EAEfG,QAAQuB,mBAAqBtB,mBAC7BD,QAAQwB,KAAM,MAAOF,GAAK,GAC1BtB,QAAQyB,KAAM,MAEdnB,SAASC,eAAe,QAAUY,GAAYJ,MAAMC,QAAQ,SAE5DpB,UAAY8B,WAAW,mBAAoB,IAb3C,MAFChB,MAAO,sGAgBT"}