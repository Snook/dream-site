function order_history_init(e){handle_order_notes_click(),handle_order_details_click(),$("#orders_history_table").stickyTableHeaders(),handle_cancel_order(),handle_cancel_order_delivered(),handle_delete_saved_order(),handle_reschedule_button(),restorePagingLocation(e),handlePaging()}function handle_order_details_click(){$("[data-view_order_details]").each((function(){$(this).hasClass("disabled")||($(this).on("click",(function(e){e.preventDefault();var r=$(this).data("view_order_details"),t=$(this).data("booking_id");if($("[data-view_order_details_table]").parent().hide(),1==$(this).data("is_shown"))return historyPush({url:"main.php?page="+getQueryVariable("page")+"&id="+getQueryVariable("id")}),void $(this).text("View Order").data("is_shown",!1);$("[data-view_order_details]").text("View Order").data("is_shown",!1),$('[data-view_order_details_table="'+t+'"]').parent().show(),$(this).text("Close Order").data("is_shown",!0),$("html, body").animate({scrollTop:$('[data-view_order_details="'+r+'"]').offset().top-40},500),$("html, body").on("scroll mousedown DOMMouseScroll mousewheel keyup",(function(e){$("html, body").stop()})),$.ajax({url:"ddproc.php",type:"POST",timeout:6e4,dataType:"json",data:{processor:"admin_fadmin_home_order_details",op:"order_details",order_id:r,booking_id:t},success:function(e){e.processor_success&&($('[data-view_order_details_table="'+e.booking_id+'"]').html(e.order_details_table+e.history_table),historyPush({url:"main.php?page="+getQueryVariable("page")+"&id="+getQueryVariable("id")+"&order="+e.order_id}))},error:function(e,r){response="Unexpected error"}})})),$(document).on("click",".close_order_details_table",(function(e){$("#order_details_tbody_id_"+$(this).data("booking_id")).hide(),historyPush({url:"main.php?page="+getQueryVariable("page")+"&id="+getQueryVariable("id")})})))})),getQueryVariable("order")&&$('[data-view_order_details="'+getQueryVariable("order")+'"]').trigger("click")}function handle_order_notes_click(){$('[id^="view_notes-"]').each((function(){$(this).unbind("click").on("click",(function(){$(this).hasClass("selected")?($(this).removeClass("selected"),$('[id^="order_user_notes-"], [id^="order_admin_notes-"]').hide()):($(".button.selected").removeClass("selected"),$('[id^="order_user_notes-"], [id^="order_admin_notes-"]').hide(),$(this).addClass("selected"),$("#order_user_notes-"+$(this).data("order_id")+", #order_admin_notes-"+$(this).data("order_id")).show())}))}))}function handlePaging(){$(document).on("click",".orders-page-prev",(function(e){e.preventDefault();let r=$(this).data("user"),t=$(this).data("current"),a=t;return a>0&&(a-=2),localStorage.setItem("orders-paging-current",a),localStorage.setItem("history-paging-user",r),$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:r,page:t,processor:"admin_order_history",op:"prev"},success:function(e,r){return e.processor_success?($("#order_history").html(e.html),handle_order_details_click(),handle_order_notes_click(),handle_cancel_order(),handle_cancel_order_delivered(),handle_delete_saved_order(),handle_reschedule_button(),$("#orders_history_table").stickyTableHeaders()):alert("NOT OK"),!1},error:function(e,r){return alert("AJAX ERROR"),!1}}),!1})),$(document).on("click",".orders-page-next",(function(e){e.preventDefault();let r=$(this).data("user"),t=$(this).data("current");return localStorage.setItem("orders-paging-current",t),localStorage.setItem("history-paging-user",r),$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:r,page:t,processor:"admin_order_history",op:"next"},success:function(e,r){return e.processor_success?($("#order_history").html(e.html),handle_order_details_click(),handle_order_notes_click(),handle_cancel_order(),handle_cancel_order_delivered(),handle_delete_saved_order(),handle_reschedule_button(),$("#orders_history_table").stickyTableHeaders()):alert("NOT OK"),!1},error:function(e,r){return alert("AJAX ERROR"),!1}}),!1}))}function restorePagingLocation(e){let r=localStorage.getItem("orders-paging-current"),t=localStorage.getItem("history-paging-user");if(t!=e)return localStorage.setItem("orders-paging-current",null),void localStorage.setItem("history-paging-user",null);null!=r&&void 0!==r&&null!=t&&void 0!==t&&($("#order_history").html(""),$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:t,page:r,processor:"admin_order_history",op:"next"},success:function(e,r){return e.processor_success?($("#order_history").html(e.html),handle_order_details_click(),handle_order_notes_click(),handle_cancel_order(),handle_cancel_order_delivered(),handle_delete_saved_order(),handle_reschedule_button(),$("#orders_history_table").stickyTableHeaders()):alert("NOT OK"),!1},error:function(e,r){return alert("AJAX ERROR"),!1}}))}
//# sourceMappingURL=order_history.min.js.map