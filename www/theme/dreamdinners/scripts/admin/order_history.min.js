function order_history_init(e){handle_order_notes_click();handle_order_details_click();$("#orders_history_table").stickyTableHeaders();handle_cancel_order();handle_cancel_order_delivered();handle_delete_saved_order();handle_reschedule_button();restorePagingLocation(e);handlePaging()}function handle_order_details_click(){$("[data-view_order_details]").each(function(){if($(this).hasClass("disabled")){return}$(this).on("click",function(e){e.preventDefault();var r=$(this).data("view_order_details");var t=$(this).data("booking_id");$("[data-view_order_details_table]").parent().hide();if($(this).data("is_shown")==true){historyPush({url:"main.php?page="+getQueryVariable("page")+"&id="+getQueryVariable("id")});$(this).text("View Order").data("is_shown",false);return}$("[data-view_order_details]").text("View Order").data("is_shown",false);$('[data-view_order_details_table="'+t+'"]').parent().show();$(this).text("Close Order").data("is_shown",true);$("html, body").animate({scrollTop:$('[data-view_order_details="'+r+'"]').offset().top-40},500);$("html, body").on("scroll mousedown DOMMouseScroll mousewheel keyup",function(e){$("html, body").stop()});$.ajax({url:"ddproc.php",type:"POST",timeout:6e4,dataType:"json",data:{processor:"admin_fadmin_home_order_details",op:"order_details",order_id:r,booking_id:t},success:function(e){if(e.processor_success){$('[data-view_order_details_table="'+e.booking_id+'"]').html(e.order_details_table+e.history_table);historyPush({url:"main.php?page="+getQueryVariable("page")+"&id="+getQueryVariable("id")+"&order="+e.order_id})}},error:function(e,r){response="Unexpected error"}})});$(document).on("click",".close_order_details_table",function(e){$("#order_details_tbody_id_"+$(this).data("booking_id")).hide();historyPush({url:"main.php?page="+getQueryVariable("page")+"&id="+getQueryVariable("id")})})});if(getQueryVariable("order")){$('[data-view_order_details="'+getQueryVariable("order")+'"]').trigger("click")}}function handle_order_notes_click(){$('[id^="view_notes-"]').each(function(){$(this).unbind("click").on("click",function(){if($(this).hasClass("selected")){$(this).removeClass("selected");$('[id^="order_user_notes-"], [id^="order_admin_notes-"]').hide()}else{$(".button.selected").removeClass("selected");$('[id^="order_user_notes-"], [id^="order_admin_notes-"]').hide();$(this).addClass("selected");$("#order_user_notes-"+$(this).data("order_id")+", #order_admin_notes-"+$(this).data("order_id")).show()}})})}function handlePaging(){$(document).on("click",".orders-page-prev",function(e){e.preventDefault();let r=$(this).data("user");let t=$(this).data("current");let a=t;if(a>0){a=a-2}localStorage.setItem("orders-paging-current",a);localStorage.setItem("history-paging-user",r);$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:r,page:t,processor:"admin_order_history",op:"prev"},success:function(e,r){if(e.processor_success){$("#order_history").html(e.html);handle_order_details_click();handle_order_notes_click();handle_cancel_order();handle_cancel_order_delivered();handle_delete_saved_order();handle_reschedule_button();$("#orders_history_table").stickyTableHeaders()}else{alert("NOT OK")}return false},error:function(e,r){alert("AJAX ERROR");return false}});return false});$(document).on("click",".orders-page-next",function(e){e.preventDefault();let r=$(this).data("user");let t=$(this).data("current");localStorage.setItem("orders-paging-current",t);localStorage.setItem("history-paging-user",r);$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:r,page:t,processor:"admin_order_history",op:"next"},success:function(e,r){if(e.processor_success){$("#order_history").html(e.html);handle_order_details_click();handle_order_notes_click();handle_cancel_order();handle_cancel_order_delivered();handle_delete_saved_order();handle_reschedule_button();$("#orders_history_table").stickyTableHeaders()}else{alert("NOT OK")}return false},error:function(e,r){alert("AJAX ERROR");return false}});return false})}function restorePagingLocation(e){let r=localStorage.getItem("orders-paging-current");let t=localStorage.getItem("history-paging-user");if(t!=e){localStorage.setItem("orders-paging-current",null);localStorage.setItem("history-paging-user",null);return}if(r!=null&&typeof r!=="undefined"&&t!=null&&typeof t!=="undefined"){$("#order_history").html("");$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:t,page:r,processor:"admin_order_history",op:"next"},success:function(e,r){if(e.processor_success){$("#order_history").html(e.html);handle_order_details_click();handle_order_notes_click();handle_cancel_order();handle_cancel_order_delivered();handle_delete_saved_order();handle_reschedule_button();$("#orders_history_table").stickyTableHeaders()}else{alert("NOT OK")}return false},error:function(e,r){alert("AJAX ERROR");return false}})}}
//# sourceMappingURL=order_history.min.js.map