{"version":3,"names":["media_init","title_click_handler","handle_preselection","data_tooltips_init","$","each","e","create_title_link","this","on","handle_selection","src","data","historyPush","url","getQueryVariable","html","obj","title","description","append","attr","element","removeClass","addClass","height","doTimeout","animate","slideDown","slideUp","trigger"],"sourceRoot":"js/src/admin","sources":["media.js"],"sourcesContent":["function media_init()\r\n{\r\n\t// How to load content\r\n\ttitle_click_handler();\r\n\r\n\t// Handle direct linking to content\r\n\thandle_preselection();\r\n\r\n\t// Init link tooltips\r\n\tdata_tooltips_init();\r\n}\r\n\r\nfunction title_click_handler()\r\n{\r\n\t// Handle YouTube Videos\r\n\t$(\"[data-youtube_id]\").each(function(e) {\r\n\r\n\t\tcreate_title_link(this);\r\n\r\n\t\t$(this).on('click', function () {\r\n\r\n\t\t\thandle_selection(this);\r\n\r\n\t\t\tvar src = 'https://www.youtube.com/embed/' + $(this).data('youtube_id') + '?rel=0&amp;vq=hd1080&amp;autohide=1&amp;showinfo=0&amp;modestbranding=0';\r\n\r\n\t\t\tif ($(this).data('autoplay') == true)\r\n\t\t\t{\r\n\t\t\t\tsrc += '&amp;autoplay=1';\r\n\t\t\t}\r\n\r\n\t\t\thistoryPush({ url: 'main.php?page=' + getQueryVariable('page') + '&youtube=' + $(this).data('youtube_id') });\r\n\r\n\t\t\t$('#media_container-div').html('<iframe id=\"youtube-player\" name=\"youtube-player\" class=\"youtube-player\" src=\"' + src + '\" type=\"text/html\" width=\"640\" height=\"390\" frameborder=\"0\" allowFullScreen></iframe>');\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t// Handle SoundCloud Audio\r\n\t$(\"[data-soundcloud_id]\").each(function(e) {\r\n\r\n\t\tcreate_title_link(this);\r\n\r\n\t\t$(this).on('click', function () {\r\n\r\n\t\t\thandle_selection(this);\r\n\r\n\t\t\tvar src = 'https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F' + $(this).data('soundcloud_id') + '&amp;show_artwork=false&amp;sharing=false&amp;color=AFB757&amp;theme_color=E5E0D8&amp;show_comments=false&amp;show_user=false';\r\n\r\n\t\t\tif ($(this).data('autoplay') == true)\r\n\t\t\t{\r\n\t\t\t\tsrc += '&amp;auto_play=true';\r\n\t\t\t}\r\n\r\n\t\t\thistoryPush({ url: 'main.php?page=' + getQueryVariable('page') + '&soundcloud=' + $(this).data('soundcloud_id') });\r\n\r\n\t\t\t$('#media_container-div').html('<iframe width=\"640\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"' + src + '\"></iframe>');\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n}\r\n\r\nfunction create_title_link(obj)\r\n{\r\n\ttitle = 'Untitled';\r\n\r\n\tif ($(obj).data('title'))\r\n\t{\r\n\t\ttitle = $(obj).data('title');\r\n\t}\r\n\r\n\tdescription = '';\r\n\r\n\tif ($(obj).data('description'))\r\n\t{\r\n\t\tdescription =  '<hr />' + $(obj).data('description');\r\n\t}\r\n\r\n\t$(obj).append('<div class=\"title\">' + title + '</div>').attr('data-tooltip', title);\r\n\r\n\tif ($(obj).data('date'))\r\n\t{\r\n\t\t$(obj).append('<div class=\"date\">' + $(obj).data('date') + '</div>');\r\n\t}\r\n\r\n\t$(obj).append('<div class=\"clear\"></div>');\r\n}\r\n\r\nfunction handle_selection(element)\r\n{\r\n\t// clear current highlight\r\n\t$(\".selected_media\").removeClass('selected_media');\r\n\t$('#description').html('');\r\n\r\n\t// highlight this selection\r\n\t$(element).addClass('selected_media');\r\n\r\n\t// show description\r\n\tif ($(element).data('description'))\r\n\t{\r\n\t\t$('#description').html($(element).data('description'));\r\n\r\n\t\tif ($('#video_list').height() != '290')\r\n\t\t{\r\n\t\t\t// cancel hide timer\r\n\t\t\t$.doTimeout( 'hide_description_timer');\r\n\r\n\t\t\t$.doTimeout( 'show_description_timer', 1000, function() {\r\n\t\t\t\t$('#video_list').animate({height:'290px'}, 800);\r\n\t\t\t\t$('#video_description').slideDown(800);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tif ($('#video_list').height() != '410')\r\n\t\t{\r\n\t\t\t// cancel show timer\r\n\t\t\t$.doTimeout( 'show_description_timer');\r\n\r\n\t\t\t$('#description').html('No description.');\r\n\r\n\t\t\t$.doTimeout( 'hide_description_timer', 2000, function() {\r\n\t\t\t\t$('#video_list').animate({height:'410px'}, 800);\r\n\t\t\t\t$('#video_description').slideUp(800);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction handle_preselection()\r\n{\r\n\tif (getQueryVariable('youtube'))\r\n\t{\r\n\t\t$((\"[data-youtube_id=\" + getQueryVariable('youtube') + \"]\")).trigger('click');\r\n\t}\r\n\telse if (getQueryVariable('soundcloud'))\r\n\t{\r\n\t\t$((\"[data-soundcloud_id=\" + getQueryVariable('soundcloud') + \"]\")).trigger('click');\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$('.selected_media').trigger('click');\r\n\t}\r\n}"],"mappings":"AAAA,SAASA,aAGRC,sBAGAC,sBAGAC,oBACD,CAEA,SAASF,sBAGRG,EAAE,qBAAqBC,MAAK,SAASC,GAEpCC,kBAAkBC,MAElBJ,EAAEI,MAAMC,GAAG,SAAS,WAEnBC,iBAAiBF,MAEjB,IAAIG,EAAM,iCAAmCP,EAAEI,MAAMI,KAAK,cAAgB,0EAE1C,GAA5BR,EAAEI,MAAMI,KAAK,cAEhBD,GAAO,mBAGRE,YAAY,CAAEC,IAAK,iBAAmBC,iBAAiB,QAAU,YAAcX,EAAEI,MAAMI,KAAK,gBAE5FR,EAAE,wBAAwBY,KAAK,iFAAmFL,EAAM,wFAEzH,GAED,IAGAP,EAAE,wBAAwBC,MAAK,SAASC,GAEvCC,kBAAkBC,MAElBJ,EAAEI,MAAMC,GAAG,SAAS,WAEnBC,iBAAiBF,MAEjB,IAAIG,EAAM,mFAAqFP,EAAEI,MAAMI,KAAK,iBAAmB,gIAE/F,GAA5BR,EAAEI,MAAMI,KAAK,cAEhBD,GAAO,uBAGRE,YAAY,CAAEC,IAAK,iBAAmBC,iBAAiB,QAAU,eAAiBX,EAAEI,MAAMI,KAAK,mBAE/FR,EAAE,wBAAwBY,KAAK,yEAA2EL,EAAM,cAEjH,GAED,GAED,CAEA,SAASJ,kBAAkBU,GAE1BC,MAAQ,WAEJd,EAAEa,GAAKL,KAAK,WAEfM,MAAQd,EAAEa,GAAKL,KAAK,UAGrBO,YAAc,GAEVf,EAAEa,GAAKL,KAAK,iBAEfO,YAAe,SAAWf,EAAEa,GAAKL,KAAK,gBAGvCR,EAAEa,GAAKG,OAAO,sBAAwBF,MAAQ,UAAUG,KAAK,eAAgBH,OAEzEd,EAAEa,GAAKL,KAAK,SAEfR,EAAEa,GAAKG,OAAO,qBAAuBhB,EAAEa,GAAKL,KAAK,QAAU,UAG5DR,EAAEa,GAAKG,OAAO,4BACf,CAEA,SAASV,iBAAiBY,GAGzBlB,EAAE,mBAAmBmB,YAAY,kBACjCnB,EAAE,gBAAgBY,KAAK,IAGvBZ,EAAEkB,GAASE,SAAS,kBAGhBpB,EAAEkB,GAASV,KAAK,gBAEnBR,EAAE,gBAAgBY,KAAKZ,EAAEkB,GAASV,KAAK,gBAEN,OAA7BR,EAAE,eAAeqB,WAGpBrB,EAAEsB,UAAW,0BAEbtB,EAAEsB,UAAW,yBAA0B,KAAM,WAC5CtB,EAAE,eAAeuB,QAAQ,CAACF,OAAO,SAAU,KAC3CrB,EAAE,sBAAsBwB,UAAU,IACnC,MAKgC,OAA7BxB,EAAE,eAAeqB,WAGpBrB,EAAEsB,UAAW,0BAEbtB,EAAE,gBAAgBY,KAAK,mBAEvBZ,EAAEsB,UAAW,yBAA0B,KAAM,WAC5CtB,EAAE,eAAeuB,QAAQ,CAACF,OAAO,SAAU,KAC3CrB,EAAE,sBAAsByB,QAAQ,IACjC,IAGH,CAEA,SAAS3B,sBAEJa,iBAAiB,WAEpBX,EAAG,oBAAsBW,iBAAiB,WAAa,KAAMe,QAAQ,SAE7Df,iBAAiB,cAEzBX,EAAG,uBAAyBW,iBAAiB,cAAgB,KAAMe,QAAQ,SAI3E1B,EAAE,mBAAmB0B,QAAQ,QAE/B"}