{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["media.js"],"sourcesContent":["function media_init()\r\n{\r\n\t// How to load content\r\n\ttitle_click_handler();\r\n\r\n\t// Handle direct linking to content\r\n\thandle_preselection();\r\n\r\n\t// Init link tooltips\r\n\tdata_tooltips_init();\r\n}\r\n\r\nfunction title_click_handler()\r\n{\r\n\t// Handle YouTube Videos\r\n\t$(\"[data-youtube_id]\").each(function(e) {\r\n\r\n\t\tcreate_title_link(this);\r\n\r\n\t\t$(this).on('click', function () {\r\n\r\n\t\t\thandle_selection(this);\r\n\r\n\t\t\tvar src = 'https://www.youtube.com/embed/' + $(this).data('youtube_id') + '?rel=0&amp;vq=hd1080&amp;autohide=1&amp;showinfo=0&amp;modestbranding=0';\r\n\r\n\t\t\tif ($(this).data('autoplay') == true)\r\n\t\t\t{\r\n\t\t\t\tsrc += '&amp;autoplay=1';\r\n\t\t\t}\r\n\r\n\t\t\thistoryPush({ url: 'main.php?page=' + getQueryVariable('page') + '&youtube=' + $(this).data('youtube_id') });\r\n\r\n\t\t\t$('#media_container-div').html('<iframe id=\"youtube-player\" name=\"youtube-player\" class=\"youtube-player\" src=\"' + src + '\" type=\"text/html\" width=\"640\" height=\"390\" frameborder=\"0\" allowFullScreen></iframe>');\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t// Handle SoundCloud Audio\r\n\t$(\"[data-soundcloud_id]\").each(function(e) {\r\n\r\n\t\tcreate_title_link(this);\r\n\r\n\t\t$(this).on('click', function () {\r\n\r\n\t\t\thandle_selection(this);\r\n\r\n\t\t\tvar src = 'https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F' + $(this).data('soundcloud_id') + '&amp;show_artwork=false&amp;sharing=false&amp;color=AFB757&amp;theme_color=E5E0D8&amp;show_comments=false&amp;show_user=false';\r\n\r\n\t\t\tif ($(this).data('autoplay') == true)\r\n\t\t\t{\r\n\t\t\t\tsrc += '&amp;auto_play=true';\r\n\t\t\t}\r\n\r\n\t\t\thistoryPush({ url: 'main.php?page=' + getQueryVariable('page') + '&soundcloud=' + $(this).data('soundcloud_id') });\r\n\r\n\t\t\t$('#media_container-div').html('<iframe width=\"640\" height=\"166\" scrolling=\"no\" frameborder=\"no\" src=\"' + src + '\"></iframe>');\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n}\r\n\r\nfunction create_title_link(obj)\r\n{\r\n\ttitle = 'Untitled';\r\n\r\n\tif ($(obj).data('title'))\r\n\t{\r\n\t\ttitle = $(obj).data('title');\r\n\t}\r\n\r\n\tdescription = '';\r\n\r\n\tif ($(obj).data('description'))\r\n\t{\r\n\t\tdescription =  '<hr />' + $(obj).data('description');\r\n\t}\r\n\r\n\t$(obj).append('<div class=\"title\">' + title + '</div>').attr('data-tooltip', title);\r\n\r\n\tif ($(obj).data('date'))\r\n\t{\r\n\t\t$(obj).append('<div class=\"date\">' + $(obj).data('date') + '</div>');\r\n\t}\r\n\r\n\t$(obj).append('<div class=\"clear\"></div>');\r\n}\r\n\r\nfunction handle_selection(element)\r\n{\r\n\t// clear current highlight\r\n\t$(\".selected_media\").removeClass('selected_media');\r\n\t$('#description').html('');\r\n\r\n\t// highlight this selection\r\n\t$(element).addClass('selected_media');\r\n\r\n\t// show description\r\n\tif ($(element).data('description'))\r\n\t{\r\n\t\t$('#description').html($(element).data('description'));\r\n\r\n\t\tif ($('#video_list').height() != '290')\r\n\t\t{\r\n\t\t\t// cancel hide timer\r\n\t\t\t$.doTimeout( 'hide_description_timer');\r\n\r\n\t\t\t$.doTimeout( 'show_description_timer', 1000, function() {\r\n\t\t\t\t$('#video_list').animate({height:'290px'}, 800);\r\n\t\t\t\t$('#video_description').slideDown(800);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tif ($('#video_list').height() != '410')\r\n\t\t{\r\n\t\t\t// cancel show timer\r\n\t\t\t$.doTimeout( 'show_description_timer');\r\n\r\n\t\t\t$('#description').html('No description.');\r\n\r\n\t\t\t$.doTimeout( 'hide_description_timer', 2000, function() {\r\n\t\t\t\t$('#video_list').animate({height:'410px'}, 800);\r\n\t\t\t\t$('#video_description').slideUp(800);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction handle_preselection()\r\n{\r\n\tif (getQueryVariable('youtube'))\r\n\t{\r\n\t\t$((\"[data-youtube_id=\" + getQueryVariable('youtube') + \"]\")).trigger('click');\r\n\t}\r\n\telse if (getQueryVariable('soundcloud'))\r\n\t{\r\n\t\t$((\"[data-soundcloud_id=\" + getQueryVariable('soundcloud') + \"]\")).trigger('click');\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$('.selected_media').trigger('click');\r\n\t}\r\n}"],"names":["media_init","title_click_handler","handle_preselection","data_tooltips_init","$","each","e","create_title_link","this","on","handle_selection","src","data","historyPush","url","getQueryVariable","html","obj","title","description","append","attr","element","removeClass","addClass","height","doTimeout","animate","slideDown","slideUp","trigger"],"mappings":"AAAA,SAASA,aAGRC,sBAGAC,sBAGAC,qBAGD,SAASF,sBAGRG,EAAE,qBAAqBC,KAAK,SAASC,GAEpCC,kBAAkBC,MAElBJ,EAAEI,MAAMC,GAAG,QAAS,WAEnBC,iBAAiBF,MAEjB,IAAIG,EAAM,iCAAmCP,EAAEI,MAAMI,KAAK,cAAgB,0EAE1E,GAAIR,EAAEI,MAAMI,KAAK,aAAe,KAChC,CACCD,GAAO,kBAGRE,YAAY,CAAEC,IAAK,iBAAmBC,iBAAiB,QAAU,YAAcX,EAAEI,MAAMI,KAAK,gBAE5FR,EAAE,wBAAwBY,KAAK,iFAAmFL,EAAM,6FAO1HP,EAAE,wBAAwBC,KAAK,SAASC,GAEvCC,kBAAkBC,MAElBJ,EAAEI,MAAMC,GAAG,QAAS,WAEnBC,iBAAiBF,MAEjB,IAAIG,EAAM,mFAAqFP,EAAEI,MAAMI,KAAK,iBAAmB,gIAE/H,GAAIR,EAAEI,MAAMI,KAAK,aAAe,KAChC,CACCD,GAAO,sBAGRE,YAAY,CAAEC,IAAK,iBAAmBC,iBAAiB,QAAU,eAAiBX,EAAEI,MAAMI,KAAK,mBAE/FR,EAAE,wBAAwBY,KAAK,yEAA2EL,EAAM,mBAQnH,SAASJ,kBAAkBU,GAE1BC,MAAQ,WAER,GAAId,EAAEa,GAAKL,KAAK,SAChB,CACCM,MAAQd,EAAEa,GAAKL,KAAK,SAGrBO,YAAc,GAEd,GAAIf,EAAEa,GAAKL,KAAK,eAChB,CACCO,YAAe,SAAWf,EAAEa,GAAKL,KAAK,eAGvCR,EAAEa,GAAKG,OAAO,sBAAwBF,MAAQ,UAAUG,KAAK,eAAgBH,OAE7E,GAAId,EAAEa,GAAKL,KAAK,QAChB,CACCR,EAAEa,GAAKG,OAAO,qBAAuBhB,EAAEa,GAAKL,KAAK,QAAU,UAG5DR,EAAEa,GAAKG,OAAO,6BAGf,SAASV,iBAAiBY,GAGzBlB,EAAE,mBAAmBmB,YAAY,kBACjCnB,EAAE,gBAAgBY,KAAK,IAGvBZ,EAAEkB,GAASE,SAAS,kBAGpB,GAAIpB,EAAEkB,GAASV,KAAK,eACpB,CACCR,EAAE,gBAAgBY,KAAKZ,EAAEkB,GAASV,KAAK,gBAEvC,GAAIR,EAAE,eAAeqB,UAAY,MACjC,CAECrB,EAAEsB,UAAW,0BAEbtB,EAAEsB,UAAW,yBAA0B,IAAM,WAC5CtB,EAAE,eAAeuB,QAAQ,CAACF,OAAO,SAAU,KAC3CrB,EAAE,sBAAsBwB,UAAU,YAKrC,CACC,GAAIxB,EAAE,eAAeqB,UAAY,MACjC,CAECrB,EAAEsB,UAAW,0BAEbtB,EAAE,gBAAgBY,KAAK,mBAEvBZ,EAAEsB,UAAW,yBAA0B,IAAM,WAC5CtB,EAAE,eAAeuB,QAAQ,CAACF,OAAO,SAAU,KAC3CrB,EAAE,sBAAsByB,QAAQ,SAMpC,SAAS3B,sBAER,GAAIa,iBAAiB,WACrB,CACCX,EAAG,oBAAsBW,iBAAiB,WAAa,KAAMe,QAAQ,cAEjE,GAAIf,iBAAiB,cAC1B,CACCX,EAAG,uBAAyBW,iBAAiB,cAAgB,KAAMe,QAAQ,aAG5E,CACC1B,EAAE,mBAAmB0B,QAAQ"}