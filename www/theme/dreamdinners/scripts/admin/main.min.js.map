{"version":3,"file":"main.min.js","names":["selected_session_id","view_session","manualSearchTypeChange","manualOrderSearchTypeChange","init_go_to_today","suppress_fastlane_labels","main_init","handle_agenda_click","handle_agenda_month_select","handle_session_tools","handle_go_to_today","handle_guest_search","handle_preselection","handle_order_details_table","init_looping_timers","start_dashboard_snapshot_timer","start_unix_expiry_timer","register_booking_click_handlers","handle_booking_row_click","handle_booking_no_show","handle_platepoints_gifts","handle_food_testing_recipe","handle_pp_opted_out","handle_delayed_payment_tc","handle_session_rsvp","handle_resend_delivered_to_shipstation","handle_fetch_tracking_from_shipstation","$","each","this","on","event","preventDefault","orderId","data","ajax","url","type","timeout","dataType","processor","op","order","success","json","processor_success","dd_toast","message","error","objAJAXRequest","strError","control","processor_tracking_number","html","e","rsvp_session_id","dd_message","title","form_add_guest","height","width","div_id","closeOnEscape","noOk","open","ui","mask","acceptFunction","dialog","Accept","parent","find","hide","keyup","keyCode","ENTER","buttons","add_guest_ui","_check_form","primary_email_login","val","password_login","firstname","lastname","telephone_1","rsvp_dream_taste","remove","processor_message","response","Cancel","handle_dashboard_update","user_id","session_id","modal","confirm","status","handle_session_rsvp_guest_find","guest","booking_id","order_id","show","animate","scrollTop","offset","top","stop","order_details_table","getQueryVariable","update_page_url","store_id","STORE_DETAILS","id","USER_DETAILS","level","gift_id","order_sequence_number","giftDisplayString","numDue","length","numNotDue","received_gifts","doTimeout","unixtime","Math","round","Date","getTime","filter","hasClass","addClass","set_selected_date","new_date","cur_menu_id","new_menu_id","selected_date","is","dashboard_date","dashboard_metrics","dashboard_title","removeClass","help_system_init","selected_agenda_month","selected_agenda_month_id","doasync","async","agenda_date","agenda_month_id","session_info","date","scrollToTarget","lang","en","tc","terms_and_conditions","delayed_payment","Agree","set_user_pref","Decline","delayed_payment_decline","window","booking_query","abort","PATH","image_admin","order_details","current_menu_id","selected_menu_id","menu_id","session_start_dtf_ymd","update_session_tool_links","session_start_dtf_verbose_date","attention","session_start_dtf_time_only","session_details","publish_state_button_text","session_publish_state","session_data","session_type","shipping_bookings_count","delivered_bookings_count","remaining_slots","session_type_subtype","undefined","additional_orders","booked_count","num_rsvps","remaining_intro_slots","booking_details","trigger","bounce","resend_dream_taste_notification","days_menu","submitted_date","date_info","date_dtf_verbose_date","date_details","scrollTo","hover","page_url","historyPush","prop","bounce_to","state","checked","bid","selector_elem","survey_name","text","survey_id","split","survey_size","Confirm","handle_guest_account_notes","do_op","guest_note","get_user_pref","textarea_elem","guest_preferences","value","strip_tags","nl2br","handle_admin_carryover_notes","button_obj","hide_carryover_notes","do","note","user_data_value","handle_admin_order_notes","unique_id","buttonName","admin_note","handle_reschedule_button","css","cursor","create_and_submit_form","method","action","input","original_session_id","menus","back_address","back_path","handle_cancel_order","handle_cancel_order_delivered","handle_delete_saved_order","handle_delete_saved_order_delivered","location","href","doRefresh","Refresh","validateKey","evt","charCode","which","returnValue","validateAmount","obj","limit","isNaN","canConfirm","paymentList","order_notes","trim","reason","declined_MFY","declined_Reschedule","suppress_cancel_email","OK","removeQueryVariable","suppress_email","totalStorage","new_state","open_close_submit","toggle","toggleClass","document","page","search_type","all_stores","q","back","unmask","detect_guest_search_type","detect_order_search_type","isNumeric","indexOf","go_to_today","date_select","get_todays_date","slice","todays_date","confirm_order_attended","points_this_order","total_credit","fn","target","callback","elem","target_top","position","target_bottom","elem_top","elem_bottom","onAfter","jQuery","attr","match","order_identifier","bootbox","alert"],"sourceRoot":"js/src/dreamdinners/admin","sources":["main.js"],"sourcesContent":["var selected_session_id, view_session, manualSearchTypeChange, manualOrderSearchTypeChange;\nvar init_go_to_today = false;\nvar suppress_fastlane_labels = false;\n\nfunction main_init()\n{\n\thandle_agenda_click();\n\n\thandle_agenda_month_select();\n\n\thandle_session_tools();\n\n\thandle_go_to_today();\n\n\thandle_guest_search();\n\n\thandle_preselection();\n\n\thandle_order_details_table();\n\n\tinit_looping_timers();\n}\n\nfunction init_looping_timers()\n{\n\t// refreshes dashboard snapshot\n\tstart_dashboard_snapshot_timer();\n\n\t// greys out agenda days and session as the expire\n\tstart_unix_expiry_timer();\n}\n\nfunction register_booking_click_handlers()\n{\n\t// make it so you can highlight a guest row on click\n\thandle_booking_row_click();\n\n\t// register guest click handlers\n\t// no show checkbox\n\thandle_booking_no_show();\n\n\t// handle platepoints gift tools\n\thandle_platepoints_gifts();\n\n\t// handle food testing recipe assignment\n\thandle_food_testing_recipe();\n\n\t// handle opted out users\n\thandle_pp_opted_out();\n\n\t// handle showing order details\n\thandle_order_details_table();\n\n\t// handle delayed payment tc\n\thandle_delayed_payment_tc();\n\n\t// handle session rsvp functions\n\thandle_session_rsvp();\n\n\t//ShipStation Calls\n\thandle_resend_delivered_to_shipstation();\n\thandle_fetch_tracking_from_shipstation()\n}\n\nfunction handle_resend_delivered_to_shipstation()\n{\n\t$('.handle-resend-shipstation').each(function () {\n\t\t$(this).on('click', function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tvar orderId = $(this).data('order_id');\n\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 60000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_shipstation_manager',\n\t\t\t\t\top: 'resend-order',\n\t\t\t\t\torder: orderId\n\t\t\t\t},\n\t\t\t\tsuccess: function (json) {\n\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdd_toast({'message': 'There was a problem sending to ShipStation.'});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\t});\n}\n\nfunction handle_fetch_tracking_from_shipstation()\n{\n\t$('.handle-fetch-tracking-number').each(function () {\n\t\t$(this).on('click', function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tvar orderId = $(this).data('order_id');\n\n\t\t\tvar control = $(this);\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 60000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_shipstation_manager',\n\t\t\t\t\top: 'fetch-tracking-number',\n\t\t\t\t\torder: orderId\n\t\t\t\t},\n\t\t\t\tsuccess: function (json) {\n\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (json.processor_tracking_number != null && typeof json.processor_tracking_number != 'undefined' && json.processor_tracking_number !== '' && json.processor_tracking_number !== 'null')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontrol.html(json.processor_tracking_number);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdd_toast({'message': 'There was a problem updating the tracking number from ShipStation.'});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\t});\n}\n\nfunction handle_session_rsvp()\n{\n\t$('.add_session_rsvp_guest_create').each(function () {\n\t\t$(this).on('click', function (e) {\n\t\t\tvar rsvp_session_id = $(this).data('session_id');\n\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 60000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_session_rsvp',\n\t\t\t\t\top: 'get_form_add_guest'\n\t\t\t\t},\n\t\t\t\tsuccess: function (json) {\n\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\ttitle: 'Add RSVP',\n\t\t\t\t\t\t\tmessage: json.form_add_guest,\n\t\t\t\t\t\t\theight: 400,\n\t\t\t\t\t\t\twidth: 300,\n\t\t\t\t\t\t\tdiv_id: 'add_guest_div',\n\t\t\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\t\topen: function (event, ui) {\n\t\t\t\t\t\t\t\t$('.telephone').mask('999-999-9999');\n\n\t\t\t\t\t\t\t\t// get button objects\n\t\t\t\t\t\t\t\tvar buttons = $(this).dialog(\"option\", \"buttons\");\n\n\t\t\t\t\t\t\t\t// assign accept button function to variable\n\t\t\t\t\t\t\t\tvar acceptFunction = buttons.Accept;\n\n\t\t\t\t\t\t\t\t//hide close button.\n\t\t\t\t\t\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\n\n\t\t\t\t\t\t\t\t// register keyup on password field, if enter submit form\n\t\t\t\t\t\t\t\t$('#add_guest_password_login').keyup(function (e) {\n\t\t\t\t\t\t\t\t\tif (e.keyCode == $.ui.keyCode.ENTER)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tacceptFunction();\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\tAccept: function () {\n\t\t\t\t\t\t\t\t\tvar add_guest_ui = $(\"#add_guest_div\")[0];\n\t\t\t\t\t\t\t\t\t$(\"#add_guest_div\").find('#error_message').html('');\n\n\t\t\t\t\t\t\t\t\tif (_check_form($('#form_add_guest')[0]))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\tprocessor: 'admin_session_rsvp',\n\t\t\t\t\t\t\t\t\t\t\t\top: 'rsvp_dream_taste',\n\t\t\t\t\t\t\t\t\t\t\t\tprimary_email_login: $(\"#add_guest_div\").find('#add_guest_primary_email_login').val(),\n\t\t\t\t\t\t\t\t\t\t\t\tpassword_login: $(\"#add_guest_div\").find('#add_guest_password_login').val(),\n\t\t\t\t\t\t\t\t\t\t\t\tfirstname: $(\"#add_guest_div\").find('#add_guest_firstname').val(),\n\t\t\t\t\t\t\t\t\t\t\t\tlastname: $(\"#add_guest_div\").find('#add_guest_lastname').val(),\n\t\t\t\t\t\t\t\t\t\t\t\ttelephone_1: $(\"#add_guest_div\").find('#add_guest_telephone_1').val(),\n\t\t\t\t\t\t\t\t\t\t\t\trsvp_dream_taste: rsvp_session_id\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(add_guest_ui).remove();\n\n\t\t\t\t\t\t\t\t\t\t\t\t\thandle_preselection();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tCancel: function () {\n\t\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\tresponse = 'Unexpected error';\n\n\t\t\t\t\thandle_dashboard_update();\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\t});\n\n\t$('.cancel_session_rsvp').each(function () {\n\t\t$(this).on('click', function (e) {\n\t\t\tvar user_id = $(this).data('user_id');\n\t\t\tvar session_id = $(this).data('session_id');\n\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Confirmation',\n\t\t\t\tmessage: 'Are you sure you wish to cancel this RSVP?',\n\t\t\t\tmodal: true,\n\t\t\t\tconfirm: function () {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'admin_session_rsvp',\n\t\t\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\t\t\tsession_id: session_id,\n\t\t\t\t\t\t\top: 'delete_rsvp'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json, status) {\n\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#session_rsvp-' + session_id + '-' + user_id).remove();\n\n\t\t\t\t\t\t\t\tdd_toast({'message': 'RSVP has been canceled.'});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n\n}\n\nfunction handle_session_rsvp_guest_find(guest)\n{\n\t$.ajax({\n\t\turl: 'ddproc.php',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'admin_session_rsvp',\n\t\t\tuser_id: $(guest).data('user_id'),\n\t\t\tsession_id: $(guest).data('session_id'),\n\t\t\top: 'add_rsvp'\n\t\t},\n\t\tsuccess: function (json, status) {\n\t\t\tif (json.processor_success)\n\t\t\t{\n\t\t\t\tdd_toast({'message': 'RSVP has been added.'});\n\n\t\t\t\thandle_preselection();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t});\n\n\t\t\t}\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error';\n\t\t}\n\n\t});\n}\n\nfunction handle_order_details_table()\n{\n\t$('[data-view_order_details]').each(function () {\n\n\t\t// handle view order details\n\t\t$(this).on('click', function (e) {\n\n\t\t\te.preventDefault();\n\n\t\t\tvar booking_id = $(this).data('booking_id');\n\t\t\tvar order_id = $(this).data('order_id');\n\n\t\t\t// hide existing open order\n\t\t\t$('.order_details_tbody').hide();\n\n\t\t\t// show this order\n\t\t\t$('#order_details_tbody_id_' + booking_id).show();\n\n\t\t\t// scroll to guest details\n\t\t\t$('html, body').animate({\n\n\t\t\t\tscrollTop: $('#guest_details_tbody_id_' + booking_id).offset().top - 40\n\n\t\t\t}, 500);\n\n\t\t\t// cancel scroll if user manually interrupts the scroll\n\t\t\t$('html, body').on('scroll mousedown DOMMouseScroll mousewheel keyup', function (e) {\n\n\t\t\t\t$('html, body').stop();\n\n\t\t\t});\n\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 60000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_fadmin_home_order_details',\n\t\t\t\t\top: 'order_details',\n\t\t\t\t\torder_id: order_id,\n\t\t\t\t\tbooking_id: booking_id\n\t\t\t\t},\n\t\t\t\tsuccess: function (json) {\n\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#order_details_table_div_id_' + json.booking_id).html(json.order_details_table);\n\n\t\t\t\t\t\tif (getQueryVariable('session'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tupdate_page_url('?page=' + getQueryVariable('page') + '&session=' + getQueryVariable('session') + '&order=' + json.order_id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (getQueryVariable('day'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tupdate_page_url('?page=' + getQueryVariable('page') + '&day=' + getQueryVariable('day') + '&order=' + json.order_id);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// get order history\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tprocessor: 'admin_order_mgr_processor',\n\t\t\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\t\t\t\top: 'get_history',\n\t\t\t\t\t\t\t\tuser_id: USER_DETAILS.id,\n\t\t\t\t\t\t\t\torder_id: order_id\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t$('#order_history_div_id_' + json.booking_id).html(json.html);\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t\t// handle closing of order details\n\t\t$('.close_order_details_table').on('click', function (e) {\n\n\t\t\t$('#order_details_tbody_id_' + $(this).data('booking_id')).hide();\n\n\t\t\tif (getQueryVariable('session'))\n\t\t\t{\n\t\t\t\tupdate_page_url('?page=' + getQueryVariable('page') + '&session=' + getQueryVariable('session'));\n\t\t\t}\n\t\t\telse if (getQueryVariable('day'))\n\t\t\t{\n\t\t\t\tupdate_page_url('?page=' + getQueryVariable('page') + '&day=' + getQueryVariable('day'));\n\t\t\t}\n\n\t\t});\n\n\t});\n}\n\nfunction handle_platepoints_gifts()\n{\n\t$('[data-pp_gift_reward]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tuser_id = $(this).data('user_id');\n\t\t\tlevel = $(this).data('level');\n\t\t\tgift_id = $(this).data('gift_id');\n\t\t\torder_sequence_number = $(this).data('order_sequence_number');\n\t\t\torder_id = $(this).data('order_id');\n\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Mark received confirmation',\n\t\t\t\tmessage: 'Are you sure you wish to mark the gift as received?',\n\t\t\t\tmodal: true,\n\t\t\t\tconfirm: function () {\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'plate_points_processor',\n\t\t\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\t\t\top: 'mark_gift_received',\n\t\t\t\t\t\t\tlevel: level,\n\t\t\t\t\t\t\tgift_id: gift_id,\n\t\t\t\t\t\t\torder_sequence_number: order_sequence_number\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json, status) {\n\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (level == 'enrolled')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('[data-pp_gift_reward_div=' + json.user_id + '_' + gift_id + ']').remove();\n\t\t\t\t\t\t\t\t\tdd_toast({'message': 'The guest has received a Member level gift: ' + json.giftDisplayString});\n\n\t\t\t\t\t\t\t\t\tvar numDue = $(\"div[data-is_due*='true']\").length;\n\t\t\t\t\t\t\t\t\tvar numNotDue = $(\"div[data-is_due*='false']\").length;\n\n\t\t\t\t\t\t\t\t\tif (numDue == 0)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$('#rewardsdueheader_' + json.user_id).hide();\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (numNotDue == 0)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$('#rewardsnotdueheader_' + json.user_id).hide();\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ($(\"#received_order_based_gifts_\" + order_id).length)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$(\"#received_order_based_gifts_\" + order_id).html(json.received_gifts);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('[data-pp_gift_reward_div=' + json.user_id + ']').hide();\n\n\t\t\t\t\t\t\t\t\tdd_toast({'message': 'The guest has received their current level gift: ' + json.giftDisplayString});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\tmessage: 'There was a problem marking the gift as received.'\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n\n}\n\nfunction start_dashboard_snapshot_timer()\n{\n\t// cancel existing timer if there is one\n\t$.doTimeout('dashboard_snapshot_timer');\n\n\t// check every 2 minutes for dashboard updates\n\t$.doTimeout('dashboard_snapshot_timer', 120000, function () {\n\n\t\thandle_dashboard_update();\n\n\t\treturn true;\n\n\t});\n\n\t// call it immediately\n\t// $.doTimeout('dashboard_snapshot_timer', true );\n}\n\nfunction start_unix_expiry_timer()\n{\n\t// cancel existing timer if there is one\n\t$.doTimeout('unix_expiry_timer');\n\n\t// check every minute and set agenda display is_past based on session/day expiry\n\t$.doTimeout('unix_expiry_timer', 60000, function () {\n\n\t\tvar unixtime = Math.round(new Date().getTime() / 1000);\n\n\t\t$('[data-unix_expiry]').filter(function () {\n\n\t\t\treturn $(this).data('unix_expiry') < unixtime && !$(this).hasClass('is_past');\n\n\t\t}).addClass('is_past');\n\n\t\treturn true;\n\n\t});\n\n\t// call it immediately\n\t$.doTimeout('unix_expiry_timer', true);\n}\n\nfunction set_selected_date(new_date, cur_menu_id, new_menu_id)\n{\n\tselected_date = new_date;\n\n\tif (cur_menu_id != new_menu_id)\n\t{\n\t\thandle_dashboard_update();\n\t\treturn true;\n\t}\n\telse\n\t{\n\t\treturn false;\n\t}\n}\n\nfunction handle_dashboard_update()\n{\n\tif ($('#dashboard_snapshot_table_div').length && $('#dashboard_snapshot_container').is(\":visible\"))\n\t{\n\t\t// short timeout to prevent processing message from showing for normal cached load times\n\t\t$.doTimeout('dashboard_processing_timer', 1000, function () {\n\n\t\t\t$('#dashboard_processing').show();\n\t\t\t$('#dashboard_snapshot_table').addClass('processing');\n\n\t\t});\n\n\t\t$.ajax({\n\t\t\turl: 'ddproc.php',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 60000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\top: 'dashboard_details',\n\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\tdashboard_date: selected_date\n\t\t\t},\n\t\t\tsuccess: function (json) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$.doTimeout('dashboard_processing_timer');\n\n\t\t\t\t\t$('#dashboard_snapshot_table_div').html(json.dashboard_metrics);\n\t\t\t\t\t$('#ds_title_date').html(json.dashboard_title);\n\n\t\t\t\t\t$('#dashboard_snapshot_table').removeClass('processing');\n\t\t\t\t\t$('#dashboard_processing').hide();\n\t\t\t\t\thelp_system_init();\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t//\t\thandle_dashboard_update();\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction handle_agenda_month_select()\n{\n\t$('#month_selector').on('change', function (e) {\n\n\t\tselected_agenda_month = $('#month_selector').val();\n\t\tselected_agenda_month_id = $('#month_selector').find(':selected').data('menu_id');\n\n\t\tdoasync = true;\n\t\tif (init_go_to_today)\n\t\t{\n\t\t\tdoasync = false;\n\t\t}\n\n\t\t$.ajax({\n\t\t\turl: 'ddproc.php',\n\t\t\ttype: 'POST',\n\t\t\tasync: doasync,\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\top: 'agenda_details',\n\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\tagenda_date: selected_agenda_month,\n\t\t\t\tagenda_month_id: selected_agenda_month_id\n\t\t\t},\n\t\t\tsuccess: function (json) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#session_selector').html(json.session_info);\n\n\t\t\t\t\thandle_agenda_click();\n\n\t\t\t\t\tif (!init_go_to_today)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('#day_' + json.date).scrollToTarget($('#session_selector'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\t\t});\n\n\t});\n}\n\nfunction handle_delayed_payment_tc()\n{\n\t$('[data-delayed_payment_tc]').on('click', function (e) {\n\n\t\tvar user_id = $(this).data('delayed_payment_tc');\n\n\t\tdd_message({\n\t\t\ttitle: lang.en.tc.terms_and_conditions,\n\t\t\tmessage: lang.en.tc.delayed_payment,\n\t\t\tmodal: true,\n\t\t\tnoOk: true,\n\t\t\tbuttons: {\n\t\t\t\t'Agree': function () {\n\n\t\t\t\t\t$(this).remove();\n\n\t\t\t\t\t$('[data-delayed_payment_tc=\"' + user_id + '\"]').hide();\n\n\t\t\t\t\tset_user_pref('TC_DELAYED_PAYMENT_AGREE', 1, user_id);\n\n\t\t\t\t},\n\t\t\t\t'Decline': function () {\n\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: lang.en.tc.terms_and_conditions,\n\t\t\t\t\t\tmessage: lang.en.tc.delayed_payment_decline\n\t\t\t\t\t});\n\n\t\t\t\t\tset_user_pref('TC_DELAYED_PAYMENT_AGREE', 0, user_id);\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t});\n}\n\nfunction handle_agenda_click()\n{\n\t$('#session_selection li').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tif (typeof window.booking_query != 'undefined')\n\t\t\t{\n\t\t\t\twindow.booking_query.abort();\n\t\t\t}\n\n\t\t\t$('.selected').removeClass('selected');\n\n\t\t\t$(this).addClass('selected');\n\t\t\t// cancel timeout\n\t\t\t$.doTimeout('booked_guests_table_timer');\n\n\t\t\t// if fetching guests takes longer than 1 second, show a loading message\n\t\t\t$.doTimeout('booked_guests_table_timer', 1000, function () {\n\n\t\t\t\t$('#booked_guests_table').html('<img src=\"' + PATH.image_admin + '/style/throbber_circle.gif\" class=\"img_valign img_throbber_circle\" data-tooltip=\"Processing\" alt=\"Processing\" style=\"display: inline;\" /> Loading...');\n\n\t\t\t});\n\n\t\t\tif ($(this).data('session_id'))\n\t\t\t{\n\t\t\t\tview_session = true;\n\n\t\t\t\tselected_session_id = $(this).data('session_id');\n\n\t\t\t\twindow.booking_query = $.ajax({\n\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\ttimeout: 120000,\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\t\t\top: 'session_details',\n\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\t\tsession_id: selected_session_id\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// if getting order details, show it after\n\t\t\t\t\t\t\tvar order_details = false;\n\t\t\t\t\t\t\t// only check if not switching between day and session view\n\t\t\t\t\t\t\tif (!getQueryVariable('day'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\torder_details = getQueryVariable('order');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// cancel timer\n\t\t\t\t\t\t\t$.doTimeout('booked_guests_table_timer');\n\t\t\t\t\t\t\tupdate_page_url('?page=' + getQueryVariable('page') + '&session=' + json.session_info.id);\n\n\t\t\t\t\t\t\tvar current_menu_id = selected_menu_id;\n\t\t\t\t\t\t\tselected_menu_id = json.session_info.menu_id;\n\t\t\t\t\t\t\tset_selected_date(json.session_info.session_start_dtf_ymd, current_menu_id, selected_menu_id);\n\n\t\t\t\t\t\t\t// update session tools\n\t\t\t\t\t\t\tupdate_session_tool_links();\n\n\t\t\t\t\t\t\t// update title\n\t\t\t\t\t\t\t$('#selected_day').html(json.session_info.session_start_dtf_verbose_date);\n\t\t\t\t\t\t\t$('#selected_date_link').attention();\n\n\t\t\t\t\t\t\t// show title time\n\t\t\t\t\t\t\t$('#selected_session').html(' - ' + json.session_info.session_start_dtf_time_only);\n\t\t\t\t\t\t\t$('#selected_session').show();\n\n\t\t\t\t\t\t\t// Hide Day Details\n\t\t\t\t\t\t\t$('#day_details_container').hide();\n\n\t\t\t\t\t\t\t// fill session details container\n\t\t\t\t\t\t\t$('#session_details_table_div').html(json.session_details);\n\n\t\t\t\t\t\t\t$('#sd_edit_session').show();\n\t\t\t\t\t\t\t$('#sd_session_meta').show();\n\n\t\t\t\t\t\t\tvar publish_state_button_text = json.session_info.session_publish_state == 'PUBLISHED' ? 'Close Session' : 'Open Session';\n\t\t\t\t\t\t\t$('#sd_publish_state').data('session_publish_state', json.session_info.session_publish_state).html(publish_state_button_text);\n\t\t\t\t\t\t\t// update agenda display with new details in-case the state has changed since last load\n\t\t\t\t\t\t\tif (json.session_data.session_type === 'DELIVERED')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#session-' + selected_session_id + ' > span.shipped').html(json.session_info.shipping_bookings_count);\n\t\t\t\t\t\t\t\t$('#session-' + selected_session_id + ' > span.attending').html(json.session_info.delivered_bookings_count);\n\t\t\t\t\t\t\t\t$('#session-' + selected_session_id + ' > span.remaining').html(json.session_info.remaining_slots);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (json.session_data.session_type_subtype === 'WALK_IN')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#sd_edit_session').hide();\n\t\t\t\t\t\t\t\t$('#sd_session_meta').hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (typeof json.session_info.additional_orders !== undefined && json.session_info.additional_orders != null && json.session_info.additional_orders > 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#session-' + selected_session_id + ' > span.attending').html((json.session_info.booked_count * 1) + (json.session_info.num_rsvps * 1) + '/' + json.session_info.additional_orders);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#session-' + selected_session_id + ' > span.attending').html((json.session_info.booked_count * 1) + (json.session_info.num_rsvps * 1));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$('#session-' + selected_session_id + ' > span.remaining').html(json.session_info.remaining_slots + '/' + (json.session_info.remaining_intro_slots > 0 ? json.session_info.remaining_intro_slots : 0));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (json.session_info.session_publish_state == 'PUBLISHED')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#session-' + selected_session_id + ' > span.time').removeClass('closed');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#session-' + selected_session_id + ' > span.time').addClass('closed');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// show session details container\n\t\t\t\t\t\t\t$('#session_details_container').show();\n\n\t\t\t\t\t\t\t// show guest list\n\t\t\t\t\t\t\t$('#booked_guests_table').html(json.booking_details);\n\n\t\t\t\t\t\t\t// register click handlers\n\t\t\t\t\t\t\tregister_booking_click_handlers();\n\n\t\t\t\t\t\t\t// show order details\n\t\t\t\t\t\t\tif (order_details)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('[data-view_order_details][data-order_id=\"' + order_details + '\"]').trigger('click');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// dream taste buttons\n\t\t\t\t\t\t\t$('#sd_invitation_pdf').on('click', function (e) {\n\n\t\t\t\t\t\t\t\tbounce('?page=print&dream_taste_event_pdf=' + selected_session_id, '_blank');\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// fundraiser buttons\n\t\t\t\t\t\t\t$('#sd_fundraiser_invitation_pdf').on('click', function (e) {\n\t\t\t\t\t\t\t\tbounce('?page=print&fundraiser_event_pdf=' + selected_session_id, '_blank');\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// community pickup buttons\n\t\t\t\t\t\t\t$('#sd_pick_up_event_invitation_pdf').on('click', function (e) {\n\n\t\t\t\t\t\t\t\tbounce('?page=print&remote_pickup_private_event_pdf=' + selected_session_id, '_blank');\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$('#sd_resend_hostess_email').on('click', function (e) {\n\n\t\t\t\t\t\t\t\tresend_dream_taste_notification();\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\tif (strError != 'abort')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\tmessage: 'An unexpected error has occurred, error message: ' + strError + '. If you continue to experience this issue please contact support.'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tview_session = false;\n\t\t\t\tvar days_menu = $(this).data('menu_id');\n\n\t\t\t\tvar submitted_date = $(this).data('date');\n\t\t\t\twindow.booking_query = $.ajax({\n\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\ttimeout: 120000,\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\t\t\top: 'date_details',\n\t\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\t\tdate: submitted_date\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// if getting order details, show it after\n\t\t\t\t\t\t\tvar order_details = false;\n\t\t\t\t\t\t\t// only check if not switching between day and session view\n\t\t\t\t\t\t\tif (!getQueryVariable('session'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\torder_details = getQueryVariable('order');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar current_menu_id = selected_menu_id;\n\t\t\t\t\t\t\tselected_menu_id = days_menu;\n\n\t\t\t\t\t\t\tset_selected_date(submitted_date, current_menu_id, selected_menu_id);\n\n\t\t\t\t\t\t\t// cancel timer\n\t\t\t\t\t\t\t$.doTimeout('booked_guests_table_timer');\n\t\t\t\t\t\t\tupdate_page_url('?page=' + getQueryVariable('page') + '&day=' + selected_date);\n\n\t\t\t\t\t\t\t// update session tools\n\t\t\t\t\t\t\tupdate_session_tool_links();\n\n\t\t\t\t\t\t\t// update title\n\t\t\t\t\t\t\t$('#selected_day').html(json.date_info.date_dtf_verbose_date);\n\t\t\t\t\t\t\t$('#selected_date_link').attention();\n\n\t\t\t\t\t\t\t// Hide session specific details\n\t\t\t\t\t\t\t$('#session_details_container, #selected_session').hide();\n\n\t\t\t\t\t\t\t// show guest list\n\t\t\t\t\t\t\tif (json.booking_details.length)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#booked_guests_table').html(json.booking_details);\n\t\t\t\t\t\t\t\t// fill date details container\n\t\t\t\t\t\t\t\t$('#day_details_table_div').html(json.date_details);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#booked_guests_table').html('<div class=\"no_day_sessions\">No sessions for this day.</div>');\n\t\t\t\t\t\t\t\t// fill date details container\n\t\t\t\t\t\t\t\t$('#day_details_table_div').html('<div class=\"no_day_sessions\">No sessions for this day.</div>');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// show day details container\n\t\t\t\t\t\t\t$('#day_details_container').show();\n\n\t\t\t\t\t\t\t// register click handlers\n\t\t\t\t\t\t\tregister_booking_click_handlers();\n\n\t\t\t\t\t\t\t// show order details\n\t\t\t\t\t\t\tif (order_details)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('[data-view_order_details][data-order_id=\"' + order_details + '\"]').trigger('click');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// clicking session time will link to that session\n\t\t\t\t\t\t\t$('[id^=\"gd_title-\"]').on('click', function (e) {\n\n\t\t\t\t\t\t\t\t$('#session-' + $(this).data('session_id')).scrollToTarget($('#session_selector'));\n\n\t\t\t\t\t\t\t\t$.scrollTo($('body'), 100);\n\n\t\t\t\t\t\t\t}).hover(function () {\n\n\t\t\t\t\t\t\t\t$(this).addClass('hover');\n\n\t\t\t\t\t\t\t}, function () {\n\n\t\t\t\t\t\t\t\t$(this).removeClass('hover');\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\tif (strError != 'abort')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\tmessage: 'An unexpected error has occurred, error message: ' + strError + '. If you continue to experience this issue please contact support.'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t});\n}\n\nfunction update_page_url(page_url)\n{\n\t// update url\n\thistoryPush({url: page_url});\n\t// update title link\n\t$('#selected_date_link').prop('href', page_url);\n}\n\nfunction handle_pp_opted_out()\n{\n\t$('.pp_opted_out').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\te.preventDefault();\n\n\t\t\tvar bounce_to = $(this).prop('href');\n\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Guest has opted out',\n\t\t\t\tmessage: 'The guest has previously opted out, are you sure you wish to continue?',\n\t\t\t\tmodal: true,\n\t\t\t\tconfirm: function () {\n\n\t\t\t\t\tbounce(bounce_to);\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n}\n\nfunction resend_dream_taste_notification()\n{\n\tdd_message({\n\t\ttitle: 'Send notice confirmation',\n\t\tmessage: 'Are you sure you wish to resend the host email notification?',\n\t\tmodal: true,\n\t\tconfirm: function () {\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 20000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\t\top: 'resend_dream_taste_email',\n\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\tsession_id: selected_session_id\n\t\t\t\t},\n\t\t\t\tsuccess: function (json) {\n\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\ttitle: 'Send notice confirmation',\n\t\t\t\t\t\t\tmessage: 'Email notification has been resent to the session host.'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction handle_booking_no_show()\n{\n\t$('[id^=\"gd_noshow-\"]').each(function (e) {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tvar state = this.checked ? 'yes' : 'no';\n\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 20000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_no_show_state',\n\t\t\t\t\tbid: $(this).data('booking_id'),\n\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\tstate: state\n\t\t\t\t},\n\t\t\t\tsuccess: function (json) {\n\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t{\n\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\tresponse = 'Unexpected error';\n\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t});\n}\n\nfunction handle_food_testing_recipe()\n{\n\t$('[id^=\"food_testing-\"]').each(function (e) {\n\n\t\t$(this).on('change', function (e) {\n\n\t\t\tvar selector_elem = $(this);\n\t\t\tvar user_id = $(this).data('user_id');\n\t\t\tvar session_id = $(this).data('session_id');\n\t\t\tvar menu_id = $(this).data('menu_id');\n\t\t\tvar survey_name = $('option:selected', $(this)).text();\n\t\t\tvar survey_id = $(this).val().split(\"-\")[0];\n\t\t\tvar survey_size = $(this).val().split(\"-\")[1];\n\n\t\t\tif ($(this).val() == '0')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Confirm',\n\t\t\t\tmessage: 'Are you sure you wish to assign <span style=\"font-weight: bold;\">' + survey_name + '</span> to this guest? The testing item is <span style=\"font-weight: bold;\">not</span> editable once assigend and the guest will immediately receive an email upon confirmation which will include testing instructions.',\n\t\t\t\tnoOk: true,\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: {\n\t\t\t\t\t'Confirm': function () {\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\t\t\t\t\top: 'assign_test_recipe',\n\t\t\t\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\t\t\t\tsession_id: session_id,\n\t\t\t\t\t\t\t\tmenu_id: menu_id,\n\t\t\t\t\t\t\t\tsurvey_id: survey_id,\n\t\t\t\t\t\t\t\tsurvey_size: survey_size\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('[data-food_testing_select_user_id=\"' + json.user_id + '\"]').text(survey_name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$(this).remove();\n\n\t\t\t\t\t},\n\t\t\t\t\t'Cancel': function () {\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t$(selector_elem).val(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n}\n\nfunction handle_guest_account_notes()\n{\n\t$('[id^=\"gd_guest_account_note_button-\"]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tbooking_id = $(this).data('booking_id');\n\t\t\tuser_id = $(this).data('user_id');\n\t\t\tdo_op = 'get';\n\t\t\tguest_note = '';\n\n\t\t\tif ($(this).data('edit_mode') == true)\n\t\t\t{\n\t\t\t\tdo_op = 'save';\n\n\t\t\t\tguest_note = $('#gd_guest_account_note-' + booking_id + ' > textarea').val();\n\t\t\t}\n\n\t\t\tif (do_op == 'get')\n\t\t\t{\n\t\t\t\tget_user_pref('USER_ACCOUNT_NOTE', user_id, function (json) {\n\n\t\t\t\t\tvar textarea_elem = $('<textarea></textarea>').addClass('form-control').val((json.guest_preferences[user_id]['USER_ACCOUNT_NOTE'].value ? json.guest_preferences[user_id]['USER_ACCOUNT_NOTE'].value : \"\")).on('keyup', function (e) {\n\n\t\t\t\t\t\tif ($(this).val() != strip_tags($(this).val()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$(this).val(strip_tags($(this).val()));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\t$('#gd_guest_account_note-' + booking_id).addClass('guest_note_edit').html(textarea_elem);\n\n\t\t\t\t\t$('#gd_guest_account_note_button-' + booking_id).data('edit_mode', true).html('Save Note');\n\n\t\t\t\t\t$('#gd_guest_account_note_cancel_button-' + booking_id).show();\n\n\t\t\t\t\t$('#gd_guest_account_note_cancel_button-' + booking_id).data('user_data_value', (json.guest_preferences[user_id]['USER_ACCOUNT_NOTE'].value ? json.guest_preferences[user_id]['USER_ACCOUNT_NOTE'].value : \"\")).on('click', function (e) {\n\n\t\t\t\t\t\t$('#gd_guest_account_note-' + $(this).data('booking_id')).removeClass('guest_note_edit').html($(this).data('user_data_value'));\n\n\t\t\t\t\t\t$('#gd_guest_account_note_button-' + $(this).data('booking_id')).data('edit_mode', false).html('Account Notes');\n\n\t\t\t\t\t\t$(this).hide();\n\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Confirm',\n\t\t\t\t\tmessage: \"This note is viewable and editable by the guest in their preferences. Are you sure you wish to modify the guest's account note?\",\n\t\t\t\t\tnoOk: true,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t'Confirm': function () {\n\t\t\t\t\t\t\t$(this).remove();\n\n\t\t\t\t\t\t\tset_user_pref('USER_ACCOUNT_NOTE', guest_note, user_id);\n\n\t\t\t\t\t\t\t$('#gd_guest_account_note-' + booking_id).removeClass('guest_note_edit').html(nl2br(guest_note));\n\n\t\t\t\t\t\t\t$('#gd_guest_account_note_cancel_button-' + booking_id).hide();\n\n\t\t\t\t\t\t\t$('#gd_guest_account_note_button-' + booking_id).data('edit_mode', false).html('Account Notes');\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Cancel': function () {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t});\n\n\t});\n}\n\nfunction handle_admin_carryover_notes()\n{\n\t// handle button for stores that have hidden carryover notes\n\t$('[id^=\"gd_show_guest_note-\"]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tvar booking_id = $(this).data('booking_id');\n\n\t\t\tvar button_obj = this;\n\n\t\t\t$(button_obj).hide();\n\n\t\t\t$('#gd_guest_note-' + booking_id).show();\n\n\t\t\t$.doTimeout('show_guest_note_timer-' + booking_id, 10000, function () {\n\n\t\t\t\t$(button_obj).show();\n\n\t\t\t\t$('#gd_guest_note-' + booking_id).hide();\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n\t$('[id^=\"gd_guest_note_button-\"]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\thide_carryover_notes = $(this).data('hide_carryover_notes');\n\n\t\t\tbooking_id = $(this).data('booking_id');\n\t\t\tuser_id = $(this).data('user_id');\n\t\t\tdo_op = 'get';\n\t\t\tguest_note = '';\n\n\t\t\tif ($(this).data('edit_mode') == true)\n\t\t\t{\n\t\t\t\tdo_op = 'save';\n\n\t\t\t\tguest_note = $('#gd_guest_note-' + booking_id + ' > textarea').val();\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 20000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\t\top: 'guest_carryover_note',\n\t\t\t\t\t'do': do_op,\n\t\t\t\t\tstore_id: STORE_DETAILS.id,\n\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\tnote: guest_note\n\t\t\t\t},\n\t\t\t\tsuccess: function (json) {\n\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (do_op == 'get')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// handle button for stores that have hidden carryover notes\n\t\t\t\t\t\t\t$.doTimeout('show_guest_note_timer-' + booking_id); //cancel timer\n\t\t\t\t\t\t\t$('#gd_guest_note-' + booking_id).show(); // show notes\n\t\t\t\t\t\t\t$('#gd_show_guest_note-' + booking_id).hide(); // hide button\n\t\t\t\t\t\t\t$('#gd_guest_note-' + booking_id).addClass('guest_note_edit').html('<textarea class=\"form-control\">' + (json.guest_note.user_data_value ? json.guest_note.user_data_value : \"\") + '</textarea>');\n\n\t\t\t\t\t\t\t$('#gd_guest_note_button-' + booking_id).data('edit_mode', true).html('Save Note');\n\n\t\t\t\t\t\t\t$('#gd_guest_note_cancel_button-' + booking_id).data('user_data_value', (json.guest_note.user_data_value ? json.guest_note.user_data_value : \"\")).on('click', function (e) {\n\n\t\t\t\t\t\t\t\t// handle button for stores that have hidden carryover notes\n\t\t\t\t\t\t\t\tif ($(this).data('hide_carryover_notes') === 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t$('#gd_guest_note-' + booking_id).hide(); // hide notes\n\t\t\t\t\t\t\t\t\t$('#gd_show_guest_note-' + booking_id).show(); // hide button\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$('#gd_guest_note-' + $(this).data('booking_id')).removeClass('guest_note_edit').html($(this).data('user_data_value'));\n\n\t\t\t\t\t\t\t\t$('#gd_guest_note_button-' + $(this).data('booking_id')).data('edit_mode', false).html('Admin Carryover');\n\n\t\t\t\t\t\t\t\t$(this).hide();\n\n\t\t\t\t\t\t\t}).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// handle button for stores that have hidden carryover notes\n\t\t\t\t\t\t\tif (hide_carryover_notes === 1 && json.guest_note.user_data_value)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$('#gd_guest_note-' + booking_id).hide(); // hide notes\n\t\t\t\t\t\t\t\t$('#gd_show_guest_note-' + booking_id).show(); // hide button\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$('#gd_guest_note-' + booking_id).removeClass('guest_note_edit').html(nl2br(json.guest_note.user_data_value));\n\n\t\t\t\t\t\t\t$('#gd_guest_note_cancel_button-' + booking_id).hide();\n\n\t\t\t\t\t\t\t$('#gd_guest_note_button-' + booking_id).data('edit_mode', false).html('Admin Carryover');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n}\n\nfunction handle_admin_order_notes()\n{\n\t$('[id^=\"gd_admin_note_button-\"]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tlet unique_id = $(this).data('uid');\n\t\t\tif (typeof unique_id == 'undefined' || unique_id == null || unique_id == '')\n\t\t\t{\n\t\t\t\tunique_id = '';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tunique_id += '-';\n\t\t\t}\n\t\t\tlet buttonName = $(this).data('button_name');\n\t\t\tif (typeof buttonName == 'undefined' || buttonName == null || buttonName == '')\n\t\t\t{\n\t\t\t\tbuttonName = 'Admin Order Note';\n\t\t\t}\n\t\t\tbooking_id = $(this).data('booking_id');\n\t\t\torder_id = $(this).data('order_id');\n\t\t\tuser_id = $(this).data('user_id');\n\t\t\tdo_op = 'get';\n\t\t\tadmin_note = '';\n\n\t\t\tif ($(this).data('edit_mode') == true)\n\t\t\t{\n\t\t\t\tdo_op = 'save';\n\n\t\t\t\tadmin_note = $('#gd_admin_note-' + unique_id + booking_id + ' > textarea').val();\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 20000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\t\top: 'order_admin_note',\n\t\t\t\t\t'do': do_op,\n\t\t\t\t\torder_id: order_id,\n\t\t\t\t\tnote: admin_note\n\t\t\t\t},\n\t\t\t\tsuccess: function (json) {\n\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (do_op == 'get')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$('#gd_admin_note-' + unique_id + booking_id).addClass('admin_note_edit').html('<textarea class=\"form-control\">' + (json.admin_note ? json.admin_note : \"\") + '</textarea>');\n\n\t\t\t\t\t\t\t$('#gd_admin_note_button-' + unique_id + booking_id).data('edit_mode', true).html('Save Note');\n\n\t\t\t\t\t\t\t$('#gd_admin_note_cancel_button-' + unique_id + booking_id).data('admin_note_value', (json.admin_note ? json.admin_note : \"\")).on('click', function (e) {\n\n\t\t\t\t\t\t\t\t$('#gd_admin_note-' + unique_id + $(this).data('booking_id')).removeClass('admin_note_edit').html($(this).data('admin_note_value'));\n\n\t\t\t\t\t\t\t\t$('#gd_admin_note_button-' + unique_id + $(this).data('booking_id')).data('edit_mode', false).html(buttonName);\n\n\t\t\t\t\t\t\t\t$(this).hide();\n\n\t\t\t\t\t\t\t}).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$('#gd_admin_note-' + unique_id + booking_id).removeClass('admin_note_edit').html(nl2br(json.admin_note));\n\n\t\t\t\t\t\t\t$('.multi-populate-admin-note').each(function () {\n\t\t\t\t\t\t\t\t$(this).html(nl2br(json.admin_note));\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$('#gd_admin_note_cancel_button-' + unique_id + booking_id).hide();\n\n\t\t\t\t\t\t\t$('#gd_admin_note_button-' + unique_id + booking_id).data('edit_mode', false).html(buttonName);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n}\n\nfunction handle_reschedule_button()\n{\n\t$('[id^=\"gd_reschedule-\"]').each(function () {\n\n\t\t$(this).css({'cursor': 'pointer'}).on('click', function (e) {\n\n\t\t\tcreate_and_submit_form({\n\t\t\t\tmethod: 'post',\n\t\t\t\taction: '/?page=admin_reschedule',\n\t\t\t\tinput: ({\n\t\t\t\t\t'session_id': $(this).data('session_id'),\n\t\t\t\t\t'original_session_id': $(this).data('session_id'),\n\t\t\t\t\t'store_id': $(this).data('store_id'),\n\t\t\t\t\t'menus': $(this).data('menu_id'),\n\t\t\t\t\t'menu_id': $(this).data('menu_id'),\n\t\t\t\t\t'order_id': $(this).data('order_id'),\n\t\t\t\t\t'back_address': back_path()\n\t\t\t\t})\n\t\t\t});\n\n\t\t});\n\n\t});\n}\n\nfunction handle_booking_row_click()\n{\n\thandle_guest_account_notes();\n\n\thandle_admin_carryover_notes();\n\n\thandle_admin_order_notes();\n\n\thandle_reschedule_button();\n\n\t$('#booked_guests_table tbody.guest').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tif ($(this).hasClass('select_guest'))\n\t\t\t{\n\t\t\t\t$('.select_guest').removeClass('select_guest');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$('.select_guest').removeClass('select_guest');\n\n\t\t\t\t$('#guest_details_tbody_id_' + $(this).data('booking_id')).addClass('select_guest');\n\t\t\t\t$('#order_details_tbody_id_' + $(this).data('booking_id')).addClass('select_guest');\n\t\t\t}\n\t\t\t$('[id^=\"gd_guest_menu-\"]').hide();\n\n\t\t\t$('#gd_guest_menu-' + $(this).data('user_id')).show();\n\n\t\t});\n\n\t});\n\n\t$('[id^=\"gd_guest-\"]').each(function () {\n\n\t\tvar booking_id = $(this).data('booking_id');\n\n\t\t/*\n\t\t * Handle touch events under development\n\t\t * Aug 29, 2014\n\t\t * -- Ryan\n\t\t * ------------------- this -----VVV is a problem\n\t\t $('#gd_guest-' + booking_id +', #gd_guest_menu-' + booking_id).on({\n\t\t touchstart: function(e) {\n\n\t\t e.preventDefault();\n\n\t\t if ($('#gd_guest_menu-' + booking_id).is(':visible'))\n\t\t {\n\t\t $('#gd_guest_menu-' + booking_id).hide();\n\t\t }\n\t\t else\n\t\t {\n\t\t $('#gd_guest_menu-' + booking_id).show();\n\t\t }\n\n\t\t },\n\t\t touchend: function(e) {\n\n\t\t e.preventDefault();\n\n\t\t },\n\t\t mouseenter: function(e) {\n\n\t\t // cancel timeout\n\t\t $.doTimeout('guest_menu_timer_hide-' + booking_id);\n\n\t\t // short timeout to prevent menus from popping up when moused over\n\t\t $.doTimeout( 'guest_menu_timer_show-' + booking_id, 100, function() {\n\n\t\t $('#gd_guest_menu-' + booking_id).show();\n\n\t\t });\n\n\t\t },\n\t\t mouseleave: function(e) {\n\n\t\t // cancel timeout\n\t\t $.doTimeout('guest_menu_timer_show-' + booking_id);\n\n\t\t // short timeout to prevent menus from disappearing when moused away\n\t\t $.doTimeout( 'guest_menu_timer_hide-' + booking_id, 150, function() {\n\n\t\t $('#gd_guest_menu-' + booking_id).hide();\n\n\t\t });\n\n\t\t }\n\t\t });\n\t\t */\n\n\t\t$('#gd_guest-' + booking_id + ', #gd_guest_menu-' + booking_id).hover(function () {\n\n\t\t\t// cancel timeout\n\t\t\t$.doTimeout('guest_menu_timer_hide-' + booking_id);\n\n\t\t\t// short timeout to prevent menus from popping up when moused over\n\t\t\t$.doTimeout('guest_menu_timer_show-' + booking_id, 100, function () {\n\n\t\t\t\t$('#gd_guest_menu-' + booking_id).show();\n\n\t\t\t});\n\n\t\t}, function () {\n\n\t\t\t// cancel timeout\n\t\t\t$.doTimeout('guest_menu_timer_show-' + booking_id);\n\n\t\t\t// short timeout to prevent menus from disappearing when moused away\n\t\t\t$.doTimeout('guest_menu_timer_hide-' + booking_id, 150, function () {\n\n\t\t\t\t$('#gd_guest_menu-' + booking_id).hide();\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n\thandle_cancel_order();\n\thandle_cancel_order_delivered();\n\thandle_delete_saved_order();\n}\n\nfunction handle_delete_saved_order_delivered()\n{\n\t$('[id^=\"gd_delete_delivered_order-\"]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tvar session_id = $(this).data('session_id');\n\t\t\tvar order_id = $(this).data('order_id');\n\t\t\tvar store_id = $(this).data('store_id');\n\t\t\tvar user_id = $(this).data('user_id');\n\t\t\tvar bounce_to = $(this).data('bounce');\n\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Confirm Delete Saved Order',\n\t\t\t\tmessage: \"Are you sure you want to delete this saved order?\",\n\t\t\t\tconfirm: function () {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'admin_order_mgr_processor_delivered',\n\t\t\t\t\t\t\tstore_id: store_id,\n\t\t\t\t\t\t\top: 'delete_saved_order',\n\t\t\t\t\t\t\tsession_id: session_id,\n\t\t\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\t\t\torder_id: order_id\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (typeof bounce_to == 'undefined' || bounce_to == \"\")\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbounce_to = window.location.href;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbounce(bounce_to);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif (json.doRefresh == true)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Problem Deleting Saved Order',\n\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message,\n\t\t\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\t\t\t\t'Refresh': function () {\n\t\t\t\t\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t\t\t\t\t\tbounce(window.location.href);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n\n}\n\nfunction handle_delete_saved_order()\n{\n\t$('[id^=\"gd_delete_order-\"]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tvar session_id = $(this).data('session_id');\n\t\t\tvar order_id = $(this).data('order_id');\n\t\t\tvar store_id = $(this).data('store_id');\n\t\t\tvar user_id = $(this).data('user_id');\n\t\t\tvar bounce_to = $(this).data('bounce');\n\n\t\t\tdd_message({\n\t\t\t\ttitle: 'Confirm Delete Saved Order',\n\t\t\t\tmessage: \"Are you sure you want to delete this saved order?\",\n\t\t\t\tconfirm: function () {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'admin_order_mgr_processor',\n\t\t\t\t\t\t\tstore_id: store_id,\n\t\t\t\t\t\t\top: 'delete_saved_order',\n\t\t\t\t\t\t\tsession_id: session_id,\n\t\t\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\t\t\torder_id: order_id\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (typeof bounce_to == 'undefined' || bounce_to == \"\")\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tbounce_to = window.location.href;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbounce(bounce_to);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif (json.doRefresh == true)\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Problem Deleting Saved Order',\n\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message,\n\t\t\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\t\t\t\t'Refresh': function () {\n\t\t\t\t\t\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t\t\t\t\t\t\tbounce(window.location.href);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n\n}\n\nfunction validateKey(evt)\n{\n\tevt = (evt) ? evt : ((event) ? event : null);\n\tif (evt)\n\t{\n\t\tvar charCode = (evt.charCode || evt.charCode == 0) ? evt.charCode : ((evt.keyCode) ? evt.keyCode : evt.which);\n\n\t\tif (charCode > 13 && (charCode < 48 || charCode > 57))\n\t\t{\n\t\t\t//alert(\"Only whole numbers are allowed.\");\n\t\t\tif (charCode == 46)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (evt.returnValue)\n\t\t\t{\n\t\t\t\tevt.returnValue = false;\n\t\t\t}\n\t\t\telse if (evt.preventDefault)\n\t\t\t{\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction validateAmount(obj, limit)\n{\n\tif (isNaN(obj.value))\n\t{\n\t\tobj.value = 0.00;\n\t}\n\n\tif (obj.value > limit)\n\t{\n\t\tobj.value = limit;\n\t}\n}\n\nfunction handle_cancel_order()\n{\n\t$('[id^=\"gd_cancel_order-\"]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tvar booking_id = $(this).data('booking_id');\n\t\t\tvar session_id = $(this).data('session_id');\n\t\t\tvar order_id = $(this).data('order_id');\n\t\t\tvar store_id = $(this).data('store_id');\n\t\t\tvar user_id = $(this).data('user_id');\n\t\t\tvar bounce_to = $(this).data('bounce');\n\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 20000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_order_mgr_processor',\n\t\t\t\t\top: 'cancel_preflight',\n\t\t\t\t\tstore_id: store_id,\n\t\t\t\t\tsession_id: session_id,\n\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\torder_id: order_id\n\t\t\t\t},\n\t\t\t\tsuccess: function (json, status) {\n\t\t\t\t\tif (json.processor_success && json.data)\n\t\t\t\t\t{\n\n\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\ttitle: 'Cancel Order?',\n\t\t\t\t\t\t\tmessage: json.data,\n\t\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\t\theight: 480,\n\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\topen: function () {\n\t\t\t\t\t\t\t\t$(\"#order_admin_notes_cancel\").on('keyup', function (e) {\n\n\t\t\t\t\t\t\t\t\tif ($(this).val() != strip_tags($(this).val()))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$(this).val(strip_tags($(this).val()));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcanConfirm: function () {\n\t\t\t\t\t\t\t\tvar reason = $(\"#cancellation_reason\").val();\n\t\t\t\t\t\t\t\tif (reason == \"\")\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\tdiv_id: 'Uneek262020',\n\t\t\t\t\t\t\t\t\t\tmessage: \"Please select a reason for cancelling\"\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tconfirm: function (json, status) {\n\n\t\t\t\t\t\t\t\tvar paymentList = {};\n\t\t\t\t\t\t\t\t$(\"#cancel_parent :input\").each(function () {\n\n\t\t\t\t\t\t\t\t\tpaymentList[this.id] = $(this).val();\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tvar order_notes = $(\"#order_admin_notes_cancel\").val().trim();\n\t\t\t\t\t\t\t\tvar reason = $(\"#cancellation_reason\").val();\n\t\t\t\t\t\t\t\tvar declined_MFY = $('#declined_MFY').is(':checked');\n\t\t\t\t\t\t\t\tvar declined_Reschedule = $('#declined_to_reschedule').is(':checked');\n\t\t\t\t\t\t\t\tvar suppress_cancel_email = $('#suppress_cancel_email').is(':checked');\n\n\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\ttitle: 'Cancelling order',\n\t\t\t\t\t\t\t\t\tmessage: '<img src=\"' + PATH.image_admin + '/style/throbber_circle.gif\" class=\"img_valign\" alt=\"Processing\" /> Processing order cancellation...',\n\t\t\t\t\t\t\t\t\tdiv_id: 'cancel_order',\n\t\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\t\t\t\t\topen: function (event, ui) {\n\t\t\t\t\t\t\t\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tprocessor: 'admin_order_mgr_processor',\n\t\t\t\t\t\t\t\t\t\top: 'cancel',\n\t\t\t\t\t\t\t\t\t\tstore_id: store_id,\n\t\t\t\t\t\t\t\t\t\tsession_id: session_id,\n\t\t\t\t\t\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\t\t\t\t\t\torder_id: order_id,\n\t\t\t\t\t\t\t\t\t\tpaymentList: paymentList,\n\t\t\t\t\t\t\t\t\t\torder_notes: order_notes,\n\t\t\t\t\t\t\t\t\t\treason: reason,\n\t\t\t\t\t\t\t\t\t\tdeclined_MFY: declined_MFY,\n\t\t\t\t\t\t\t\t\t\tdeclined_Reschedule: declined_Reschedule,\n\t\t\t\t\t\t\t\t\t\tsuppress_cancel_email: suppress_cancel_email\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Order was Canceled',\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.data,\n\t\t\t\t\t\t\t\t\t\t\t\tdiv_id: 'cancel_order',\n\t\t\t\t\t\t\t\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\t\t\t\t\t\t\topen: function (event, ui) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"OK\": function () {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (typeof bounce_to != 'undefined')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbounce(bounce_to);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbounce(removeQueryVariable('order', window.location.href));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tmessage: response\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t});\n}\n\nfunction handle_cancel_order_delivered()\n{\n\t$('[id^=\"gd_cancel_delivered_order-\"]').each(function () {\n\n\t\t$(this).on('click', function (e) {\n\n\t\t\tvar session_id = $(this).data('session_id');\n\t\t\tvar order_id = $(this).data('order_id');\n\t\t\tvar store_id = $(this).data('store_id');\n\t\t\tvar user_id = $(this).data('user_id');\n\t\t\tvar bounce_to = $(this).data('bounce');\n\n\t\t\t$.ajax({\n\t\t\t\turl: 'ddproc.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 20000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tprocessor: 'admin_order_mgr_processor_delivered',\n\t\t\t\t\top: 'cancel_preflight',\n\t\t\t\t\tstore_id: store_id,\n\t\t\t\t\tsession_id: session_id,\n\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\torder_id: order_id\n\t\t\t\t},\n\t\t\t\tsuccess: function (json, status) {\n\t\t\t\t\tif (json.processor_success && json.data)\n\t\t\t\t\t{\n\n\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\ttitle: 'Cancel Order?',\n\t\t\t\t\t\t\tmessage: json.data,\n\t\t\t\t\t\t\twidth: 700,\n\t\t\t\t\t\t\theight: 480,\n\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\topen: function () {\n\t\t\t\t\t\t\t\t$(\"#order_admin_notes_cancel\").on('keyup', function (e) {\n\n\t\t\t\t\t\t\t\t\tif ($(this).val() != strip_tags($(this).val()))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t$(this).val(strip_tags($(this).val()));\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcanConfirm: function () {\n\t\t\t\t\t\t\t\tvar reason = $(\"#cancellation_reason\").val();\n\t\t\t\t\t\t\t\tif (reason == \"\")\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\tdiv_id: 'Uneek262020',\n\t\t\t\t\t\t\t\t\t\tmessage: \"Please select a reason for cancelling\"\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tconfirm: function (json, status) {\n\n\t\t\t\t\t\t\t\tvar paymentList = {};\n\t\t\t\t\t\t\t\t$(\"#cancel_parent :input\").each(function () {\n\n\t\t\t\t\t\t\t\t\tpaymentList[this.id] = $(this).val();\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tvar order_notes = $(\"#order_admin_notes_cancel\").val().trim();\n\t\t\t\t\t\t\t\tvar reason = $(\"#cancellation_reason\").val();\n\t\t\t\t\t\t\t\tvar declined_MFY = $('#declined_MFY').is(':checked');\n\t\t\t\t\t\t\t\tvar declined_Reschedule = $('#declined_to_reschedule').is(':checked');\n\t\t\t\t\t\t\t\tvar suppress_email = $('#suppress_reschedule_email').is(':checked');\n\n\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\ttitle: 'Cancelling order',\n\t\t\t\t\t\t\t\t\tmessage: '<img src=\"' + PATH.image_admin + '/style/throbber_circle.gif\" class=\"img_valign\" alt=\"Processing\" /> Processing order cancellation...',\n\t\t\t\t\t\t\t\t\tdiv_id: 'cancel_order',\n\t\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\t\t\t\t\topen: function (event, ui) {\n\t\t\t\t\t\t\t\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tprocessor: 'admin_order_mgr_processor_delivered',\n\t\t\t\t\t\t\t\t\t\top: 'cancel',\n\t\t\t\t\t\t\t\t\t\tstore_id: store_id,\n\t\t\t\t\t\t\t\t\t\tsession_id: session_id,\n\t\t\t\t\t\t\t\t\t\tuser_id: user_id,\n\t\t\t\t\t\t\t\t\t\torder_id: order_id,\n\t\t\t\t\t\t\t\t\t\tpaymentList: paymentList,\n\t\t\t\t\t\t\t\t\t\torder_notes: order_notes,\n\t\t\t\t\t\t\t\t\t\treason: reason,\n\t\t\t\t\t\t\t\t\t\tdeclined_MFY: declined_MFY,\n\t\t\t\t\t\t\t\t\t\tdeclined_Reschedule: declined_Reschedule,\n\t\t\t\t\t\t\t\t\t\tsuppress_email: suppress_email\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Order was Canceled',\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.data,\n\t\t\t\t\t\t\t\t\t\t\t\tdiv_id: 'cancel_order',\n\t\t\t\t\t\t\t\t\t\t\t\tcloseOnEscape: false,\n\t\t\t\t\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\t\t\t\t\tnoOk: true,\n\t\t\t\t\t\t\t\t\t\t\t\topen: function (event, ui) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).parent().find('.ui-dialog-titlebar-close').hide();\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"OK\": function () {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (typeof bounce_to != 'undefined')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbounce(bounce_to);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbounce(removeQueryVariable('order', window.location.href));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\t\t\t\t\tmessage: response\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdd_message({\n\t\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t\t\t\tdd_message({\n\t\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\t\tmessage: response\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t});\n}\n\nfunction handle_session_tools()\n{\n\t// session tool suppress fastlane cookie\n\tif ($.totalStorage('suppress_fastlane_labels') != null)\n\t{\n\t\tsuppress_fastlane_labels = $.totalStorage('suppress_fastlane_labels');\n\t\t$('#suppress_fastlane_labels').prop('checked', !suppress_fastlane_labels);\n\n\t}\n\n\t// session tool suppress fastlane click\n\t$('#suppress_fastlane_labels').on('click', function (e) {\n\n\t\tif ($(this).is(':checked'))\n\t\t{\n\t\t\t$.totalStorage('suppress_fastlane_labels', false);\n\t\t\tsuppress_fastlane_labels = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$.totalStorage('suppress_fastlane_labels', true);\n\t\t\tsuppress_fastlane_labels = true;\n\t\t}\n\n\t\tupdate_session_tool_links();\n\n\t});\n\t// Dashboard Snapshot\n\t$('#ds_goal_tracking').on('click', function (e) {\n\n\t\tbounce('/?page=admin_reports_goal_management_v2&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path());\n\n\t});\n\n\t$('#ds_trending').on('click', function (e) {\n\n\t\tbounce('/?page=admin_reports_trending_menu_based&date=' + selected_date + '&store=' + STORE_DETAILS.id + '&back=' + back_path());\n\n\t});\n\n\t$('#ds_dashboard').on('click', function (e) {\n\n\t\tbounce('/?page=admin_dashboard_menu_based&override_month=' + selected_date + '&store=' + STORE_DETAILS.id + '&back=' + back_path());\n\n\t});\n\n\t// Session Controls\n\t$('#sd_edit_session').on('click', function (e) {\n\n\t\tif (view_session == true)\n\t\t{\n\t\t\tbounce('/?page=admin_edit_session&session=' + selected_session_id + '&back=' + back_path());\n\t\t}\n\n\t});\n\t// Session Controls\n\t$('#sd_email_session').on('click', function (e) {\n\n\t\tif (view_session == true)\n\t\t{\n\t\t\tbounce('/?page=admin_email&session=' + selected_session_id + '&back=' + back_path());\n\t\t}\n\n\t});\n\n\t$('#sd_publish_state').on('click', function (e) {\n\n\t\tif (view_session == true)\n\t\t{\n\t\t\tstate = $(this).data('session_publish_state');\n\n\t\t\tif (state == 'PUBLISHED')\n\t\t\t{\n\t\t\t\tnew_state = 'Close';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnew_state = 'Open';\n\t\t\t}\n\n\t\t\tdd_message({\n\t\t\t\ttitle: new_state + ' session confirmation',\n\t\t\t\tmessage: 'Are you sure you wish to <span style=\"font-weight: bold;\">' + new_state + '</span> this session?',\n\t\t\t\tmodal: true,\n\t\t\t\tconfirm: function () {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: 'ddproc.php',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'admin_fadmin_home',\n\t\t\t\t\t\t\top: 'session_publish_state',\n\t\t\t\t\t\t\tsession_id: selected_session_id,\n\t\t\t\t\t\t\topen_close_submit: new_state\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\tif (json.processor_success)\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t$('#session-' + selected_session_id).scrollToTarget($('#session_selector'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t});\n\t// Session Controls\n\t$('#sd_session_meta').on('click', function (e) {\n\n\t\t$('.session_meta').toggle();\n\n\t\t$('#session_details_text').toggleClass('session_details_text');\n\n\t});\n\n\t// Day Controls\n\t$('#dd_create_session').on('click', function (e) {\n\n\t\tif (view_session != true)\n\t\t{\n\t\t\tbounce('/?page=admin_create_session&date=' + selected_date + '&menu=' + selected_menu_id + '&back=' + back_path());\n\t\t}\n\n\t});\n\n}\n\nfunction update_session_tool_links()\n{\n\tif (view_session == true)\n\t{\n\t\t$('#st_customer_receipt').prop('href', '/?page=admin_order_details_view_all&customer_print_view=1&session_id=' + selected_session_id + '&menuid=' + selected_menu_id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_franchise_receipt').prop('href', '/?page=admin_order_details_view_all&session_id=' + selected_session_id + '&menuid=' + selected_menu_id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_entree_summary').prop('href', '/?page=admin_reports_select_multi_session&query_submit=1&report_id=2&printer=1&pickSession=2&session_id=' + selected_session_id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_side_dish_report').prop('href', '/?page=admin_order_details_view_all&issidedish=1&session_id=' + selected_session_id + '&menuid=' + selected_menu_id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_fast_lane_report').prop('href', '/?page=admin_order_details_view_all&ispreassembled=1&session_id=' + selected_session_id + '&menuid=' + selected_menu_id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_dream_rewards').prop('href', '/?page=admin_reports_dream_rewards_for_session&session_id=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&menuid=' + selected_menu_id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_future_orders').prop('href', '/?page=admin_order_details_view_all_future&session_id=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_session_goal_sheet_print').prop('href', '/?page=admin_reports_goal_tracking&session_id=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&report_submit=true&print=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_session_goal_sheet_xls').prop('href', '/?page=admin_reports_goal_tracking&export=xlsx&hideheaders=true&csvfilename=SessionGoalSheet&session_id=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&report_submit=true&back=' + back_path());\n\t\t$('#st_print_labels').prop('href', '/?page=admin_reports_customer_menu_item_labels&session_id=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&menuid=' + selected_menu_id + '&back=' + back_path() + '&suppressFastlane=' + suppress_fastlane_labels).prop('target', '_blank');\n\t\t$('#st_print_labels_w_breaks').prop('href', '/?page=admin_reports_customer_menu_item_labels&session_id=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&menuid=' + selected_menu_id + '&back=' + back_path() + '&break=1&suppressFastlane=' + suppress_fastlane_labels).prop('target', '_blank');\n\t\t$('#st_print_labels_by_dinner').prop('href', '/?page=admin_reports_customer_menu_item_labels&session_id=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&menuid=' + selected_menu_id + '&order_by=dinner&suppressFastlane=' + suppress_fastlane_labels).prop('target', '_blank');\n\t\t$('#st_print_enrollment_forms').prop('href', '/?page=admin_user_plate_points&session_id=' + selected_session_id + '&print_sessions_forms=true').prop('target', '_blank');\n\t\t$('#st_plate_points_status_and_rewards_report').prop('href', '/?page=admin_reports_points_status_and_rewards&session_id=' + selected_session_id + '&back=' + back_path());\n\t\t$('#st_customer_menu_core').prop('href', '/?page=admin_session_tools_printing&do=print&session=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&core=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_core_current').prop('href', '/?page=admin_session_tools_printing&do=print&session=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&core=true&cur=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_freezer').prop('href', '/?page=admin_session_tools_printing&do=print&session=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&freezer=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_nutrition').prop('href', '/?page=admin_session_tools_printing&do=print&session=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&nutrition=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_core_freezer').prop('href', '/?page=admin_session_tools_printing&do=print&session=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&core=true&freezer=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_core_freezer_nutrition').prop('href', '/?page=admin_session_tools_printing&do=print&session=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&core=true&freezer=true&nutrition=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_daily_boxes_shipped').prop('href', '/?page=admin_reports_delivered_daily_boxes&type=shipping&do=print&session=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_daily_boxes_delivered').prop('href', '/?page=admin_reports_delivered_daily_boxes&type=delivering&do=print&session=' + selected_session_id + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\n\t}\n\telse\n\t{\n\t\t$('#st_customer_receipt').prop('href', '/?page=admin_order_details_view_all_multi&customer_print_view=1&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_franchise_receipt').prop('href', '/?page=admin_order_details_view_all_multi&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_entree_summary').prop('href', '/?page=admin_reports_select_multi_session&query_submit=1&report_date=' + selected_date + '&report_id=1&printer=1&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_side_dish_report').prop('href', '/?page=admin_order_details_view_all_multi&issidedish=1&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_fast_lane_report').prop('href', '/?page=admin_order_details_view_all_multi&ispreassembled=1&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_dream_rewards').prop('href', '/?page=admin_reports_dream_rewards_for_session_multi&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&menuid=' + selected_menu_id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_future_orders').prop('href', '/?page=admin_order_details_view_all_future_multi&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_session_goal_sheet_print').prop('href', '/?page=admin_reports_goal_tracking&multi_session=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&report_submit=true&print=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_session_goal_sheet_xls').prop('href', '/?page=admin_reports_goal_tracking&export=xlsx&hideheaders=true&csvfilename=SessionGoalSheetSummary&multi_session=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&report_submit=true&back=' + back_path());\n\t\t$('#st_print_labels').prop('href', '/?page=admin_reports_customer_menu_item_labels_multi&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&menuid=' + selected_menu_id + '&back=' + back_path() + '&suppressFastlane=' + suppress_fastlane_labels).prop('target', '_blank');\n\t\t$('#st_print_labels_w_breaks').prop('href', '/?page=admin_reports_customer_menu_item_labels_multi&labels_per_sheet=4&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&menuid=' + selected_menu_id + '&back=' + back_path() + '&break=1&suppressFastlane=' + suppress_fastlane_labels).prop('target', '_blank');\n\t\t$('#st_print_labels_by_dinner').prop('href', '/?page=admin_reports_customer_menu_item_labels_multi&labels_per_sheet=4&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&menuid=' + selected_menu_id + '&order_by=dinner&back=' + back_path() + '&suppressFastlane=' + suppress_fastlane_labels).prop('target', '_blank');\n\t\t$('#st_print_enrollment_forms').prop('href', '/?page=admin_user_plate_points&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&print_days_forms=true').prop('target', '_blank');\n\t\t$('#st_plate_points_status_and_rewards_report').prop('href', '/?page=admin_reports_points_status_and_rewards&report_date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path());\n\t\t$('#st_customer_menu_core').prop('href', '/?page=admin_session_tools_printing&do=print&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&core=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_core_current').prop('href', '/?page=admin_session_tools_printing&do=print&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&core=true&cur=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_freezer').prop('href', '/?page=admin_session_tools_printing&do=print&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&freezer=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_nutrition').prop('href', '/?page=admin_session_tools_printing&do=print&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&nutrition=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_core_freezer').prop('href', '/?page=admin_session_tools_printing&do=print&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&core=true&freezer=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_customer_menu_core_freezer_nutrition').prop('href', '/?page=admin_session_tools_printing&do=print&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&core=true&freezer=true&nutrition=true&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_daily_boxes_shipped').prop('href', '/?page=admin_reports_delivered_daily_boxes&type=shipping&do=print&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t\t$('#st_daily_boxes_delivered').prop('href', '/?page=admin_reports_delivered_daily_boxes&type=delivering&do=print&date=' + selected_date + '&store_id=' + STORE_DETAILS.id + '&back=' + back_path()).prop('target', '_blank');\n\t}\n\n\t$('#st_finishing_touch_pick_sheet').prop('href', '/?page=admin_finishing_touch_printable_form&store_id=' + STORE_DETAILS.id + '&menu_id=' + selected_menu_id + '&back=' + back_path()).prop('target', '_blank');\n\t$('#st_print_generic_labels').prop('href', '/?page=admin_reports_customer_menu_item_labels&store_id=' + STORE_DETAILS.id + '&interface=1&menuid=' + selected_menu_id + '&back=' + back_path()).prop('target', '_blank');\n}\n\nfunction handle_guest_search()\n{\n\t$(document).on('click', '#gs_search_go', function (e) {\n\n\t\tcreate_and_submit_form({\n\t\t\tmethod: 'get',\n\t\t\taction: 'main.php',\n\t\t\tinput: ({\n\t\t\t\t'page': 'admin_list_users',\n\t\t\t\t'search_type': $('#gs_search_type').val(),\n\t\t\t\t'all_stores': ($('#gs_search_all').is(':checked') ? 1 : 0),\n\t\t\t\t'q': $('#gs_search_value').val(),\n\t\t\t\t'back': back_path()\n\t\t\t})\n\t\t});\n\n\t});\n\n\t$(document).on('change', '#gs_search_type', function (e) {\n\n\t\tmanualSearchTypeChange = true;\n\n\t\t$('#gs_search_value').unmask();\n\n\t\tif ($('#gs_search_type').val() == 'phone')\n\t\t{\n\t\t\t$('#gs_search_value').mask('999-999-9999');\n\t\t}\n\n\t});\n\n\t$(document).on('keyup', '#gs_search_value', function (e) {\n\n\t\tif (e.which == 13)\n\t\t{\n\t\t\t$('#gs_search_go').trigger('click');\n\t\t}\n\n\t\tdetect_guest_search_type();\n\n\t});\n\n}\n\nfunction detect_order_search_type()\n{\n\t// user manually changed search type, don't automatically change it\n\tif (manualOrderSearchTypeChange == true)\n\t{\n\t\treturn;\n\t}\n\n\tvar value = $('#os_search_value').val();\n\n\t// not numeric entry, start with last name\n\tif (!$.isNumeric(value))\n\t{\n\t\t$('#os_search_type').val('confirmation');\n\t}\n\n\t// numeric entry, probably guest id\n\tif ($.isNumeric(value))\n\t{\n\t\t$('#os_search_type').val('id');\n\t}\n\n}\n\nfunction detect_guest_search_type()\n{\n\t// user manually changed search type, don't automatically change it\n\tif (manualSearchTypeChange == true)\n\t{\n\t\treturn;\n\t}\n\n\tvar value = $('#gs_search_value').val();\n\n\t// not numeric entry, start with last name\n\tif (!$.isNumeric(value))\n\t{\n\t\t$('#gs_search_type').val('lastname');\n\t}\n\n\t// numeric entry, probably guest id\n\tif ($.isNumeric(value))\n\t{\n\t\t$('#gs_search_type').val('id');\n\t}\n\n\t// has @ symbol, probably email\n\tif (value.indexOf(\"@\") != -1)\n\t{\n\t\t$('#gs_search_type').val('email');\n\t}\n\n\t// has space, probably first and last name\n\tif (value.indexOf(\" \") != -1)\n\t{\n\t\t$('#gs_search_type').val('firstlast');\n\t}\n}\n\nfunction handle_go_to_today()\n{\n\t$('#go_to_today').on('click', function (e) {\n\n\t\tgo_to_today();\n\n\t});\n}\n\nfunction go_to_today()\n{\n\tinit_go_to_today = true;\n\n\tdate_select = get_todays_date().slice(0, -3);\n\n\tif (selected_agenda_month != undefined && selected_agenda_month != date_select)\n\t{\n\t\tlet val = $(\"#month_selector option[data-menu_month='\"+date_select+\"']\").val();\n\t\t$('#month_selector').val(val).trigger('change');\n\t}\n\n\t$('.selected').removeClass('selected');\n\n\tvar todays_date = get_todays_date();\n\n\t$('#day_' + todays_date).scrollToTarget($('#session_selector')).addClass('selected');\n\n\tinit_go_to_today = false;\n}\n\nfunction handle_preselection()\n{\n\tif (getQueryVariable('session') && $('#session-' + getQueryVariable('session')).length)\n\t{\n\t\t$('#session-' + getQueryVariable('session')).scrollToTarget($('#session_selector'));\n\t}\n\telse if (getQueryVariable('day') && $('#day_' + getQueryVariable('day')).length)\n\t{\n\t\t$('#day_' + getQueryVariable('day')).scrollToTarget($('#session_selector'));\n\t}\n\telse\n\t{\n\t\tgo_to_today();\n\t}\n}\n\nfunction confirm_order_attended(user_id, order_id)\n{\n\t$.ajax({\n\t\turl: 'ddproc.php',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'plate_points_processor',\n\t\t\tuser_id: user_id,\n\t\t\top: 'confirm_order',\n\t\t\torder_id: order_id\n\t\t},\n\t\tsuccess: function (json) {\n\t\t\tif (json.processor_success)\n\t\t\t{\n\t\t\t\t$(\"[id^=pp_co_\" + user_id + \"_\" + order_id + \"]\").html(json.points_this_order);\n\n\t\t\t\tif (json.total_credit)\n\t\t\t\t{\n\t\t\t\t\t$(\"[id^=pp_credit_\" + user_id + \"_\" + order_id + \"]\").text('$' + json.total_credit);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdd_message({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t});\n\n\t\t\t}\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t}\n\n\t});\n}\n\n// jquery plugins\n(function ($) {\n\n\t//create jquery scrollToTarget method\n\t$.fn.scrollToTarget = function (target, callback) {\n\t\tvar elem = $(this);\n\n\t\tif (elem.length)\n\t\t{\n\t\t\tvar target_top = $(target).position().top;\n\t\t\tvar target_bottom = target_top + $(target).height();\n\n\t\t\tvar elem_top = $(elem).position().top;\n\t\t\tvar elem_bottom = elem_top + $(elem).height();\n\n\t\t\t// only scroll if element is out of bounds\n\t\t\tif ((elem_top > target_top && elem_bottom < target_bottom) || (elem_top < target_top && elem_bottom > target_bottom))\n\t\t\t{\n\t\t\t\telem.trigger('click');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttarget.scrollTo(\n\t\t\t\t\tthis,\n\t\t\t\t\t800,\n\t\t\t\t\t{\n\t\t\t\t\t\toffset: -25,\n\t\t\t\t\t\tonAfter: function () {\n\t\t\t\t\t\t\telem.trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn elem;\n\t};\n\n})(jQuery);\n\n\n$(document).on('click keyup', '#os_search_go, #os_search_value', function (e) {\n\n\tlet this_id = $(this).attr('id');\n\n\tif (this_id == 'os_search_value')\n\t{\n\t\t// if the enter key is pressed, execute search else stop\n\t\tif (e.which != 13)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t}\n\n\tlet order_id = $.trim($('#os_search_value').val());\n\n\tif (!order_id.match(/^[0-9a-z]+$/i))\n\t{\n\t\tbootbox.alert(\"Invalid character in order ID.\");\n\n\t\treturn;\n\t}\n\n\t$.ajax({\n\t\turl: 'ddproc.php',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'admin_helpers',\n\t\t\top: 'order_search',\n\t\t\torder_identifier: order_id\n\t\t},\n\t\tsuccess: function (json) {\n\t\t\tif (json.processor_success)\n\t\t\t{\n\t\t\t\tbounce(json.bounce_to);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbootbox.alert(json.processor_message);\n\t\t\t}\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error: ' + strError;\n\t\t}\n\n\t});\n\n});"],"mappings":"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"}