function handle_tc_delayed_payment(){$("#tc_delayed_payment").on("click",(function(){$("#tc_delayed_payment").is(":checked")?dd_message({title:lang.en.tc.terms_and_conditions,message:lang.en.tc.delayed_payment,modal:!0,noOk:!0,buttons:{Agree:function(){$(this).remove(),$("#tc_delayed_payment").prop("checked",!0)},Decline:function(){dd_message({title:lang.en.tc.terms_and_conditions,message:lang.en.tc.delayed_payment_decline}),$("#tc_delayed_payment").prop("checked",!1)}}}):dd_message({title:lang.en.tc.terms_and_conditions,message:lang.en.tc.delayed_payment_decline})}))}function handle_platepoints_enrollment(){$("#enroll_in_plate_points").on("click",(function(){set_req=!1,$(this).is(":checked")&&(set_req=!0),$("#referral_source, #gender, #birthday_month, #birthday_year, #number_of_kids, #number_of_kids, #desired_homemade_meals_per_week, #number_of_adults, #contribute_income, #use_lists, #number_monthly_dine_outs").attr("data-dd_required",set_req).attr("required",set_req),$("#prefer_daytime_sessions, #prefer_evening_sessions, #prefer_weekend_sessions").data("checkbox_group_required",set_req)})),getQueryVariable("pp_enroll")&&$("#enroll_in_plate_points").prop("checked",!0).triggerHandler("click")}function how_did_you_hear_init(){"OTHER"==$("#referral_source").val()?$("#referral_source_details_div").showFlex():"CUSTOMER_REFERRAL"==$("#referral_source").val()?$("#customer_referral_email_div").showFlex():"VIRTUAL_PARTY"==$("#referral_source").val()&&$("#virtual_party_source_details_div").showFlex(),$(document).on("change","#referral_source",(function(e){$("#referral_source_details_div").hideFlex(),$("#referral_source_details").prop({disabled:!0,required:!1}).val(""),$("#virtual_party_source_details_div").hideFlex(),$("#virtual_party_source_details").prop({disabled:!0,required:!1}).val(""),$("#customer_referral_email_div").hideFlex(),$("#customer_referral_email").prop({disabled:!0,required:!1}).val(""),"OTHER"==$(this).val()?($("#referral_source_details_div").showFlex(),$("#referral_source_details").prop({disabled:!1,required:!0}).val("")):"CUSTOMER_REFERRAL"==$(this).val()?($("#customer_referral_email_div").showFlex(),$("#customer_referral_email").prop({disabled:!1,required:!0}).val("")):"VIRTUAL_PARTY"==$(this).val()&&($("#virtual_party_source_details_div").showFlex(),$("#virtual_party_source_details").prop({disabled:!1,required:!0}).val(""))}))}function opt_out_platepoints(e){dd_message({div_id:"optoutconfirm",title:"Confirm PLATEPOINTS Opt Out",message:"The guest will receive an email explaining the consequences of opting out. Are you sure you want to opt out this guest?",zIndex:2,resizable:!1,cancel:function(){},confirm:function(){handle_opt_out_platepoints(e)}})}function handle_opt_out_platepoints(e){$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"plate_points_processor",user_id:e,op:"opt_out_user"},success:function(e,r){e.processor_success?($("#enroll_in_plate_points").attr("checked",!1),$("#dr_guest_opt_out_message").show(),dd_message({title:"Success",message:"The guest was opted out of the PLATEPOINTS program."}),$("#dr2convertConfirm").remove()):(dd_message({title:"Error",message:"There was a problem opting the guest out of the PLATEPOINTS program."}),$(checkboxObj).prop("checked",!1))},error:function(e,r){response="Unexpected error"}})}$(document).on("change","#generateLogin",(function(e){$(this).is(":checked")?($("#email_main_row, #email_confirm_row, #main_pw_row, #confirm_pw_row").hideFlex(),$("#primary_email, #confirm_email_address, #password, #password_confirm").prop({disabled:!0,required:!1}).val("")):($("#email_main_row, #email_confirm_row, #main_pw_row, #confirm_pw_row").showFlex(),$("#primary_email, #confirm_email_address, #password, #password_confirm").prop({disabled:!1,required:!0}))})),$(document).on("click",".email-unsubscribe",(function(e){let r=$(this).data("email");bootbox.confirm("Are you sure you wish to invalidate this guest's email address? This will affect other stores' ability to search by the original email address and the guest's ability to login if this is changed without their knowledge.",(function(e){e&&$("#primary_email, #confirm_email_address").val(r)}))})),$(document).on("change","#add_email",(function(e){$(this).is(":checked")?($("#email_main_row, #email_confirm_row, #secondary_email_row").showFlex(),$("#primary_email, #confirm_email_address").prop({disabled:!1,required:!0})):($("#email_main_row, #email_confirm_row, #secondary_email_row").hideFlex(),$("#primary_email, #confirm_email_address").prop({disabled:!0,required:!1}).val(""))}));var fullAccountOnlyFieldList={0:"address_line1",1:"address_line2",2:"city",3:"state_id",4:"postal_code",5:"telephone_1_call_time",6:"telephone_1",7:("telephone_2_call_time","telephone_2"),8:"genderF",9:"genderM",10:"password",12:"password_confirm",13:"fax",14:"birthday_month",15:"number_of_kids",16:"family_size",17:"favorite_meals",18:"why_works",19:"guest_employer",20:"spouse_employer",21:"upcoming_events",22:"misc_notes",23:"genderX"},requiredFieldList={};function updateConversionState(e){var r=!0;for(var i in e.checked&&(r=!1),fullAccountOnlyFieldList){(t=document.getElementById(fullAccountOnlyFieldList[i]))&&(t.disabled=r)}if(r)for(var i in requiredFieldList){(t=document.getElementById(requiredFieldList[i]))&&t.setAttribute("required","false")}else for(var i in requiredFieldList){var t;(t=document.getElementById(requiredFieldList[i]))&&t.setAttribute("required","true")}}requiredFieldList[0]="address_line1",requiredFieldList[2]="city",requiredFieldList[3]="state_id",requiredFieldList[4]="postal_code",requiredFieldList[5]="telephone_1_call_time",requiredFieldList[6]="telephone_1",requiredFieldList[7]="genderF",requiredFieldList[8]="genderM",requiredFieldList[9]="genderX",$((function(){isPartialAccount&&updateConversionState(document.getElementById("convertToFull")),how_did_you_hear_init(),handle_platepoints_enrollment(),$("#birthday_year").mousedown((function(e){if(e.target[1]){var r=e.target[1].value;r-=23,""==$("#birthday_year").val()&&$("#birthday_year").val(r)}})),isCreate&&handle_tc_delayed_payment(),$("#generateLogin").trigger("change")}));
//# sourceMappingURL=account.min.js.map