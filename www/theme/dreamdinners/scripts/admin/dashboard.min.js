var isProcessingMetrics=!1;function trending_report_init(){$('[id^="report_typedt"]').on("click",(function(){$("#reports_trending_form").submit()})),$('[id^="trade_area"]').change((function(){$("#report_typedt_stores_by_region").attr("checked","checked"),0!=$(this).val()&&$("#reports_trending_form").submit()})),$('[id^="store"]').change((function(){$("#report_typedt_single_store").attr("checked","checked"),$("#reports_trending_form").submit()}))}function dashboard_init(){isHomeOfficeAccess&&(init_store_selector("dd_js_tree_dashboard"),hasStoreData&&$("#report_typedt_custom").is(":checked")&&!didReturnCustomRollup?$("#custom_store_select").show():$("#custom_store_select").hide()),$('[id^="rank_met-"]').on("click",(function(){var e=this.id.split("-")[1],r="tr_rank_met-"+e,t="td_rank_met-"+e,o="disc_rank_met-"+e,s=$("#curMonthStr").val();$("#"+r).is(":visible")?($("#"+r).slideUp("slow"),$("#"+o).addClass("disc_closed"),$("#"+o).removeClass("disc_open")):$.ajax({url:"/processor?processor=admin_top30",type:"POST",dataType:"json",data:{report_type:"menu_based",metric_type:e,month:s},success:function(e){1==e.result_code?($("#"+t).html(e.data),$("#"+r).slideDown("slow"),$("#"+o).removeClass("disc_closed"),$("#"+o).addClass("disc_open")):dd_message({title:"Error",message:e.processor_message})},error:function(e,r){dd_message({title:"Error",message:r})}})}))}function menuChange(e){$("#store_array").val(""),$("#custom_store_select").hide(),$("#custom_store_select_minimized").hide(),$("#dashboard_form").submit()}function runMultiStoreReport(){if($("#report_typedt_single_store").is(":checked"))$("#dashboard_form").submit();else{for(var e=$("#store_selector").jstree(!0).get_selected(),r=[],t=0,o=0;o<e.length;++o){if($("#store_selector").jstree(!0).get_node("#"+e[o]).state.hidden)$("#store_selector").jstree(!0).deselect_node("#"+e[o]);else if(0==e[o].indexOf("tree_store")){var s=e[o].split("-");r[t++]=s[1]}}$("#store_array").val(r),$("#dashboard_form").submit()}}function report_type_select(e){return $("#report_typedt_single_store").is(":checked")||$("#report_typedt_soft_launch").is(":checked")||$("#report_typedt_non_soft_launch").is(":checked")?$("#custom_store_select").hide():$("#custom_store_select").show(),!1}function toggleMonth(e){$("#override_month").val("0"),$("#monthMode").val(e),$("#dashboard_form").submit()}function handleMetricsUpdateComplete(){$("#dashboard_form").submit()}function processMetrics(){$("#busy_updating").dialog({resizable:!1,modal:!0,title:"Metrics Update!",beforeClose:function(e,r){return!1}}),isProcessingMetrics=!0;var e=$("#store_id").val();$.ajax({url:"/processor?processor=admin_processMetrics",type:"POST",dataType:"json",timeout:6e5,data:{store_id:e},success:function(e){isProcessingMetrics=!1,1==e.result_code&&handleMetricsUpdateComplete()},error:function(e,r){isProcessingMetrics=!1,dd_message({title:"Error",message:r})}})}function selectStoreTR(e){""!=e&&($("input:radio[name=report_type]:nth(0)").attr("checked",!0),$("#reports_trending_form").submit())}function selectStore(e){}function print_trending_report(){var e=$("#reports_trending_form")[0].target,r=$("#reports_trending_form")[0].action;$("#reports_trending_form")[0].target="_print",$("#reports_trending_form")[0].action=r+"&print=true",$("#reports_trending_form").submit(),$("#reports_trending_form")[0].target=e,$("#reports_trending_form")[0].action=r}function export_trending_report_all_time(){$("#reports_trending_form")[0].target;var e=$("#reports_trending_form")[0].action;$("#reports_trending_form")[0].action=e+"&export=xlsx&tr_all_time=true",$("#reports_trending_form").submit(),$("#reports_trending_form")[0].action=e}function export_trending_report(){$("#reports_trending_form")[0].target;var e=$("#reports_trending_form")[0].action;$("#reports_trending_form")[0].action=e+"&export=xlsx",$("#reports_trending_form").submit(),$("#reports_trending_form")[0].action=e}function export_order_list(e){if(!$("#report_typedt_single_store").length||$("input:radio[name=report_type]:nth(0)").attr("checked")){var r=$("#dashboard_form")[0].action;$("#dashboard_form")[0].action=e?"/?page=admin_dashboard_menu_based&export=xlsx":"/?page=admin_dashboard_new&export=xlsx",$("#dashboard_form").submit(),$("#dashboard_form")[0].action=r}else dd_message({title:"Error",message:"The order list can only be exported when viewing a single store"})}function print_dashboard(){var e=$("#dashboard_form")[0].target,r=$("#dashboard_form")[0].action;$("#dashboard_form")[0].target="_print",$("#dashboard_form")[0].action="/?page=admin_dashboard_menu_based&print=true",$("#dashboard_form").submit(),$("#dashboard_form")[0].target=e,$("#dashboard_form")[0].action=r}
//# sourceMappingURL=dashboard.min.js.map