var isProcessingMetrics=false;function trending_report_init(){$('[id^="report_typedt"]').on("click",function(){$("#reports_trending_form").submit()});$('[id^="trade_area"]').change(function(){$("#report_typedt_stores_by_region").attr("checked","checked");if($(this).val()!=0){$("#reports_trending_form").submit()}});$('[id^="store"]').change(function(){$("#report_typedt_single_store").attr("checked","checked");$("#reports_trending_form").submit()})}function dashboard_init(){if(isHomeOfficeAccess){init_store_selector("dd_js_tree_dashboard");if(hasStoreData&&$("#report_typedt_custom").is(":checked")&&!didReturnCustomRollup){$("#custom_store_select").show()}else{$("#custom_store_select").hide()}}$('[id^="rank_met-"]').on("click",function(){var e=this.id.split("-")[1];var r="tr_rank_met-"+e;var t="td_rank_met-"+e;var o="disc_rank_met-"+e;var s=$("#curMonthStr").val();if($("#"+r).is(":visible")){$("#"+r).slideUp("slow");$("#"+o).addClass("disc_closed");$("#"+o).removeClass("disc_open")}else{$.ajax({url:"ddproc.php?processor=admin_top30",type:"POST",dataType:"json",data:{report_type:"menu_based",metric_type:e,month:s},success:function(e){if(e.result_code==1){$("#"+t).html(e.data);$("#"+r).slideDown("slow");$("#"+o).removeClass("disc_closed");$("#"+o).addClass("disc_open")}else{dd_message({title:"Error",message:e.processor_message})}},error:function(e,r){dd_message({title:"Error",message:r})}})}})}function menuChange(e){$("#store_array").val("");$("#custom_store_select").hide();$("#custom_store_select_minimized").hide();$("#dashboard_form").submit()}function runMultiStoreReport(){var e=$("#report_typedt_single_store").is(":checked");if(e){$("#dashboard_form").submit();return}var r=$("#store_selector").jstree(true).get_selected();var t=new Array;var o=0;for(var s=0;s<r.length;++s){var i=$("#store_selector").jstree(true).get_node("#"+r[s]);if(i.state.hidden){$("#store_selector").jstree(true).deselect_node("#"+r[s]);continue}if(r[s].indexOf("tree_store")==0){var n=r[s].split("-");t[o++]=n[1]}}$("#store_array").val(t);$("#dashboard_form").submit()}function report_type_select(e){if($("#report_typedt_single_store").is(":checked")||$("#report_typedt_soft_launch").is(":checked")){$("#custom_store_select").hide()}else{$("#custom_store_select").show()}return false}function toggleMonth(e){$("#override_month").val("0");$("#monthMode").val(e);$("#dashboard_form").submit()}function handleMetricsUpdateComplete(){$("#dashboard_form").submit()}function processMetrics(){var e={resizable:false,modal:true,title:"Metrics Update!",beforeClose:function(e,r){return false}};$("#busy_updating").dialog(e);isProcessingMetrics=true;var r=$("#store_id").val();$.ajax({url:"ddproc.php?processor=admin_processMetrics",type:"POST",dataType:"json",timeout:6e5,data:{store_id:r},success:function(e){isProcessingMetrics=false;if(e.result_code==1){handleMetricsUpdateComplete()}},error:function(e,r){isProcessingMetrics=false;dd_message({title:"Error",message:r})}})}function selectStoreTR(e){if(e!=""){$("input:radio[name=report_type]:nth(0)").attr("checked",true);$("#reports_trending_form").submit()}}function selectStore(e){}function print_trending_report(){var e=$("#reports_trending_form")[0].target;var r=$("#reports_trending_form")[0].action;$("#reports_trending_form")[0].target="_print";$("#reports_trending_form")[0].action=r+"&print=true";$("#reports_trending_form").submit();$("#reports_trending_form")[0].target=e;$("#reports_trending_form")[0].action=r}function export_trending_report_all_time(){var e=$("#reports_trending_form")[0].target;var r=$("#reports_trending_form")[0].action;$("#reports_trending_form")[0].action=r+"&export=xlsx&tr_all_time=true";$("#reports_trending_form").submit();$("#reports_trending_form")[0].action=r}function export_trending_report(){var e=$("#reports_trending_form")[0].target;var r=$("#reports_trending_form")[0].action;$("#reports_trending_form")[0].action=r+"&export=xlsx";$("#reports_trending_form").submit();$("#reports_trending_form")[0].action=r}function export_order_list(e){if(!$("#report_typedt_single_store").length||$("input:radio[name=report_type]:nth(0)").attr("checked")){var r=$("#dashboard_form")[0].action;if(e){$("#dashboard_form")[0].action="main.php?page=admin_dashboard_menu_based&export=xlsx"}else{$("#dashboard_form")[0].action="main.php?page=admin_dashboard_new&export=xlsx"}$("#dashboard_form").submit();$("#dashboard_form")[0].action=r}else{dd_message({title:"Error",message:"The order list can only be exported when viewing a single store"})}}function print_dashboard(){var e=$("#dashboard_form")[0].target;var r=$("#dashboard_form")[0].action;$("#dashboard_form")[0].target="_print";$("#dashboard_form")[0].action="main.php?page=admin_dashboard_menu_based&print=true";$("#dashboard_form").submit();$("#dashboard_form")[0].target=e;$("#dashboard_form")[0].action=r}
//# sourceMappingURL=dashboard.min.js.map