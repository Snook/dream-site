{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["access_levels.js"],"sourcesContent":["function access_levels_init()\r\n{\r\n\tuser_type_val = $('#user_type').val();\r\n\r\n\tif (user_type_val == 'CUSTOMER' || user_type_val == 'HOME_OFFICE_MANAGER' || user_type_val == 'HOME_OFFICE_STAFF' || user_type_val == 'SITE_ADMIN')\r\n\t{\r\n\t\t$('#store_settings_div').hide();\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$('#store_settings_div').show();\r\n\t}\r\n\r\n\tif (user_type_val == current_user_type)\r\n\t{\r\n\t\t$('#submit_account').prop(\"disabled\", true);\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$('#submit_account').prop(\"disabled\", false);\r\n\t}\r\n\t\r\n\thandle_store_display_checkbox();\r\n\thandle_store_display_text();\r\n\t\r\n\thandle_special_permissions();\r\n\t\r\n}\r\n\r\n\r\nfunction handle_special_permissions()\r\n{\r\n\t$(\"[id^='priv_']\").on('change', function(){\r\n\t\t$('#submit_account').prop(\"disabled\", false);\r\n\t});\r\n\r\n\r\n}\r\n\r\nfunction addStore()\r\n{\r\n\tvar msg = \"Are you sure you want to add access to this store?\";\r\n\r\n\tif (confirm(msg))\r\n\t{\r\n\t\tdocument.getElementById(\"change_access\").submit();\r\n\t}\r\n}\r\n\r\nfunction showStoreSettings()\r\n{\r\n\tif ($('#user_type').val() != 'CUSTOMER')\r\n\t{\r\n\t\t$('#store_settings_div').show();\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$('#store_settings_div').hide();\r\n\t}\r\n}\r\n\r\nfunction deleteStore(store_id)\r\n{\r\n\tvar msg = \"Are you sure you want to delete access to this store?\";\r\n\r\n\tif (confirm(msg))\r\n\t{\r\n\t\tdocument.getElementById(\"al_action\").value = \"delete\";\r\n\t\tdocument.getElementById(\"which_store\").value = store_id;\r\n\r\n\t\tdocument.getElementById(\"accessAction\").submit();\r\n\t}\r\n}\r\n\r\nfunction handle_store_display_text()\r\n{\r\n\t$('[data-display_text]').each(function() {\r\n\r\n\t\tvar uts_id = $(this).data('display_text');\r\n\r\n\t\t$(this).bind(\"input\", function(e) {\r\n\r\n\t\t\t$('[data-display_text_save=\"' + uts_id + '\"]').removeClass('disabled');\r\n\r\n\t\t});\r\n\r\n\r\n\t\t$('[data-display_text_save=\"' + uts_id + '\"]').on('click', function () {\r\n\r\n\t\t\tif ($(this).hasClass('disabled'))\r\n\t\t\t{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar uts_id = $(this).data('display_text_save');\r\n\t\t\tvar display_text = $('[data-display_text=\"' + uts_id + '\"]').val().trim();\r\n\r\n\t\t\tif (!display_text.length)\r\n\t\t\t{\r\n\t\t\t\tdisplay_text = 0;\r\n\t\t\t}\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata : {\r\n\t\t\t\t\tprocessor: 'admin_access_levels',\r\n\t\t\t\t\top: 'do_display_text',\r\n\t\t\t\t\tuts_id: uts_id,\r\n\t\t\t\t\tdisplay_text: display_text\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(json, status)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(json.processor_success)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('[data-display_text_save=\"' + uts_id + '\"]').addClass('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t\t{\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction handle_store_display_checkbox()\r\n{\r\n\t$('[data-show_on_customer]').each(function() {\r\n\r\n\t\t$(this).on('click', function () {\r\n\r\n\t\t\tvar display_on_site = 0;\r\n\t\t\tvar uts_id = $(this).data('show_on_customer');\r\n\r\n\t\t\tif ($(this).is(':checked'))\r\n\t\t\t{\r\n\t\t\t\tdisplay_on_site = 1;\r\n\t\t\t}\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata : {\r\n\t\t\t\t\tprocessor: 'admin_access_levels',\r\n\t\t\t\t\top: 'do_display_on_site',\r\n\t\t\t\t\tuts_id: uts_id,\r\n\t\t\t\t\tdisplay: display_on_site\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(json, status)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(json.processor_success)\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(objAJAXRequest, strError)\r\n\t\t\t\t{\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n}"],"names":["access_levels_init","user_type_val","$","val","hide","show","current_user_type","prop","handle_store_display_checkbox","handle_store_display_text","handle_special_permissions","on","addStore","msg","confirm","document","getElementById","submit","showStoreSettings","deleteStore","store_id","value","each","uts_id","this","data","bind","e","removeClass","hasClass","display_text","trim","length","ajax","url","type","timeout","dataType","processor","op","success","json","status","processor_success","addClass","error","objAJAXRequest","strError","response","display_on_site","is","display"],"mappings":"AAAA,SAASA,qBAERC,cAAgBC,EAAE,cAAcC,MAEhC,GAAIF,eAAiB,YAAcA,eAAiB,uBAAyBA,eAAiB,qBAAuBA,eAAiB,aACtI,CACCC,EAAE,uBAAuBE,WAG1B,CACCF,EAAE,uBAAuBG,OAG1B,GAAIJ,eAAiBK,kBACrB,CACCJ,EAAE,mBAAmBK,KAAK,WAAY,UAGvC,CACCL,EAAE,mBAAmBK,KAAK,WAAY,OAGvCC,gCACAC,4BAEAC,6BAKD,SAASA,6BAERR,EAAE,iBAAiBS,GAAG,SAAU,WAC/BT,EAAE,mBAAmBK,KAAK,WAAY,SAMxC,SAASK,WAER,IAAIC,EAAM,qDAEV,GAAIC,QAAQD,GACZ,CACCE,SAASC,eAAe,iBAAiBC,UAI3C,SAASC,oBAER,GAAIhB,EAAE,cAAcC,OAAS,WAC7B,CACCD,EAAE,uBAAuBG,WAG1B,CACCH,EAAE,uBAAuBE,QAI3B,SAASe,YAAYC,GAEpB,IAAIP,EAAM,wDAEV,GAAIC,QAAQD,GACZ,CACCE,SAASC,eAAe,aAAaK,MAAQ,SAC7CN,SAASC,eAAe,eAAeK,MAAQD,EAE/CL,SAASC,eAAe,gBAAgBC,UAI1C,SAASR,4BAERP,EAAE,uBAAuBoB,KAAK,WAE7B,IAAIC,EAASrB,EAAEsB,MAAMC,KAAK,gBAE1BvB,EAAEsB,MAAME,KAAK,QAAS,SAASC,GAE9BzB,EAAE,4BAA8BqB,EAAS,MAAMK,YAAY,cAK5D1B,EAAE,4BAA8BqB,EAAS,MAAMZ,GAAG,QAAS,WAE1D,GAAIT,EAAEsB,MAAMK,SAAS,YACrB,CACC,OAAO,MAGR,IAAIN,EAASrB,EAAEsB,MAAMC,KAAK,qBAC1B,IAAIK,EAAe5B,EAAE,uBAAyBqB,EAAS,MAAMpB,MAAM4B,OAEnE,IAAKD,EAAaE,OAClB,CACCF,EAAe,EAGhB5B,EAAE+B,KAAK,CACNC,IAAK,aACLC,KAAM,OACNC,QAAS,IACTC,SAAU,OACVZ,KAAO,CACNa,UAAW,sBACXC,GAAI,kBACJhB,OAAQA,EACRO,aAAcA,GAEfU,QAAS,SAASC,EAAMC,GAEvB,GAAGD,EAAKE,kBACR,CACCzC,EAAE,4BAA8BqB,EAAS,MAAMqB,SAAS,gBAGzD,IAIDC,MAAO,SAASC,EAAgBC,GAE/BC,SAAW,0BAUhB,SAASxC,gCAERN,EAAE,2BAA2BoB,KAAK,WAEjCpB,EAAEsB,MAAMb,GAAG,QAAS,WAEnB,IAAIsC,EAAkB,EACtB,IAAI1B,EAASrB,EAAEsB,MAAMC,KAAK,oBAE1B,GAAIvB,EAAEsB,MAAM0B,GAAG,YACf,CACCD,EAAkB,EAGnB/C,EAAE+B,KAAK,CACNC,IAAK,aACLC,KAAM,OACNC,QAAS,IACTC,SAAU,OACVZ,KAAO,CACNa,UAAW,sBACXC,GAAI,qBACJhB,OAAQA,EACR4B,QAASF,GAEVT,QAAS,SAASC,EAAMC,GAEvB,GAAGD,EAAKE,kBACR,MAIA,IAIDE,MAAO,SAASC,EAAgBC,GAE/BC,SAAW"}