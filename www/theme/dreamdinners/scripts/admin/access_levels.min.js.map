{"version":3,"file":"access_levels.min.js","names":["access_levels_init","user_type_val","$","val","hide","show","prop","handle_store_display_checkbox","handle_store_display_text","handle_special_permissions","on","addStore","confirm","document","getElementById","submit","showStoreSettings","deleteStore","store_id","value","each","uts_id","this","data","bind","e","removeClass","hasClass","display_text","trim","length","ajax","url","type","timeout","dataType","processor","op","success","json","status","processor_success","addClass","error","objAJAXRequest","strError","response","display_on_site","is","display"],"sourceRoot":"js/src/dreamdinners/admin","sources":["access_levels.js"],"sourcesContent":["function access_levels_init()\n{\n\tuser_type_val = $('#user_type').val();\n\n\tif (user_type_val == 'CUSTOMER' || user_type_val == 'HOME_OFFICE_MANAGER' || user_type_val == 'HOME_OFFICE_STAFF' || user_type_val == 'SITE_ADMIN')\n\t{\n\t\t$('#store_settings_div').hide();\n\t}\n\telse\n\t{\n\t\t$('#store_settings_div').show();\n\t}\n\n\t// if (user_type_val == current_user_type)\n\t// {\n\t// \t$('#submit_account').prop(\"disabled\", true);\n\t// }\n\t// else\n\t//{\n\t\t$('#submit_account').prop(\"disabled\", false);\n\t//}\n\t\n\thandle_store_display_checkbox();\n\thandle_store_display_text();\n\t\n\thandle_special_permissions();\n\t\n}\n\n\nfunction handle_special_permissions()\n{\n\t$(\"[id^='priv_']\").on('change', function(){\n\t\t$('#submit_account').prop(\"disabled\", false);\n\t});\n\n\n}\n\nfunction addStore()\n{\n\tvar msg = \"Are you sure you want to add access to this store?\";\n\n\tif (confirm(msg))\n\t{\n\t\tdocument.getElementById(\"change_access\").submit();\n\t}\n}\n\nfunction showStoreSettings()\n{\n\tif ($('#user_type').val() != 'CUSTOMER')\n\t{\n\t\t$('#store_settings_div').show();\n\t}\n\telse\n\t{\n\t\t$('#store_settings_div').hide();\n\t}\n}\n\nfunction deleteStore(store_id)\n{\n\tvar msg = \"Are you sure you want to delete access to this store?\";\n\n\tif (confirm(msg))\n\t{\n\t\tdocument.getElementById(\"al_action\").value = \"delete\";\n\t\tdocument.getElementById(\"which_store\").value = store_id;\n\n\t\tdocument.getElementById(\"accessAction\").submit();\n\t}\n}\n\nfunction handle_store_display_text()\n{\n\t$('[data-display_text]').each(function() {\n\n\t\tvar uts_id = $(this).data('display_text');\n\n\t\t$(this).bind(\"input\", function(e) {\n\n\t\t\t$('[data-display_text_save=\"' + uts_id + '\"]').removeClass('disabled');\n\n\t\t});\n\n\n\t\t$('[data-display_text_save=\"' + uts_id + '\"]').on('click', function () {\n\n\t\t\tif ($(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar uts_id = $(this).data('display_text_save');\n\t\t\tvar display_text = $('[data-display_text=\"' + uts_id + '\"]').val().trim();\n\n\t\t\tif (!display_text.length)\n\t\t\t{\n\t\t\t\tdisplay_text = 0;\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: '/processor',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 20000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata : {\n\t\t\t\t\tprocessor: 'admin_access_levels',\n\t\t\t\t\top: 'do_display_text',\n\t\t\t\t\tuts_id: uts_id,\n\t\t\t\t\tdisplay_text: display_text\n\t\t\t\t},\n\t\t\t\tsuccess: function(json, status)\n\t\t\t\t{\n\t\t\t\t\tif(json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\t$('[data-display_text_save=\"' + uts_id + '\"]').addClass('disabled');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(objAJAXRequest, strError)\n\t\t\t\t{\n\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t});\n}\n\nfunction handle_store_display_checkbox()\n{\n\t$('[data-show_on_customer]').each(function() {\n\n\t\t$(this).on('click', function () {\n\n\t\t\tvar display_on_site = 0;\n\t\t\tvar uts_id = $(this).data('show_on_customer');\n\n\t\t\tif ($(this).is(':checked'))\n\t\t\t{\n\t\t\t\tdisplay_on_site = 1;\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: '/processor',\n\t\t\t\ttype: 'POST',\n\t\t\t\ttimeout: 20000,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata : {\n\t\t\t\t\tprocessor: 'admin_access_levels',\n\t\t\t\t\top: 'do_display_on_site',\n\t\t\t\t\tuts_id: uts_id,\n\t\t\t\t\tdisplay: display_on_site\n\t\t\t\t},\n\t\t\t\tsuccess: function(json, status)\n\t\t\t\t{\n\t\t\t\t\tif(json.processor_success)\n\t\t\t\t\t{\n\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(objAJAXRequest, strError)\n\t\t\t\t{\n\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n}"],"mappings":"AAAA,SAASA,qBAERC,cAAgBC,EAAE,cAAcC,MAEX,YAAjBF,eAAgD,uBAAjBA,eAA2D,qBAAjBA,eAAyD,cAAjBA,cAEpHC,EAAE,uBAAuBE,OAIzBF,EAAE,uBAAuBG,OASzBH,EAAE,mBAAmBI,KAAK,YAAY,GAGvCC,gCACAC,4BAEAC,4BAED,CAGA,SAASA,6BAERP,EAAE,iBAAiBQ,GAAG,UAAU,WAC/BR,EAAE,mBAAmBI,KAAK,YAAY,EACvC,GAGD,CAEA,SAASK,WAIJC,QAFM,uDAITC,SAASC,eAAe,iBAAiBC,QAE3C,CAEA,SAASC,oBAEqB,YAAzBd,EAAE,cAAcC,MAEnBD,EAAE,uBAAuBG,OAIzBH,EAAE,uBAAuBE,MAE3B,CAEA,SAASa,YAAYC,GAIhBN,QAFM,2DAITC,SAASC,eAAe,aAAaK,MAAQ,SAC7CN,SAASC,eAAe,eAAeK,MAAQD,EAE/CL,SAASC,eAAe,gBAAgBC,SAE1C,CAEA,SAASP,4BAERN,EAAE,uBAAuBkB,MAAK,WAE7B,IAAIC,EAASnB,EAAEoB,MAAMC,KAAK,gBAE1BrB,EAAEoB,MAAME,KAAK,SAAS,SAASC,GAE9BvB,EAAE,4BAA8BmB,EAAS,MAAMK,YAAY,WAE5D,IAGAxB,EAAE,4BAA8BmB,EAAS,MAAMX,GAAG,SAAS,WAE1D,GAAIR,EAAEoB,MAAMK,SAAS,YAEpB,OAAO,EAGR,IAAIN,EAASnB,EAAEoB,MAAMC,KAAK,qBACtBK,EAAe1B,EAAE,uBAAyBmB,EAAS,MAAMlB,MAAM0B,OAE9DD,EAAaE,SAEjBF,EAAe,GAGhB1B,EAAE6B,KAAK,CACNC,IAAK,aACLC,KAAM,OACNC,QAAS,IACTC,SAAU,OACVZ,KAAO,CACNa,UAAW,sBACXC,GAAI,kBACJhB,OAAQA,EACRO,aAAcA,GAEfU,QAAS,SAASC,EAAMC,GAEpBD,EAAKE,mBAEPvC,EAAE,4BAA8BmB,EAAS,MAAMqB,SAAS,WAM1D,EACAC,MAAO,SAASC,EAAgBC,GAE/BC,SAAW,kBACZ,GAIF,GAED,GACD,CAEA,SAASvC,gCAERL,EAAE,2BAA2BkB,MAAK,WAEjClB,EAAEoB,MAAMZ,GAAG,SAAS,WAEnB,IAAIqC,EAAkB,EAClB1B,EAASnB,EAAEoB,MAAMC,KAAK,oBAEtBrB,EAAEoB,MAAM0B,GAAG,cAEdD,EAAkB,GAGnB7C,EAAE6B,KAAK,CACNC,IAAK,aACLC,KAAM,OACNC,QAAS,IACTC,SAAU,OACVZ,KAAO,CACNa,UAAW,sBACXC,GAAI,qBACJhB,OAAQA,EACR4B,QAASF,GAEVT,QAAS,SAASC,EAAMC,GAEpBD,EAAKE,iBAQT,EACAE,MAAO,SAASC,EAAgBC,GAE/BC,SAAW,kBACZ,GAIF,GAED,GAED","ignoreList":[]}