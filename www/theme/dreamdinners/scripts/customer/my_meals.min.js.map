{"version":3,"file":"my_meals.min.js","names":["doFoodSearch","bounce","$","val","setRatingStar","element_id","star","i","removeClass","addClass","mouseenterRatingStar","element","hover_rating","attr","mouseleaveRatingStar","org_val","restorePagingLocation","currentUser","page","localStorage","getItem","user_id","setItem","html","ajax","url","type","timeout","dataType","data","processor","operation","success","json","status","processor_success","console","log","error","objAJAXRequest","strError","alert","bind","mouseenter","e","this","mouseleave","on","store_id","recipe_id","recipe_version","rating","set_favorite","document","field_type","hasClass","trim","defaultValue","showFlex","hideFlex","preventDefault","text_area","trigger","comment_element","comment","key","keyCode","event","current_page","cached"],"sourceRoot":"js/src/dreamdinners/customer","sources":["my_meals.js"],"sourcesContent":["function doFoodSearch()\n{\n\tbounce('/my-meals?search=' + $('#my_meals_search').val());\n}\n\nfunction setRatingStar(element_id, star)\n{\n\t// Set all to grey\n\tfor (var i = 0; i <= 5; i++)\n\t{\n\t\t$('#rating-' + i + '-' + element_id).removeClass('fas text-yellow').addClass('far');\n\t}\n\n\t// Make gold star up to star\n\tfor (var i = 0; i <= star; i++)\n\t{\n\t\t$('#rating-' + i + '-' + element_id).addClass('fas text-yellow').removeClass('far');\n\t}\n}\n\nfunction mouseenterRatingStar(element)\n{\n\thover_rating = $(element).attr('data-rating');\n\telement_id = $(element).attr('data-element_id');\n\n\tsetRatingStar(element_id, hover_rating);\n}\n\nfunction mouseleaveRatingStar(element)\n{\n\tlet org_val = $('#org_rating-' + element_id).val();\n\n\tsetRatingStar(element_id, org_val);\n}\n\nfunction restorePagingLocation(currentUser)\n{\n\tlet page = localStorage.getItem('customer-orders-paging-current');\n\tlet user_id = localStorage.getItem('customer-history-paging-user');\n\n\tif (user_id != currentUser)\n\t{\n\t\tlocalStorage.setItem('customer-orders-paging-current', null);\n\t\tlocalStorage.setItem('customer-history-paging-user', null);\n\n\t\treturn;\n\t}\n\n\tif (page != null && typeof page !== 'undefined' && user_id != null && typeof user_id !== 'undefined')\n\t{\n\t\t$('#order_history').html('');\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\tpage: page,\n\t\t\t\tprocessor: 'my_meals',\n\t\t\t\toperation: 'next'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#order_history').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.log('There was an issue trying to restore paging location.');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('There was an issue retrieving your orders. Please reload the page.');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n}\n\n$(function () {\n\n\t// Handle rating clicks\n\t$('.my_meals-rate').bind({\n\t\tmouseenter: function (e) {\n\t\t\tmouseenterRatingStar(this);\n\t\t},\n\t\tmouseleave: function (e) {\n\t\t\tmouseleaveRatingStar(this);\n\t\t}\n\t});\n\n\t$('.my_meals-rate').on('click', function (e) {\n\n\t\tlet element_id = $(this).data('element_id');\n\t\tlet store_id = $(this).data('store_id');\n\t\tlet recipe_id = $(this).data('recipe_id');\n\t\tlet recipe_version = $(this).data('recipe_version');\n\t\tlet rating = $(this).data('rating');\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'my_meals',\n\t\t\t\toperation: 'rate',\n\t\t\t\tstore_id: store_id,\n\t\t\t\trecipe_id: recipe_id,\n\t\t\t\trecipe_version: recipe_version,\n\t\t\t\trating: rating\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#org_rating-' + element_id).val(rating)\n\n\t\t\t\t\tsetRatingStar(element_id, rating);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t});\n\n\t// Handle favorite clicks\n\t$('.my_meals-favorite').on('change', function (e) {\n\n\t\tlet element_id = $(this).data('element_id');\n\t\tlet store_id = $(this).data('store_id');\n\t\tlet recipe_id = $(this).data('recipe_id');\n\t\tlet recipe_version = $(this).data('recipe_version');\n\t\tlet set_favorite = $(this).val();\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'my_meals',\n\t\t\t\toperation: 'favorite',\n\t\t\t\tstore_id: store_id,\n\t\t\t\trecipe_id: recipe_id,\n\t\t\t\trecipe_version: recipe_version,\n\t\t\t\tset_favorite: set_favorite\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t});\n\n\t$(document).on('keyup change', '.my_meals-review, .my_meals-note', function (e) {\n\n\t\tlet field_type = 'review';\n\t\tif ($(this).hasClass('my_meals-note'))\n\t\t{\n\t\t\tfield_type = 'note';\n\t\t}\n\n\t\tlet element_id = $(this).data('element_id');\n\t\tlet this_val = $.trim($(this).val());\n\t\tlet org_val = this.defaultValue;\n\n\t\tif (this_val != org_val)\n\t\t{\n\t\t\t$('.my_meals-' + field_type + '-submit-row[data-element_id=\"' + element_id + '\"]').showFlex();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('.my_meals-' + field_type + '-submit-row[data-element_id=\"' + element_id + '\"]').hideFlex();\n\t\t}\n\n\t});\n\n\t$(document).on('click', '.my_meals-review-cancel, .my_meals-note-cancel', function (e) {\n\n\t\te.preventDefault();\n\n\t\tlet field_type = 'review';\n\t\tif ($(this).hasClass('my_meals-note-cancel'))\n\t\t{\n\t\t\tfield_type = 'note';\n\t\t}\n\n\t\tlet element_id = $(this).data('element_id');\n\t\tlet text_area = $('.my_meals-' + field_type + '[data-element_id=\"' + element_id + '\"]');\n\n\t\t$('.my_meals-' + field_type + '[data-element_id=\"' + element_id + '\"]').val(text_area[0].defaultValue);\n\n\t\t$(text_area).trigger('change');\n\n\t});\n\n\t$(document).on('click', '.my_meals-review-submit, .my_meals-note-submit', function (e) {\n\n\t\te.preventDefault();\n\n\t\tlet field_type = 'review';\n\t\tif ($(this).hasClass('my_meals-note-submit'))\n\t\t{\n\t\t\tfield_type = 'note';\n\t\t}\n\n\t\tlet element_id = $(this).data('element_id');\n\t\tlet comment_element = $('.my_meals-' + field_type + '[data-element_id=\"' + element_id + '\"]');\n\t\tlet recipe_id = $(comment_element).data('recipe_id');\n\t\tlet recipe_version = $(comment_element).data('recipe_version');\n\t\tlet store_id = $(comment_element).data('store_id');\n\t\tlet comment = $.trim($(comment_element).val());\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'my_meals',\n\t\t\t\toperation: field_type,\n\t\t\t\trecipe_id: recipe_id,\n\t\t\t\trecipe_version: recipe_version,\n\t\t\t\tcomment: comment,\n\t\t\t\tstore_id: store_id\n\t\t\t},\n\t\t\tsuccess: function (json) {\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('.my_meals-' + field_type + '-submit-row[data-element_id=\"' + element_id + '\"]').hideFlex();\n\t\t\t\t\tcomment_element[0].defaultValue = comment;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t});\n\n\t// Handle search submit button\n\t$(document).on('click', '#my_meals_search_submit', function (e) {\n\t\tdoFoodSearch();\n\t});\n\n\t// Handle search enter button\n\t$(document).on('keyup', '#my_meals_search', function (e) {\n\t\tif (e.key === 'Enter' || e.keyCode === 13)\n\t\t{\n\t\t\tdoFoodSearch();\n\t\t}\n\t});\n\n\t$(document).on(\"click\", \".orders-page-prev\", function (event) {\n\t\tevent.preventDefault();\n\n\t\tlet user_id = $(this).data('user');\n\t\tlet current_page = $(this).data('current');\n\n\t\tlet cached = current_page;\n\n\t\tif (cached > 0)\n\t\t{\n\t\t\tcached = cached - 2;\n\t\t}\n\n\t\tlocalStorage.setItem('customer-orders-paging-current', cached);\n\t\tlocalStorage.setItem('customer-history-paging-user', user_id);\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\tpage: current_page,\n\t\t\t\tprocessor: 'my_meals',\n\t\t\t\toperation: 'prev'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#order_history').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.log('There was an issue trying to navigate to the previous page.');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('There was an issue retrieving your orders. Please reload the page.');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn false;\n\t});\n\n\t$(document).on(\"click\", \".orders-page-next\", function (event) {\n\t\tevent.preventDefault();\n\n\t\tlet user_id = $(this).data('user');\n\t\tlet current_page = $(this).data('current');\n\n\t\tlocalStorage.setItem('customer-orders-paging-current', current_page);\n\t\tlocalStorage.setItem('customer-history-paging-user', user_id);\n\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 100000000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\tpage: current_page,\n\t\t\t\tprocessor: 'my_meals',\n\t\t\t\toperation: 'next'\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\n\t\t\t\tif (json.processor_success)\n\t\t\t\t{\n\t\t\t\t\t$('#order_history').html(json.html);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.log('There was an issue trying to navigate to the next page.');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\n\t\t\t\talert('There was an issue retrieving your orders. Please reload the page.');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn false;\n\t});\n\n});"],"mappings":"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"}