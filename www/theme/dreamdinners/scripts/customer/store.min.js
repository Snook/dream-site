function strcmp(e,t){return e.toString()<t.toString()?-1:e.toString()>t.toString()?1:0}function eventClickCalendar(e,t,n){"session"===e&&(t?bootbox.prompt("This event requires an invite code.",(function(e){if(e){var t=n,s=e.trim();$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_session_processor",op:"save",pwd:s,sid:t},success:function(e){1==e.result_code?bounce("/session-menu"):bootbox.alert(e.processor_message)},error:function(e,t){bootbox.alert("Unexpected error")}})}})):window.location.href="/session?ref=store&sid="+n)}document.addEventListener("DOMContentLoaded",(function(){var e=new FullCalendar.Calendar(document.getElementById("calendar"),{aspectRatio:$(window).width()>768?2:1.35,themeSystem:"bootstrap",headerToolbar:{left:"prev,today,next",center:"title",right:"listMonth,dayGridMonth"},fixedWeekCount:!1,validRange:{start:calendarJS.start,end:calendarJS.end},initialView:"listMonth",events:calendarJS.sessions,height:"auto",datesSet:function(e){$("#calendar_month").text(e.view.title),$(".fc-header-toolbar .fc-toolbar-title").addClass("d-none d-md-block"),$(".fc-list-event").addClass("cursor-pointer"),0==$(".title-exists").length&&$(".fc-list-day .fc-list-day-text").append('<span class="font-weight-normal font-size-small d-none d-md-inline title-exists"> - Select a time below to get started</span>')},eventContent:function(e,t){return $("#calendar_results").empty(),t("i",{},"")},eventDidMount:function(e){if($("#calendar_results").empty(),"dayGridMonth"==e.view.type&&($(e.el).addClass("d-none"),$(".fc-daygrid-day-events").children().length>0&&($(".fc-daygrid-day-events").children().parent().text("Times"),$(".fc-daygrid-day-events").addClass("text-center h6 text-decoration-underline cursor-pointer font-weight-semi-bold text-break"))),"listMonth"==e.view.type){if(e.event.extendedProps.remaining_slots<=0)var t='<span class="text-decoration-none text-capitalize">'+e.event.title+"</span>";else t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+"</span>";$.isEmptyObject(e.event.extendedProps)||(e.event.extendedProps.remaining_slots<=0&&($(e.el).find(".fc-list-event-title").addClass("text-gray-med"),$(e.el).find(".fc-list-event-time").addClass("text-gray-med"),$(e.el).find(".fc-list-event-dot").removeClass("fc-list-event-dot"),$(e.el).removeClass("cursor-pointer"),$(e.el).removeClass("fc-event-session-made_for_you"),$(e.el).removeClass("fc-event-future"),$(e.el).removeClass("fc-event"),$(e.el).removeClass("fc-list-event")),$.isNumeric(e.event.extendedProps.session_count)&&(t=e.event.title+'<span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.session_count+" session"+(1!=e.event.extendedProps.session_count?"s":"")+" available</span></span>"),$.isEmptyObject(e.event.extendedProps.session_title)||e.event.extendedProps.session_title==e.event.title||(t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.session_title+"</span></span>"),["REMOTE_PICKUP","REMOTE_PICKUP_PRIVATE"].includes(e.event.extendedProps.session_type_true)&&e.event.extendedProps.session_remote_pickup&&(t="REMOTE_PICKUP_PRIVATE"==e.event.extendedProps.session_type_true?'<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline"> Private event hosted by '+e.event.extendedProps.session_host_informal_name+"</span></span>":'<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.session_title+'</span><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.session_remote_pickup+"</span></span>"),["FUNDRAISER"].includes(e.event.extendedProps.session_type_true)&&e.event.extendedProps.fundraiser_name&&(t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">Benefits '+e.event.extendedProps.fundraiser_name+"</span></span>"),["DREAM_TASTE","PRIVATE_SESSION"].includes(e.event.extendedProps.session_type_true)&&e.event.extendedProps.session_host_informal_name&&(t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">Hosted by '+e.event.extendedProps.session_host_informal_name+"</span></span>")),$.isNumeric(e.event.extendedProps.remaining_slots)&&(t+='<span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.remaining_slots+" spot"+(1!=e.event.extendedProps.remaining_slots?"s":"")+" remaining</span></span>",["STANDARD"].includes(e.event.extendedProps.session_type_true)&&(t+='<span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.remaining_intro_slots+" Starter Pack spot"+(1!=e.event.extendedProps.remaining_intro_slots?"s":"")+" remaining</span></span>")),e.event.extendedProps.is_open_for_customization&&(t+='&nbsp;<i class="dd-icon icon-customize text-orange font-size-small" data-toggle="tooltip" data-placement="top" title="Customization options available at checkout"></i>'),$(e.el).find(".fc-list-event-title").html(t)}},eventClick:function(e){e.event.extendedProps.remaining_slots<=0?e.jsEvent.preventDefault():"session"===e.event.extendedProps.eventType&&(e.event.extendedProps.session_has_password?bootbox.prompt("This event requires an invite code.",(function(t){if(t){var n=e.event.extendedProps.id,s=t.trim();$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_session_processor",op:"save",pwd:s,sid:n},success:function(e){1==e.result_code?bounce("/session-menu"):bootbox.alert(e.processor_message)},error:function(e,t){bootbox.alert("Unexpected error")}})}})):window.location.href="/session?ref=store&sid="+e.event.extendedProps.id)},eventMouseEnter:function(e){"listMonth"==e.view.type&&"session"===e.event.extendedProps.eventType&&$(e.el).addClass("bg-gray-light")},eventMouseLeave:function(e){"listMonth"==e.view.type&&"session"===e.event.extendedProps.eventType&&$(e.el).removeClass("bg-gray-light")},dateClick:function(t){for($("#calendar_results").empty(),events=e.getEvents(),savedEvents=[],savedIds=[],savedTypes=[],savedSessionHasPwds=[],savedEventNotes=[],i=0;i<events.length;i++)0==strcmp(events[i].start.toLocaleDateString().trim(),t.date.toLocaleDateString().trim())&&savedEvents.push(events[i]);for(eventsString="",i=0;i<savedEvents.length;i++)date=savedEvents[i].start.toLocaleTimeString("en-gb",{hour:"2-digit",minute:"2-digit",hour12:!0}),0==strcmp(date.charAt(0),"0")&&(date=date.replace("0","")),0==strcmp(date,"0:00 pm")?eventsString+="12:00 pm, "+savedEvents[i].title:0==strcmp(date,"0:00 am")?eventsString+="12:00 am, "+savedEvents[i].title:0==strcmp(date,"0:30 pm")?eventsString+="12:30 pm, "+savedEvents[i].title:0==strcmp(date,"0:30 am")?eventsString+="12:30 am, "+savedEvents[i].title:eventsString+=date+", "+savedEvents[i].title,savedIds[i]=savedEvents[i].extendedProps.id,savedSessionHasPwds[i]=savedEvents[i].extendedProps.session_has_password,savedTypes[i]=savedEvents[i].extendedProps.eventType,savedEventNotes[i]=savedEvents[i].extendedProps.session_title,null!=savedEvents[i].extendedProps.remaining_slots&&(eventsString+=", Remaining Slots: "+savedEvents[i].extendedProps.remaining_slots+"|");eventsToList=eventsString.split("|"),finalEvents=eventsToList.toString().split(","),counter=0,1==eventsToList.length||eventsToList.pop();var n='<h5 class="text-capitalize font-weight-bold mt-4" >'+t.date.toLocaleDateString("en-gb",{weekday:"long",year:"numeric",month:"short",day:"numeric"})+"</h5><br>";for(i=0;i<finalEvents.length;i+=3)2==finalEvents.length?(n+='<p class="h6 text-left d-inline-block w-25" >'+finalEvents[i]+"</p>",n+='<p class="h6 text-left d-inline-block w-50">'+finalEvents[i+1]+"</p>"):(void 0!==finalEvents[i]&&void 0!==finalEvents[i+2]&&(0==strcmp(finalEvents[i+2].trim(),"Remaining Slots: 0")?n+='<p class="h6 text-left d-inline-block text-gray-med w-25">'+finalEvents[i]+"</p>":n+='<p class="h6 text-left d-inline-block w-25">'+finalEvents[i]+"</p>"),void 0!==finalEvents[i+1]&&void 0!==finalEvents[i+2]&&(0==strcmp(finalEvents[i+2].trim(),"Remaining Slots: 0")?(n+='<p href="#" id="calendarResultsBtn${counter}" class="h6 text-left d-inline-block text-gray-med btn text-uppercase w-50 disabled">'+finalEvents[i+1]+"</p>",counter++):""===savedEventNotes[counter]?(n+=`<p id="calendarResultsBtn${counter}" class="h6 text-left d-inline-block btn btn-link text-decoration-underline cursor-pointer w-50">`+finalEvents[i+1]+"</p>",counter++):(n+=`<p id="calendarResultsBtn${counter}" class="h6 text-left d-inline-block btn btn-link text-decoration-underline cursor-pointer w-50"><br>`+finalEvents[i+1]+'<br><label class="h6 text-capitalize text-dark font-size-small" id="notes"> '+savedEventNotes[counter]+"</label></p>",counter++)),void 0!==finalEvents[i+2]&&(0==strcmp(finalEvents[i+2].trim(),"Remaining Slots: 0")?n+='<p class="h6 text-left d-inline-block text-gray-med w-25">'+finalEvents[i+2].replace("Slots","Spots")+"</p><hr/>":n+='<p class="h6 text-left d-inline-block w-25">'+finalEvents[i+2].replace("Slots","Spots")+"</p><hr/>"));for($("#calendar_results").html(n),i=0;i<counter;i++)$("#calendarResultsBtn"+i).on("click",(function(){eventClickCalendar(savedTypes[parseInt($(this).attr("id").slice(-1),10)],savedSessionHasPwds[parseInt($(this).attr("id").slice(-1),10)],savedIds[parseInt($(this).attr("id").slice(-1),10)])}));$("html, body").animate({scrollTop:$("#calendar_results").offset().top},2e3)}});e.render()}));
//# sourceMappingURL=store.min.js.map