document.addEventListener("DOMContentLoaded",function(){var n=new FullCalendar.Calendar(document.getElementById("calendar"),{aspectRatio:function(){if($(window).width()>768){return 2}else{return 1.35}}(),themeSystem:"bootstrap",headerToolbar:{left:"prev,today,next",center:"title",right:"listMonth,dayGridMonth"},fixedWeekCount:false,validRange:{start:calendarJS.start,end:calendarJS.end},initialView:function(){return"listMonth"}(),events:calendarJS.sessions,height:"auto",datesSet:function(e){$("#calendar_month").text(e.view.title);$(".fc-header-toolbar .fc-toolbar-title").addClass("d-none d-md-block");$(".fc-list-event").addClass("cursor-pointer");if($(".title-exists").length==0)$(".fc-list-day .fc-list-day-text").append('<span class="font-weight-normal font-size-small d-none d-md-inline title-exists"> - Select a session below to get started</span>')},eventContent:function(e,t){$("#calendar_results").empty();return t("i",{},"")},eventDidMount:function(e){$("#calendar_results").empty();if(e.view.type=="dayGridMonth"){$(e.el).addClass("d-none");if($(".fc-daygrid-day-events").children().length>0){$(".fc-daygrid-day-events").children().parent().text("Times");$(".fc-daygrid-day-events").addClass("text-center h6 text-decoration-underline cursor-pointer font-weight-semi-bold text-break")}}if(e.view.type=="listMonth"){if(e.event.extendedProps.remaining_slots<=0){var t='<span class="text-decoration-none text-capitalize">'+e.event.title+"</span>"}else{var t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+"</span>"}if(!$.isEmptyObject(e.event.extendedProps)){if(e.event.extendedProps.remaining_slots<=0){$(e.el).find(".fc-list-event-title").addClass("text-gray-med");$(e.el).find(".fc-list-event-time").addClass("text-gray-med");$(e.el).find(".fc-list-event-dot").removeClass("fc-list-event-dot");$(e.el).removeClass("cursor-pointer");$(e.el).removeClass("fc-event-session-made_for_you");$(e.el).removeClass("fc-event-future");$(e.el).removeClass("fc-event");$(e.el).removeClass("fc-list-event")}if($.isNumeric(e.event.extendedProps.session_count)){t=e.event.title+'<span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.session_count+" session"+(e.event.extendedProps.session_count!=1?"s":"")+" available</span></span>"}if(!$.isEmptyObject(e.event.extendedProps.session_title)&&e.event.extendedProps.session_title!=e.event.title){t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.session_title+"</span></span>"}if(["REMOTE_PICKUP","REMOTE_PICKUP_PRIVATE"].includes(e.event.extendedProps.session_type_true)){if(e.event.extendedProps.session_remote_pickup){if(e.event.extendedProps.session_type_true=="REMOTE_PICKUP_PRIVATE"){t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline"> Private event hosted by '+e.event.extendedProps.session_host_informal_name+"</span></span>"}else{t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.session_title+'</span><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.session_remote_pickup+"</span></span>"}}}if(["FUNDRAISER"].includes(e.event.extendedProps.session_type_true)){if(e.event.extendedProps.fundraiser_name){t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">Benefits '+e.event.extendedProps.fundraiser_name+"</span></span>"}}if(["DREAM_TASTE","PRIVATE_SESSION"].includes(e.event.extendedProps.session_type_true)){if(e.event.extendedProps.session_host_informal_name){t='<span class="btn-link text-decoration-underline text-capitalize">'+e.event.title+'</span><span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">Hosted by '+e.event.extendedProps.session_host_informal_name+"</span></span>"}}}if($.isNumeric(e.event.extendedProps.remaining_slots)){t+='<span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.remaining_slots+" spot"+(e.event.extendedProps.remaining_slots!=1?"s":"")+" remaining</span></span>";if(["STANDARD"].includes(e.event.extendedProps.session_type_true)){t+='<span class="font-size-small"><span class="d-none d-md-inline"> - </span><span class="d-block d-md-inline">'+e.event.extendedProps.remaining_intro_slots+" Starter Pack spot"+(e.event.extendedProps.remaining_intro_slots!=1?"s":"")+" remaining</span></span>"}}if(e.event.extendedProps.is_open_for_customization){t+='&nbsp;<i class="dd-icon icon-customize text-orange font-size-small" data-toggle="tooltip" data-placement="top" title="Customization options available at checkout"></i>'}$(e.el).find(".fc-list-event-title").html(t)}},eventClick:function(s){if(s.event.extendedProps.remaining_slots<=0){s.jsEvent.preventDefault()}else{if(s.event.extendedProps.eventType==="session"){if(!s.event.extendedProps.session_has_password){window.location.href="/main.php?page=session&ref=store&sid="+s.event.extendedProps.id}else{bootbox.prompt("This event requires an invite code.",function(e){if(e){var t=s.event.extendedProps.id;var n=e.trim();$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_session_processor",op:"save",pwd:n,sid:t},success:function(e){if(e.result_code==1){bounce("main.php?page=session_menu")}else{bootbox.alert(e.processor_message)}},error:function(e,t){bootbox.alert("Unexpected error")}})}})}}}},eventMouseEnter:function(e){if(e.view.type=="listMonth"&&e.event.extendedProps.eventType==="session"){$(e.el).addClass("bg-gray-light")}},eventMouseLeave:function(e){if(e.view.type=="listMonth"&&e.event.extendedProps.eventType==="session"){$(e.el).removeClass("bg-gray-light")}},dateClick:function(e){$("#calendar_results").empty();events=n.getEvents();savedEvents=[];savedIds=[];savedTypes=[];savedSessionHasPwds=[];savedEventNotes=[];for(i=0;i<events.length;i++){if(strcmp(events[i].start.toLocaleDateString().trim(),e.date.toLocaleDateString().trim())==0){savedEvents.push(events[i])}}eventsString="";for(i=0;i<savedEvents.length;i++){date=savedEvents[i].start.toLocaleTimeString("en-gb",{hour:"2-digit",minute:"2-digit",hour12:true});if(strcmp(date.charAt(0),"0")==0){date=date.replace("0","")}if(strcmp(date,"0:00 pm")==0){eventsString+="12:00 pm, "+savedEvents[i].title}else if(strcmp(date,"0:00 am")==0){eventsString+="12:00 am, "+savedEvents[i].title}else if(strcmp(date,"0:30 pm")==0){eventsString+="12:30 pm, "+savedEvents[i].title}else if(strcmp(date,"0:30 am")==0){eventsString+="12:30 am, "+savedEvents[i].title}else{eventsString+=date+","+" "+savedEvents[i].title}savedIds[i]=savedEvents[i].extendedProps.id;savedSessionHasPwds[i]=savedEvents[i].extendedProps.session_has_password;savedTypes[i]=savedEvents[i].extendedProps.eventType;savedEventNotes[i]=savedEvents[i].extendedProps.session_title;if(savedEvents[i].extendedProps.remaining_slots!=null){eventsString+=", Remaining Slots: "+savedEvents[i].extendedProps.remaining_slots+"|"}}eventsToList=eventsString.split("|");finalEvents=eventsToList.toString().split(",");counter=0;if(eventsToList.length==1){}else{eventsToList.pop()}var t='<h5 class="text-capitalize font-weight-bold mt-4" >'+e.date.toLocaleDateString("en-gb",{weekday:"long",year:"numeric",month:"short",day:"numeric"})+"</h5><br>";for(i=0;i<finalEvents.length;i+=3){if(finalEvents.length==2){t+='<p class="h6 text-left d-inline-block w-25" >'+finalEvents[i]+"</p>";t+='<p class="h6 text-left d-inline-block w-50">'+finalEvents[i+1]+"</p>"}else{if(finalEvents[i]!==undefined&&finalEvents[i+2]!==undefined){if(strcmp(finalEvents[i+2].trim(),"Remaining Slots: 0")==0){t+='<p class="h6 text-left d-inline-block text-gray-med w-25">'+finalEvents[i]+"</p>"}else{t+='<p class="h6 text-left d-inline-block w-25">'+finalEvents[i]+"</p>"}}if(finalEvents[i+1]!==undefined&&finalEvents[i+2]!==undefined){if(strcmp(finalEvents[i+2].trim(),"Remaining Slots: 0")==0){t+='<p href="#" id="calendarResultsBtn${counter}" class="h6 text-left d-inline-block text-gray-med btn text-uppercase w-50 disabled">'+finalEvents[i+1]+"</p>";counter++}else{if(savedEventNotes[counter]===""){t+=`<p id="calendarResultsBtn${counter}" class="h6 text-left d-inline-block btn btn-link text-decoration-underline cursor-pointer w-50">`+finalEvents[i+1]+`</p>`;counter++}else{t+=`<p id="calendarResultsBtn${counter}" class="h6 text-left d-inline-block btn btn-link text-decoration-underline cursor-pointer w-50"><br>`+finalEvents[i+1]+'<br><label class="h6 text-capitalize text-dark font-size-small" id="notes">'+" "+savedEventNotes[counter]+"</label>"+`</p>`;counter++}}}if(finalEvents[i+2]!==undefined){if(strcmp(finalEvents[i+2].trim(),"Remaining Slots: 0")==0){t+='<p class="h6 text-left d-inline-block text-gray-med w-25">'+finalEvents[i+2].replace("Slots","Spots")+"</p><hr/>"}else{t+='<p class="h6 text-left d-inline-block w-25">'+finalEvents[i+2].replace("Slots","Spots")+"</p><hr/>"}}}}$("#calendar_results").html(t);for(i=0;i<counter;i++){$("#calendarResultsBtn"+i).on("click",function(){eventClickCalendar(savedTypes[parseInt($(this).attr("id").slice(-1),10)],savedSessionHasPwds[parseInt($(this).attr("id").slice(-1),10)],savedIds[parseInt($(this).attr("id").slice(-1),10)])})}$("html, body").animate({scrollTop:$("#calendar_results").offset().top},2e3)}});n.render()});function strcmp(e,t){if(e.toString()<t.toString())return-1;if(e.toString()>t.toString())return 1;return 0}function eventClickCalendar(e,t,s){if(e==="session"){if(!t){window.location.href="/main.php?page=session&ref=store&sid="+s}else{bootbox.prompt("This event requires an invite code.",function(e){if(e){var t=s;var n=e.trim();$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_session_processor",op:"save",pwd:n,sid:t},success:function(e){if(e.result_code==1){bounce("main.php?page=session_menu")}else{bootbox.alert(e.processor_message)}},error:function(e,t){bootbox.alert("Unexpected error")}})}})}}}
//# sourceMappingURL=store.min.js.map