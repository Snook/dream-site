{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["my_events.js"],"sourcesContent":["function emailIsNew(email)\r\n{\r\n\tvar isNew = true;\r\n\r\n\t$.each(eventReferrals, function (key, value) {\r\n\t\tif (value.referred_user_email === email)\r\n\t\t{\r\n\t\t\tisNew = false;\r\n\t\t}\r\n\t});\r\n\r\n\treturn isNew;\r\n}\r\n\r\nfunction updateEmailCounter()\r\n{\r\n\tvar count = 0;\r\n\r\n\t$.each(eventReferrals, function (key, value) {\r\n\t\tif (value.referred_user_send_email == true)\r\n\t\t{\r\n\t\t\tcount++;\r\n\t\t}\r\n\t});\r\n\r\n\t$('#number_of_emails').text('');\r\n\t$('.send-event-emails').addClass('disabled');\r\n\r\n\tif (count > 0)\r\n\t{\r\n\t\t$('#number_of_emails_plural').show();\r\n\r\n\t\tif (count == 1)\r\n\t\t{\r\n\t\t\t$('#number_of_emails_plural').hide();\r\n\t\t}\r\n\r\n\t\t$('#number_of_emails').text(count);\r\n\t\t$('.send-event-emails').removeClass('disabled');\r\n\t}\r\n}\r\n\r\nfunction setEventReferral(id, properties)\r\n{\r\n\tif (typeof eventReferrals[id] == 'undefined')\r\n\t{\r\n\t\teventReferrals[id] = properties;\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$.each(properties, function (key, value) {\r\n\t\t\teventReferrals[id][key] = value;\r\n\t\t});\r\n\t}\r\n\r\n\tupdateEmailCounter();\r\n}\r\n\r\nfunction unsetEventReferral(id)\r\n{\r\n\tif (typeof eventReferrals[id] != 'undefined')\r\n\t{\r\n\t\tdelete eventReferrals[id];\r\n\t}\r\n\r\n\tupdateEmailCounter();\r\n}\r\n\r\nfunction add_contact(name, email)\r\n{\r\n\t// add if only if it hasn't already been added\r\n\tif (!$('[data-email-address-div=\"' + email + '\"]').length)\r\n\t{\r\n\t\tvar add_div = $('.add-event-contact-div').clone();\r\n\r\n\t\t$(add_div).find('.add-contact-email').removeClass('add-contact-email is-invalid').attr('disabled', true).val(email);\r\n\t\t$(add_div).find('.add-contact-name').removeClass('add-contact-name').attr('disabled', true).val(name);\r\n\t\t$(add_div).removeClass('add-event-contact-div').attr('data-email-address-div', email);\r\n\r\n\t\t$(add_div).find('.add-event-contact').data('email-address', email).removeClass('add-event-contact disabled btn-primary').addClass('remove-event-contact btn-warning').find('.fas').removeClass('fa-plus').addClass('fa-minus');\r\n\r\n\t\t$(add_div).insertBefore('.add-event-contact-div');\r\n\r\n\t\tsetEventReferral(email, {\r\n\t\t\t'referred_user_name': name,\r\n\t\t\t'referred_user_email': email,\r\n\t\t\t'referred_user_send_email': true\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction list_contacts(contacts)\r\n{\r\n\tif (contacts.length > 0)\r\n\t{\r\n\t\tbootbox.dialog({\r\n\t\t\tscrollable: true,\r\n\t\t\ttitle: \"Select Contacts\",\r\n\t\t\tmessage: contacts,\r\n\t\t\tbuttons: {\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tlabel: 'Add selected',\r\n\t\t\t\t\tclassName: 'btn-primary',\r\n\t\t\t\t\tcallback: function () {\r\n\r\n\t\t\t\t\t\t$('[id^=\"import_id-\"]').each(function (e) {\r\n\r\n\t\t\t\t\t\t\tif ($(this).is(':checked'))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar name = $(this).data('name');\r\n\t\t\t\t\t\t\t\tvar email = $(this).data('email');\r\n\r\n\t\t\t\t\t\t\t\tadd_contact(name, email);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Error',\r\n\t\t\tmessage: 'No email addresses found in address book.'\r\n\t\t});\r\n\t}\r\n}\r\n\r\n$(function () {\r\n\r\n\t$(document).on('change keyup', '.add-contact-email', function (e) {\r\n\r\n\t\tvar email = $(this).val().trim();\r\n\t\tvar isNewEmail = emailIsNew(email);\r\n\r\n\t\t$(this).removeClass('is-invalid');\r\n\r\n\t\tif (!isNewEmail)\r\n\t\t{\r\n\t\t\t$(this).addClass('is-invalid');\r\n\t\t}\r\n\r\n\t\tif (isNewEmail && email != '')\r\n\t\t{\r\n\t\t\tvar key = e.which;\r\n\r\n\t\t\tif (key == 13)\r\n\t\t\t{\r\n\t\t\t\t$('.add-event-contact').trigger('click');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprocessor: 'data_lookup',\r\n\t\t\t\t\ttype: 'valid_email',\r\n\t\t\t\t\tcheck: 'email',\r\n\t\t\t\t\trules: {\r\n\t\t\t\t\t\tnot_self: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\temail: email\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\tif (json.processor_success && emailIsNew(email))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('.add-event-contact').removeClass('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('.add-event-contact').addClass('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$('.add-event-contact').addClass('disabled');\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('change keyup', '#session_message, #session_host', function (e) {\r\n\r\n\t\t$('.save-event-details').removeClass('disabled');\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.save-event-details', function (e) {\r\n\r\n\t\tvar host = $('#session_host').val();\r\n\t\tvar message = $('#session_message').val();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\top: 'save_details',\r\n\t\t\t\tevent_id: manageEventID,\r\n\t\t\t\tmessage: message,\r\n\t\t\t\thost: host\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('.save-event-details').addClass('disabled');\r\n\r\n\t\t\t\t\t$('.btn-spinning').removeClass('btn-spinning');\r\n\t\t\t\t\t$('.ld-spin').remove();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.add-event-contact:not(.disabled)', function (e) {\r\n\r\n\t\tvar name = $('.add-event-contact-div').find('.add-contact-name').val().trim();\r\n\t\tvar email = $('.add-event-contact-div').find('.add-contact-email').val().trim();\r\n\r\n\t\tvar isNewEmail = emailIsNew(email);\r\n\r\n\t\tif (isNewEmail)\r\n\t\t{\r\n\t\t\tif (name == '')\r\n\t\t\t{\r\n\t\t\t\tname = email;\r\n\r\n\t\t\t\t$('.add-event-contact-div').find('.add-contact-name').val(name);\r\n\t\t\t}\r\n\r\n\t\t\t$('.add-event-contact-div').find('.add-contact-email').removeClass('add-contact-email is-invalid').attr('disabled', true);\r\n\t\t\t$('.add-event-contact-div').find('.add-contact-name').removeClass('add-contact-name').attr('disabled', true);\r\n\t\t\t$('.add-event-contact-div').removeClass('add-event-contact-div').attr('data-email-address-div', email);\r\n\r\n\t\t\t$(this).data('email-address', email).removeClass('add-event-contact btn-primary').addClass('remove-event-contact btn-warning').find('.fas').removeClass('fa-plus').addClass('fa-minus');\r\n\r\n\t\t\tsetEventReferral(email, {\r\n\t\t\t\t'referred_user_name': name,\r\n\t\t\t\t'referred_user_email': email,\r\n\t\t\t\t'referred_user_send_email': true\r\n\t\t\t});\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\t\top: 'get_template',\r\n\t\t\t\t\ttemplate: 'manage_invites'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('.event-referrals-div').append(json.html);\r\n\r\n\t\t\t\t\t\tvar isMobile = window.matchMedia(\"only screen and (max-width: 760px)\").matches;\r\n\r\n\t\t\t\t\t\tif (!isMobile)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$('.add-event-contact-div').find('.add-contact-name').focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$(this).addClass('disabled');\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('change', '.referred_user_send_email', function (e) {\r\n\r\n\t\tvar referral_id = $(this).data('referral_id');\r\n\r\n\t\tsetEventReferral(referral_id, {'referred_user_send_email': false});\r\n\r\n\t\tif ($(this).is(':checked'))\r\n\t\t{\r\n\t\t\tsetEventReferral(referral_id, {'referred_user_send_email': true});\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.remove-event-contact', function (e) {\r\n\r\n\t\tvar email = $(this).data('email-address');\r\n\r\n\t\tunsetEventReferral(email);\r\n\r\n\t\t$('[data-email-address-div=\"' + email + '\"]').slideUp(\"normal\", function () {\r\n\t\t\t$(this).remove();\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.send-event-emails:not(.disabled)', function (e) {\r\n\r\n\t\t$('.save-event-details').trigger('click');\r\n\r\n\t\tvar personal_message = $('#session_message').val().trim();\r\n\t\tvar session_host = $('#session_host').val();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\top: 'send_invites',\r\n\t\t\t\tevent_id: manageEventID,\r\n\t\t\t\tmessage: personal_message,\r\n\t\t\t\tname: session_host,\r\n\t\t\t\temails: JSON.stringify(eventReferrals)\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\teventReferrals = $.parseJSON(json.eventReferralsJS);\r\n\r\n\t\t\t\t\t$('.event-referrals-div').html(json.html);\r\n\r\n\t\t\t\t\t$('.btn-spinning').removeClass('btn-spinning');\r\n\t\t\t\t\t$('.ld-spin').remove();\r\n\r\n\t\t\t\t\tupdateEmailCounter();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".import_contacts_previous\", function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\top: 'import_contacts',\r\n\t\t\t\tclient: 'previous'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tlist_contacts(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".import_contacts_outlook\", function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tgetGraphContacts(function (data) {\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\t\top: 'import_contacts',\r\n\t\t\t\t\tclient: 'msgraph',\r\n\t\t\t\t\tcontacts: JSON.stringify(data)\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlist_contacts(json.html);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t})\r\n\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".import_contacts_google\", function (e) {\r\n\t\te.preventDefault();\r\n\t\tgapi.client.setApiKey(CLIENT.google.api);\r\n\t\tgapi.auth.authorize({\r\n\t\t\tclient_id: CLIENT.google.id,\r\n\t\t\tscope: 'https://www.googleapis.com/auth/contacts.readonly',\r\n\t\t\timmediate: false\r\n\t\t}, getGoogleContacts);\r\n\t});\r\n\r\n\tfunction getGoogleContacts(authorizationResult)\r\n\t{\r\n\t\tif (authorizationResult && !authorizationResult.error)\r\n\t\t{\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: \"https://www.google.com/m8/feeds/contacts/default/thin?access_token=\" + authorizationResult.access_token + \"&alt=json&max-results=10000\",\r\n\t\t\t\tdataType: \"json\",\r\n\t\t\t\tsuccess: function (data) {\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\ttimeout: 20000,\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\t\t\t\top: 'import_contacts',\r\n\t\t\t\t\t\t\tclient: 'google',\r\n\t\t\t\t\t\t\tcontacts: JSON.stringify(data)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlist_contacts(json.html);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n});"],"names":["emailIsNew","email","isNew","$","each","eventReferrals","key","value","referred_user_email","updateEmailCounter","count","referred_user_send_email","text","addClass","show","hide","removeClass","setEventReferral","id","properties","unsetEventReferral","add_contact","name","length","add_div","clone","find","attr","val","data","insertBefore","referred_user_name","list_contacts","contacts","bootbox","dialog","scrollable","title","message","buttons","add","label","className","callback","e","this","is","dd_message","document","on","trim","isNewEmail","which","trigger","ajax","url","type","timeout","dataType","processor","check","rules","not_self","success","json","status","processor_success","error","objAJAXRequest","strError","response","host","op","event_id","manageEventID","remove","template","append","html","isMobile","window","matchMedia","matches","focus","referral_id","slideUp","personal_message","session_host","emails","JSON","stringify","parseJSON","eventReferralsJS","preventDefault","client","getGraphContacts","gapi","setApiKey","CLIENT","google","api","auth","authorize","client_id","scope","immediate","getGoogleContacts","authorizationResult","access_token"],"mappings":"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"}