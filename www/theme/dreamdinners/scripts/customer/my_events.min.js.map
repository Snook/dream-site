{"version":3,"sourceRoot":"js/src/dreamdinners","sources":["my_events.js"],"sourcesContent":["function emailIsNew(email)\r\n{\r\n\tvar isNew = true;\r\n\r\n\t$.each(eventReferrals, function (key, value) {\r\n\t\tif (value.referred_user_email === email)\r\n\t\t{\r\n\t\t\tisNew = false;\r\n\t\t}\r\n\t});\r\n\r\n\treturn isNew;\r\n}\r\n\r\nfunction updateEmailCounter()\r\n{\r\n\tvar count = 0;\r\n\r\n\t$.each(eventReferrals, function (key, value) {\r\n\t\tif (value.referred_user_send_email == true)\r\n\t\t{\r\n\t\t\tcount++;\r\n\t\t}\r\n\t});\r\n\r\n\t$('#number_of_emails').text('');\r\n\t$('.send-event-emails').addClass('disabled');\r\n\r\n\tif (count > 0)\r\n\t{\r\n\t\t$('#number_of_emails_plural').show();\r\n\r\n\t\tif (count == 1)\r\n\t\t{\r\n\t\t\t$('#number_of_emails_plural').hide();\r\n\t\t}\r\n\r\n\t\t$('#number_of_emails').text(count);\r\n\t\t$('.send-event-emails').removeClass('disabled');\r\n\t}\r\n}\r\n\r\nfunction setEventReferral(id, properties)\r\n{\r\n\tif (typeof eventReferrals[id] == 'undefined')\r\n\t{\r\n\t\teventReferrals[id] = properties;\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$.each(properties, function (key, value) {\r\n\t\t\teventReferrals[id][key] = value;\r\n\t\t});\r\n\t}\r\n\r\n\tupdateEmailCounter();\r\n}\r\n\r\nfunction unsetEventReferral(id)\r\n{\r\n\tif (typeof eventReferrals[id] != 'undefined')\r\n\t{\r\n\t\tdelete eventReferrals[id];\r\n\t}\r\n\r\n\tupdateEmailCounter();\r\n}\r\n\r\nfunction add_contact(name, email)\r\n{\r\n\t// add if only if it hasn't already been added\r\n\tif (!$('[data-email-address-div=\"' + email + '\"]').length)\r\n\t{\r\n\t\tvar add_div = $('.add-event-contact-div').clone();\r\n\r\n\t\t$(add_div).find('.add-contact-email').removeClass('add-contact-email is-invalid').attr('disabled', true).val(email);\r\n\t\t$(add_div).find('.add-contact-name').removeClass('add-contact-name').attr('disabled', true).val(name);\r\n\t\t$(add_div).removeClass('add-event-contact-div').attr('data-email-address-div', email);\r\n\r\n\t\t$(add_div).find('.add-event-contact').data('email-address', email).removeClass('add-event-contact disabled btn-primary').addClass('remove-event-contact btn-warning').find('.fas').removeClass('fa-plus').addClass('fa-minus');\r\n\r\n\t\t$(add_div).insertBefore('.add-event-contact-div');\r\n\r\n\t\tsetEventReferral(email, {\r\n\t\t\t'referred_user_name': name,\r\n\t\t\t'referred_user_email': email,\r\n\t\t\t'referred_user_send_email': true\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction list_contacts(contacts)\r\n{\r\n\tif (contacts.length > 0)\r\n\t{\r\n\t\tbootbox.dialog({\r\n\t\t\tscrollable: true,\r\n\t\t\ttitle: \"Select Contacts\",\r\n\t\t\tmessage: contacts,\r\n\t\t\tbuttons: {\r\n\t\t\t\tadd: {\r\n\t\t\t\t\tlabel: 'Add selected',\r\n\t\t\t\t\tclassName: 'btn-primary',\r\n\t\t\t\t\tcallback: function () {\r\n\r\n\t\t\t\t\t\t$('[id^=\"import_id-\"]').each(function (e) {\r\n\r\n\t\t\t\t\t\t\tif ($(this).is(':checked'))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar name = $(this).data('name');\r\n\t\t\t\t\t\t\t\tvar email = $(this).data('email');\r\n\r\n\t\t\t\t\t\t\t\tadd_contact(name, email);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\tdd_message({\r\n\t\t\ttitle: 'Error',\r\n\t\t\tmessage: 'No email addresses found in address book.'\r\n\t\t});\r\n\t}\r\n}\r\n\r\n$(function () {\r\n\r\n\t$(document).on('change keyup', '.add-contact-email', function (e) {\r\n\r\n\t\tvar email = $(this).val().trim();\r\n\t\tvar isNewEmail = emailIsNew(email);\r\n\r\n\t\t$(this).removeClass('is-invalid');\r\n\r\n\t\tif (!isNewEmail)\r\n\t\t{\r\n\t\t\t$(this).addClass('is-invalid');\r\n\t\t}\r\n\r\n\t\tif (isNewEmail && email != '')\r\n\t\t{\r\n\t\t\tvar key = e.which;\r\n\r\n\t\t\tif (key == 13)\r\n\t\t\t{\r\n\t\t\t\t$('.add-event-contact').trigger('click');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprocessor: 'data_lookup',\r\n\t\t\t\t\ttype: 'valid_email',\r\n\t\t\t\t\tcheck: 'email',\r\n\t\t\t\t\trules: {\r\n\t\t\t\t\t\tnot_self: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\temail: email\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\tif (json.processor_success && emailIsNew(email))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('.add-event-contact').removeClass('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('.add-event-contact').addClass('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$('.add-event-contact').addClass('disabled');\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('change keyup', '#session_message, #session_host', function (e) {\r\n\r\n\t\t$('.save-event-details').removeClass('disabled');\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.save-event-details', function (e) {\r\n\r\n\t\tvar host = $('#session_host').val();\r\n\t\tvar message = $('#session_message').val();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\top: 'save_details',\r\n\t\t\t\tevent_id: manageEventID,\r\n\t\t\t\tmessage: message,\r\n\t\t\t\thost: host\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\t$('.save-event-details').addClass('disabled');\r\n\r\n\t\t\t\t\t$('.btn-spinning').removeClass('btn-spinning');\r\n\t\t\t\t\t$('.ld-spin').remove();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.add-event-contact:not(.disabled)', function (e) {\r\n\r\n\t\tvar name = $('.add-event-contact-div').find('.add-contact-name').val().trim();\r\n\t\tvar email = $('.add-event-contact-div').find('.add-contact-email').val().trim();\r\n\r\n\t\tvar isNewEmail = emailIsNew(email);\r\n\r\n\t\tif (isNewEmail)\r\n\t\t{\r\n\t\t\tif (name == '')\r\n\t\t\t{\r\n\t\t\t\tname = email;\r\n\r\n\t\t\t\t$('.add-event-contact-div').find('.add-contact-name').val(name);\r\n\t\t\t}\r\n\r\n\t\t\t$('.add-event-contact-div').find('.add-contact-email').removeClass('add-contact-email is-invalid').attr('disabled', true);\r\n\t\t\t$('.add-event-contact-div').find('.add-contact-name').removeClass('add-contact-name').attr('disabled', true);\r\n\t\t\t$('.add-event-contact-div').removeClass('add-event-contact-div').attr('data-email-address-div', email);\r\n\r\n\t\t\t$(this).data('email-address', email).removeClass('add-event-contact btn-primary').addClass('remove-event-contact btn-warning').find('.fas').removeClass('fa-plus').addClass('fa-minus');\r\n\r\n\t\t\tsetEventReferral(email, {\r\n\t\t\t\t'referred_user_name': name,\r\n\t\t\t\t'referred_user_email': email,\r\n\t\t\t\t'referred_user_send_email': true\r\n\t\t\t});\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\t\top: 'get_template',\r\n\t\t\t\t\ttemplate: 'manage_invites'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('.event-referrals-div').append(json.html);\r\n\r\n\t\t\t\t\t\tvar isMobile = window.matchMedia(\"only screen and (max-width: 760px)\").matches;\r\n\r\n\t\t\t\t\t\tif (!isMobile)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$('.add-event-contact-div').find('.add-contact-name').focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$(this).addClass('disabled');\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('change', '.referred_user_send_email', function (e) {\r\n\r\n\t\tvar referral_id = $(this).data('referral_id');\r\n\r\n\t\tsetEventReferral(referral_id, {'referred_user_send_email': false});\r\n\r\n\t\tif ($(this).is(':checked'))\r\n\t\t{\r\n\t\t\tsetEventReferral(referral_id, {'referred_user_send_email': true});\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.remove-event-contact', function (e) {\r\n\r\n\t\tvar email = $(this).data('email-address');\r\n\r\n\t\tunsetEventReferral(email);\r\n\r\n\t\t$('[data-email-address-div=\"' + email + '\"]').slideUp(\"normal\", function () {\r\n\t\t\t$(this).remove();\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('click', '.send-event-emails:not(.disabled)', function (e) {\r\n\r\n\t\t$('.save-event-details').trigger('click');\r\n\r\n\t\tvar personal_message = $('#session_message').val().trim();\r\n\t\tvar session_host = $('#session_host').val();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\top: 'send_invites',\r\n\t\t\t\tevent_id: manageEventID,\r\n\t\t\t\tmessage: personal_message,\r\n\t\t\t\tname: session_host,\r\n\t\t\t\temails: JSON.stringify(eventReferrals)\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\teventReferrals = $.parseJSON(json.eventReferralsJS);\r\n\r\n\t\t\t\t\t$('.event-referrals-div').html(json.html);\r\n\r\n\t\t\t\t\t$('.btn-spinning').removeClass('btn-spinning');\r\n\t\t\t\t\t$('.ld-spin').remove();\r\n\r\n\t\t\t\t\tupdateEmailCounter();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".import_contacts_previous\", function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: 'ddproc.php',\r\n\t\t\ttype: 'POST',\r\n\t\t\ttimeout: 20000,\r\n\t\t\tdataType: 'json',\r\n\t\t\tdata: {\r\n\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\top: 'import_contacts',\r\n\t\t\t\tclient: 'previous'\r\n\t\t\t},\r\n\t\t\tsuccess: function (json, status) {\r\n\t\t\t\tif (json.processor_success)\r\n\t\t\t\t{\r\n\t\t\t\t\tlist_contacts(json.html);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".import_contacts_outlook\", function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tgetGraphContacts(function (data) {\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\ttimeout: 20000,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\t\top: 'import_contacts',\r\n\t\t\t\t\tclient: 'msgraph',\r\n\t\t\t\t\tcontacts: JSON.stringify(data)\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlist_contacts(json.html);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t})\r\n\r\n\t});\r\n\r\n\t$(document).on(\"click\", \".import_contacts_google\", function (e) {\r\n\t\te.preventDefault();\r\n\t\tgapi.client.setApiKey(CLIENT.google.api);\r\n\t\tgapi.auth.authorize({\r\n\t\t\tclient_id: CLIENT.google.id,\r\n\t\t\tscope: 'https://www.googleapis.com/auth/contacts.readonly',\r\n\t\t\timmediate: false\r\n\t\t}, getGoogleContacts);\r\n\t});\r\n\r\n\tfunction getGoogleContacts(authorizationResult)\r\n\t{\r\n\t\tif (authorizationResult && !authorizationResult.error)\r\n\t\t{\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: \"https://www.google.com/m8/feeds/contacts/default/thin?access_token=\" + authorizationResult.access_token + \"&alt=json&max-results=10000\",\r\n\t\t\t\tdataType: \"json\",\r\n\t\t\t\tsuccess: function (data) {\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: 'ddproc.php',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\ttimeout: 20000,\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprocessor: 'my_events',\r\n\t\t\t\t\t\t\top: 'import_contacts',\r\n\t\t\t\t\t\t\tclient: 'google',\r\n\t\t\t\t\t\t\tcontacts: JSON.stringify(data)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function (json, status) {\r\n\t\t\t\t\t\t\tif (json.processor_success)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlist_contacts(json.html);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\r\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n});"],"names":["emailIsNew","email","isNew","$","each","eventReferrals","key","value","referred_user_email","updateEmailCounter","count","referred_user_send_email","text","addClass","show","hide","removeClass","setEventReferral","id","properties","unsetEventReferral","add_contact","name","length","add_div","clone","find","attr","val","data","insertBefore","referred_user_name","list_contacts","contacts","bootbox","dialog","scrollable","title","message","buttons","add","label","className","callback","e","this","is","dd_message","document","on","trim","isNewEmail","which","trigger","ajax","url","type","timeout","dataType","processor","check","rules","not_self","success","json","status","processor_success","error","objAJAXRequest","strError","response","host","op","event_id","manageEventID","remove","template","append","html","isMobile","window","matchMedia","matches","focus","referral_id","slideUp","personal_message","session_host","emails","JSON","stringify","parseJSON","eventReferralsJS","preventDefault","client","getGraphContacts","gapi","setApiKey","CLIENT","google","api","auth","authorize","client_id","scope","immediate","getGoogleContacts","authorizationResult","access_token"],"mappings":"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"}