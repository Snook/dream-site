var AJAX_IN_PROCESS=!1,GUEST_PREFERENCES={},lang={en:{dd:{dream_dinners:"Dream Dinners"},tc:{terms_and_conditions:"Terms & Conditions",delayed_payment:"When I opt to use the Delayed Payment service to pay for my order, I understand that the balance due for this and future orders will be automatically withdrawn (5) five days prior to my session date and will transact using the same credit card as was used to pay for the order deposit.",delayed_payment_decline:"By declining the Delayed Payment Terms and Conditions future orders are required to be paid in full upon submission. The balance due for existing Delayed Payement orders will be due at session."}}};function set_user_pref(e,t,a,s){e=e.toUpperCase();let i=USER_PREFERENCES[e].value;t=$.isPlainObject(i)&&$.isPlainObject(t)?JSON.stringify($.extend(USER_PREFERENCES[e].value,t)):t.toString(),$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"account",op:"update_pref",key:e,user_id:a,value:t.toString()},success:function(e,t){"function"==typeof s&&s(e,t),response=e},error:function(e,t){response="Unexpected error"}})}function get_user_pref(e,t,a){if(void 0!==t)$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"account",op:"get_pref",key:e,user_id:t},success:function(e,t){return"function"==typeof a&&a(e,t),e},error:function(e,t){response="Unexpected error"}});else if("undefined"!=typeof USER_PREFERENCES&&"object"==typeof USER_PREFERENCES[e])return USER_PREFERENCES[e];return!1}function select_location_click_handler(){$(document).on("click",'[id^="select_location-"], [id^="select_intro_location-"]',(function(e){var t={store_id:null,order_type:"standard"};this.id.indexOf("intro_location")>0&&(t.order_type="intro"),t.store_id=this.id.split("-")[1],setStoreAndBeginOrder(t),e.preventDefault()}))}function bounce(e,t){e||(e="/"),t?window.open(e,t):window.location.href=e}function incrementVal(e,t){return e=parseInt(e),t=parseInt(t),isNaN(e)&&(e=0),e+=t,parseInt(e)<0&&(e=0),e}function toggleId(e){$("#"+e).slideToggle()}function setQueryString(e,t){var a=window.location.search.substring(1).split("&");var_found=!1,new_query="?";for(var s=0;s<a.length;s++){var i=a[s].split("=");i[0]==e&&(i[1]=t,var_found=!0),s>0&&(new_query+="&"),""!=i[0]&&(new_query+=i[0]+"="+i[1])}return var_found||(s>0&&(new_query+="&"),new_query+=e+"="+t),new_query}function getQueryVariable(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var s=t[a].split("=");if(s[0]==e)return decodeURI(s[1])}return!1}function removeQueryVariable(e,t){var a=t.split("?")[0],s=[],i=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==i){for(var o=(s=i.split("&")).length-1;o>=0;o-=1)s[o].split("=")[0]===e&&s.splice(o,1);a=a+"?"+s.join("&")}return a}function mailHideOnSubmit(e){document.getElementById("mailhide_form").submit()}function historyPush(e){if(window.history&&window.history.pushState){var t=document.title;e.title&&(t=e.title),history.pushState(null,t,e.url)}}function historyReplace(e){if(window.history&&window.history.replaceState){var t=document.title;e.title&&(t=e.title),history.replaceState(null,t,e.url)}}function create_and_submit_form(e){var t={method:"post",target:!1};$.extend(t,e);var a=$("<form></form>");for(var s in a.attr("method",t.method),t.action&&a.attr("action",t.action),t.target&&a.attr("target",t.target),t.input)$("<input>").attr({type:"hidden",name:s,value:t.input[s]}).appendTo(a);$(document.body).append(a),a.submit(),$(a).remove()}function setStoreAndBeginOrder(e){$(".img_throbber_circle").show(),create_and_submit_form({action:"/session-menu",input:{store:e.store_id,order_type:e.order_type}})}function showMap(e){modal_message({width:670,height:580,modal:!1,resizable:!0,size:"large",message:'<iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="//maps.google.com/maps?q=Dream%20Dinners%20'+encodeURIComponent(e)+"&amp;hnear=Dream%20Dinners%20"+encodeURIComponent(e)+'&amp;f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;&amp;ie=UTF8&amp;hq=&amp;t=m3&amp;spn=0.02878,0.054932&amp;z=14&amp;iwloc=A&amp;output=embed"></iframe>'})}function confirmNavigate(e,t){modal_message({message:t,confirm:function(){bounce(e)}})}function dd_console_log(e){is_debug()&&window.console&&console.log("DD Console Log: "+e)}function address_location(e,t){var a={address:!1,latlong:!1};void 0===t&&"function"==typeof e?(t=e,e=a):$.extend(a,e);var s=function(e,a,s){var i,o=new google.maps.Geocoder;if(null!=a&&(a=a.trim()).length<=5&&(i={latLng:d,componentRestrictions:{postalCode:a}}),void 0!==s&&s){s=s.split(",");var n=parseFloat(s[0]),r=parseFloat(s[1]);i={latLng:d=new google.maps.LatLng(n,r)}}else if(!1!==e){var d;n=parseFloat(e.coords.latitude),r=parseFloat(e.coords.longitude);i={latLng:d=new google.maps.LatLng(n,r)}}else null!=a&&a.length>5&&(i={address:a});o.geocode(i,(function(e,a){a==google.maps.GeocoderStatus.OK?e?t("ok",e):t("no_result","No geocoder results found."):t("error","No geocoder results found.")}))};e.address?s(!1,e.address,!1):e.latlong?s(!1,!1,e.latlong):navigator.geolocation?navigator.geolocation.getCurrentPosition(s,(function(e){switch(e.code){case e.PERMISSION_DENIED:t("gl_error","User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:t("gl_error","Geolocation information is unavailable.");break;case e.TIMEOUT:t("gl_error","The request to get user location timed out.");break;case e.UNKNOWN_ERROR:t("gl_error","An unknown error occurred.")}})):t("gl_error","Geolocation not supported.")}function dd_toast(e){var t={animation:!0,autohide:!0,delay:5e3,title:!1,message:!1,type:"primary"};switch($.extend(t,e),$(".toast-container").length||$('<div class="toast-container fixed-top mt-4"></div>').appendTo("body"),t.type){case"primary":t.css_header="bg-green-dark text-white",t.title=t.title?t.title:"Notice";break;case"secondary":t.css_header="bg-secondary text-white",t.title=t.title?t.title:"Notice";break;case"info":t.css_header="bg-info text-white",t.title=t.title?t.title:"Notice";break;case"success":t.css_header="bg-success text-white",t.title=t.title?t.title:"Success";break;case"warning":case"warn":t.css_header="bg-warning text-white",t.title=t.title?t.title:"Warning";break;case"error":case"danger":t.css_header="bg-danger text-white",t.title=t.title?t.title:"Error"}var a='<div class="toast mx-auto" role="alert" aria-live="assertive" aria-atomic="true" data-delay="'+t.delay+'" data-autohide="'+t.autohide+'">';a+='<div class="toast-header '+t.css_header+'">',a+='<strong class="mr-auto">'+(t.title?t.title:"Notice")+"</strong>",a+='<button type="btn btn-primary btn-sm" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close"><span aria-hidden="true" class="text-white">&times;</span></button>',a+="</div>",a+='<div class="toast-body">'+t.message+"</div>",a+="</div>",$(".toast-container").append(a),$(".toast-container .toast:last").toast("show")}function fetchToasts(e){if(e.dd_toasts){let t=0;$.each(e.dd_toasts,(function(a){setTimeout((()=>{dd_toast(e.dd_toasts[a])}),t),t+=500}))}}function modal_message(e){var t={title:!1,message:!1,size:!1};if($.extend(t,e),void 0!==t.confirm)"function"==typeof t.confirm&&(t.buttons={confirm:{label:"Confirm",className:"btn-primary",callback:t.confirm},cancel:{label:"Cancel",className:"btn-secondary",callback:t.cancel}}),bootbox.dialog(t);else if(void 0!==t.buttons){var a={};$.each(t.buttons,(function(e,t){"function"==typeof t&&(a[e]={label:e,className:"btn-primary",callback:t})})),t.buttons=a,bootbox.dialog(t)}else bootbox.alert(t)}function dd_alert(e){modal_message({title:"Alert",message:e})}function formatAsMoney(e){return void 0===e&&(e=0),e-=0,(e=Math.round(100*e)/100)==Math.floor(e)?e+".00":10*e==Math.floor(10*e)?e+"0":e}function get_todays_date(){var e=new Date,t=("0"+e.getDate()).slice(-2),a=("0"+(e.getMonth()+1)).slice(-2);return e.getFullYear()+"-"+a+"-"+t}function cookieCheck(){var e=getQueryVariable("host_url"),t=!1;e&&"http://support.dreamdinners.com"==e&&(t=!0),$.cookie("chkcookie",!0,{domain:COOKIE.domain,path:"/"}),$.cookie("chkcookie")||t||modal_message({title:"Alert",message:"You have cookies turned off in your browser. Please check your settings, and enable cookies for this site in order to continue. Thank you."})}function is_debug(){return"undefined"!=typeof DEBUG&&!0===DEBUG}function dd_print(){is_debug()?dd_console_log("Debug: Print dialog called here."):window.print()}function nl2br(e,t){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function strip_tags(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,(function(e,a){return t.indexOf("<"+a.toLowerCase()+">")>-1?e:""}))}if(function(e){e.oauthpopup=function(t){if(!e(this).data("path"))throw new Error("data-path must not be empty");var a={windowOptions:{width:e(this).data("width"),height:e(this).data("height")},path:e(this).data("path"),ref_page:e(this).data("ref_page"),reload_page:e(this).data("reload"),callback:t},s=e.extend({},{windowName:"ConnectWithOAuth",windowOptions:{width:"800",height:"400",location:"0",status:"0"}},a),i=null!=window.screenLeft?window.screenLeft:window.screenX,o=null!=window.screenTop?window.screenTop:window.screenY,n=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,d=n/2-s.windowOptions.width/2+i,c=r/2-s.windowOptions.height/2+o,l="location="+s.windowOptions.location+", status="+s.windowOptions.status+", width="+s.windowOptions.width+", height="+s.windowOptions.height+", top="+c+", left="+d,u=s.path;void 0!==s.ref_page&&(u+="&ref_page="+s.ref_page),void 0!==s.reload_page&&(u+="&reload_page="+s.reload_page);var h=window.open(u,s.windowName,l);return"function"==typeof s.callback&&e.doTimeout("oauth_interval",1e3,(function(){return!h.closed||(e.doTimeout("oauth_interval"),s.callback(),!1)})),this},e.fn.oauthpopup=function(t){$this=e(this),$this.click(e.oauthpopup.bind(this,t))},e.fn.attention=function(t,a){return null==t&&(t="#ffed8c"),null==a&&(a=2e3),e(this).stop().css("background-color",t).animate({backgroundColor:"transparent"},{duration:a}),this},e.fn.center=function(){return this.css("position","absolute"),this.css("top",Math.max(0,(e(window).height()-e(this).outerHeight())/2+e(window).scrollTop())+"px"),this.css("left",Math.max(0,(e(window).width()-e(this).outerWidth())/2+e(window).scrollLeft())+"px"),this},e.fn.getVal=function(){var t=e(this),a=t.eq(0).val();return a==t.attr("placeholder")?"":a},e.fn.addSpinner=function(e){return this.hasClass("btn-spin")&&0===this.find(".spinner-border").length?this.append('<span class="spinner-border spinner-border-sm float-right mt-1" role="status" aria-hidden="true"></span>'):this.hasClass("btn-spinner")&&!this.hasClass("btn-spinning")&&this.addClass("btn-spinning").append('<div class="ld-spin"></div>'),this},e.fn.removeSpinner=function(e){return this.removeClass("btn-spinning"),this.find(".ld-spin").remove(),this.find(".spinner-border").remove(),this},e.fn.hideFlex=function(e){return this.addClass("collapse"),this.removeClass("show"),this},e.fn.showFlex=function(e){return this.addClass("collapse show"),this},e.fn.toggleFlex=function(e){return this.is(":visible")?this.hideFlex(e):this.showFlex(e),this},e.fn.formHasChanged=function(){return this.removeClass("form-has-changed"),void 0!==this.data("formHasChanged")&&this.find(":input:not(.formHasChanged-ignore)").serialize()!==this.data("formHasChanged")&&(this.addClass("form-has-changed"),!0)},e.fn.valNotDefault=function(){if(void 0!==this[0].dataset.valdefault){if(this[0].value!==this[0].dataset.valdefault)return!0}else if(void 0!==this[0].defaultValue){if(this[0].value!==this[0].defaultValue)return!0}else if("select-one"==this[0].type)for(var e=0;e<this[0].options.length;e++)if(1==this[0].options[e].defaultSelected&&this[0].value!==this[0].options[e].value)return!0;return!1},e.fn.valDefault=function(e){if(void 0!==e)this.val(e);else if(void 0!==this[0].dataset.valdefault)this.val((function(){return this.dataset.valdefault}));else if(void 0!==this[0].defaultValue)this.val((function(){return this.defaultValue}));else if("select-one"==this[0].type)for(var t=0;t<this[0].options.length;t++)if(1==this[0].options[t].defaultSelected){this[0].selectedIndex=t;break}return this},e.fn.valCheckDiff=function(t){return void 0!==t&&void 0!==t.value||(t.value=this.value),void 0===t.group&&(t.group="_main"),this.data({checkdiff:t}).val(t.value).on("change keyup",(function(t){let a={},s=e(this).data().checkdiff;void 0!==e(document).data().checkdiff&&(a=e(document).data().checkdiff),null!=s.value&&this.value!=s.value||""!=this.value&&null==s.value?(void 0===a[s.group]&&(a[s.group]={}),a[s.group][this.id]=s):delete a[s.group][this.id],e(document).data({checkdiff:a}).trigger("dd:checkdiff")})),this},e.fn.valCheckDiffRemove=function(t){void 0!==t&&this.val(t);let a=e(this).data();return void 0!==a&&void 0!==a.checkdiff&&this.removeData("checkdiff").off("change keyup"),this},e.fn.validateForm=function(){let t=e(this),a=!0;if(t.length){e(t).find("input, textarea").each((function(t){e(this).val(e(this).val().trim())})),e(this).find(":submit").hasClass("btn-onclick-disable")&&e(this).find(":submit").addClass("disabled");let s=[];e(t).find('[data-checkbox_group_required="true"]').each((function(t){let a=e(this).data("checkbox_group");"undefined"!==s[a]&&s.push(a),e('[data-checkbox_group="'+a+'"]').attr("required",!0)})),e.each(s,(function(t,a){e('[data-checkbox_group="'+a+'"]').each((function(){e(this).is(":checked")&&e('[data-checkbox_group="'+a+'"]').attr("required",!1)}))})),e(t).find(".form-feedback").hide(),!1===t[0].checkValidity()&&(a=!1,e(this).find(":submit").hasClass("btn-onclick-disable")&&e(this).find(":submit").removeClass("disabled"),e(".btn-spinning").removeClass("btn-spinning"),e(".ld-spin").remove(),e(t).find(".form-feedback").show(),e(t).data("was_submitted",!1),e("html, body").scrollTop(e(t).find(".form-control:invalid").first().offset().top+-e(window).height()/3)),t[0].classList.add("was-validated")}else console.log();return a}}(jQuery),$(document).on("submit",".needs-validation",(function(e){!0!==$(this).validateForm()&&(e.preventDefault(),e.stopPropagation())})),$("[data-dismiss-session-alert]").on("closed.bs.alert",(function(){let e=$(this).data("dismiss-session-alert");sessionStorage.setItem(e,!0)})),$("[data-dismiss-session-alert]").each((function(e){let t=$(this).data("dismiss-session-alert");sessionStorage.getItem(t)||$(this).showFlex()})),$(".needs-validation").each((function(e){$(this).data("formHasChanged",$(this).find(":input:not(.formHasChanged-ignore)").serialize())})),$('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){if(e.target,e.relatedTarget,void 0!==$(e.target).data("urlpush")&&!0===$(e.target).data("urlpush")){if(void 0!==$(e.target).data("target"))var t=$(e.target).data("target");else t=$(e.target).attr("href");var a=$(t).attr("id");new_query_string=setQueryString("tab",a),historyPush({url:new_query_string})}})),$(document).ajaxSuccess((function(e,t,a){$('.telephone:not(.no-tel), [type="tel"]:not(.no-tel)').each((function(e){new Cleave(this,{delimiters:["-","-","-"],blocks:[3,3,4]})}));try{var s=$.parseJSON(t.responseText);s.dd_toasts&&fetchToasts(s),s.user_preferences&&(USER_PREFERENCES=s.user_preferences),s.guest_preferences&&(GUEST_PREFERENCES=$.extend(GUEST_PREFERENCES,s.guest_preferences)),s.bounce_to&&bounce(s.bounce_to)}catch(e){}})),$.cookie("toastMsg")){var messages=$.parseJSON($.cookie("toastMsg")),time=0;$.each(messages,(function(e,t){setTimeout((()=>{dd_toast(t)}),time),time+=500})),$.removeCookie("toastMsg",{domain:COOKIE.domain,path:"/"})}if($(document).tooltip({selector:'[data-toggle="tooltip"]'}),$("[data-gaq_cat]").each((function(){$(this).on("click",(function(){"undefined"!=typeof _gaq&&(gaq_cat=$(this).data("gaq_cat"),gaq_action=$(this).data("gaq_action"),gaq_label=$(this).data("gaq_label"),_gaq.push(["_trackEvent",gaq_cat,gaq_action,gaq_label]))}))})),$("[data-background-image]").each((function(){var e=$(this).data("background-image");$(this).css("background-image","url("+e+")")})),$(document).on("click",".link-dinner-details",(function(e){e.preventDefault();let t=$(this).data("menu_id"),a=$(this).data("menu_item_id"),s=$(this).data("store_id"),i=$(this).prop("target"),o=$(this).data("detailed"),n=$(this).data("size");$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"menu_item",op:"find_item",menu_id:t,menu_item_id:a,store_id:s,detailed:o},success:function(e){e.processor_success?bootbox.dialog({message:e.html,size:n,buttons:{"Full details":function(){bounce("/item?recipe="+e.recipe_id+"&ov_menu="+e.menu_id,i)},cancel:{label:"Close"}}}):modal_message({title:"Error",message:e.processor_message})},error:function(e,t){response="Unexpected error"}})})),$(document).on("click",".clear-cart, .clear-cart-gc",(function(e){var t="all";-1!=window.location.href.indexOf("gift_card_cart")&&(t="giftcard"),$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_clear_category",op:"get_clear_form",output:"json"},success:function(e){modal_message({title:"Clear your Cart",message:e.html,height:300,width:300,resizable:!1,confirm:function(){$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_clear_category",op:"do_clear",clear_items:t,output:"json"},success:function(e){window.location.reload()},error:function(e,t){response="Unexpected error"}})},cancel:function(){}})},error:function(e,t){response="Unexpected error"}})})),$(document).ready((function(){"undefined"!=typeof FreshworksWidget&&window.innerWidth<=1e3&&FreshworksWidget("hide","launcher")})),window.onresize=function(){"undefined"!=typeof FreshworksWidget&&(window.innerWidth<=1e3?FreshworksWidget("hide","launcher"):FreshworksWidget("show","launcher"))},$(document).on("click",".help-search-launcher",(function(e){e.preventDefault(),FreshworksWidget("open")})),$(document).on("click",".clear-edit-delivered-order",(function(e){$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_clear_category",op:"get_clear_form",output:"json"},success:function(e){modal_message({title:"Clear Cart",message:"Are you sure you want to stop editing this Delivered order?",height:300,width:300,resizable:!1,confirm:function(){$.ajax({url:"/processor",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_clear_category",op:"do_clear",clear_items:"all",clear_edit_order:"all",output:"json"},success:function(e){window.location="/my-meals?tab=nav-past_orders"},error:function(e,t){console.log("Unexpected error")}})},cancel:function(){}})},error:function(e,t){response="Unexpected error"}})})),$(document).on("keyup","textarea[maxlength]",(function(e){var t=parseInt($(this).attr("maxlength")),a=$(this).val();if(a.length>t){var s=a.substr(0,t);$(this).val(s)}})),$(document).on("click",".btn-spinner:not(.disabled), .btn-spin:not(.disabled)",(function(e){$(this).addSpinner()})),$('.telephone:not(.no-tel), [type="tel"]:not(.no-tel)').each((function(e){new Cleave(this,{delimiters:["-","-","-"],blocks:[3,3,4]})})),$(document).on("change","#menus_dropdown",(function(e){bounce("/nutritionals?menu="+this.value)})),$("[data-share-social]").each((function(){var e=$(this).data("share-title"),t=$(this).data("share-text"),a=$(this).data("share-url"),s=$(this).data("share-social").split(","),i=$("<div></div>").addClass("dropdown-menu");if($(s).each((function(e,s){"facebook"==s&&$(i).append('<a class="dropdown-item nav-link facebook-share" data-share-url="'+a+'" href="#"><i class="dd-icon icon-facebook mr-2"></i> Facebook</a>'),"twitter"==s&&$(i).append('<a class="dropdown-item nav-link" target="_blank" href="https://twitter.com/intent/tweet?via=DreamDinners&&hashtags=TheOriginalMealKit&text='+t+"&url="+a+'"><i class="dd-icon icon-twitter mr-2"></i> Twitter</a>')})),navigator.share){let s=$('<a href="#" class="dropdown-item nav-link"><i class="dd-icon icon-share2 mr-2"></i> More Options</a>').on("click",(function(s){s.preventDefault(),navigator.share({title:e,text:t,url:a})}));$(i).append(s)}$(this).attr({"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}).wrap("<div></div>").addClass("dropdown").after(i)})),$(document).on("click","[data-start-delivered-order]",(function(e){e.preventDefault(),create_and_submit_form({action:"/box-select",input:{delivered_zip:this.getAttribute("data-start-delivered-order")}})})),$(document).on("click",".btn-click-add-cart",(function(e){$(".btn-click-add-cart").find(".fa-shopping-cart").remove(),$(this).append('<i class="fas fa-shopping-cart float-left text-green-dark-extra pt-1"></i>')})),$(document).on("click","[data-click_id]",(function(e){let t=$(this).data("click_id");$("#"+t).trigger("click"),void 0!==$("#"+t).attr("href")&&(window.location.href=$("#"+t).attr("href"))})),getQueryVariable("pp_enroll")&&$("#enroll_in_plate_points").attr("checked",!0).trigger("change"),getQueryVariable("tab")){var tabid=getQueryVariable("tab");$("#"+tabid+"-tab").tab("show")}$(".footer-nav").length&&$(".footer-nav").scrollToFixed({bottom:0,limit:$(".footer-nav").offset().top}),$("#main-sidenav").on("hide.bs.collapse",(function(){$("body").removeClass("modal-open"),$(".sidenav-modal").removeClass("show"),setTimeout((()=>{$(".sidenav-modal").remove()}),500)})),$("#main-sidenav").on("show.bs.collapse",(function(){$("body").addClass("modal-open").append($('<div class="sidenav-modal modal-backdrop fade"></div>')),$(".sidenav-modal").tab("show")})),$(document).on("click",".sidenav-modal",(function(e){$("#main-sidenav").collapse("toggle")})),$(document).on("keyup change",".dd-strip-tags",(function(e){var t;$(this).data("allowed-tags")&&(t=$(this).data("allowed-tags")),$(this).val()!=strip_tags($(this).val(),t)&&$(this).val(strip_tags($(this).val(),t))})),$(document).ajaxError((function(e,t,a,s){AJAX_IN_PROCESS=!1,dd_console_log("Ajax Error: "+t.statusText)})),"string"==typeof USER_PREFERENCES&&(USER_PREFERENCES=$.parseJSON(USER_PREFERENCES)),$(document).on("click","[data-user_pref][type=checkbox]",(function(e){var t=this,a=0,s=$(this).is(":checked");$(this).data("user_id")&&(a=$(this).data("user_id")),$(this).data("user_pref_orig")||$(this).data("user_pref_orig",$(this).is(":checked")),s&&$(this).data("user_pref_value_check")?s=$(this).data("user_pref_value_check"):!s&&$(this).data("user_pref_value_uncheck")&&(s=$(this).data("user_pref_value_uncheck")),"function"==typeof preferenceChangeListener?preferenceChangeListener($(this).data("user_pref"),s,a,(function(e){e.processor_success?$(this).data("user_pref_orig",$(t).is(":checked")):(modal_message({message:e.processor_message}),$(this).prop("checked",$(t).data("user_pref_orig")))})):set_user_pref($(this).data("user_pref"),s,a,(function(e){e.processor_success?$(this).data("user_pref_orig",$(t).is(":checked")):(modal_message({message:e.processor_message}),$(this).prop("checked",$(t).data("user_pref_orig")))}))})),$(document).on("change","[data-user_pref]select",(function(e){var t=this,a=0;$(this).data("user_id")&&(a=$(this).data("user_id")),$(this).data("user_pref_orig")||$(this).data("user_pref_orig",$(this).val()),set_user_pref($(this).data("user_pref"),$(this).val(),a,(function(e){e.processor_success?$(t).data("user_pref_orig",$(t).val()):(modal_message({message:e.processor_message}),$(t).val($(t).data("user_pref_orig")))}))})),$(document).on("focus","[data-user_pref]input[type=text]",(function(e){if("checkbox"!=$(this).attr("type")){var t=this,a=0;if($(this).data("user_id")&&(a=$(this).data("user_id")),$(this).on("keyup",(function(e){$(this).val()!=strip_tags($(this).val())&&$(this).val(strip_tags($(this).val()))})),$(this).data("user_pref_orig")||$(this).data("user_pref_orig",$(this).val()),!$("#"+$(this).data("user_pref")+"_buttons").length){var s=$("<div />").attr("id",$(this).data("user_pref")+"_buttons").addClass("text-left collapse");$(this).after(s);var i=$("<span />").addClass("btn btn-sm btn-primary mr-2 mt-2").text("Save").on("click",(function(e){"function"==typeof preferenceChangeListener?preferenceChangeListener($(t).data("user_pref"),$(t).val(),a,(function(e){e.processor_success?$(t).data("user_pref_orig",$(t).val()):(modal_message({message:e.processor_message}),$(t).val($(this).data("user_pref_orig"))),$("#"+$(t).data("user_pref")+"_buttons").slideUp((function(e){$("#"+$(t).data("user_pref")+"_buttons").remove()}))})):set_user_pref($(t).data("user_pref"),$(t).val(),a,(function(e){e.processor_success?$(t).data("user_pref_orig",$(t).val()):(modal_message({message:e.processor_message}),$(t).val($(this).data("user_pref_orig"))),$("#"+$(t).data("user_pref")+"_buttons").slideUp((function(e){$("#"+$(t).data("user_pref")+"_buttons").remove()}))}))})),o=$("<span />").addClass("btn btn-sm btn-primary mt-2").text("Cancel").on("click",(function(e){$(t).val($(t).data("user_pref_orig")),$("#"+$(t).data("user_pref")+"_buttons").slideUp((function(e){$("#"+$(t).data("user_pref")+"_buttons").remove()}))})),n=$("<span />").addClass(" mt-2");$(s).prepend(o).prepend(i).prepend(n).slideDown()}}})),$(document).on("focus","[data-user_pref]textarea",(function(e){var t=this,a=0;if($(this).data("user_id")&&(a=$(this).data("user_id")),$(this).on("keyup",(function(e){$(this).val()!=strip_tags($(this).val())&&$(this).val(strip_tags($(this).val()))})),$(this).data("user_pref_orig")||$(this).data("user_pref_orig",$(this).val()),!$("#"+$(this).data("user_pref")+"_buttons").length){var s=$("<div />").attr("id",$(this).data("user_pref")+"_buttons").addClass("text-right collapse");$(this).after(s);var i=$("<span />").addClass("btn btn-sm btn-primary mr-2 mt-2").text("Save").on("click",(function(e){"function"==typeof preferenceChangeListener?preferenceChangeListener($(t).data("user_pref"),$(t).val(),a,(function(e){e.processor_success?$(t).data("user_pref_orig",$(t).val()):(modal_message({message:e.processor_message}),$(t).val($(this).data("user_pref_orig"))),$("#"+$(t).data("user_pref")+"_buttons").slideUp((function(e){$("#"+$(t).data("user_pref")+"_buttons").remove()}))})):set_user_pref($(t).data("user_pref"),$(t).val(),a,(function(e){e.processor_success?$(t).data("user_pref_orig",$(t).val()):(modal_message({message:e.processor_message}),$(t).val($(this).data("user_pref_orig"))),$("#"+$(t).data("user_pref")+"_buttons").slideUp((function(e){$("#"+$(t).data("user_pref")+"_buttons").remove()}))}))})),o=$("<span />").addClass("btn btn-sm btn-primary mt-2").text("Cancel").on("click",(function(e){$(t).val($(t).data("user_pref_orig")),$("#"+$(t).data("user_pref")+"_buttons").slideUp((function(e){$("#"+$(t).data("user_pref")+"_buttons").remove()}))}));$(s).prepend(o).prepend(i).slideDown()}})),$(document).on("click",'[data-user_pref="text_message_thaw_primary"][type=checkbox]',(function(e){})),$((function(){if("undefined"!=typeof ClipboardJS){new ClipboardJS(".btn-clip")}}));
//# sourceMappingURL=global.min.js.map