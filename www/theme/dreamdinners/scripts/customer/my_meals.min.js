function doFoodSearch(){bounce("main.php?page=my_meals&search="+$("#my_meals_search").val())}function setRatingStar(e,t){for(var a=0;a<=5;a++){$("#rating-"+a+"-"+e).removeClass("fas text-yellow").addClass("far")}for(var a=0;a<=t;a++){$("#rating-"+a+"-"+e).addClass("fas text-yellow").removeClass("far")}}function mouseenterRatingStar(e){hover_rating=$(e).attr("data-rating");element_id=$(e).attr("data-element_id");setRatingStar(element_id,hover_rating)}function mouseleaveRatingStar(e){let t=$("#org_rating-"+element_id).val();setRatingStar(element_id,t)}function restorePagingLocation(e){let t=localStorage.getItem("customer-orders-paging-current");let a=localStorage.getItem("customer-history-paging-user");if(a!=e){localStorage.setItem("customer-orders-paging-current",null);localStorage.setItem("customer-history-paging-user",null);return}if(t!=null&&typeof t!=="undefined"&&a!=null&&typeof a!=="undefined"){$("#order_history").html("");$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:a,page:t,processor:"my_meals",operation:"next"},success:function(e,t){if(e.processor_success){$("#order_history").html(e.html)}else{console.log("There was an issue trying to restore paging location.")}return false},error:function(e,t){alert("There was an issue retrieving your orders. Please reload the page.");return false}})}}$(function(){$(".my_meals-rate").bind({mouseenter:function(e){mouseenterRatingStar(this)},mouseleave:function(e){mouseleaveRatingStar(this)}});$(".my_meals-rate").on("click",function(e){let a=$(this).data("element_id");let t=$(this).data("store_id");let r=$(this).data("recipe_id");let s=$(this).data("recipe_version");let o=$(this).data("rating");$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{processor:"my_meals",operation:"rate",store_id:t,recipe_id:r,recipe_version:s,rating:o},success:function(e,t){if(e.processor_success){$("#org_rating-"+a).val(o);setRatingStar(a,o)}return false},error:function(e,t){return false}})});$(".my_meals-favorite").on("change",function(e){let t=$(this).data("element_id");let a=$(this).data("store_id");let r=$(this).data("recipe_id");let s=$(this).data("recipe_version");let o=$(this).val();$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{processor:"my_meals",operation:"favorite",store_id:a,recipe_id:r,recipe_version:s,set_favorite:o},success:function(e,t){if(e.processor_success){}return false},error:function(e,t){return false}})});$(document).on("keyup change",".my_meals-review, .my_meals-note",function(e){let t="review";if($(this).hasClass("my_meals-note")){t="note"}let a=$(this).data("element_id");let r=$.trim($(this).val());let s=this.defaultValue;if(r!=s){$(".my_meals-"+t+'-submit-row[data-element_id="'+a+'"]').showFlex()}else{$(".my_meals-"+t+'-submit-row[data-element_id="'+a+'"]').hideFlex()}});$(document).on("click",".my_meals-review-cancel, .my_meals-note-cancel",function(e){e.preventDefault();let t="review";if($(this).hasClass("my_meals-note-cancel")){t="note"}let a=$(this).data("element_id");let r=$(".my_meals-"+t+'[data-element_id="'+a+'"]');$(".my_meals-"+t+'[data-element_id="'+a+'"]').val(r[0].defaultValue);$(r).trigger("change")});$(document).on("click",".my_meals-review-submit, .my_meals-note-submit",function(e){e.preventDefault();let t="review";if($(this).hasClass("my_meals-note-submit")){t="note"}let a=$(this).data("element_id");let r=$(".my_meals-"+t+'[data-element_id="'+a+'"]');let s=$(r).data("recipe_id");let o=$(r).data("recipe_version");let i=$(r).data("store_id");let n=$.trim($(r).val());$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"my_meals",operation:t,recipe_id:s,recipe_version:o,comment:n,store_id:i},success:function(e){if(e.processor_success){$(".my_meals-"+t+'-submit-row[data-element_id="'+a+'"]').hideFlex();r[0].defaultValue=n}return false},error:function(e,t){return false}})});$(document).on("click","#my_meals_search_submit",function(e){doFoodSearch()});$(document).on("keyup","#my_meals_search",function(e){if(e.key==="Enter"||e.keyCode===13){doFoodSearch()}});$(document).on("click",".orders-page-prev",function(e){e.preventDefault();let t=$(this).data("user");let a=$(this).data("current");let r=a;if(r>0){r=r-2}localStorage.setItem("customer-orders-paging-current",r);localStorage.setItem("customer-history-paging-user",t);$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:t,page:a,processor:"my_meals",operation:"prev"},success:function(e,t){if(e.processor_success){$("#order_history").html(e.html)}else{console.log("There was an issue trying to navigate to the previous page.")}return false},error:function(e,t){alert("There was an issue retrieving your orders. Please reload the page.");return false}});return false});$(document).on("click",".orders-page-next",function(e){e.preventDefault();let t=$(this).data("user");let a=$(this).data("current");localStorage.setItem("customer-orders-paging-current",a);localStorage.setItem("customer-history-paging-user",t);$.ajax({url:"ddproc.php",type:"POST",timeout:1e8,dataType:"json",data:{user_id:t,page:a,processor:"my_meals",operation:"next"},success:function(e,t){if(e.processor_success){$("#order_history").html(e.html)}else{console.log("There was an issue trying to navigate to the next page.")}return false},error:function(e,t){alert("There was an issue retrieving your orders. Please reload the page.");return false}});return false})});
//# sourceMappingURL=my_meals.min.js.map