var neededQuantity=36;if(typeof order_minimum!=="undefined"&&typeof order_minimum.minimum!=="undefined"){neededQuantity=order_minimum.minimum}function canIncrementBundleSubItem(e,t){let o=menuItemInfo.mid[$(e).data("parent_item")];let i=parseInt(o.number_items_required);let n=menuItemInfo.mid[o.menu_item_id].sub_item[$(e).data("menu_item_id")];let a=parseInt(n.bundle_to_menu_item_group_id)||0;let r=0;let s=0;let d=[];$(t+'[data-parent_item="'+o.menu_item_id+'"]').each(function(){let e=menuItemInfo.mid[o.menu_item_id].sub_item[$(this).data("menu_item_id")];let t=parseInt(e.bundle_to_menu_item_group_id)||0;let i=parseInt($(this).data("org_val"))||0;let n=parseInt($(this).val())||0;r+=i;s+=n;if(typeof d[t]=="undefined"){d[t]={total_org:0,total_current:0}}d[t].total_org+=i;d[t].total_current+=n});if(s>i){return"Number of items for the bundle has been reached"}if(o.bundle_groups.length>0){if(d[a].total_current>o.bundle_groups[a].number_items_required){return"Number of items for the group has been reached"}}return true}function restoreButtonState(e){var t=menuItemInfo["mid"][e].entree_id;var i=0;var n=menuItemInfo["entree"][t];for(key in n){var o=menuItemInfo["mid"][key];var a=o.servings_per_item*1;var r=o.qty_in_cart*a;i+=r}var s=menuItemInfo["mid"][e].remaining_servings-i;for(key in n){var o=menuItemInfo["mid"][key];var a=o.servings_per_item*1;if(a<=s){$('.add-to-cart[data-menu_item_id="'+key+'"]').removeClass("disabled");$('.add-to-cart[data-menu_item_id="'+key+'"] > .price').html(menuItemInfo["mid"][key].price);if(key!=e){$('.add-to-cart[data-menu_item_id="'+key+'"] > .fas').show()}}}}function inventoryCheck(e){var t=true;if(menuItemInfo["mid"][e].qty_in_cart<0){menuItemInfo["mid"][e].qty_in_cart=0}var i=menuItemInfo["mid"][e].entree_id;var n=0;var o=menuItemInfo["mid"][e].servings_per_item*1;var a=menuItemInfo["entree"][i];for(key in a){var r=menuItemInfo["mid"][key];var s=r.servings_per_item*1;var d=r.qty_in_cart*s;n+=d}if(n+o>menuItemInfo["mid"][e].remaining_servings){dd_message({title:"Inventory Limit Reached",message:"Please contact your store if you wish to purchase more of this item. The store's available inventory limit has been reached."});menuItemInfo["mid"][e].qty_in_cart+=1;t=false}else{menuItemInfo["mid"][e].qty_in_cart+=1}var m=menuItemInfo["mid"][e].remaining_servings-(n+o);for(key in a){var r=menuItemInfo["mid"][key];var s=r.servings_per_item*1;if(s>m){$('.add-to-cart[data-menu_item_id="'+key+'"]').addClass("disabled");$('.add-to-cart[data-menu_item_id="'+key+'"] > .price').text("Sold out");$('.add-to-cart[data-menu_item_id="'+key+'"] > .fas').hide()}}return t}function countCoreItemsServings(){var i=0;$.each(menuItemInfo["mid"],function(e,t){if(t["qty_in_cart"]<0){t["qty_in_cart"]=0;menuItemInfo["mid"][e].qty_in_cart=0}if(t["qty_in_cart"]>0){if(t["category_id"]!="9"){if(t["item_contributes_to_minimum_order"]){i+=Number(t["servings_per_item"])*Number(t["qty_in_cart"])}}}});return i}function countItemsServings(i){var n=0;var o=0;if(typeof i==="undefined"){i=false}$.each(menuItemInfo["mid"],function(e,t){if(t["qty_in_cart"]<0){t["qty_in_cart"]=0;menuItemInfo["mid"][e].qty_in_cart=0}if(t["qty_in_cart"]>0){if(i){n+=Number(t["servings_per_item"]*t["qty_in_cart"])}else{if(t["category_id"]!=9){if(t["item_contributes_to_minimum_order"]){if(t["is_bundle"]==="1"){n+=Number(t["qty_in_cart"])*Number(t["servings_per_item"])}else{n=Number(t["servings_per_item"])*Number(t["qty_in_cart"])}}}}if(t["category_id"]!=9){if(t["item_contributes_to_minimum_order"]){if(t["is_bundle"]==="1"){o+=Number(t["qty_in_cart"])*Number(t["number_items_required"])}else{o+=Number(t["qty_in_cart"])}}}}});if(o>0){$(".total-meal-nights-plural").show();$(".total-meal-nights").text(o);if(o==1){$(".total-meal-nights-plural").hide()}$(".meal-nights").show();$(".meal-select").hide()}else{$(".total-meal-nights").text("0");$(".total-meal-nights-plural").show();$(".meal-select").show();$(".meal-nights").hide()}return n}function countItems(i){var n=0;var o=0;if(typeof i==="undefined"){i=false}$.each(menuItemInfo["mid"],function(e,t){if(t["qty_in_cart"]<0){t["qty_in_cart"]=0;menuItemInfo["mid"][e].qty_in_cart=0}if(t["qty_in_cart"]>0){if(i){n+=Number(t["qty_in_cart"])}else{if(t["category_id"]!=9){if(t["item_contributes_to_minimum_order"]){if(t["is_bundle"]==="1"){n+=Number(t["qty_in_cart"])*Number(t["number_items_required"])}else{n+=Number(t["qty_in_cart"])*Number(t["item_count_per_item"])}}}}if(t["category_id"]!=9){if(t["item_contributes_to_minimum_order"]){if(t["is_bundle"]==="1"){o+=Number(t["qty_in_cart"])*Number(t["number_items_required"])}else{o+=Number(t["qty_in_cart"])*Number(t["item_count_per_item"])}}}}});if(o>0){$(".total-meal-nights-plural").show();$(".total-meal-nights").text(o);if(o==1){$(".total-meal-nights-plural").hide()}$(".meal-nights").show();$(".meal-select").hide()}else{$(".total-meal-nights").text("0");$(".total-meal-nights-plural").show();$(".meal-select").show();$(".meal-nights").hide()}return n}function countCoreItems(){var i=0;$.each(menuItemInfo["mid"],function(e,t){if(t["qty_in_cart"]<0){t["qty_in_cart"]=0;menuItemInfo["mid"][e].qty_in_cart=0}if(t["qty_in_cart"]>0){if(t["category_id"]!=9){if(t["item_contributes_to_minimum_order"]){if(t["is_bundle"]==="1"){i+=Number(t["qty_in_cart"])*Number(t["number_items_required"])}else{i+=Number(t["qty_in_cart"])*Number(t["item_count_per_item"])}}}}});return i}function updateServingsCountAndCheckoutButton(){$(".add-bundle-to-cart").each(function(){$(this).addClass("disabled");let e=$(this).data("menu_item_id");let t=menuItemInfo.mid[e];let i=parseInt(t.number_items_required);let n=0;$('.bundle-subitem-qty[data-parent_item="'+e+'"]').each(function(){let e=parseInt($(this).val())||0;n+=e});$('.bundle-subitem-total[data-menu_item_id="'+e+'"]').text(n);if(i==n){$(this).removeClass("disabled")}});if(typeof menuItemInfo!="undefined"){var e=0;var t=0;if(typeof menu_view==="undefined"||menu_view==null){menu_view=""}if(typeof order_minimum!="undefined"&&typeof order_minimum.minimum!="undefined"&&order_minimum.minimum_type=="ITEM"){e=countItems(menu_view=="session_menu_freezer");t=countCoreItems()}else{e=countItemsServings(menu_view=="session_menu_freezer");t=countCoreItemsServings()}var n=false;if(typeof order_minimum=="undefined"){order_minimum={}}var o=typeof order_minimum.minimum=="undefined"?36:order_minimum.minimum;if(order_type=="INTRO"||order_type=="DREAM_TASTE"||order_type=="FUNDRAISER"){o=number_servings_required}else{if(order_minimum.is_applicable==false){if(order_minimum.has_freezer_inventory==true){if(menu_view=="session_menu_freezer"){o=1}else{o=0}}else{o=1}}}var a=typeof order_minimum.minimum=="undefined"?36:order_minimum.minimum;var r=0;var s=a-e;var d=" more ";if(e==0){d=" "}if(s>0){$(".remaining-note").showFlex();$(".remaining").text(s+d);if(s==1){$(".plural").hide()}else{$(".plural").show()}}else{$(".remaining-note").hideFlex()}if(e>0){r=Math.round(e/o*100);if(r>=100){r=100;$(".progress-min").removeClass("bg-gray-dark").addClass("bg-green");$(".progress-star").removeClass("text-gray").addClass("text-green");$(".required-servings-note").hideFlex()}else{$(".progress-min").removeClass("bg-green").addClass("bg-gray-dark");$(".progress-star").removeClass("text-green").addClass("text-gray");$(".required-servings-note").showFlex()}}var m=0;if(r==100){var u=a-o;if(e>o){var c=e-o;if(c>0){m=Math.round(c/u*100);if(m>100){m=100}}}}var _=0;if(m==100){var l=e-a;if(l>0){_=Math.round(l/(o*3)*100);if(_>100){_=100}}}if(r>0){$(".progress-min-value").text(r+"%")}else{$(".progress-min-value").text("")}$(".progress-min").css({width:r+"%"}).attr("aria-valuenow",r);$(".progress-rec").css({width:m+"%"}).attr("aria-valuenow",m);$(".progress-add").css({width:_+"%"}).attr("aria-valuenow",_);if(menu_view=="session_menu_freezer"&&order_minimum.is_applicable==false){neededQuantity=o-e}else{neededQuantity=o-t}if(order_minimum.is_applicable==false){if(order_minimum.has_freezer_inventory==true){if(menu_view=="session_menu_freezer"){neededQuantity=neededQuantity}else{neededQuantity=0}$(".meals-list, .cart-total-div").slideDown();$(".progress-star").hide()}}if(neededQuantity<=0){neededQuantity=0;n=true}if(n){$(".continue-btn").removeClass("disabled");$(".continue-btn-div").slideDown()}else{$(".continue-btn").addClass("disabled");$(".continue-btn-div").slideUp()}if(e==""){e="0"}let i=0;$.each(menuItemInfo["mid"],function(e,t){if(t["qty_in_cart"]>0){i+=Number(t["price"]*t["qty_in_cart"])}if(typeof t["sub_item"]!=="undefined"){$.each(t["sub_item"],function(e,t){i-=Number(t["price"]*t["qty_in_cart"])})}});if(coupon!=false&&coupon.limit_to_mfy_fee!=1&&coupon.limit_to_delivery_fee!=1){i=i-coupon.coupon_code_discount_total;$(".coupon-code-total").text(formatAsMoney(coupon.coupon_code_discount_total))}if(customization!=false&&typeof customization.cost!="undefined"){let e=parseFloat(customization.cost);i=i+e}if(order_type=="STANDARD"||order_type=="SPECIAL_EVENT"){$(".cart-total").text(formatAsMoney(i))}if(coupon.limit_to_mfy_fee==1||coupon.limit_to_delivery_fee==1){$(".coupon-code-total-service-div").show();$(".coupon-code-total-div").hide()}else{$(".coupon-code-total-service-div").hide();$(".coupon-code-total-div").show()}return e}}function update_cart(i,n){if(n=="del"){menuItemInfo["mid"][i].qty_in_cart-=1;if(menuItemInfo["mid"][i].qty_in_cart<0){menuItemInfo["mid"][i].qty_in_cart=0}restoreButtonState(i)}let o=menuItemInfo["mid"][i];let a=menuItemInfo["entree"][o.entree_id];let r={};if(!$.isNumeric(o.qty_in_cart)){o.qty_in_cart=0}if(o.is_bundle=="1"){$('.bundle-subitem-qty[data-parent_item="'+i+'"]').each(function(){let e=$(this).data("menu_item_id");let t=parseInt($(this).val())||0;menuItemInfo["mid"][i].sub_item[e].qty_in_cart+=parseInt($(this).val())||0;if(t>0){r[e]=t}})}$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_item_processor",op:"update",item:i,is_bundle:r,qty:o.qty_in_cart,order_type:order_type},success:function(e){if(e.processor_success){if(order_type!=e.order_type){order_type=e.order_type}customization.cost=e.subtotal_meal_customization_fee;coupon.coupon_code_discount_total=e.coupon_code_discount_total;if(order_type=="STANDARD"||order_type=="SPECIAL_EVENT"){updateServingsCountAndCheckoutButton();if(o.qty_in_cart>0){$('.add-to-cart[data-menu_item_id="'+i+'"] > .fas, .configure-bundle[data-menu_item_id="'+i+'"] > .fas').hide();$('.add-to-cart[data-menu_item_id="'+i+'"] > .cart-amount, .configure-bundle[data-menu_item_id="'+i+'"] > .cart-amount').text("("+o.qty_in_cart+")").show()}else{$('.add-to-cart[data-menu_item_id="'+i+'"] > .fas, .configure-bundle[data-menu_item_id="'+i+'"] > .fas').show();$('.add-to-cart[data-menu_item_id="'+i+'"] > .cart-amount, .configure-bundle[data-menu_item_id="'+i+'"] > .cart-amount').text("0").hide()}}else if(order_type=="INTRO"){$.each(a,function(e,t){if(o.qty_in_cart>0){$('.add-to-cart[data-menu_item_id="'+e+'"]').addClass("disabled");$('.add-to-cart[data-menu_item_id="'+e+'"] > .fas').removeClass("fa-plus text-white");$('.add-to-cart[data-menu_item_id="'+i+'"] .fas').addClass("fa-check text-dark")}else{$('.add-to-cart[data-menu_item_id="'+e+'"]').removeClass("disabled");$('.add-to-cart[data-menu_item_id="'+e+'"] > .fas').removeClass("fa-check text-dark").addClass("fa-plus text-white")}})}if(o.qty_in_cart>0){if($('[data-cart_menu_item="'+i+'"]').length){$('[data-cart_menu_item="'+i+'"]').replaceWith(e.cart_update)}else{$(e.cart_update).appendTo($(".meals-list")).hide().slideDown();$(".meals-list, .cart-total-div").slideDown()}$(".clear-all-cart-items-div").show()}else{$('.add-to-cart[data-menu_item_id="'+i+'"] > .fas').show();$('[data-cart_menu_item="'+i+'"]').slideUp("slow",function(){$(this).remove();if(!$(".meals-list").html().trim().length){if(order_minimum.is_applicable==false){if(order_minimum.has_freezer_inventory!=true){$(".meals-list, .cart-total-div").slideUp("slow",function(){$(".msg_empty_cart").slideDown()})}}}})}if($(".meals-list").html().trim().length){$(".msg_empty_cart").slideUp("slow",function(){$(".meals-list, .cart-total-div").slideDown()})}$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove();updateServingsCountAndCheckoutButton()}else{if(n=="del"){menuItemInfo["mid"][i].qty_in_cart+=1}else{menuItemInfo["mid"][i].qty_in_cart-=1;if(menuItemInfo["mid"][i].qty_in_cart<0){menuItemInfo["mid"][i].qty_in_cart=0}}$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove();var t="Error Adding item to cart. If you continue to receive this message please contact your store.";if(e.result_code==5){t="You have added the number of dinners allowed for this special event or session type. Please remove a dinner from your cart to add this dinner."}dd_message({title:"Error",message:t,callback:function(){bounce(window.location.href)}})}},error:function(e,t){if(n=="del"){menuItemInfo["mid"][i].qty_in_cart+=1}else{menuItemInfo["mid"][i].qty_in_cart-=1;if(menuItemInfo["mid"][i].qty_in_cart<0){menuItemInfo["mid"][i].qty_in_cart=0}}$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove();dd_message({title:"Error",message:"Unexpected error, if you continue to receive this message please contact your store."})}})}$(function(){if(typeof menuItemInfo!="undefined"&&menuItemInfo!=null){$.each(menuItemInfo["entree"],function(e,t){var i=0;var n=menuItemInfo["entree"][e];var o=false;var a=false;var r=false;var s=false;for(itemkey in n){if(n[itemkey]=="HALF"){o=true;r=itemkey}if(n[itemkey]=="FULL"){a=true;s=itemkey}var d=menuItemInfo["mid"][itemkey];var m=d.servings_per_item*1;var u=d.qty_in_cart*m;i+=u}let c=menuItemInfo["mid"][itemkey].remaining_servings-i;for(itemkey in n){var d=menuItemInfo["mid"][itemkey];var m=d.servings_per_item*1;if(c<m){$('.add-to-cart[data-menu_item_id="'+itemkey+'"]').addClass("disabled");$('.add-to-cart[data-menu_item_id="'+itemkey+'"] > .price').text("Sold out")}}})}updateServingsCountAndCheckoutButton();$(document).on("click change",".add-to-cart:not(.disabled)",function(e){var t=$(this).data("menu_item_id");var i=menuItemInfo["mid"][t];var n=menuItemInfo["entree"][i.entree_id];if(inventoryCheck(t)){continue_process=true;if(order_type=="DREAM_TASTE"||order_type=="FUNDRAISER"){servings=countItemsServings();if(servings>number_servings_required){this.checked=false;if(order_type=="DREAM_TASTE"){dd_message({title:"Event Offer",message:"You have completed your Meal Prep Workshop order and are ready to checkout."})}else{dd_message({title:"Event Offer",message:"You have completed your Fundraiser order and are ready to checkout."})}menuItemInfo["mid"][t].qty_in_cart-=1;servings=countItemsServings();continue_process=false}}if(order_type=="INTRO"){var o=0;$.each(n,function(e,t){o+=menuItemInfo["mid"][e].qty_in_cart});if(o>=2){dd_message({title:"Meal Prep Starter Pack",message:"Meal Prep Starter Pack orders are limited to only 1 large or 1 medium selection per meal."});menuItemInfo["mid"][t].qty_in_cart-=1;continue_process=false}servings=countItemsServings();servings_before=servings-menuItemInfo["mid"][t].servings_per_item;if(servings_before==number_servings_required){$(this).removeClass("disabled");dd_message({title:"Meal Prep Starter Pack",message:"You have completed your Meal Prep Starter Pack and are ready to checkout."});menuItemInfo["mid"][t].qty_in_cart-=1;continue_process=false}else if(servings>number_servings_required){dd_message({title:"Meal Prep Starter Pack",message:"You have 1 medium meal left to complete your Meal Prep Starter Pack. You may order six medium dinners or three large dinners (or a combination of both sizes)."});menuItemInfo["mid"][t].qty_in_cart-=1;continue_process=false}}if(continue_process){update_cart(t,"add");if((!USER_PREFERENCES||USER_PREFERENCES.SESSION_MENU_CART_FLY_TO.value>0)&&menuItemInfo["mid"][t].category_id!=9){var a=false;$(".progress-min").each(function(e){if($(this).is(":visible")){a=$(this).parent()}});if(a){var r=$('[data-recipe_img="'+menuItemInfo["mid"][t].recipe_id+'"]').eq(0);if(r){var s=r.clone();$(s).removeClass("card-img-top").addClass("shadow border-green-light");s.offset({top:e.pageY-20,left:e.pageX-40}).css({position:"absolute",width:80,border:"2px solid","z-index":"1500","pointer-events":"none"}).appendTo($("body")).animate({top:a.offset().top+1,left:a.offset().left+(a.width()/2-20),width:40},1e3,"easeInOutExpo");s.hide("puff",{},500,function(){$(this).detach()})}}}}else{$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove()}}});$(document).on("click",".remove-from-cart",function(e){var t=$(this).data("menu_item_id");if(menuItemInfo.mid[t].is_bundle=="1"&&menuItemInfo.mid[t].qty_in_cart>1){bootbox.confirm("Due to the complexity of this menu item you will need to re-add this menu item with your desired selections. Do you wish to continue?",function(e){if(e==true){menuItemInfo.mid[t].qty_in_cart=0;$('.bundle-subitem-qty[data-parent_item="'+t+'"]').each(function(){let e=$(this).data("menu_item_id");menuItemInfo["mid"][e].qty_in_cart=0});update_cart(t,"del")}})}else{update_cart(t,"del")}if($(".session_menu-meals-list").children().length<=2){$(".clear-all-cart-items-div").hide()}});$(document).on("click",".sm-change-menu",function(e){$(".sm-row-change-menu").toggleFlex()});$(document).on("click",".sm-change-menu-starter",function(e){$(".sm-row-change-menu-starter").toggleFlex()});$(document).on("click",".sm-customization-available",function(e){$(".sm-row-customization-available").toggleFlex()});$(document).on("click",".link-dinner-details",function(e){e.preventDefault();var t=$(this).data("menu_id");var i=$(this).data("menu_item_id");var n=$(this).data("store_id");$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"menu_item",op:"find_item",menu_id:t,menu_item_id:i,store_id:n},success:function(e){if(e.processor_success){bootbox.dialog({message:e.html,buttons:{"Full details":function(){bounce("main.php?page=item&recipe="+e.recipe_id+"&ov_menu="+e.menu_id)},cancel:{label:"Close"}}})}else{dd_message({title:"Error",message:e.processor_message})}},error:function(e,t){response="Unexpected error"}})});$(document).on("click",".pp-view-intro, .pp-view-standard",function(e){var t=$(this).data("view_menu");create_and_submit_form({action:"ddproc.php?processor=session_type",input:{type:t}})});$(document).on("click",".play-video",function(e){$("html, body").animate({scrollTop:$("#video-tab").offset().top},2e3);$("#video-tab").tab("show")});$(document).on("click",'input[name="sessionRadio"]',function(e){var t=$(this).val();$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_session_processor",op:"save",sid:t},success:function(e){if(e.result_code==1){$('[for^="sessionRadio-"]').removeClass("bg-green font-weight-bold text-white");$("[data-day]").removeClass("bg-green font-weight-bold text-white").addClass("bg-gray-light");$('[for="sessionRadio-'+t+'"]').addClass("bg-green font-weight-bold text-white");$('[data-day="'+e.result_day+'"]').removeClass("bg-gray-light").addClass("bg-green text-white");bounce(e.bounce_to)}else{dd_message({title:"Error",message:e.processor_message})}},error:function(e,t){response="Unexpected error"}})});$(document).on("change",'input[name^="filter-show_"]',function(e){$("[data-row_session_types]").hideFlex();$(".no-filter-selected").showFlex();$('input[name^="filter-show_"]').each(function(e){var i=$(this).data("filter");if($(this).is(":checked")){$(".no-filter-selected").hideFlex();$('[data-filter_session_type="'+i+'"]').showFlex();$("[data-row_session_types]").each(function(e){var t=$(this).data("row_session_types").split(",");if($.inArray(i,t)!==-1){$(this).showFlex()}})}else{$('[data-filter_session_type="'+i+'"]').hideFlex()}})});$(document).on("click",'input[name="sessionRescheduleRadio"]',function(e){if($("#rescheduleSessionDialog").data("is_posed")!="true"){var t=$(this).val();var i=$(this).data("friendly_date_time");var n=$("#sessionRescheduleRadio-"+current_session_id).data("friendly_date_time");$("#rescheduleSessionDialog").find("#reschedule_from_session").html(n);$("#rescheduleSessionDialog").find("#reschedule_to_session").html(i);var o={};$("#rescheduleSessionDialog").data("target_session_id",t);$("#rescheduleSessionDialog").data("is_posed","true");$("#rescheduleSessionDialog").modal(o);$("#rescheduleSessionDialog").on("hide.bs.modal",function(e){$('input[name="sessionRescheduleRadio"]').prop("checked",false);$("#rescheduleSessionDialog").data("is_posed","false")})}});$(document).on("click","#do_reschedule",function(e){var t=$("#rescheduleSessionDialog").data("target_session_id");$("#do_reschedule").attr("disabled","true");create_and_submit_form({action:"main.php?page=session&reschedule="+current_order_id,input:{target:t}})});$(document).on("click",".add_event_session",function(e){var t=$(this).data("session");var i=$('[data-event_session="'+t+'"]');var n=null;if($(i).val()){n=$(i).val().trim()}$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_session_processor",op:"save",pwd:n,sid:t},success:function(e){if(e.result_code==1){bounce("main.php?page=session_menu")}else{$(i).addClass("is-invalid").parent().find(".invalid-feedback").text(e.processor_message);$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove()}},error:function(e,t){response="Unexpected error";$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove()}})});$(document).on("keyup","[data-event_session]",function(e){if($(this).val().trim()!=""&&e.which==13){$(this).parent().find(".add_event_session").trigger("click")}else{$(this).removeClass("is-invalid").parent().find(".invalid-feedback").text("Invalid code")}});$(document).on("click",".change_session_type",function(e){var t=$(this).data("session_type");var i=$(this).data("bounce");create_and_submit_form({action:"ddproc.php?processor=session_type",input:{type:t,bounce_to:i}})});$(document).on("click",".rsvp_upgrade_btn",function(e){$(".session_menu_div").slideDown();$("html, body").animate({scrollTop:$(".session_menu_div").offset().top},2e3)});$(document).on("keyup change",".add-coupon-code",function(e){let t=$(this).val();$(".add-coupon-code").val(t)});$(document).on("click",".configure-bundle:not(.disabled)",function(e){let t=$(this).data("menu_item_id");$("[data-master_item_id]").not('[data-master_item_id="'+t+'"]').slideUp();$('[data-master_item_id="'+t+'"]').slideToggle()});$(document).on("focusin",".bundle-subitem-qty",function(e){$(this).data("org_val",$(this).val())}).on("keyup change",".bundle-subitem-qty",function(e){let t=$(this).data("menu_item_id");let i=canIncrementBundleSubItem($(this),".bundle-subitem-qty");let n=inventoryCheck(t);if(!n||i!==true){$(this).val($(this).data("org_val"));if(i!==true){dd_message({title:"Max Items Reached",message:i})}}else{$(this).data("org_val",$(this).val())}updateServingsCountAndCheckoutButton()});$(document).on("click",".add-bundle-to-cart:not(.disabled)",function(e){let t=$(this).data("menu_item_id");if(inventoryCheck(t)){update_cart(t,"add")}$('.bundle-subitem-qty[data-parent_item="'+t+'"]:not([readonly])').val(0);$('[data-master_item_id="'+t+'"]').slideToggle();updateServingsCountAndCheckoutButton()});$(document).on("click",".add-coupon-add:not(.disabled)",function(e){let t=$(this).parent().parent().find(".add-coupon-code").val();if(!t){dd_message({title:"Error",message:"Please enter a promo code."})}else{$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_add_payment",payment_type:"coupon",coupon_code:t},success:function(e){if(e.processor_success){coupon=e.coupon;$(".add-coupon-code").prop("disabled",true);$(".add-coupon-add").addClass("disabled");$(".coupon-code-title").text(coupon.coupon_code_short_title);$(".coupon-code-total").text(formatAsMoney(coupon.coupon_code_discount_total));$(".coupon-code-row").showFlex();if(e.cart_update){if($('[data-cart_menu_item="'+e.menu_item_id+'"]').length){$('[data-cart_menu_item="'+e.menu_item_id+'"]').replaceWith(e.cart_update)}else{$(e.cart_update).appendTo($(".meals-list")).hide().slideDown();$(".meals-list, .cart-total-div").slideDown()}$(".clear-all-cart-items-div").show();menuItemInfo["mid"][e.menu_item_id].qty_in_cart=e.qty_in_cart}updateServingsCountAndCheckoutButton()}else{dd_message({title:"Error",message:e.processor_message})}},error:function(e,t){dd_message({title:"Error",message:"Unexpected error: "+t})}})}});$(document).on("click",".clear-cart-session",function(e){e.preventDefault();$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_clear_category",op:"do_clear_session",output:"json"},success:function(e){window.location.reload()},error:function(e,t){response="Unexpected error"}})});$(document).on("click",".clear-all-cart-items",function(e){var t="all";if(window.location.href.indexOf("gift_card_cart")!=-1){t="giftcard"}$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_clear_category",op:"get_clear_form",output:"json"},success:function(e){dd_message({title:"Clear your Cart",message:e.html,height:300,width:300,resizable:false,confirm:function(){$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_item_processor",op:"remove_all_items",output:"json"},success:function(e){if(typeof _etmc!=="undefined"){_etmc.push(["trackCart",{clear_cart:true}])}window.location.reload()},error:function(e,t){response="Unexpected error"}})},cancel:function(){}})},error:function(e,t){response="Unexpected error"}})});$(document).on("click",".add-coupon-remove",function(e){$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"cart_remove_payment",payment_type:"coupon"},success:function(e){if(e.processor_success){$(".add-coupon-code").prop("disabled",false);$(".add-coupon-add").removeClass("disabled");coupon=false;$(".coupon-code-title").text("");$(".coupon-code-total").text(formatAsMoney(0));$(".coupon-code-row").hideFlex();if(e.limit_to_recipe_id){menuItemInfo["mid"][e.limit_to_recipe_id].qty_in_cart=e.qty_in_cart;if(e.qty_in_cart>0){if($('[data-cart_menu_item="'+e.limit_to_recipe_id+'"]').length){$('[data-cart_menu_item="'+e.limit_to_recipe_id+'"]').replaceWith(e.cart_update)}else{$(e.cart_update).appendTo($(".meals-list")).hide().slideDown();$(".meals-list, .cart-total-div").slideDown()}$(".clear-all-cart-items-div").show()}else{$('.add-to-cart[data-menu_item_id="'+e.limit_to_recipe_id+'"] > .fas').show();$('[data-cart_menu_item="'+e.limit_to_recipe_id+'"]').slideUp("slow",function(){$(this).remove();if(!$(".meals-list").html().trim().length){if(order_minimum.is_applicable==false){if(order_minimum.has_freezer_inventory!=true){$(".meals-list, .cart-total-div").slideUp("slow",function(){$(".msg_empty_cart").slideDown()})}}}})}}updateServingsCountAndCheckoutButton()}else{dd_message({title:"Error",message:e.processor_message})}},error:function(e,t){dd_message({title:"Error",message:"Unexpected error: "+t})}})});$(document).on("click",".rsvp_submit_btn",function(e){e.preventDefault();if($("#rsvp_only_form")[0].checkValidity()===false){e.stopPropagation();$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove()}else{$.ajax({url:"ddproc.php",type:"POST",timeout:2e4,dataType:"json",data:{processor:"session_rsvp",op:"rsvp_dream_taste",primary_email_login:$("#rsvp_primary_email_login").val(),password_login:$("#rsvp_password_login").val(),firstname:$("#rsvp_firstname").val(),lastname:$("#rsvp_lastname").val(),telephone_1:$("#rsvp_telephone_1").val(),nobo:1,submit_login:1,remember_login:1},success:function(e){if(e.processor_success){$(".rsvp_only_form_incomplete").slideUp();$(".rsvp_only_form_complete").slideDown();$(".login_first_name").text($("#rsvp_firstname").val());$(".login_sign_in").hide();$(".login_signed_in").show();$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove()}else if(!e.processor_success&&e.processor_message){dd_message({message:e.processor_message});$(".btn-spinning").removeClass("btn-spinning");$(".ld-spin").remove()}},error:function(e,t){response="Unexpected error"}})}$("#rsvp_only_form").addClass("was-validated")});$(".mobile-cart-div").find(".menuCart").on("show.bs.collapse",function(){$(".show-cart-button > .fas").removeClass("fa-shopping-cart");$(".show-cart-button > .fas").addClass("fa-chevron-up");$("body").addClass("modal-open");$(".menuCart").addClass(".panel-fullscreen");updateServingsCountAndCheckoutButton()});$(".mobile-cart-div").find(".menuCart").on("shown.bs.collapse",function(){$(".mobile-cart-div")[0].scrollIntoView({behavior:"smooth",block:"start"})});$(document).on("click",".menuCart-modal, .mobile-cart-div > * .msg_empty_cart",function(e){$(".show-cart-button").trigger("click")});$(".mobile-cart-div").find(".menuCart").on("hide.bs.collapse",function(){$(".show-cart-button > .fas").removeClass("fa-chevron-up");$(".show-cart-button > .fas").addClass("fa-shopping-cart");$(".continue-btn-div").toggle();$("body").removeClass("modal-open");$(".menuCart-modal").remove();updateServingsCountAndCheckoutButton()});if($("[data-unix_expiry]").length>0){$.doTimeout("unix_expiry_timer");$.doTimeout("unix_expiry_timer",6e4,function(){var e=Math.round((new Date).getTime()/1e3);$("[data-unix_expiry]").filter(function(){return $(this).data("unix_expiry")<e&&!$(this).hasClass("disabled")}).addClass("disabled");return true});$.doTimeout("unix_expiry_timer",true)}if(isIE()){var t=$(".mobile-cart-div");var i=$(t).offset().top;$(window).scroll(function(){var e=$(window).scrollTop();if(e>=i){$(t).css({position:"fixed",left:0,top:0}).removeClass("px-0")}else{$(t).css({position:"static",left:"auto",top:"auto"}).addClass("px-0")}})}});
//# sourceMappingURL=session_menu.min.js.map