{"version":3,"file":"global.min.js","names":["AJAX_IN_PROCESS","GUEST_PREFERENCES","lang","en","dd","dream_dinners","tc","terms_and_conditions","delayed_payment","delayed_payment_decline","set_user_pref","pref","setting","user_id","callBack","toUpperCase","pref_value","USER_PREFERENCES","value","$","isPlainObject","JSON","stringify","extend","toString","ajax","url","type","timeout","dataType","data","processor","op","key","success","json","status","response","error","objAJAXRequest","strError","get_user_pref","select_location_click_handler","document","on","e","config","store_id","order_type","this","id","indexOf","split","setStoreAndBeginOrder","preventDefault","bounce","location","target","window","open","href","back_path","encodeURIComponent","pathname","search","incrementVal","incrementBy","parseInt","isNaN","toggleId","slideToggle","setQueryString","variable","vars","substring","var_found","new_query","i","length","pair","getQueryVariable","decodeURI","removeQueryVariable","sourceURL","rtn","params_arr","queryString","splice","join","mailHideOnSubmit","token","getElementById","submit","historyPush","history","pushState","title","historyReplace","replaceState","create_and_submit_form","settings","method","form","property","attr","action","input","name","appendTo","body","append","remove","show","store","showMap","address","modal_message","width","height","modal","resizable","size","message","confirmNavigate","goUrl","confirm","dd_console_log","is_debug","console","log","address_location","latlong","getLocation","geolocation","geoparams","geocoder","google","maps","Geocoder","undefined","trim","latLng","latlng","componentRestrictions","postalCode","lat","parseFloat","lng","LatLng","coords","latitude","longitude","geocode","results","GeocoderStatus","OK","navigator","getCurrentPosition","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","dd_toast","animation","autohide","delay","css_header","html","toast","fetchToasts","dd_toasts","time","each","setTimeout","buttons","label","className","callback","cancel","bootbox","dialog","alert","dd_alert","msg","formatAsMoney","mnt","Math","round","floor","get_todays_date","today","Date","getDate","slice","mm","getMonth","getFullYear","cookieCheck","hostAccess","overrideCookieCheck","cookie","domain","COOKIE","path","DEBUG","dd_print","print","nl2br","str","is_xhtml","replace","strip_tags","allowed","toLowerCase","match","$0","$1","PayFlow_Payload","encodedString","isIE","ua","userAgent","msie","trident","isSafari","test","oauthpopup","onCloseCallBack","Error","options","windowOptions","ref_page","reload_page","windowName","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","documentElement","clientWidth","screen","innerHeight","clientHeight","left","top","windowConfig","openPath","oauthWindow","doTimeout","closed","fn","$this","click","bind","attention","set_color","set_duration","stop","css","animate","backgroundColor","duration","center","max","outerHeight","scrollTop","outerWidth","scrollLeft","getVal","val","eq","addSpinner","hasClass","find","addClass","removeSpinner","removeClass","hideFlex","showFlex","toggleFlex","is","valNotDefault","dataset","valdefault","defaultValue","defaultSelected","valDefault","selectedIndex","valCheckDiff","dataObj","group","checkdiff","diffData","trigger","valCheckDiffRemove","removeData","off","validateForm","validity","checkbox_groups","group_name","push","hide","checkValidity","first","offset","classList","add","jQuery","prototype","constructor","addNameValuePair","cleanName","cleanValue","addAssocArray","arr","arrString","cleanPropName","retrieveEncodedString","stopPropagation","relatedTarget","tabid","new_query_string","ajaxSuccess","event","xhr","index","Cleave","delimiters","blocks","obj","parseJSON","responseText","user_preferences","guest_preferences","bounce_to","messages","toastArray","removeCookie","tooltip","selector","_gaq","gaq_cat","gaq_action","gaq_label","bg_image","menu_id","menu_item_id","prop","detailed","processor_success","recipe_id","processor_message","category","output","clear_items","reload","ready","FreshworksWidget","onresize","clear_edit_order","limit","text","new_text","substr","set_req","required","services","dropdown_menu","service","share","moreOpts","wrap","after","delivered_zip","getAttribute","click_id","tab","scrollToFixed","bottom","collapse","ajaxError","jqxhr","exception","statusText","pref_elem","preferenceChangeListener","save_button","slideUp","cancel_button","spacer","prepend","slideDown","ClipboardJS"],"sourceRoot":"js/src/dreamdinners/customer","sources":["global.js"],"sourcesContent":["var AJAX_IN_PROCESS = false;\nvar GUEST_PREFERENCES = {};\nvar lang = {\n\t'en': {\n\t\t'dd': {\n\t\t\t'dream_dinners': 'Dream Dinners'\n\t\t},\n\t\t'tc': {\n\t\t\t'terms_and_conditions': 'Terms & Conditions',\n\t\t\t'delayed_payment': 'When I opt to use the Delayed Payment service to pay for my order, I understand that the balance due for this and future orders will be automatically withdrawn (5) five days prior to my session date and will transact using the same credit card as was used to pay for the order deposit.',\n\t\t\t'delayed_payment_decline': 'By declining the Delayed Payment Terms and Conditions future orders are required to be paid in full upon submission. The balance due for existing Delayed Payement orders will be due at session.'\n\t\t}\n\t}\n};\n\nfunction set_user_pref(pref, setting, user_id, callBack)\n{\n\tpref = pref.toUpperCase();\n\tlet pref_value = USER_PREFERENCES[pref].value;\n\n\tif ($.isPlainObject(pref_value) && $.isPlainObject(setting))\n\t{\n\t\tsetting = JSON.stringify($.extend(USER_PREFERENCES[pref].value, setting));\n\t}\n\telse\n\t{\n\t\tsetting = setting.toString()\n\t}\n\n\t$.ajax({\n\t\turl: '/processor',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'account',\n\t\t\top: 'update_pref',\n\t\t\tkey: pref,\n\t\t\tuser_id: user_id,\n\t\t\tvalue: setting.toString()\n\t\t},\n\t\tsuccess: function (json, status) {\n\t\t\tif (typeof callBack === 'function')\n\t\t\t{\n\t\t\t\tcallBack(json, status);\n\t\t\t}\n\n\t\t\tresponse = json;\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error';\n\t\t}\n\t});\n\n}\n\nfunction get_user_pref(pref, user_id, callBack)\n{\n\n\tif (typeof user_id != 'undefined') // get guest pref\n\t{\n\t\t$.ajax({\n\t\t\turl: '/processor',\n\t\t\ttype: 'POST',\n\t\t\ttimeout: 20000,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\tprocessor: 'account',\n\t\t\t\top: 'get_pref',\n\t\t\t\tkey: pref,\n\t\t\t\tuser_id: user_id\n\t\t\t},\n\t\t\tsuccess: function (json, status) {\n\t\t\t\tif (typeof callBack === 'function')\n\t\t\t\t{\n\t\t\t\t\tcallBack(json, status);\n\t\t\t\t}\n\n\t\t\t\treturn json;\n\t\t\t},\n\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\tresponse = 'Unexpected error';\n\t\t\t}\n\t\t});\n\t}\n\telse // get current user pref\n\t{\n\n\t\tif (typeof USER_PREFERENCES !== 'undefined')\n\t\t{\n\t\t\tif (typeof USER_PREFERENCES[pref] === 'object')\n\t\t\t{\n\t\t\t\treturn USER_PREFERENCES[pref];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction select_location_click_handler()\n{\n\t// Register click handler to select store\n\t$(document).on('click', '[id^=\"select_location-\"], [id^=\"select_intro_location-\"]', function (e) {\n\n\t\tvar config = {\n\t\t\tstore_id: null,\n\t\t\torder_type: 'standard'\n\t\t};\n\n\t\tif (this.id.indexOf('intro_location') > 0)\n\t\t{\n\t\t\tconfig.order_type = 'intro';\n\t\t}\n\n\t\tconfig.store_id = this.id.split(\"-\")[1];\n\n\t\tsetStoreAndBeginOrder(config);\n\n\t\t// Stop browser from following href\n\t\te.preventDefault();\n\t});\n}\n\nfunction bounce(location, target)\n{\n\tif (!location)\n\t{\n\t\tlocation = '/';\n\t}\n\n\tif (target)\n\t{\n\t\twindow.open(location, target);\n\t}\n\telse\n\t{\n\t\twindow.location.href = location;\n\t}\n}\n\nfunction back_path()\n{\n\t// returns encoded string to pass to back=\n\treturn encodeURIComponent(location.pathname + location.search);\n}\n\nfunction incrementVal(value, incrementBy)\n{\n\tvalue = parseInt(value);\n\tincrementBy = parseInt(incrementBy);\n\n\tif (isNaN(value))\n\t{\n\t\tvalue = 0;\n\t}\n\n\tvalue = value + incrementBy;\n\n\tif (parseInt(value) < 0)\n\t{\n\t\tvalue = 0;\n\t}\n\n\treturn value;\n}\n\nfunction toggleId(id)\n{\n\t$('#' + id).slideToggle();\n}\n\nfunction setQueryString(variable, value)\n{\n\tvar query = window.location.search.substring(1);\n\tvar vars = query.split(\"&\");\n\tvar_found = false;\n\tnew_query = '?';\n\n\tfor (var i = 0; i < vars.length; i++)\n\t{\n\t\tvar pair = vars[i].split(\"=\");\n\n\t\tif (pair[0] == variable)\n\t\t{\n\t\t\tpair[1] = value;\n\t\t\tvar_found = true;\n\t\t}\n\n\t\tif (i > 0)\n\t\t{\n\t\t\tnew_query += '&';\n\t\t}\n\n\t\tif (pair[0] != \"\")\n\t\t{\n\t\t\tnew_query += pair[0] + '=' + pair[1];\n\t\t}\n\t}\n\n\tif (!var_found)\n\t{\n\t\tif (i > 0)\n\t\t{\n\t\t\tnew_query += '&';\n\t\t}\n\n\t\tnew_query += variable + '=' + value;\n\t}\n\n\treturn new_query;\n}\n\nfunction getQueryVariable(variable)\n{\n\tvar query = window.location.search.substring(1);\n\tvar vars = query.split(\"&\");\n\n\tfor (var i = 0; i < vars.length; i++)\n\t{\n\t\tvar pair = vars[i].split(\"=\");\n\t\tif (pair[0] == variable)\n\t\t{\n\t\t\treturn decodeURI(pair[1]);\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction removeQueryVariable(key, sourceURL)\n{\n\tvar rtn = sourceURL.split(\"?\")[0],\n\t\tparam,\n\t\tparams_arr = [],\n\t\tqueryString = (sourceURL.indexOf(\"?\") !== -1) ? sourceURL.split(\"?\")[1] : \"\";\n\n\tif (queryString !== \"\")\n\t{\n\t\tparams_arr = queryString.split(\"&\");\n\n\t\tfor (var i = params_arr.length - 1; i >= 0; i -= 1)\n\t\t{\n\t\t\tparam = params_arr[i].split(\"=\")[0];\n\n\t\t\tif (param === key)\n\t\t\t{\n\t\t\t\tparams_arr.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\trtn = rtn + \"?\" + params_arr.join(\"&\");\n\t}\n\n\treturn rtn;\n}\n\nfunction mailHideOnSubmit(token)\n{\n\tdocument.getElementById(\"mailhide_form\").submit();\n}\n\nfunction historyPush(config)\n{\n\t// Record history in html5 browser if supported\n\tif (window.history && window.history.pushState)\n\t{\n\t\tvar title = document.title;\n\t\tif (config.title)\n\t\t{\n\t\t\ttitle = config.title;\n\t\t}\n\n\t\thistory.pushState(null, title, config.url);\n\n\t}\n}\n\nfunction historyReplace(config)\n{\n\t// Record history in html5 browser if supported\n\tif (window.history && window.history.replaceState)\n\t{\n\t\tvar title = document.title;\n\t\tif (config.title)\n\t\t{\n\t\t\ttitle = config.title;\n\t\t}\n\n\t\thistory.replaceState(null, title, config.url);\n\n\t}\n}\n\nfunction create_and_submit_form(config)\n{\n\tvar settings = { //defaults\n\t\tmethod: 'post',\n\t\ttarget: false\n\t};\n\n\t$.extend(settings, config);\n\n\t// Create dynamic form to post and redirect to session_menu\n\tvar form = $('<form></form>');\n\tform.attr('method', settings.method);\n\n\tif (settings.action)\n\t{\n\t\tform.attr('action', settings.action);\n\t}\n\n\tif (settings.target)\n\t{\n\t\tform.attr('target', settings.target);\n\t}\n\n\tfor (var property in settings.input)\n\t{\n\t\t$('<input>').attr({\n\t\t\ttype: 'hidden',\n\t\t\tname: property,\n\t\t\tvalue: settings.input[property]\n\t\t}).appendTo(form);\n\t}\n\n\t$(document.body).append(form);\n\tform.submit();\n\t$(form).remove();\n}\n\nfunction setStoreAndBeginOrder(config)\n{\n\t// Show trobber\n\t$('.img_throbber_circle').show();\n\n\t// Create dynamic form to post and redirect to session_menu\n\tcreate_and_submit_form({\n\t\taction: '/session-menu',\n\t\tinput: ({\n\t\t\tstore: config.store_id,\n\t\t\torder_type: config.order_type\n\t\t})\n\t});\n}\n\nfunction showMap(address)\n{\n\tmodal_message({\n\t\twidth: 670,\n\t\theight: 580,\n\t\tmodal: false,\n\t\tresizable: true,\n\t\tsize: 'large',\n\t\tmessage: '<iframe width=\"100%\" height=\"100%\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\" src=\"//maps.google.com/maps?q=Dream%20Dinners%20' + encodeURIComponent(address) + '&amp;hnear=Dream%20Dinners%20' + encodeURIComponent(address) + '&amp;f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;&amp;ie=UTF8&amp;hq=&amp;t=m3&amp;spn=0.02878,0.054932&amp;z=14&amp;iwloc=A&amp;output=embed\"></iframe>'\n\t});\n}\n\nfunction confirmNavigate(goUrl, message)\n{\n\tmodal_message({\n\t\tmessage: message,\n\t\tconfirm: function () {\n\t\t\tbounce(goUrl);\n\t\t}\n\t});\n}\n\nfunction dd_console_log(message)\n{\n\tif (is_debug() && window.console)\n\t{\n\t\tconsole.log('DD Console Log: ' + message);\n\t}\n}\n\nfunction address_location(settings, callBack)\n{\n\tvar config = {\n\t\taddress: false, // mailing address string, can be partial address like just zip code or city and state.\n\t\tlatlong: false // latitude,longitude\n\t};\n\n\t// settings can be optional so check if callback is the first parameter\n\tif (typeof callBack === 'undefined' && typeof settings === 'function')\n\t{\n\t\tcallBack = settings;\n\t\tsettings = config;\n\t}\n\telse\n\t{\n\t\t$.extend(config, settings);\n\t}\n\n\tvar getLocation = function (geolocation, address, latlong) {\n\t\t//dd_console_log('Fresh Geolocation data.');\n\n\t\tvar geocoder = new google.maps.Geocoder();\n\t\tvar geoparams;\n\n\t\tif (address != undefined)\n\t\t{\n\t\t\taddress = address.trim();\n\t\t\t//the entered address was a postal code or it was less than 5 characters, will send it as a postal code anyways, but will return an invalid zip code\n\t\t\tif (address.length <= 5)\n\t\t\t{\n\t\t\t\tgeoparams = {\n\t\t\t\t\t'latLng': latlng,\n\t\t\t\t\t'componentRestrictions': {'postalCode': address}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (typeof latlong != 'undefined' && latlong)\n\t\t{\n\t\t\tlatlong = latlong.split(\",\");\n\t\t\tvar lat = parseFloat(latlong[0]);\n\t\t\tvar lng = parseFloat(latlong[1]);\n\t\t\tvar latlng = new google.maps.LatLng(lat, lng);\n\n\t\t\tgeoparams = {'latLng': latlng};\n\t\t}\n\t\telse if (geolocation !== false)\n\t\t{\n\t\t\tvar lat = parseFloat(geolocation.coords.latitude);\n\t\t\tvar lng = parseFloat(geolocation.coords.longitude);\n\t\t\tvar latlng = new google.maps.LatLng(lat, lng);\n\n\t\t\tgeoparams = {'latLng': latlng};\n\t\t}\n\t\t//the entered address was not a postal code\n\t\telse if (address != undefined && address.length > 5)\n\t\t{\n\t\t\tgeoparams = {'address': address};\n\t\t}\n\n\t\tgeocoder.geocode(geoparams, function (results, status) {\n\n\t\t\tif (status == google.maps.GeocoderStatus.OK)\n\t\t\t{\n\n\t\t\t\tif (results)\n\t\t\t\t{\n\t\t\t\t\tcallBack('ok', results);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcallBack('no_result', 'No geocoder results found.');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcallBack('error', 'No geocoder results found.');\n\n\t\t\t}\n\t\t});\n\n\t};\n\n\tvar onError = function (error) {\n\t\tswitch (error.code)\n\t\t{\n\t\t\tcase error.PERMISSION_DENIED:\n\t\t\t\tcallBack('gl_error', 'User denied the request for Geolocation.');\n\t\t\t\tbreak;\n\t\t\tcase error.POSITION_UNAVAILABLE:\n\t\t\t\tcallBack('gl_error', 'Geolocation information is unavailable.');\n\t\t\t\tbreak;\n\t\t\tcase error.TIMEOUT:\n\t\t\t\tcallBack('gl_error', 'The request to get user location timed out.');\n\t\t\t\tbreak;\n\t\t\tcase error.UNKNOWN_ERROR:\n\t\t\t\tcallBack('gl_error', 'An unknown error occurred.');\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tif (settings.address) // query by address\n\t{\n\t\tgetLocation(false, settings.address, false);\n\t}\n\telse if (settings.latlong) // query by latlong\n\t{\n\t\tgetLocation(false, false, settings.latlong);\n\t}\n\telse // browser geolocation\n\t{\n\t\tif (navigator.geolocation)\n\t\t{\n\t\t\tnavigator.geolocation.getCurrentPosition(getLocation, onError);\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\tcallBack('gl_error', 'Geolocation not supported.');\n\t\t}\n\t}\n}\n\nfunction dd_toast(settings)\n{\n\tvar config = {\n\t\tanimation: true,\n\t\tautohide: true,\n\t\tdelay: 5000,\n\t\ttitle: false,\n\t\tmessage: false,\n\t\ttype: 'primary'\n\t};\n\n\t$.extend(config, settings);\n\n\tif (!$('.toast-container').length)\n\t{\n\t\t$('<div class=\"toast-container fixed-top mt-4\"></div>').appendTo('body');\n\t}\n\n\tswitch (config.type)\n\t{\n\t\tcase 'primary':\n\t\t\tconfig.css_header = 'bg-green-dark text-white';\n\t\t\tconfig.title = ((config.title) ? config.title : 'Notice');\n\t\t\tbreak;\n\t\tcase 'secondary':\n\t\t\tconfig.css_header = 'bg-secondary text-white';\n\t\t\tconfig.title = ((config.title) ? config.title : 'Notice');\n\t\t\tbreak;\n\t\tcase 'info':\n\t\t\tconfig.css_header = 'bg-info text-white';\n\t\t\tconfig.title = ((config.title) ? config.title : 'Notice');\n\t\t\tbreak;\n\t\tcase 'success':\n\t\t\tconfig.css_header = 'bg-success text-white';\n\t\t\tconfig.title = ((config.title) ? config.title : 'Success');\n\t\t\tbreak;\n\t\tcase 'warning':\n\t\tcase 'warn':\n\t\t\tconfig.css_header = 'bg-warning text-white';\n\t\t\tconfig.title = ((config.title) ? config.title : 'Warning');\n\t\t\tbreak;\n\t\tcase 'error':\n\t\tcase 'danger':\n\t\t\tconfig.css_header = 'bg-danger text-white';\n\t\t\tconfig.title = ((config.title) ? config.title : 'Error');\n\t\t\tbreak;\n\t}\n\n\tvar html = '<div class=\"toast mx-auto\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-delay=\"' + config.delay + '\" data-autohide=\"' + config.autohide + '\">';\n\thtml += '<div class=\"toast-header ' + config.css_header + '\">';\n\thtml += '<strong class=\"mr-auto\">' + ((config.title) ? config.title : 'Notice') + '</strong>';\n\thtml += '<button type=\"btn btn-primary btn-sm\" class=\"ml-2 mb-1 close\" data-dismiss=\"toast\" aria-label=\"Close\"><span aria-hidden=\"true\" class=\"text-white\">&times;</span></button>';\n\thtml += '</div>';\n\thtml += '<div class=\"toast-body\">' + config.message + '</div>';\n\thtml += '</div>';\n\n\t$('.toast-container').append(html);\n\t$('.toast-container .toast:last').toast('show');\n}\n\nfunction fetchToasts(json)\n{\n\tif (json.dd_toasts)\n\t{\n\t\tlet time = 0;\n\n\t\t$.each(json.dd_toasts, function (key) {\n\t\t\t// do a short delay so they don't all show up at once.\n\t\t\tsetTimeout(() => {\n\t\t\t\tdd_toast(json.dd_toasts[key]);\n\t\t\t}, time);\n\t\t\ttime += 500; // .5 seconds, time between toasts for a response containing multiple toasts\n\t\t});\n\t}\n}\n\nfunction modal_message(settings)\n{\n\tvar config = {\n\t\ttitle: false,\n\t\tmessage: false,\n\t\tsize: false // small, large, extra-large\n\t};\n\n\t$.extend(config, settings);\n\n\tif (typeof config.confirm != 'undefined')\n\t{\n\t\t// convert old dd_message\n\t\tif (typeof config.confirm == 'function')\n\t\t{\n\t\t\tconfig.buttons = {\n\t\t\t\tconfirm: {\n\t\t\t\t\tlabel: 'Confirm',\n\t\t\t\t\tclassName: 'btn-primary',\n\t\t\t\t\tcallback: config.confirm\n\t\t\t\t},\n\t\t\t\tcancel: {\n\t\t\t\t\tlabel: 'Cancel',\n\t\t\t\t\tclassName: 'btn-secondary',\n\t\t\t\t\tcallback: config.cancel\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbootbox.dialog(config);\n\t}\n\telse if (typeof config.buttons != 'undefined')\n\t{\n\t\t// convert old dd_message\n\t\tvar buttons = {};\n\n\t\t$.each(config.buttons, function (key, value) {\n\n\t\t\tif (typeof value == 'function')\n\t\t\t{\n\t\t\t\tbuttons[key] = {\n\t\t\t\t\tlabel: key,\n\t\t\t\t\tclassName: 'btn-primary',\n\t\t\t\t\tcallback: value\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t\tconfig.buttons = buttons;\n\n\t\tbootbox.dialog(config);\n\t}\n\telse\n\t{\n\t\tbootbox.alert(config);\n\t}\n\n}\n\nfunction dd_alert(msg)\n{\n\tmodal_message({\n\t\ttitle: 'Alert',\n\t\tmessage: msg\n\t});\n}\n\nfunction formatAsMoney(mnt)\n{\n\tif (typeof mnt == 'undefined')\n\t{\n\t\tmnt = 0;\n\t}\n\n\tmnt -= 0;\n\tmnt = (Math.round(mnt * 100)) / 100;\n\treturn (mnt == Math.floor(mnt)) ? mnt + '.00'\n\t\t: ((mnt * 10 == Math.floor(mnt * 10)) ?\n\t\t\tmnt + '0' : mnt);\n}\n\nfunction get_todays_date()\n{\n\tvar today = new Date();\n\tvar dd = (\"0\" + today.getDate()).slice(-2);\n\tvar mm = ('0' + (today.getMonth() + 1)).slice(-2); //January is 0!\n\tvar yyyy = today.getFullYear();\n\n\treturn yyyy + '-' + mm + '-' + dd;\n}\n\nfunction cookieCheck()\n{\n\tvar hostAccess = getQueryVariable('host_url');\n\tvar overrideCookieCheck = false;\n\tif (hostAccess && hostAccess == 'http://support.dreamdinners.com')\n\t{\n\t\toverrideCookieCheck = true;\n\t}\n\n\t$.cookie('chkcookie', true, {\n\t\tdomain: COOKIE.domain,\n\t\tpath: '/'\n\t});\n\n\tif (!$.cookie('chkcookie') && !overrideCookieCheck)\n\t{\n\t\tmodal_message({\n\t\t\ttitle: 'Alert',\n\t\t\tmessage: 'You have cookies turned off in your browser. Please check your settings, and enable cookies for this site in order to continue. Thank you.'\n\t\t});\n\t}\n}\n\nfunction is_debug()\n{\n\tif (typeof DEBUG !== 'undefined' && DEBUG === true)\n\t{\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction dd_print()\n{\n\tif (is_debug())\n\t{\n\t\tdd_console_log('Debug: Print dialog called here.');\n\t}\n\telse\n\t{\n\t\twindow.print();\n\t}\n}\n\n///------------ phpjs functions ----------------------\nfunction nl2br(str, is_xhtml)\n{\n\t//  discuss at: http://phpjs.org/functions/nl2br/\n\t//   example 1: nl2br('Kevin\\nvan\\nZonneveld');\n\t//   returns 1: 'Kevin<br />\\nvan<br />\\nZonneveld'\n\t//   example 2: nl2br(\"\\nOne\\nTwo\\n\\nThree\\n\", false);\n\t//   returns 2: '<br>\\nOne<br>\\nTwo<br>\\n<br>\\nThree<br>\\n'\n\t//   example 3: nl2br(\"\\nOne\\nTwo\\n\\nThree\\n\", true);\n\t//   returns 3: '<br />\\nOne<br />\\nTwo<br />\\n<br />\\nThree<br />\\n'\n\n\tvar breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '<br ' + '/>' : '<br>'; // Adjust comment to avoid issue on phpjs.org display\n\n\treturn (str + '')\n\t\t.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2');\n}\n\nfunction strip_tags(input, allowed)\n{\n\t//  discuss at: http://phpjs.org/functions/strip_tags/\n\t//   example 1: strip_tags('<p>Kevin</p> <br /><b>van</b> <i>Zonneveld</i>', '<i><b>');\n\t//   returns 1: 'Kevin <b>van</b> <i>Zonneveld</i>'\n\t//   example 2: strip_tags('<p>Kevin <img src=\"someimage.png\" onmouseover=\"someFunction()\">van <i>Zonneveld</i></p>', '<p>');\n\t//   returns 2: '<p>Kevin van Zonneveld</p>'\n\t//   example 3: strip_tags(\"<a href='http://kevin.vanzonneveld.net'>Kevin van Zonneveld</a>\", \"<a>\");\n\t//   returns 3: \"<a href='http://kevin.vanzonneveld.net'>Kevin van Zonneveld</a>\"\n\t//   example 4: strip_tags('1 < 5 5 > 1');\n\t//   returns 4: '1 < 5 5 > 1'\n\t//   example 5: strip_tags('1 <br/> 1');\n\t//   returns 5: '1  1'\n\t//   example 6: strip_tags('1 <br/> 1', '<br>');\n\t//   returns 6: '1 <br/> 1'\n\t//   example 7: strip_tags('1 <br/> 1', '<br><br/>');\n\t//   returns 7: '1 <br/> 1'\n\n\tallowed = (((allowed || '') + '')\n\t\t.toLowerCase()\n\t\t.match(/<[a-z][a-z0-9]*>/g) || [])\n\t\t.join(''); // making sure the allowed arg is a string containing only tags in lowercase (<a><b><c>)\n\tvar tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi,\n\t\tcommentsAndPhpTags = /<!--[\\s\\S]*?-->|<\\?(?:php)?[\\s\\S]*?\\?>/gi;\n\treturn input.replace(commentsAndPhpTags, '')\n\t\t.replace(tags, function ($0, $1) {\n\t\t\treturn allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\n\t\t});\n}\n\n///------------ Dream Dinners JQuery Extensions ----------------------\n(function ($) {\n\n\t$.oauthpopup = function (onCloseCallBack) {\n\t\tif (!$(this).data('path'))\n\t\t{\n\t\t\tthrow new Error(\"data-path must not be empty\");\n\t\t}\n\n\t\tvar defaults = {\n\t\t\twindowName: 'ConnectWithOAuth',\n\t\t\twindowOptions: {\n\t\t\t\twidth: '800',\n\t\t\t\theight: '400',\n\t\t\t\tlocation: '0',\n\t\t\t\tstatus: '0'\n\t\t\t}\n\t\t};\n\n\t\tvar options = {\n\t\t\twindowOptions: {\n\t\t\t\twidth: $(this).data('width'),\n\t\t\t\theight: $(this).data('height')\n\t\t\t},\n\t\t\tpath: $(this).data('path'),\n\t\t\tref_page: $(this).data('ref_page'),\n\t\t\treload_page: $(this).data('reload'),\n\t\t\tcallback: onCloseCallBack\n\t\t};\n\n\t\tvar settings = $.extend({}, defaults, options);\n\n\t\tvar dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : window.screenX;\n\t\tvar dualScreenTop = window.screenTop != undefined ? window.screenTop : window.screenY;\n\n\t\tvar width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\n\t\tvar height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n\n\t\tvar left = ((width / 2) - (settings.windowOptions.width / 2)) + dualScreenLeft;\n\t\tvar top = ((height / 2) - (settings.windowOptions.height / 2)) + dualScreenTop;\n\n\t\tvar windowConfig = 'location=' + settings.windowOptions.location + ', status=' + settings.windowOptions.status + ', width=' + settings.windowOptions.width + ', height=' + settings.windowOptions.height + ', top=' + top + ', left=' + left;\n\n\t\tvar openPath = settings.path;\n\n\t\tif (typeof settings.ref_page != 'undefined')\n\t\t{\n\t\t\topenPath += '&ref_page=' + settings.ref_page;\n\t\t}\n\n\t\tif (typeof settings.reload_page != 'undefined')\n\t\t{\n\t\t\topenPath += '&reload_page=' + settings.reload_page;\n\t\t}\n\n\t\tvar oauthWindow = window.open(openPath, settings.windowName, windowConfig);\n\n\t\tif (typeof settings.callback == 'function')\n\t\t{\n\n\t\t\t$.doTimeout('oauth_interval', 1000, function () {\n\n\t\t\t\tif (oauthWindow.closed)\n\t\t\t\t{\n\t\t\t\t\t$.doTimeout('oauth_interval');\n\t\t\t\t\tsettings.callback();\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t//bind to element and pop oauth when clicked\n\t$.fn.oauthpopup = function (options) {\n\t\t$this = $(this);\n\t\t$this.click($.oauthpopup.bind(this, options));\n\t};\n\n\t// highlight an elements background color temporarily to call attention to it\n\t$.fn.attention = function (set_color, set_duration) {\n\t\tif (set_color == undefined)\n\t\t{\n\t\t\tset_color = '#ffed8c';\n\t\t}\n\n\t\tif (set_duration == undefined)\n\t\t{\n\t\t\tset_duration = 2000;\n\t\t}\n\n\t\t$(this).stop().css('background-color', set_color).animate({backgroundColor: 'transparent'}, {duration: set_duration});\n\n\t\treturn this;\n\t};\n\n\t// center an element on the screen\n\t$.fn.center = function () {\n\t\tthis.css(\"position\", \"absolute\");\n\t\tthis.css(\"top\", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + $(window).scrollTop()) + \"px\");\n\t\tthis.css(\"left\", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) + $(window).scrollLeft()) + \"px\");\n\t\treturn this;\n\t};\n\n\t// get value if not equal to placeholder, primarily for ie\n\t$.fn.getVal = function () {\n\t\tvar $this = $(this),\n\t\t\tval = $this.eq(0).val();\n\n\t\tif (val == $this.attr('placeholder'))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn val;\n\t\t}\n\t};\n\n\t$.fn.addSpinner = function (e) {\n\t\tif (this.hasClass('btn-spin') && this.find('.spinner-border').length === 0)\n\t\t{\n\t\t\t// bootstrap Spinner\n\t\t\tthis.append('<span class=\"spinner-border spinner-border-sm float-right mt-1\" role=\"status\" aria-hidden=\"true\"></span>');\n\t\t}\n\t\telse if (this.hasClass('btn-spinner') && !this.hasClass('btn-spinning'))\n\t\t{\n\t\t\t// DD spinner\n\t\t\tthis.addClass('btn-spinning').append('<div class=\"ld-spin\"></div>');\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t$.fn.removeSpinner = function (e) {\n\t\t// remove DD spinner\n\t\tthis.removeClass('btn-spinning');\n\t\tthis.find('.ld-spin').remove();\n\t\t// remove Bootstrap\n\t\tthis.find('.spinner-border').remove();\n\n\t\treturn this;\n\t};\n\n\t$.fn.hideFlex = function (e) {\n\t\tthis.addClass('collapse');\n\t\tthis.removeClass('show');\n\n\t\treturn this;\n\t};\n\n\t$.fn.showFlex = function (e) {\n\t\tthis.addClass('collapse show');\n\n\t\treturn this;\n\t};\n\n\t$.fn.toggleFlex = function (e) {\n\n\t\tif (this.is(':visible'))\n\t\t{\n\t\t\tthis.hideFlex(e)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showFlex(e);\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t$.fn.valNotDefault = function () {\n\n\t\tif (typeof this[0].dataset.valdefault !== 'undefined')\n\t\t{\n\t\t\tif (this[0].value !== this[0].dataset.valdefault)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse if (typeof this[0].defaultValue !== 'undefined')\n\t\t{\n\t\t\tif (this[0].value !== this[0].defaultValue)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse if (this[0].type == 'select-one')\n\t\t{\n\t\t\tfor (var i = 0; i < this[0].options.length; i++)\n\t\t\t{\n\t\t\t\tif (this[0].options[i].defaultSelected == true)\n\t\t\t\t{\n\t\t\t\t\tif (this[0].value !== this[0].options[i].value)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t$.fn.valDefault = function (value) {\n\n\t\tif (typeof value !== 'undefined')\n\t\t{\n\t\t\tthis.val(value);\n\t\t}\n\t\telse if (typeof this[0].dataset.valdefault !== 'undefined')\n\t\t{\n\t\t\tthis.val(function () {\n\t\t\t\treturn this.dataset.valdefault;\n\t\t\t});\n\t\t}\n\t\telse if (typeof this[0].defaultValue !== 'undefined')\n\t\t{\n\t\t\tthis.val(function () {\n\t\t\t\treturn this.defaultValue;\n\t\t\t});\n\t\t}\n\t\telse if (this[0].type == 'select-one')\n\t\t{\n\t\t\tfor (var i = 0; i < this[0].options.length; i++)\n\t\t\t{\n\t\t\t\tif (this[0].options[i].defaultSelected == true)\n\t\t\t\t{\n\t\t\t\t\tthis[0].selectedIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t$.fn.valCheckDiff = function (dataObj) {\n\n\t\t// no value, use input's value as the base value\n\t\tif (typeof dataObj === 'undefined' || typeof dataObj.value === 'undefined')\n\t\t{\n\t\t\tdataObj.value = this.value;\n\t\t}\n\n\t\tif (typeof dataObj.group === 'undefined')\n\t\t{\n\t\t\tdataObj.group = '_main';\n\t\t}\n\n\t\tthis.data({'checkdiff': dataObj}).val(dataObj.value).on('change keyup', function (e) {\n\n\t\t\tlet diffData = {};\n\t\t\tlet dataObj = $(this).data().checkdiff;\n\n\t\t\tif (typeof $(document).data().checkdiff != 'undefined')\n\t\t\t{\n\t\t\t\tdiffData = $(document).data().checkdiff;\n\t\t\t}\n\n\t\t\tif ((dataObj.value != null && this.value != dataObj.value) || (this.value != '' && dataObj.value == null))\n\t\t\t{\n\t\t\t\tif (typeof diffData[dataObj.group] == 'undefined')\n\t\t\t\t{\n\t\t\t\t\tdiffData[dataObj.group] = {};\n\t\t\t\t}\n\n\t\t\t\tdiffData[dataObj.group][this.id] = dataObj;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// values are not different, remove from diff object\n\t\t\t\tdelete diffData[dataObj.group][this.id];\n\t\t\t}\n\n\t\t\t$(document).data({'checkdiff': diffData}).trigger('dd:checkdiff');\n\n\t\t});\n\n\t\treturn this;\n\t};\n\n\t$.fn.valCheckDiffRemove = function (value) {\n\n\t\tif (typeof value != 'undefined')\n\t\t{\n\t\t\tthis.val(value);\n\t\t}\n\n\t\tlet dataObj = $(this).data();\n\n\t\tif (typeof dataObj != 'undefined')\n\t\t{\n\t\t\tif (typeof dataObj.checkdiff != 'undefined')\n\t\t\t{\n\t\t\t\tthis.removeData('checkdiff').off('change keyup');\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.validateForm = function () {\n\n\t\tlet form = $(this);\n\t\tlet validity = true;\n\n\t\tif (form.length)\n\t\t{\n\t\t\t// prevent spaces from validating form\n\t\t\t$(form).find('input, textarea').each(function (e) {\n\t\t\t\t$(this).val($(this).val().trim());\n\t\t\t});\n\n\t\t\tif ($(this).find(':submit').hasClass('btn-onclick-disable'))\n\t\t\t{\n\t\t\t\t$(this).find(':submit').addClass('disabled');\n\t\t\t}\n\n\t\t\t// handle checkbox groups\n\t\t\tlet checkbox_groups = [];\n\n\t\t\t// collect list of unique checkbox required groups\n\t\t\t$(form).find('[data-checkbox_group_required=\"true\"]').each(function (e) {\n\t\t\t\tlet group_name = $(this).data('checkbox_group');\n\t\t\t\tif (checkbox_groups[group_name] !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tcheckbox_groups.push(group_name);\n\t\t\t\t}\n\t\t\t\t// set them all to required\n\t\t\t\t$('[data-checkbox_group=\"' + group_name + '\"]').attr('required', true);\n\t\t\t});\n\n\t\t\t// check each group\n\t\t\t$.each(checkbox_groups, function (key, group_name) {\n\t\t\t\t// check each checkbox in group for validity\n\t\t\t\t$('[data-checkbox_group=\"' + group_name + '\"]').each(function () {\n\t\t\t\t\t// found a box that is checked\n\t\t\t\t\tif ($(this).is(':checked'))\n\t\t\t\t\t{\n\t\t\t\t\t\t// one was checked, remove required\n\t\t\t\t\t\t$('[data-checkbox_group=\"' + group_name + '\"]').attr('required', false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t// end handle checkbox groups\n\n\t\t\t$(form).find('.form-feedback').hide();\n\n\t\t\tif (form['0'].checkValidity() === false)\n\t\t\t{\n\t\t\t\tvalidity = false;\n\n\t\t\t\tif ($(this).find(':submit').hasClass('btn-onclick-disable'))\n\t\t\t\t{\n\t\t\t\t\t$(this).find(':submit').removeClass('disabled');\n\t\t\t\t}\n\n\t\t\t\t$('.btn-spinning').removeClass('btn-spinning');\n\t\t\t\t$('.ld-spin').remove();\n\n\t\t\t\t$(form).find('.form-feedback').show();\n\n\t\t\t\t$(form).data('was_submitted', false);\n\n\t\t\t\t// scrolls the first invalid elemt to 1/3 top of screen.\n\t\t\t\t$('html, body').scrollTop($(form).find('.form-control:invalid').first().offset().top + ( - ($(window).height() / 3)));\n\t\t\t}\n\n\t\t\tform['0'].classList.add('was-validated');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.log();\n\t\t}\n\n\t\treturn validity;\n\t};\n\n})(jQuery);\n\n// --------------------------------------------------------------------\n//\tPayFlow_Payload\n//  support for encoding custom data sent to PayFlow as a commnt\n// ---------------------------------------------------------------------\nfunction PayFlow_Payload()\n{\n\tthis.encodedString = \"\";\n}\n\nPayFlow_Payload.prototype = {\n\tconstructor: PayFlow_Payload,\n\taddNameValuePair: function (name, value) {\n\t\tvalue += \"\";\n\n\t\tvar cleanName = name.replace(\"+\", \"\");\n\t\tcleanName = cleanName.replace(\":\", \"\");\n\t\tvar cleanValue = value.replace(\"+\", \"\");\n\t\tcleanValue = cleanValue.replace(\":\", \"\");\n\t\tcleanValue = cleanValue.replace(\"`\", \"\");\n\t\tcleanValue = cleanValue.replace(\"'\", \"\");\n\t\tcleanValue = cleanValue.replace(\"\\\"\", \"\");\n\t\tcleanValue = cleanValue.replace(\"&\", \"and\");\n\n\t\tif (this.encodedString == \"\")\n\t\t{\n\t\t\tthis.encodedString = cleanName + \":\" + cleanValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.encodedString += \"+\" + cleanName + \":\" + cleanValue;\n\t\t}\n\t},\n\taddAssocArray: function (name, arr) {\n\t\tvar cleanName = name.replace(\"+\", \"\");\n\t\tcleanName = cleanName.replace(\":\", \"\");\n\n\t\tarrString = \"\";\n\n\t\tfor (var value in arr)\n\t\t{\n\t\t\tif (arr[value])\n\t\t\t{\n\t\t\t\tvar cleanValue = arr[value].replace(\"+\", \"\");\n\t\t\t\tcleanValue = cleanValue.replace(\":\", \"\");\n\t\t\t\tcleanValue = cleanValue.replace(\"|\", \"\");\n\t\t\t\tcleanValue = cleanValue.replace(\"~\", \"\");\n\t\t\t\tcleanValue = cleanValue.replace(\"`\", \"\");\n\t\t\t\tcleanValue = cleanValue.replace(\"'\", \"\");\n\t\t\t\tcleanValue = cleanValue.replace(\"\\\"\", \"\");\n\t\t\t\tcleanValue = cleanValue.replace(\"&\", \"and\");\n\n\t\t\t\tvar cleanPropName = value.replace(\"+\", \"\");\n\t\t\t\tcleanPropName = cleanPropName.replace(\":\", \"\");\n\t\t\t\tcleanPropName = cleanPropName.replace(\"|\", \"\");\n\t\t\t\tcleanPropName = cleanPropName.replace(\"~\", \"\");\n\n\t\t\t\tif (arrString == \"\")\n\t\t\t\t{\n\t\t\t\t\tarrString = cleanPropName + \"~\" + cleanValue;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tarrString += \"|\" + cleanPropName + \"~\" + cleanValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.encodedString == \"\")\n\t\t{\n\t\t\tthis.encodedString = cleanName + \":\" + arrString;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.encodedString += \"+\" + cleanName + \":\" + arrString;\n\t\t}\n\t},\n\tretrieveEncodedString: function () {\n\n\t\treturn this.encodedString;\n\n\t}\n};\n\n/* handle Bootstrap form validation */\n$(document).on('submit', '.needs-validation', function (e) {\n\n\tif ($(this).validateForm() !== true)\n\t{\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t}\n\n});\n\n/* Handle Bootstrap Tabbed Content */\n$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n\te.target; // newly activated tab\n\te.relatedTarget; // previous active tab\n\n\t// html5 update url history\n\tif ($(e.target).data('urlpush') !== undefined && $(e.target).data('urlpush') === true)\n\t{\n\t\tif ($(e.target).data('target') !== undefined)\n\t\t{\n\t\t\tvar target = $(e.target).data('target');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar target = $(e.target).attr('href');\n\t\t}\n\n\t\tvar tabid = $(target).attr('id');\n\n\t\tnew_query_string = setQueryString('tab', tabid);\n\t\thistoryPush({url: new_query_string});\n\t}\n});\n\nfunction isIE()\n{\n\tvar ua = window.navigator.userAgent; //Check the userAgent property of the window.navigator object\n\tvar msie = ua.indexOf('MSIE '); // IE 10 or older\n\tvar trident = ua.indexOf('Trident/'); //IE 11\n\n\treturn (msie > 0 || trident > 0);\n}\n\nfunction isSafari()\n{\n\tvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n\treturn isSafari;\n}\n\n$(document).ajaxSuccess(function (event, xhr, settings) {\n\n\t$('.telephone:not(.no-tel), [type=\"tel\"]:not(.no-tel)').each(function (index) {\n\t\tnew Cleave(this, {\n\t\t\tdelimiters: [\n\t\t\t\t'-',\n\t\t\t\t'-',\n\t\t\t\t'-'\n\t\t\t],\n\t\t\tblocks: [\n\t\t\t\t3,\n\t\t\t\t3,\n\t\t\t\t4\n\t\t\t]\n\t\t});\n\t});\n\n\t// inside try to attempt to decode response as json\n\ttry\n\t{\n\t\t// decode the response as json\n\t\tvar obj = $.parseJSON(xhr.responseText);\n\n\t\t// if the json contains toasts, pop them up\n\t\tif (obj.dd_toasts)\n\t\t{\n\t\t\tfetchToasts(obj)\n\t\t}\n\n\t\t// updated user preferences\n\t\tif (obj.user_preferences)\n\t\t{\n\t\t\tUSER_PREFERENCES = obj.user_preferences;\n\t\t}\n\n\t\t// updated guest preferences\n\t\tif (obj.guest_preferences)\n\t\t{\n\t\t\tGUEST_PREFERENCES = $.extend(GUEST_PREFERENCES, obj.guest_preferences);\n\t\t}\n\n\t\t// bounce\n\t\tif (obj.bounce_to)\n\t\t{\n\t\t\tbounce(obj.bounce_to);\n\t\t}\n\t}\n\tcatch (e)\n\t{\n\t\t// not json\n\t}\n\n});\n\n// handle setToastMsg\nif ($.cookie('toastMsg'))\n{\n\tvar messages = $.parseJSON($.cookie('toastMsg'));\n\n\tvar time = 0;\n\n\t$.each(messages, function (key, toastArray) {\n\n\t\tsetTimeout(() => {\n\t\t\tdd_toast(toastArray);\n\t\t}, time);\n\n\t\ttime += 500; // .5 seconds, time between toasts for a response containing multiple toasts\n\n\t});\n\n\t$.removeCookie('toastMsg', {\n\t\tdomain: COOKIE.domain,\n\t\tpath: '/'\n\t});\n}\n\n// load bootstrap tooltips\n//$('[data-toggle=\"tooltip\"]').tooltip();\n$(document).tooltip({selector: '[data-toggle=\"tooltip\"]'});\n\n// handle analytics click\n$('[data-gaq_cat]').each(function () {\n\t$(this).on('click', function () {\n\n\t\tif (typeof _gaq != 'undefined')\n\t\t{\n\t\t\tgaq_cat = $(this).data('gaq_cat');\n\t\t\tgaq_action = $(this).data('gaq_action');\n\t\t\tgaq_label = $(this).data('gaq_label');\n\n\t\t\t_gaq.push([\n\t\t\t\t'_trackEvent',\n\t\t\t\tgaq_cat,\n\t\t\t\tgaq_action,\n\t\t\t\tgaq_label\n\t\t\t]);\n\t\t}\n\t});\n});\n\n$('[data-background-image]').each(function () {\n\tvar bg_image = $(this).data('background-image');\n\t$(this).css('background-image', 'url(' + bg_image + ')');\n});\n\n$(document).on('click', '.link-dinner-details', function (e) {\n\n\te.preventDefault();\n\n\tlet menu_id = $(this).data('menu_id');\n\tlet menu_item_id = $(this).data('menu_item_id');\n\tlet store_id = $(this).data('store_id');\n\tlet target = $(this).prop('target');\n\tlet detailed = $(this).data('detailed');\n\tlet size = $(this).data('size');\n\n\t$.ajax({\n\t\turl: '/processor',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'menu_item',\n\t\t\top: 'find_item',\n\t\t\tmenu_id: menu_id,\n\t\t\tmenu_item_id: menu_item_id,\n\t\t\tstore_id: store_id,\n\t\t\tdetailed: detailed\n\t\t},\n\t\tsuccess: function (json) {\n\t\t\tif (json.processor_success)\n\t\t\t{\n\t\t\t\tbootbox.dialog({\n\t\t\t\t\tmessage: json.html,\n\t\t\t\t\tsize: size,\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\"Full details\": function () {\n\t\t\t\t\t\t\tbounce('/item?recipe=' + json.recipe_id + '&ov_menu=' + json.menu_id, target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\tlabel: \"Close\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmodal_message({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tmessage: json.processor_message\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error';\n\t\t}\n\t});\n\n});\n\n// Click handler for clear cart\n$(document).on('click', '.clear-cart, .clear-cart-gc', function (e) {\n\n\tvar category = 'all';\n\tif (window.location.href.indexOf('gift_card_cart') != -1)\n\t{\n\t\tcategory = 'giftcard';\n\t}\n\n\t$.ajax({\n\t\turl: '/processor',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'cart_clear_category',\n\t\t\top: 'get_clear_form',\n\t\t\toutput: 'json'\n\t\t},\n\t\tsuccess: function (json) {\n\t\t\tmodal_message({\n\t\t\t\ttitle: 'Clear your Cart',\n\t\t\t\tmessage: json.html,\n\t\t\t\theight: 300,\n\t\t\t\twidth: 300,\n\t\t\t\tresizable: false,\n\t\t\t\tconfirm: function () {\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'cart_clear_category',\n\t\t\t\t\t\t\top: 'do_clear',\n\t\t\t\t\t\t\tclear_items: category,\n\t\t\t\t\t\t\toutput: 'json'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json) {\n\t\t\t\t\t\t\t// reload page\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tresponse = 'Unexpected error';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcancel: function () {\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error';\n\t\t}\n\t});\n});\n\n//Freshworks help widget - responsive view control\n$(document).ready(function () {\n\tif (typeof FreshworksWidget !== 'undefined')\n\t{\n\t\tif (window.innerWidth <= 1000)\n\t\t{\n\t\t\tFreshworksWidget('hide', 'launcher');\n\t\t}\n\t}\n});\n\nwindow.onresize = function () {\n\tif (typeof FreshworksWidget !== 'undefined')\n\t{\n\t\tif (window.innerWidth <= 1000)\n\t\t{\n\t\t\tFreshworksWidget('hide', 'launcher');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tFreshworksWidget('show', 'launcher');\n\t\t}\n\t}\n};\n\n$(document).on('click', '.help-search-launcher', function (event) {\n\tevent.preventDefault();\n\tFreshworksWidget('open');\n});\n\n$(document).on('click', '.clear-edit-delivered-order', function (e) {\n\n\t$.ajax({\n\n\t\turl: '/processor',\n\t\ttype: 'POST',\n\t\ttimeout: 20000,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\tprocessor: 'cart_clear_category',\n\t\t\top: 'get_clear_form',\n\t\t\toutput: 'json'\n\t\t},\n\t\tsuccess: function (json) {\n\t\t\tmodal_message({\n\t\t\t\ttitle: 'Clear Cart',\n\t\t\t\tmessage: 'Are you sure you want to stop editing this Delivered order?',\n\t\t\t\theight: 300,\n\t\t\t\twidth: 300,\n\t\t\t\tresizable: false,\n\t\t\t\tconfirm: function () {\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: '/processor',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\ttimeout: 20000,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tprocessor: 'cart_clear_category',\n\t\t\t\t\t\t\top: 'do_clear',\n\t\t\t\t\t\t\tclear_items: 'all',\n\t\t\t\t\t\t\tclear_edit_order: 'all',\n\t\t\t\t\t\t\toutput: 'json'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function (json) {\n\n\t\t\t\t\t\t\t// reload page\n\t\t\t\t\t\t\twindow.location = '/my-meals?tab=nav-past_orders';\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function (objAJAXRequest, strError) {\n\t\t\t\t\t\t\tconsole.log('Unexpected error');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcancel: function () {\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\terror: function (objAJAXRequest, strError) {\n\t\t\tresponse = 'Unexpected error';\n\t\t}\n\t});\n});\n\n// Handle textarea maxlength\n$(document).on('keyup', 'textarea[maxlength]', function (e) {\n\n\t//get the limit from maxlength attribute\n\tvar limit = parseInt($(this).attr('maxlength'));\n\t//get the current text inside the textarea\n\tvar text = $(this).val();\n\t//count the number of characters in the text\n\tvar chars = text.length;\n\n\t//check if there are more characters then allowed\n\tif (chars > limit)\n\t{\n\t\t//and if there are use substr to get the text before the limit\n\t\tvar new_text = text.substr(0, limit);\n\n\t\t//and change the current text with the new text\n\t\t$(this).val(new_text);\n\t}\n});\n\n// handle btn spinner\n$(document).on('click', '.btn-spinner:not(.disabled), .btn-spin:not(.disabled)', function (e) {\n\t$(this).addSpinner();\n});\n\n// handle masks\n$('.telephone:not(.no-tel), [type=\"tel\"]:not(.no-tel)').each(function (index) {\n\tnew Cleave(this, {\n\t\tdelimiters: [\n\t\t\t'-',\n\t\t\t'-',\n\t\t\t'-'\n\t\t],\n\t\tblocks: [\n\t\t\t3,\n\t\t\t3,\n\t\t\t4\n\t\t]\n\t});\n});\n\n// nutritionals menu dropdown\n$(document).on('change', '#menus_dropdown', function (e) {\n\tbounce('/nutritionals?menu=' + this.value);\n});\n\n// platepoints enroll\n$(document).on('click change', '#enroll_in_plate_points', function (e) {\n\tset_req = false;\n\tif ($(this).is(\":checked\"))\n\t{\n\t\tset_req = true;\n\t}\n\t$('#referral_source, #gender, #birthday_month, #birthday_year, #number_of_kids, #desired_homemade_meals_per_week, #number_feeding,  #number_of_adults, #contribute_income, #use_lists, #number_monthly_dine_outs').attr('required', set_req);\n\t$('#prefer_daytime_sessions, #prefer_evening_sessions, #prefer_weekend_sessions').attr({\n\t\t'data-checkbox_group_required': set_req,\n\t\t'required': set_req\n\t});\n});\n\n// handle share event\n$('[data-share-social]').each(function () {\n\n\tvar title = $(this).data('share-title');\n\tvar text = $(this).data('share-text');\n\tvar url = $(this).data('share-url');\n\n\tvar services = $(this).data('share-social').split(\",\");\n\n\tvar dropdown_menu = $('<div></div>').addClass('dropdown-menu');\n\n\t$(services).each(function (key, service) {\n\n\t\tif (service == 'facebook')\n\t\t{\n\t\t\t$(dropdown_menu).append('<a class=\"dropdown-item nav-link facebook-share\" data-share-url=\"' + url + '\" href=\"#\"><i class=\"dd-icon icon-facebook mr-2\"></i> Facebook</a>');\n\t\t}\n\n\t\tif (service == 'twitter')\n\t\t{\n\t\t\t$(dropdown_menu).append('<a class=\"dropdown-item nav-link\" target=\"_blank\" href=\"https://twitter.com/intent/tweet?via=DreamDinners&&hashtags=TheOriginalMealKit&text=' + text + '&url=' + url + '\"><i class=\"dd-icon icon-twitter mr-2\"></i> Twitter</a>');\n\t\t}\n\n\t});\n\n\tif (navigator.share)\n\t{\n\t\tlet moreOpts = $('<a href=\"#\" class=\"dropdown-item nav-link\"><i class=\"dd-icon icon-share2 mr-2\"></i> More Options</a>').on('click', function (e) {\n\n\t\t\te.preventDefault();\n\n\t\t\tnavigator.share({\n\t\t\t\ttitle: title,\n\t\t\t\ttext: text,\n\t\t\t\turl: url\n\t\t\t});\n\n\t\t});\n\n\t\t$(dropdown_menu).append(moreOpts);\n\t}\n\n\t$(this).attr({\n\t\t'data-toggle': 'dropdown',\n\t\t'aria-haspopup': 'true',\n\t\t'aria-expanded': 'false'\n\t})\n\t\t.wrap('<div></div>')\n\t\t.addClass('dropdown')\n\t\t.after(dropdown_menu);\n\n});\n\n/*\n$(document).on('click', '.start-intro-offer', function (e) {\n\n\te.preventDefault();\n\n\t$.cookie('dd_start_intro', true);\n\n\tcreate_and_submit_form({\n\t\taction: '/processor?processor=session_type',\n\t\tinput: ({\n\t\t\ttype: 'starter'\n\t\t})\n\t});\n\n});\n*/\n\n$(document).on('click', '[data-start-delivered-order]', function (e) {\n\n\te.preventDefault();\n\n\tlet start_delivered_zip = this.getAttribute('data-start-delivered-order');\n\n\tcreate_and_submit_form({\n\t\taction: '/box-select',\n\t\tinput: ({\n\t\t\tdelivered_zip: start_delivered_zip\n\t\t})\n\t});\n\n});\n\n$(document).on('click', '.btn-click-add-cart', function (e) {\n\n\t$('.btn-click-add-cart').find('.fa-shopping-cart').remove();\n\n\t$(this).append('<i class=\"fas fa-shopping-cart float-left text-green-dark-extra pt-1\"></i>');\n\n});\n\n$(document).on('click', '[data-click_id]', function (e) {\n\n\tlet click_id = $(this).data('click_id');\n\n\t$('#' + click_id).trigger('click');\n\n\tif (typeof $('#' + click_id).attr('href') !== 'undefined')\n\t{\n\t\twindow.location.href = $('#' + click_id).attr('href');\n\t}\n\n});\n\n// handle platepoints enroll\nif (getQueryVariable('pp_enroll'))\n{\n\t$('#enroll_in_plate_points').attr('checked', true).trigger('change');\n}\n\n// handle tab selection\nif (getQueryVariable('tab'))\n{\n\tvar tabid = getQueryVariable('tab');\n\n\t$('#' + tabid + '-tab').tab('show');\n}\n\n// footer nav\nif ($('.footer-nav').length)\n{\n\t$('.footer-nav').scrollToFixed({\n\t\tbottom: 0,\n\t\tlimit: $('.footer-nav').offset().top\n\t});\n}\n\n// sidenav\n$('#main-sidenav').on('hide.bs.collapse', function () {\n\t$('body').removeClass('modal-open');\n\t$('.sidenav-modal').removeClass('show');\n\n\tsetTimeout(() => {\n\t\t$('.sidenav-modal').remove();\n\t}, 500);\n\n});\n\n$('#main-sidenav').on('show.bs.collapse', function () {\n\t$('body').addClass('modal-open').append($('<div class=\"sidenav-modal modal-backdrop fade\"></div>'));\n\t$('.sidenav-modal').tab('show');\n});\n\n$(document).on('click', '.sidenav-modal', function (e) {\n\t$('#main-sidenav').collapse('toggle');\n});\n\n$(document).on('keyup change', '.dd-strip-tags', function (e) {\n\n\tvar allowed;\n\n\tif ($(this).data('allowed-tags'))\n\t{\n\t\tallowed = $(this).data('allowed-tags');\n\t}\n\n\tif ($(this).val() != strip_tags($(this).val(), allowed))\n\t{\n\t\t$(this).val(strip_tags($(this).val(), allowed));\n\t}\n\n});\n\n// On error, show dd_console_log\n$(document).ajaxError(function (event, jqxhr, settings, exception) {\n\tAJAX_IN_PROCESS = false;\n\tdd_console_log('Ajax Error: ' + jqxhr.statusText);\n\t//modal_message({ title: 'Ajax Error', message: request.statusText });\n});\n\n// userpreferences\nif (typeof USER_PREFERENCES === 'string')\n{\n\tUSER_PREFERENCES = $.parseJSON(USER_PREFERENCES);\n}\n\n// handle checkboxes\n$(document).on('click', '[data-user_pref][type=checkbox]', function (e) {\n\n\tvar pref_elem = this;\n\tvar user_id = 0;\n\tvar value = $(this).is(':checked');\n\n\tif ($(this).data('user_id'))\n\t{\n\t\tuser_id = $(this).data('user_id');\n\t}\n\n\tif (!$(this).data('user_pref_orig'))\n\t{\n\t\t$(this).data('user_pref_orig', $(this).is(':checked'));\n\t}\n\n\tif (value && $(this).data('user_pref_value_check'))\n\t{\n\t\tvalue = $(this).data('user_pref_value_check');\n\t}\n\telse if (!value && $(this).data('user_pref_value_uncheck'))\n\t{\n\t\tvalue = $(this).data('user_pref_value_uncheck');\n\t}\n\n\tif (typeof preferenceChangeListener === \"function\")\n\t{\n\t\tpreferenceChangeListener($(this).data('user_pref'), value, user_id, function (json) {\n\n\t\t\tif (!json.processor_success)\n\t\t\t{\n\t\t\t\tmodal_message({message: json.processor_message});\n\n\t\t\t\t$(this).prop('checked', $(pref_elem).data('user_pref_orig'));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$(this).data('user_pref_orig', $(pref_elem).is(':checked'));\n\t\t\t}\n\n\t\t});\n\t}\n\telse\n\t{\n\t\tset_user_pref($(this).data('user_pref'), value, user_id, function (json) {\n\n\t\t\tif (!json.processor_success)\n\t\t\t{\n\t\t\t\tmodal_message({message: json.processor_message});\n\n\t\t\t\t$(this).prop('checked', $(pref_elem).data('user_pref_orig'));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$(this).data('user_pref_orig', $(pref_elem).is(':checked'));\n\t\t\t}\n\n\t\t});\n\t}\n\n});\n\n// handle dropdown select\n$(document).on('change', '[data-user_pref]select', function (e) {\n\n\tvar pref_elem = this;\n\tvar user_id = 0;\n\n\tif ($(this).data('user_id'))\n\t{\n\t\tuser_id = $(this).data('user_id');\n\t}\n\n\tif (!$(this).data('user_pref_orig'))\n\t{\n\t\t$(this).data('user_pref_orig', $(this).val());\n\t}\n\n\tset_user_pref($(this).data('user_pref'), $(this).val(), user_id, function (json) {\n\n\t\tif (!json.processor_success)\n\t\t{\n\t\t\tmodal_message({message: json.processor_message});\n\n\t\t\t$(pref_elem).val($(pref_elem).data('user_pref_orig'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$(pref_elem).data('user_pref_orig', $(pref_elem).val());\n\t\t}\n\n\t});\n\n});\n\n// handle input\n$(document).on('focus', '[data-user_pref]input[type=text]', function (e) {\n\n\tif ($(this).attr('type') == 'checkbox')\n\t{\n\t\treturn;\n\t}\n\n\tvar pref_elem = this;\n\tvar user_id = 0;\n\n\tif ($(this).data('user_id'))\n\t{\n\t\tuser_id = $(this).data('user_id');\n\t}\n\n\t$(this).on('keyup', function (e) {\n\n\t\tif ($(this).val() != strip_tags($(this).val()))\n\t\t{\n\t\t\t$(this).val(strip_tags($(this).val()));\n\t\t}\n\n\t});\n\n\tif (!$(this).data('user_pref_orig'))\n\t{\n\t\t$(this).data('user_pref_orig', $(this).val());\n\t}\n\n\tif (!$('#' + $(this).data('user_pref') + '_buttons').length)\n\t{\n\t\tvar buttons = $('<div />').attr('id', $(this).data('user_pref') + '_buttons').addClass('text-left collapse');\n\n\t\t$(this).after(buttons);\n\n\t\tvar save_button = $('<span />').addClass('btn btn-sm btn-primary mr-2 mt-2').text('Save').on('click', function (e) {\n\n\t\t\tif (typeof preferenceChangeListener === \"function\")\n\t\t\t{\n\t\t\t\tpreferenceChangeListener($(pref_elem).data('user_pref'), $(pref_elem).val(), user_id, function (json) {\n\n\t\t\t\t\tif (!json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tmodal_message({message: json.processor_message});\n\n\t\t\t\t\t\t$(pref_elem).val($(this).data('user_pref_orig'));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(pref_elem).data('user_pref_orig', $(pref_elem).val());\n\t\t\t\t\t}\n\n\t\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').slideUp(function (e) {\n\n\t\t\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').remove();\n\n\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tset_user_pref($(pref_elem).data('user_pref'), $(pref_elem).val(), user_id, function (json) {\n\n\t\t\t\t\tif (!json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tmodal_message({message: json.processor_message});\n\n\t\t\t\t\t\t$(pref_elem).val($(this).data('user_pref_orig'));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(pref_elem).data('user_pref_orig', $(pref_elem).val());\n\t\t\t\t\t}\n\n\t\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').slideUp(function (e) {\n\n\t\t\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').remove();\n\n\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t\tvar cancel_button = $('<span />').addClass('btn btn-sm btn-primary mt-2').text('Cancel').on('click', function (e) {\n\n\t\t\t$(pref_elem).val($(pref_elem).data('user_pref_orig'));\n\n\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').slideUp(function (e) {\n\n\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').remove();\n\n\t\t\t});\n\n\t\t});\n\n\t\tvar spacer = $('<span />').addClass(' mt-2');\n\n\t\t$(buttons).prepend(cancel_button).prepend(save_button).prepend(spacer).slideDown();\n\n\t}\n\n});\n\n// handle textarea\n$(document).on('focus', '[data-user_pref]textarea', function (e) {\n\n\tvar pref_elem = this;\n\tvar user_id = 0;\n\n\tif ($(this).data('user_id'))\n\t{\n\t\tuser_id = $(this).data('user_id');\n\t}\n\n\t$(this).on('keyup', function (e) {\n\n\t\tif ($(this).val() != strip_tags($(this).val()))\n\t\t{\n\t\t\t$(this).val(strip_tags($(this).val()));\n\t\t}\n\n\t});\n\n\tif (!$(this).data('user_pref_orig'))\n\t{\n\t\t$(this).data('user_pref_orig', $(this).val());\n\t}\n\n\tif (!$('#' + $(this).data('user_pref') + '_buttons').length)\n\t{\n\t\tvar buttons = $('<div />').attr('id', $(this).data('user_pref') + '_buttons').addClass('text-right collapse');\n\n\t\t$(this).after(buttons);\n\n\t\tvar save_button = $('<span />').addClass('btn btn-sm btn-primary mr-2 mt-2').text('Save').on('click', function (e) {\n\n\t\t\tif (typeof preferenceChangeListener === \"function\")\n\t\t\t{\n\t\t\t\tpreferenceChangeListener($(pref_elem).data('user_pref'), $(pref_elem).val(), user_id, function (json) {\n\t\t\t\t\tif (!json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tmodal_message({message: json.processor_message});\n\n\t\t\t\t\t\t$(pref_elem).val($(this).data('user_pref_orig'));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(pref_elem).data('user_pref_orig', $(pref_elem).val());\n\n\t\t\t\t\t}\n\n\t\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').slideUp(function (e) {\n\n\t\t\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').remove();\n\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tset_user_pref($(pref_elem).data('user_pref'), $(pref_elem).val(), user_id, function (json) {\n\t\t\t\t\tif (!json.processor_success)\n\t\t\t\t\t{\n\t\t\t\t\t\tmodal_message({message: json.processor_message});\n\n\t\t\t\t\t\t$(pref_elem).val($(this).data('user_pref_orig'));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$(pref_elem).data('user_pref_orig', $(pref_elem).val());\n\n\t\t\t\t\t}\n\n\t\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').slideUp(function (e) {\n\n\t\t\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').remove();\n\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t\tvar cancel_button = $('<span />').addClass('btn btn-sm btn-primary mt-2').text('Cancel').on('click', function (e) {\n\n\t\t\t$(pref_elem).val($(pref_elem).data('user_pref_orig'));\n\n\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').slideUp(function (e) {\n\n\t\t\t\t$('#' + $(pref_elem).data('user_pref') + '_buttons').remove();\n\n\t\t\t});\n\n\t\t});\n\n\t\t$(buttons).prepend(cancel_button).prepend(save_button).slideDown();\n\n\t}\n\n});\n\n// handle thaw reminder\n$(document).on('click', '[data-user_pref=\"text_message_thaw_primary\"][type=checkbox]', function (e) {\n\n\t// var user_id = 0;\n\t// var value = $(this).is(':checked');\n\t//\n\t// if ($(this).data('user_id'))\n\t// {\n\t// \tuser_id = $(this).data('user_id');\n\t// }\n\t//\n\t// $.ajax({\n\t// \turl: '/processor',\n\t// \ttype: 'POST',\n\t// \ttimeout: 20000,\n\t// \tdataType: 'json',\n\t// \tdata: {\n\t// \t\tprocessor: 'account',\n\t// \t\top: 'optin',\n\t// \t\ttype: 'thaw',\n\t// \t\tphone: 'primary',\n\t// \t\tuser_id: user_id,\n\t// \t\tvalue: value.toString()\n\t// \t},\n\t// \tsuccess: function (json, status) {\n\t//\n\t// \t},\n\t// \terror: function (objAJAXRequest, strError) {\n\t// \t\tresponse = 'Unexpected error';\n\t// \t}\n\t// });\n\n});\n\n$(function () {\n\t// clipboard\n\tif (typeof ClipboardJS !== 'undefined')\n\t{\n\t\tlet clipboard = new ClipboardJS('.btn-clip');\n\t}\n});"],"mappings":"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"}